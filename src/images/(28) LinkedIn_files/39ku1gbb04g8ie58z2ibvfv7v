/*! For license information please see chunk.692.d3c7a9e73835544ab4cc.js.LICENSE.txt */
(globalThis.webpackChunk_ember_auto_import_=globalThis.webpackChunk_ember_auto_import_||[]).push([[692],{4896:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},4308:e=>{function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},1495:(e,n,t)=>{"use strict"
t.r(n),t.d(n,{CI:()=>i,DEBUG:()=>r})
const r=!1,i=!1},9186:(e,n,t)=>{"use strict"
t.r(n),t.d(n,{Abi:()=>ie,AbiV2:()=>ae})
var r={}
function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(e){return"function"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.r(r),t.d(r,{ABI_FUNNEL_TRACKING_EVENTS:()=>T,EMAIL_DOMAIN_RESOLVE:()=>m,EMAIL_VALIDATION_ERRORS:()=>v,EVENT_NAME:()=>u,IMPORT_CONTACTS:()=>y,IMPORT_ERRORS:()=>_,INPUT_EMAIL:()=>f,NETWORK_ERROR:()=>c,OAUTH:()=>g,POLL_IMPORT_STATUS:()=>h,STATES:()=>l,STATE_MACHINE_ERRORS:()=>b,STATE_TRANSITION_EVENT_NAME:()=>p,TOO_MANY_REQUESTS:()=>d}),i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number")
return this._maxListeners=e,this},i.prototype.emit=function(e){let n,t,r,i,c,d
if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(n=arguments[1],n instanceof Error)throw n
throw TypeError('Uncaught, unspecified "error" event.')}if(t=this._events[e],s(t))return!1
if(a(t))switch(arguments.length){case 1:t.call(this)
break
case 2:t.call(this,arguments[1])
break
case 3:t.call(this,arguments[1],arguments[2])
break
default:for(r=arguments.length,i=new Array(r-1),c=1;c<r;c++)i[c-1]=arguments[c]
t.apply(this,i)}else if(o(t)){for(r=arguments.length,i=new Array(r-1),c=1;c<r;c++)i[c-1]=arguments[c]
for(d=t.slice(),r=d.length,c=0;c<r;c++)d[c].apply(this,i)}return!0},i.prototype.addListener=function(e,n){var t
if(!a(n))throw TypeError("listener must be a function")
return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,a(n.listener)?n.listener:n),this._events[e]?o(this._events[e])?this._events[e].push(n):this._events[e]=[this._events[e],n]:this._events[e]=n,o(this._events[e])&&!this._events[e].warned&&(t=s(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&t>0&&this._events[e].length>t&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,n){if(!a(n))throw TypeError("listener must be a function")
let t=!1
function r(){this.removeListener(e,r),t||(t=!0,n.apply(this,arguments))}return r.listener=n,this.on(e,r),this},i.prototype.removeListener=function(e,n){let t,r,i,s
if(!a(n))throw TypeError("listener must be a function")
if(!this._events||!this._events[e])return this
if(t=this._events[e],i=t.length,r=-1,t===n||a(t.listener)&&t.listener===n)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,n)
else if(o(t)){for(s=i;s-- >0;)if(t[s]===n||t[s].listener&&t[s].listener===n){r=s
break}if(r<0)return this
1===t.length?(t.length=0,delete this._events[e]):t.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,n)}return this},i.prototype.removeAllListeners=function(e){let n,t
if(!this._events)return this
if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this
if(0===arguments.length){for(n in this._events)"removeListener"!==n&&this.removeAllListeners(n)
return this.removeAllListeners("removeListener"),this._events={},this}if(t=this._events[e],a(t))this.removeListener(e,t)
else for(;t.length;)this.removeListener(e,t[t.length-1])
return delete this._events[e],this},i.prototype.listeners=function(e){let n
return n=this._events&&this._events[e]?a(this._events[e])?[this._events[e]]:this._events[e].slice():[],n},i.listenerCount=function(e,n){let t
return t=e._events&&e._events[n]?a(e._events[n])?1:e._events[n].length:0,t}
const c="network-error",d="Too Many Requests",u="custom-state-event",p="state-transition-event",l={INPUT_EMAIL:"input-email",EMAIL_DOMAIN_RESOLVE:"email-domain-resolve",IMPORT_CONTACTS:"import-contacts",POLL_IMPORT_STATUS:"poll-import-status",OAUTH:"oauth"},f={EVENTS:{EMAIL_INPUT_CHANGE:"emailInputChange",FETCH_FORM_SUBMIT:"fetchFormSubmit"},EVENT_TYPE:{INVALID_EMAIL:"invalid-email"}},m={EVENTS:{EMAIL_INPUT_CHANGE:"emailInputChange"},EVENT_TYPE:{PROVIDER_CHANGED:"provider-changed",RESOLUTION_BEGUN:"resolution-begun",RESOLUTION_COMPLETE:"resolution-complete",PASSWORD_REQUIRED:"password-required",UNSUPPORTED_DOMAIN:"unsupported-domain",NETWORK_ERROR:"network-error"}},y={EVENTS:{STATE_RESET:"stateReset"},EVENT_TYPE:{OPEN_POPUP:"open-popup"}},h={EVENTS:{GET_IMPORT_STATUS:"getImportStatus",STATE_RESET:"stateReset"},EVENT_TYPE:{IMPORT_STARTED:"import-started",IMPORT_SUCCESS:"import-success",IMPORT_IN_PROGRESS:"import-in-progress",IMPORT_ERROR_OTHER:"import-error-other",IMPORT_ERROR_BAD_LOGIN:"import-error-bad-login",ZERO_CONTACTS_TO_IMPORT:"zero-contacts-to-import",INVALID_CREDENTIALS:"invalid-credentials",EXCEEDED_MAX_RETRIES:"exceeded-max-retries"}},g={EVENTS:{STATE_RESET:"stateReset"},EVENT_TYPE:{CALLBACK:"oauth-callback",OAUTH_SUCCESS:"oauth-success",UPDATE_POPUP:"update-popup",LOGIN_LIMIT_EXCEEDED:"login-limit-exceeded"}},v={INVALID_EMAIL:"invalid-email",UNSUPPORTED_DOMAIN:"unsupported-domain",OAUTH_WITHOUT_PROVIDER:"oauth-without-provider",INVALID_DOMAIN_RESOLUTION_CALLBACK:"invalid-domain-resolution-callback",NETWORK:"network",OTHER:"other"},_={EMPTY_CONFIG:"empty-config",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"invalid-password",INVALID_ABOOK_TRANSACTION_ID:"invalid-abook-transaction-id",INVALID_TICKET_ID_CALLBACK:"invalid-ticket-id-callback",INVALID_POLL_STATUS_CALLBACK:"invalid-poll-status-callback",INVALID_TRACKING_CALLBACK:"invalid-tracking-callback",INVALID_CREDENTIALS:"invalid-credentials",INVALID_JSECURE:"invalid-jsecure",ZERO_CONTACTS_TO_IMPORT:"zero-contacts-to-import",EXCEEDED_MAX_REQUEST_RETRIES:"exceeded-max-request-retries",EXCEEDED_MAX_STATUS_CHECK_RETRIES:"exceeded-max-status-check-retries",IMPORT_ERROR_OTHER:"import-error-other",NETWORK:"network",OTHER:"other",INVALID_IMPORT_TICKET_ID:"invalid-import-ticket-id",OAUTH_VALIDATION_TIMED_OUT:"oauth-validation-timed-out",OAUTH_POPUP_NOT_OPEN:"oauth-popup-not-open"},T={SUBMIT:"AbookImportSubmitEvent",TASK_STATUS:"AbookImportTaskStatusEvent",OAUTH_REDIRECT:"AbookImportOAuthRedirectEvent",OAUTH_CALLBACK:"AbookImportOAuthCallbackEvent"},b={ALREADY_STARTED:"State machine has already begun"}
class E extends i{constructor(e,n,t){if(super(),this.promise=t||Promise,!Array.isArray(e))throw new Error("The state machine constructor only accepts an array of states as the first argument")
if(!n)throw new Error("Define a start state for the state machine")
if(this.states={},e.forEach((e=>{this.addState(e)})),this.startState=this.states[n],!this.startState)throw new Error("Start state is not defined")
this.currentState=this.startState}start(){if(this.currentState.getName()!==this.startState.getName())throw new Error(b.ALREADY_STARTED)
this.step()}addState(e){this.states[e.getName()]=e,e.on(u,(n=>{const t=n.type||u
this.emit(t,{currentState:e.getName(),eventData:n})})),e.on(p,(e=>{this._transitionTo(e)}))}_transitionTo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
if(!(e.state in this.states))throw new Error(`Cannot transition from ${this.currentState} to ${e.state}`)
this.currentState=this.states[e.state],delete e.state,this.step(e.eventName,e)}step(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"entry",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
const t=this.currentState.go(e,n.data)
if(t){if("function"==typeof t.then)return new this.promise((e=>{e(t)})).then((e=>this._transitionTo(e)))
this._transitionTo(t)}}getCurrentState(){return this.currentState.getName()}}class k extends i{constructor(e,n){super(),this.name=e,this.validNextStates=n,this.defaultStateEvents=["entry"],this.events=[]}onEntry(){}getName(){return this.name}getNextStates(){return this.validNextStates}getEvents(){return this.defaultStateEvents+this.events}go(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"entry",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
if(this.getEvents().indexOf(e)>-1)return this[`on${e.charAt(0).toUpperCase()}${e.slice(1)}`](n)
throw new Error(`I can not serve that event. Expecting [${this.getEvents()}]\n                but got ${e} from ${this.name}`)}}class A extends k{constructor(){super(l.INPUT_EMAIL,[l.EMAIL_DOMAIN_RESOLVE,l.IMPORT_CONTACTS]),this.events=[f.EVENTS.EMAIL_INPUT_CHANGE,f.EVENTS.FETCH_FORM_SUBMIT],this.resolvedEmail=null,this.isNonOAuth=!1,this.provider=null}onEntry(e){Object.prototype.hasOwnProperty.call(e,"emailAddress")&&(this.resolvedEmail=e.emailAddress),Object.prototype.hasOwnProperty.call(e,"isNonOAuth")&&(this.isNonOAuth=e.isNonOAuth),Object.prototype.hasOwnProperty.call(e,"provider")&&(this.provider=e.provider)}onEmailInputChange(e){let n="object"==typeof e?e.emailAddress:e
if("object"==typeof e&&!e.isEmailDomainResolve)return this.emit(u,{type:m.EVENT_TYPE.RESOLUTION_COMPLETE}),this.isNonOAuth=Object.prototype.hasOwnProperty.call(e,"isNonOauth")?e.isNonOAuth:this.isNonOAuth,{state:l.INPUT_EMAIL,data:{emailAddress:n,isEmailDomainResolve:e.isEmailDomainResolve,provider:e.provider,isNonOAuth:e.isNonOAuth}}
const t=/^([a-zA-Z0-9_\-=.'+]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9-]+\.)+))([a-zA-Z]{2,10}|[0-9]{1,3})(\]?)$/
if(n.length){if(n=n.trim(),t.test(n))return{state:l.EMAIL_DOMAIN_RESOLVE,data:{emailAddress:n,isEmailDomainResolve:e.isEmailDomainResolve,provider:e.provider,isNonOAuth:e.isNonOAuth}}
this.emit(u,{type:f.EVENT_TYPE.INVALID_EMAIL})}}onFetchFormSubmit(e){const n={},{abookImportTransactionId:t,password:r}=e
if(this.isNonOAuth&&r.length>0?n.password=r:this.isNonOAuth&&this.emit(u,{type:m.EVENT_TYPE.PASSWORD_REQUIRED}),t&&(n.abookImportTransactionId=t),this.resolvedEmail)return n.emailAddress=this.resolvedEmail,n.isNonOAuth=this.isNonOAuth,n.provider=this.provider,{state:l.IMPORT_CONTACTS,data:n}
this.emit(u,{type:f.EVENT_TYPE.INVALID_EMAIL})}}const S=Object.freeze({"com.linkedin.voyager.dash.deco.contacts.EmailProvider":"com.linkedin.voyager.dash.deco.contacts.EmailProvider-1","com.linkedin.voyager.dash.deco.contacts.EmailImportTaskStatus":"com.linkedin.voyager.dash.deco.contacts.EmailImportTaskStatus-1"}),C="X-RestLi-Method",I="X-RestLi-Protocol-Version",R="Csrf-Token",O="Content-Type",M="x-restli-id",w="application/json",N="2.0.0",P={GET:"GET",CREATE:"POST",ACTION:"POST"}
function D(){return"undefined"!=typeof window&&window&&"node"!==window.appEnvironment}function U(){const e=D()&&document.cookie.match(/JSESSIONID=?"?([^";]+)?"?/)
return e&&e[1]||""}function x(e,n,t,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}
const a=P[n],o=JSON.stringify(t)||""
return new r(((t,r)=>{const s=new XMLHttpRequest
s.open(a,e),s.setRequestHeader(O,w),s.setRequestHeader(R,U()),s.setRequestHeader(I,N),n&&a!==n&&s.setRequestHeader(C,n),Object.keys(i).forEach((e=>{s.setRequestHeader(e,i[e])})),s.onload=function(){let e=this
if(!e){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a]
e=i[0].target}4===e.readyState&&(200===e.status?t(JSON.parse(e.response||e.responseText)):201===e.status?t(e.getResponseHeader(M)):r(new Error(e.statusText)))},s.onerror=function(e){r(new Error(e))},s.send(o)}))}function L(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0
const r=S[t]
if(!e)throw new Error("uri must be passed.")
if(!r)throw new Error("Invalid recipeId! Recipe not defined in dash-recipes.")
const i=Object.keys(n).map((e=>`${e}=${n[e]}`)).join("&")
return`${e}?decorationId=${r}&${i}`}class F extends k{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
super(l.EMAIL_DOMAIN_RESOLVE,[l.INPUT_EMAIL]),this.promise=e||Promise,this.events=[m.EVENTS.EMAIL_INPUT_CHANGE]
const{dashEnabled:t,pageKey:r}=n
if(t&&!r)throw new Error("PageKey is required for dash email domain resolver")
this.dashEnabled=t,this.pageKey=r}_buildDomainUrl(e){return this.dashEnabled?L("/voyager/api/voyagerContactsDashEmailProvider",{q:"findEmailProviders",emailAddress:e},"com.linkedin.voyager.dash.deco.contacts.EmailProvider"):`/voyager/api/voyagerGrowthEmailDomainResolutions/${e}`}onEntry(e){const n=this._buildDomainUrl(e.emailAddress)
this.emit(u,{type:m.EVENT_TYPE.RESOLUTION_BEGUN})
const t={}
return this.dashEnabled&&(t["X-Li-Page-Instance"]=this.pageKey),x(n,"GET",{},this.promise,t).then((n=>{let t=n
return this.dashEnabled&&(t=n&&n.elements?n.elements[0]:{}),this._handleResponse(e,t)})).catch((()=>{this.emit(u,{type:c})}))}_handleResponse(e,n){return this.emit(u,{type:m.EVENT_TYPE.RESOLUTION_COMPLETE}),"UNSUPPORTED"===n.emailProviderType?(this.emit(u,{type:m.EVENT_TYPE.UNSUPPORTED_DOMAIN}),{state:l.INPUT_EMAIL,data:{emailAddress:e.emailAddress,provider:n.emailProviderType,isNonOAuth:n.passwordInputRequired}}):n.passwordInputRequired?(this.emit(u,{type:m.EVENT_TYPE.PASSWORD_REQUIRED}),{state:l.INPUT_EMAIL,data:{emailAddress:e.emailAddress,provider:n.emailProviderType,isNonOAuth:n.passwordInputRequired}}):{state:l.INPUT_EMAIL,data:{emailAddress:e.emailAddress,provider:n.emailProviderType,isNonOAuth:n.passwordInputRequired}}}onEmailInputChange(e){const n=f.EVENTS.EMAIL_INPUT_CHANGE
return this.emit(u,{type:m.EVENT_TYPE.PROVIDER_CHANGED}),{state:l.INPUT_EMAIL,eventName:n,data:{emailAddress:e}}}}class B extends k{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
super(l.IMPORT_CONTACTS,[l.POLL_IMPORT_STATUS]),this.promise=e||Promise,this.events=[g.EVENTS.STATE_RESET]
const{dashEnabled:t,pageKey:r}=n
if(t&&!r)throw new Error("PageKey is required for import contacts")
this.dashEnabled=t,this.pageKey=r,this.importUrl=this.dashEnabled?"/voyager/api/voyagerContactsDashEmailImportTask":"/voyager/api/voyagerGrowthEmailImportTask"}get customHeaders(){return this.dashEnabled?{"X-Li-Page-Instance":this.pageKey}:{}}onStateReset(e){return this.importUrl=this.importUrl,{state:l.INPUT_EMAIL,data:{emailAddress:e.emailAddress}}}onEntry(e){e.isNonOAuth||this.emit(u,{type:y.EVENT_TYPE.OPEN_POPUP})
const n=this.dashEnabled?{email:e.emailAddress,password:e.password,transactionId:e.abookImportTransactionId}:{emailAddress:e.emailAddress,password:e.password,abookImportTransactionId:e.abookImportTransactionId}
return x(this.importUrl,"CREATE",n,this.promise,this.customHeaders).then((n=>({state:l.POLL_IMPORT_STATUS,data:{ticketId:n,emailAddress:e.emailAddress,provider:e.provider,isNonOAuth:e.isNonOAuth}}))).catch((n=>(n.message===d?this.emit(u,{type:h.EVENT_TYPE.EXCEEDED_MAX_RETRIES}):this.emit(u,{type:c}),{state:l.INPUT_EMAIL,data:{emailAddress:e.emailAddress}})))}}class q extends k{constructor(){super(l.OAUTH,[l.IMPORT_CONTACTS,l.INPUT_EMAIL]),this.oAuthUrl="/genie/startauth?sec=true&cb=onAuthenticationComplete&as=",this.events=[g.EVENTS.STATE_RESET]}_adjustDomain(){let e=document.domain,n=e
const t=/(lmodules)|(linkedin)/i,r=/\./g
if(r.test(e))for(let i=0,a=e.match(r).length;i<a&&(e=e.substring(e.indexOf(".")+1),t.test(e));i+=1)n=e
document.domain!==n&&(document.domain=n)}_updatePopup(e){this._adjustDomain(),this.emit(u,{type:g.EVENT_TYPE.UPDATE_POPUP,provider:this.provider,url:`https://www.${document.domain}${e}`})}onEntry(e){this.isNonOAuth=e.isNonOAuth,this.provider=e.provider,window.onAuthenticationComplete=this.onAuthenticationComplete.bind(this),e.isNonOAuth||(e.authSpecGaapScriptV2Urn?this._updatePopup(`${this.oAuthUrl}${e.authSpecGaapScriptV2Urn}`):this._updatePopup(`${this.oAuthUrl}${e.authSpec}`))}onStateReset(e){return{state:l.INPUT_EMAIL,data:{emailAddress:e.emailAddress}}}onAuthenticationComplete(e,n){if(this.emit(u,{type:g.EVENT_TYPE.CALLBACK,error:n}),n)return this.emit(u,{type:c}),{state:l.INPUT_EMAIL}
this.emit(u,{type:g.EVENT_TYPE.OAUTH_SUCCESS}),this.emit(p,{state:l.IMPORT_CONTACTS,data:{emailAddress:e,isNonOAuth:this.isNonOAuth,provider:this.provider}})}}class j extends k{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
super(l.POLL_IMPORT_STATUS,[l.INPUT_EMAIL,l.OAUTH]),this.promise=e.promise||Promise
const{dashEnabled:n,pageKey:t}=e
if(n&&!t)throw new Error("PageKey is required for poll import status")
this.dashEnabled=n,this.pageKey=t,this.events=[h.EVENTS.GET_IMPORT_STATUS,h.EVENTS.STATE_RESET],this.currentStatus=!1,this.pollingCount=0,this.noOfRetries=e.noOfRetries||30,this.pollingInterval=e.pollingInterval||0===e.pollingInterval?e.pollingInterval:500}onEntry(e){return new this.promise((n=>{const t=this
this._pollStatus(e).then((function r(i){i?n(i):setTimeout((()=>{t._pollStatus(e).then(r)}),t.pollingInterval)}))}))}_buildPollImportStatusUrl(e){return this.dashEnabled?L(`/voyager/api/voyagerContactsDashEmailImportTaskStatus/${e}`,{},"com.linkedin.voyager.dash.deco.contacts.EmailImportTaskStatus"):"/voyager/api/voyagerGrowthEmailImportTask?action=getImportStatus"}get customHeaders(){return this.dashEnabled?{"X-Li-Page-Instance":this.pageKey}:{}}_pollStatus(e){if(this.pollingCount<this.noOfRetries){let n="GET"
const t={}
return this.dashEnabled||(t.importTaskHandle={handle:e.ticketId},n="ACTION"),this.pollingCount=this.pollingCount+1,x(this._buildPollImportStatusUrl(e.ticketId),n,t,this.promise,this.customHeaders).then((n=>{const t=this.dashEnabled?n.state:n.value.status,{authSpec:r,authSpecGaapScriptV2Urn:i}=this.dashEnabled?n:n.value
switch(t){case"IN_PROGRESS":return new this.promise((e=>{1===this.pollingCount?this.emit(u,{type:h.EVENT_TYPE.IMPORT_STARTED}):this.emit(u,{type:h.EVENT_TYPE.IMPORT_IN_PROGRESS}),e()}))
case"SUCCESS":return new this.promise((n=>{this.emit(u,{type:h.EVENT_TYPE.IMPORT_SUCCESS,ticketId:e.ticketId}),n({state:l.INPUT_EMAIL,data:{emailAddress:e.emailAddress,ticketId:e.ticketId,success:!0}})}))
case"ERROR_BAD_LOGIN":return new this.promise((n=>{this.emit(u,{type:h.EVENT_TYPE.IMPORT_ERROR_BAD_LOGIN}),e.isNonOAuth?(this.emit(u,{type:h.EVENT_TYPE.INVALID_CREDENTIALS}),n({state:l.INPUT_EMAIL,data:{emailAddress:e.emailAddress}})):n(r?{state:l.OAUTH,data:{emailAddress:e.emailAddress,isNonOAuth:e.isNonOAuth,provider:e.provider,authSpec:r}}:{state:l.OAUTH,data:{emailAddress:e.emailAddress,isNonOAuth:e.isNonOAuth,provider:e.provider,authSpecGaapScriptV2Urn:i}})}))
case"ERROR_ZERO_CONTACTS":return new this.promise((n=>{this.emit(u,{type:h.EVENT_TYPE.ZERO_CONTACTS_TO_IMPORT}),n({state:l.INPUT_EMAIL,data:{emailAddress:e.emailAddress}})}))
case"ERROR_OTHERS":case"ERROR_OTHER":return new this.promise((n=>{this.emit(u,{type:h.EVENT_TYPE.IMPORT_ERROR_OTHER}),n({state:l.INPUT_EMAIL,data:{emailAddress:e.emailAddress}})}))
default:return new this.promise((n=>{this.emit(u,{type:c}),n({state:l.INPUT_EMAIL,data:{emailAddress:e.emailAddress}})}))}})).catch((()=>(this.emit(u,{type:c}),{state:l.INPUT_EMAIL,data:{emailAddress:e.emailAddress}})))}this.emit(u,{type:h.EVENT_TYPE.EXCEEDED_MAX_RETRIES})}onGetImportStatus(){return this.currentStatus}onStateReset(e){return this.currentStatus=this.currentStatus,{state:l.INPUT_EMAIL,data:{emailAddress:e.emailAddress}}}}function V(e){return new Promise(((n,t)=>{if(e.resolveDomainCallback&&"function"==typeof e.resolveDomainCallback||t(v.INVALID_DOMAIN_RESOLUTION_CALLBACK),e.emailAddress&&"string"==typeof e.emailAddress){const r=e.emailAddress.trim();/^([a-zA-Z0-9_\-=.'+]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9-]+\.)+))([a-zA-Z]{2,10}|[0-9]{1,3})(\]?)$/.test(r)?e.resolveDomainCallback.call(this,{emailAddress:r}).then((e=>{const i={isOauth:e.isOauth,emailAddress:r}
e.isOauth&&(e.providerName?"UNSUPPORTED"===e.providerName?t(v.UNSUPPORTED_DOMAIN):i.providerName=e.providerName:t(v.OAUTH_WITHOUT_PROVIDER)),n(i)})).catch((()=>{t(v.OTHER)})):t(v.INVALID_EMAIL)}else t(v.INVALID_EMAIL)}))}function H(e){let n,t
return new Promise(((r,i)=>{e||i(_.EMPTY_CONFIG),e.pollStatusCallback&&"function"==typeof e.pollStatusCallback||i(_.INVALID_POLL_STATUS_CALLBACK),e.fireTrackingEventCallback&&"function"==typeof e.fireTrackingEventCallback||i(_.INVALID_TRACKING_CALLBACK),e.abookImportTransactionId&&"string"==typeof e.abookImportTransactionId||i(_.INVALID_ABOOK_TRANSACTION_ID),e.importTicketId&&"string"==typeof e.importTicketId||i(_.INVALID_IMPORT_TICKET_ID),t=e.retryCount||0
try{e.pollStatusCallback.call(this,{importTicketId:e.importTicketId}).then((a=>{const o=a.status||"ERROR_OTHER"
switch(e.fireTrackingEventCallback&&e.fireTrackingEventCallback(T.TASK_STATUS,{status:o,abookImportTransactionId:e.abookImportTransactionId}),a.status){case"SUCCESS":r({importTicketId:e.importTicketId,abookImportTransactionId:e.abookImportTransactionId})
break
case"IN_PROGRESS":n=setTimeout((()=>{if(clearTimeout(n),t<30)return t+=1,H.call(this,{importTicketId:e.importTicketId,pollStatusCallback:e.pollStatusCallback,fireTrackingEventCallback:e.fireTrackingEventCallback,abookImportTransactionId:e.abookImportTransactionId,isOauthImport:e.isOauthImport||!1,retryCount:t}).then((e=>r(e))).catch((e=>i(e)))
i(_.EXCEEDED_MAX_STATUS_CHECK_RETRIES)}),500)
break
case"ERROR_BAD_LOGIN":e.isOauthImport?r(a):i(_.INVALID_CREDENTIALS)
break
case"ERROR_ZERO_CONTACTS":i(_.ZERO_CONTACTS_TO_IMPORT)
break
default:i(_.IMPORT_ERROR_OTHER)}})).catch((()=>{e.fireTrackingEventCallback(T.TASK_STATUS,{status:"NETWORK_ERROR",abookImportTransactionId:e.abookImportTransactionId}),i(_.IMPORT_ERROR_OTHER)}))}catch(n){e.fireTrackingEventCallback(T.TASK_STATUS,{status:"NETWORK_ERROR",abookImportTransactionId:e.abookImportTransactionId}),i(_.IMPORT_ERROR_OTHER)}}))}function G(e){return new Promise(((n,t)=>{e||t(_.EMPTY_CONFIG),e.emailAddress&&"string"==typeof e.emailAddress||t(_.INVALID_EMAIL),e.password&&"string"==typeof e.password||t(_.INVALID_PASSWORD),e.abookImportTransactionId&&"string"==typeof e.abookImportTransactionId||t(_.INVALID_ABOOK_TRANSACTION_ID),e.getImportTicketIdCallback&&"function"==typeof e.getImportTicketIdCallback||t(_.INVALID_TICKET_ID_CALLBACK),e.pollStatusCallback&&"function"==typeof e.pollStatusCallback||t(_.INVALID_POLL_STATUS_CALLBACK),e.fireTrackingEventCallback&&"function"==typeof e.fireTrackingEventCallback||t(_.INVALID_TRACKING_CALLBACK),e.fireTrackingEventCallback(T.SUBMIT,{abookImportTransactionId:e.abookImportTransactionId}),e.getImportTicketIdCallback.call(this,{emailAddress:e.emailAddress,password:e.password,abookImportTransactionId:e.abookImportTransactionId}).then((r=>{if(r.importTicketId)return H({importTicketId:r.importTicketId,pollStatusCallback:e.pollStatusCallback,fireTrackingEventCallback:e.fireTrackingEventCallback,abookImportTransactionId:e.abookImportTransactionId}).then((e=>n(e))).catch((e=>t(e)))
t(_.INVALID_IMPORT_TICKET_ID)})).catch((e=>{Array.isArray(e.errors)&&e.errors.some((e=>429===e.status))?t(_.EXCEEDED_MAX_REQUEST_RETRIES):t(e||_.OTHER)}))}))}const K={hotmail:{width:905,height:580},aol:{width:520,height:315},"live.com":{width:905,height:580},"msn.com":{width:905,height:580},default:{width:790,height:650},minimum:{width:150,height:100}},$=D()
let W,Q,z,Y,X
function J(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:K.default,t=arguments.length>2?arguments[2]:void 0
if($||"function"!=typeof Q){if(!W)return}else Q({url:e,size:n})
const{oAuthWindow:r}=W,{width:i,height:a}=n
r&&r.resizeTo?(r.location=t.sanitizeUrl(e),r.resizeTo(i,a),Y.fireTrackingEventCallback(T.OAUTH_REDIRECT,{abookImportTransactionId:Y.abookImportTransactionId})):W=null}function Z(){if(!W)return
const{oAuthWindow:e}=W
e&&(e.focus(),setTimeout((()=>{e&&e.close()}),5)),W=null}function ee(e){return new Promise(((n,t)=>{e.getImportTicketIdCallback.call(this,{emailAddress:e.emailAddress,abookImportTransactionId:e.abookImportTransactionId}).then((n=>{if(n.importTicketId)return H({importTicketId:n.importTicketId,pollStatusCallback:e.pollStatusCallback,fireTrackingEventCallback:e.fireTrackingEventCallback,abookImportTransactionId:e.abookImportTransactionId,isOauthImport:e.isOauthImport})
t(_.IMPORT_ERROR_OTHER)})).then((e=>{n(e)})).catch((e=>{Array.isArray(e.errors)&&e.errors.some((e=>429===e.status))?t(_.EXCEEDED_MAX_REQUEST_RETRIES):t(e)}))}))}function ne(){if(!$)return void(W={})
const{width:e,height:n}=K.minimum,t=window.open("","oauth-popup",`width=${e},height=${n},toolbar=0,location=0,status=0,scrollbars=no`)
W={oAuthWindow:t},X=!1,t&&(t.focus(),function(){let e=0
return new Promise((function n(t,r){W&&W.oAuthWindow&&!W.oAuthWindow.closed?e<120?(e+=1,setTimeout(n,1e3,t,r)):(Z(),r()):(W=null,X?t():r())}))}().catch((()=>{"function"==typeof z&&z(_.OAUTH_VALIDATION_TIMED_OUT)})))}function te(e,n){let t="linkedin.com"
$&&(function(){let e=document.domain,n=e
const t=/(lmodules)|(linkedin)/i,r=/\./g
if(r.test(e))for(let i=0,a=e.match(r).length;i<a&&(e=e.substring(e.indexOf(".")+1),t.test(e));i+=1)n=e
document.domain!==n&&(document.domain=n)}(),t=document.domain)
const r=`https://www.${t}/genie/startauth?sec=true&cb=onAuthenticationComplete&as=${e}`
return"YAHOO_JAPAN"===n?`https://fbi.address.yahoo.co.jp/explain?done=${encodeURIComponent(r)}`:r}function re(e){return new Promise(((n,t)=>{e||t(_.EMPTY_CONFIG),e.emailAddress&&e.emailAddress.length||t(_.INVALID_EMAIL),e.abookImportTransactionId&&e.abookImportTransactionId.length||t(_.INVALID_ABOOK_TRANSACTION_ID),e.provider&&e.provider.length||t(_.INVALID_EMAIL),e.getImportTicketIdCallback&&"function"==typeof e.getImportTicketIdCallback||t(_.INVALID_TICKET_ID_CALLBACK),e.pollStatusCallback&&"function"==typeof e.pollStatusCallback||t(_.INVALID_POLL_STATUS_CALLBACK),e.fireTrackingEventCallback&&"function"==typeof e.fireTrackingEventCallback||t(_.INVALID_TRACKING_CALLBACK),e.jSecure&&"object"==typeof e.jSecure||t(_.INVALID_JSECURE),e.isOauthImport=!0,W||ne(),W||t(_.OAUTH_POPUP_NOT_OPEN),Q=n,z=t,e.fireTrackingEventCallback(T.SUBMIT,{abookImportTransactionId:e.abookImportTransactionId}),ee(e).then((r=>{const{importTicketId:i,authSpec:a,authSpecGaapScriptV2Urn:o}=r
if(i)Z(),n(r)
else if(a){const n=te(a,e.provider),t=K[e.provider]
Y=e,J(n,t,e.jSecure)}else if(o){const n=te(o,e.provider),t=K[e.provider]
Y=e,J(n,t,e.jSecure)}else t(_.OTHER)})).catch((e=>{Z(),t(e)}))}))}$&&(window.onAuthenticationComplete=function(e,n){e?(Y.emailAddress=e,ee(Y).then((e=>{const{importTicketId:n}=e
n&&"function"==typeof Q?Q(e):"function"==typeof z&&z(_.IMPORT_ERROR_OTHER)})).catch((()=>{"function"==typeof z&&z(_.IMPORT_ERROR_OTHER)})).then((()=>Z()))):"function"==typeof z&&z({error:n}),Y.fireTrackingEventCallback(T.OAUTH_CALLBACK,{abookImportTransactionId:Y.abookImportTransactionId}),X=!0,Z()})
class ie extends E{constructor(e){super([new A,new F(e),new B(e),new q,new j({promise:e})],l.INPUT_EMAIL,e),this.CONSTANTS=r,this.validateEmailAndResolveDomain=V,this.importContactsFromNonOauthDomain=G,this.importContactsFromOauthDomain=re,this.openOauthPopup=ne,this.closeOauthPopup=Z}}class ae extends E{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
const{promise:n,pageKey:t}=e
if(!t)throw new Error("PageKey is required")
super([new A,new F(n,{dashEnabled:!0,pageKey:t}),new B(n,{dashEnabled:!0,pageKey:t}),new q,new j({promise:n,dashEnabled:!0,pageKey:t})],l.INPUT_EMAIL,n),this.CONSTANTS=r,this.validateEmailAndResolveDomain=V,this.importContactsFromNonOauthDomain=G,this.importContactsFromOauthDomain=re,this.openOauthPopup=ne,this.closeOauthPopup=Z}}},7727:(e,n,t)=>{"use strict"
function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var a
t.r(n),t.d(n,{NON_ESSENTIAL_CATEGORIES:()=>d,USER_MODE:()=>u,getBannerData:()=>k,getCookieConsent:()=>E,parseEncodedConsent:()=>b,updateCookieConsent:()=>A})
var o,s,c,d={ADVERTISING:"ADVERTISING",ANALYTICS_AND_RESEARCH:"ANALYTICS_AND_RESEARCH",FUNCTIONAL:"FUNCTIONAL"},u={GUEST:"GUEST",MEMBER:"MEMBER"},p=(i(a={},u.GUEST,"li_gc"),i(a,u.MEMBER,"li_mc"),a),l="liap",f=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null
for(var o in r(this,e),n=n||{},this.consentAvailable=!1,this.issuedAt=t,this.userMode=i,this.optedInConsentMap={},d)n[o]=n[o]||0,0!==n[o]&&(this.consentAvailable=!0),this.optedInConsentMap[o]=1===n[o]||0===n[o]&&1===a},m=(o=[d.ADVERTISING,d.ANALYTICS_AND_RESEARCH,d.FUNCTIONAL],s=[0,1,2,0],c=new RegExp(["^(\\d+)","(\\d+)","(\\d+)","((?:.|\\s)+)"].join(";")),{parseConsentBody:function(e,n){var t=e.match(c)
if(!t)return{error:"Invalid consent body encoding",consent:new f}
for(var r=parseInt(t[1],10),i={},a=0;a<o.length;a++)i[o[a]]=s[r>>2*a&3]
var d=new Date(1e3*parseInt(t[2],10)),u=parseInt(t[3],10),p=0
return u>=0&&u<=3&&(p=s[u]),{error:null,consent:new f(i,d,n,p)}}}),y=new RegExp(["^(\\d+)","((?:.|\\s)+)"].join(";")),h=function(e,n){var t=n.match(new RegExp("(?:^|; *)".concat(e,"=([^;]*)")))
return t&&t.length>1?t[1]:null},g=function(e,n){var t=h(p[e],n)
return t?b(t,e):h(p[u.GUEST],n)||h(p[u.MEMBER],n)?v(2):v(1)},v=function(e){var n={}
for(var t in d)n[t]=e
return{error:null,consent:new f(n,null,null,e)}},_=function(){var e=document.domain.match(/^(?:|.*\.)([^\.]+\.[^\.]+)$/)
return e?e[1]:"linkedin-ei.com"},T=function(e){var n=e===u.MEMBER?"settings/member-cookies":"mypreferences/g/guest-cookies"
return"https://www.".concat(_(),"/").concat(n)},b=function(e,n){e&&e.length>1&&'"'==e.charAt(0)&&'"'==e.charAt(e.length-1)&&(e=e.substring(1,e.length-1))
var t,r=null
try{r=(t=e,"undefined"==typeof atob&&"undefined"!=typeof Buffer?Buffer.from(t,"base64").toString("binary"):atob(t)).match(y)}catch(e){}if(!r)return{error:"Invalid consent encoding",consent:new f}
var i=parseInt(r[1],10),a=r[2]
return 1===i?m.parseConsentBody(a,n):{error:"Invalid encoded consent version ".concat(i),consent:new f}},E=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.cookie
return e||(e=h(l,n)?h(p[u.MEMBER],n)?u.MEMBER:u.GUEST:h(p[u.GUEST],n)?u.GUEST:u.MEMBER),g(e,n)},k=function(e){var n=E(e),t=n.consent,r=e||t.userMode||u.GUEST
return{showBanner:!n.error&&!t.consentAvailable,userMode:r,managePreferenceUrl:T(r)}},A=function(e,n){var t=e.optedInConsentMap,r=e.updateSettings,i=e.userMode
n=n||function(e,n){},e.optedInConsentMap||n("optedInConsentMap is a required option",null)
var a=new XMLHttpRequest
a.open("POST","https://www.".concat(_(),"/cookie-consent/")),a.setRequestHeader("Content-Type","application/json"),a.withCredentials=!0,a.onload=function(){200!==a.status?n("Request failed with status ".concat(a.status),null):n(null,a)},a.onerror=function(){n("Request failed with an error",a)}
var o={UPDATE_SETTINGS:r,USER_MODE:i,CATEGORIES:{}}
for(var s in d){var c=void 0
!0===t[s]?c=1:!1===t[s]&&(c=2),o.CATEGORIES[s]=c}a.send(JSON.stringify(o))}},4319:(e,n,t)=>{"use strict"
var r
t.r(n),t.d(n,{CALL_TREE_ID_HEADER_NAME:()=>f,DEGRADATION_TRACKING_EVENT_FIELD:()=>T,DEGRADATION_TRACKING_EVENT_NAME:()=>p,DOWNSTREAM_REQUEST_FIELD:()=>b,DegradationTrackingMetadata:()=>L,DegradationTrackingMetadataOptionName:()=>w,FABRIC_HEADER_NAME:()=>h,FEATURE_DEGRADATION_METRIC_EVENT_NAME:()=>l,FailureTrackingMetadata:()=>W,INSTRUMENTATION_GUIDE_PROMPT:()=>u,InternalFailureProcessingMetadata:()=>Q,InternalFeatureDegradationMetricEventProducer:()=>S,InternalFeatureDegradationMetricStore:()=>O,InvalidArgumentError:()=>P,JET_NOISE_TAG:()=>A,JET_UNCLASSIFIED_ERROR_TAG:()=>k,METRIC_EMISSION_INTERVAL_IN_MS:()=>E,MICROSOFT_EDGE_REFERENCE_HEADER_NAME:()=>y,PEM_METADATA_HEADER_NAME:()=>g,PEM_RESPONSE_METADATA_HEADER_NAME:()=>v,PEM_RESPONSE_METATADA_HEADER_AVAILABILITY_KEY:()=>_,POINT_OF_PRESENCE_ID_HEADER_NAME:()=>m,ParsedResponseHeaders:()=>z,PemTrackingService:()=>X,ResponseDetails:()=>Y,RetryableDegradationTrackingMetadata:()=>F,SUPPORTED_DEGRADATION_TRACKING_METADATA_OPTIONS:()=>N,calculateSuccessfulDownstreamCallsRatio:()=>G,createDegradeEvents:()=>V,determineResponseErrorType:()=>j,generateSpanSuffix:()=>H,parseDownstreamEndpointPathname:()=>B,refineServerErrorType:()=>q,validateKey:()=>x,validateProductName:()=>U})
var i=new Uint8Array(16)
function a(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")
return r(i)}const o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=function(e){return"string"==typeof e&&o.test(e)}
for(var c=[],d=0;d<256;++d)c.push((d+256).toString(16).substr(1))
const u="See https://go/pem/degradation-tracking-user-guide for instrumentation instructions",p="FeatureDegradeEvent",l="FeatureDegradationMetricEvent",f="x-li-uuid",m="x-li-pop",y="x-msedge-ref",h="x-li-fabric",g="X-LI-PEM-Metadata",v="x-li-pem-resp-metadata",_="availability",T={featureKey:"featureKey",productName:"productName",downstreamRequests:"downstreamRequests"},b={degradationKey:"degradationKey",degradationReason:"degradationReason",responseCode:"responseCode",endpointPath:"endpointPath",callTreeId:"responseCallTreeId"},E=6e4,k="pem-unclassified-error",A="noise"
class S extends class{constructor(e,n){this._collectedFeatureMetrics=e,this._fireEventCallback=n}}{produceMetricEvent(e){this._collectedFeatureMetrics.flushMetrics().forEach((n=>{const t=[]
n.featureCallCounts.forEach((e=>{t.push({featureProductName:e.featureMetricIdentifier.productName,featureKey:e.featureMetricIdentifier.featureKey,degradedDownstreamCallCount:e.failedApiCallCount,totalDownstreamCallCount:e.totalApiCallCount,retriedDownstreamCallCount:e.retriedApiCallCount,retriedSuccessfulDownstreamCallsRatio:e.retriedSuccessfulCallsRatio,pointOfPresenceId:e.featureMetricIdentifier.pointOfPresenceId,responseErrorTypeV2:e.featureMetricIdentifier.responseErrorType,successfulDownstreamCallsRatio:e.successfulApiCallsRatio,metricKey:{featureProductName:e.featureMetricIdentifier.productName,featureKey:e.featureMetricIdentifier.featureKey,pointOfPresenceId:e.featureMetricIdentifier.pointOfPresenceId,responseErrorTypeV2:e.featureMetricIdentifier.responseErrorType,responseFabric:e.featureMetricIdentifier.responseFabric}})}))
const r={header:{},requestHeader:{},time:Date.now(),metrics:t}
this._fireEventCallback(l,r,n.pageInstance,e)}))}}function C(e){return JSON.stringify(e,Object.keys(e).sort())}class I extends class{constructor(e){this._featureCallCounts=new Map,this._pageInstance=e}get pageInstance(){return this._pageInstance}get featureCallCounts(){return this._featureCallCounts}}{trackSuccessfulFeatureApiCall(e){this.trackMetric(e,(e=>{e.successfulApiCallsRatio+=1,e.totalApiCallCount++}))}trackFailedFeatureApiCall(e,n){this.trackMetric(e,(e=>{0===n?e.failedApiCallCount++:e.successfulApiCallsRatio+=n,e.totalApiCallCount++}))}trackRetriedFeatureApiCall(e,n){this.trackMetric(e,(e=>{e.retriedApiCallCount++,e.retriedSuccessfulCallsRatio+=n}))}trackRetriedSuccessfulFeatureApiCall(e){this.trackMetric(e,(e=>{e.successfulApiCallsRatio++,e.totalApiCallCount++}))}changeRetriedMetricsToTotal(){this.featureCallCounts.forEach((e=>e.changeCallCountsFromRetriedToTotal()))}trackMetric(e,n){const t=C(e)
if(this.featureCallCounts.has(t))n(this.featureCallCounts.get(t))
else{const r=new R(e)
n(r),this.featureCallCounts.set(t,r)}}}class R extends class{constructor(e){this.featureMetricIdentifier=e}}{constructor(){super(...arguments),this.successfulApiCallsRatio=0,this.failedApiCallCount=0,this.totalApiCallCount=0,this.retriedApiCallCount=0,this.retriedSuccessfulCallsRatio=0}mergeCallCounts(e){return this.successfulApiCallsRatio+=e.successfulApiCallsRatio,this.failedApiCallCount+=e.failedApiCallCount,this.totalApiCallCount+=e.totalApiCallCount,this.retriedApiCallCount+=e.retriedApiCallCount,this.retriedSuccessfulCallsRatio+=e.retriedSuccessfulCallsRatio,this}changeCallCountsFromRetriedToTotal(){this.totalApiCallCount+=this.retriedApiCallCount,this.successfulApiCallsRatio+=this.retriedSuccessfulCallsRatio,0===this.successfulApiCallsRatio&&(this.failedApiCallCount+=1),this.retriedApiCallCount=0,this.retriedSuccessfulCallsRatio=0}}class O extends class{flushMetrics(){const e=[...this.metrics.values()]
return this.metrics=new Map,e}}{constructor(){super(...arguments),this.metrics=new Map}incrementSuccessfulFeatureApiCall(e,n){this.incrementMetric(n,(n=>n.trackSuccessfulFeatureApiCall(e)))}incrementFailedFeatureApiCall(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0
this.incrementMetric(n,(n=>n.trackFailedFeatureApiCall(e,t)))}incrementRetriedFeatureApiCall(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0
this.incrementMetric(n,(n=>n.trackRetriedFeatureApiCall(e,t)))}incrementRetriedSuccessfulApiCall(e,n){this.incrementMetric(n,(n=>n.trackRetriedSuccessfulFeatureApiCall(e)))}mergeMetricsFrom(e){e.metrics.forEach(((e,n)=>{const t=this.metrics.get(n)
void 0!==t?e.featureCallCounts.forEach(((e,r)=>{var i
let a=t.featureCallCounts.get(r)
void 0!==a?a=a.mergeCallCounts(e):null===(i=this.metrics.get(n))||void 0===i||i.featureCallCounts.set(n,e)})):this.metrics.set(n,e)}))}changeRetriedMetricsToTotal(){this.metrics.forEach((e=>e.changeRetriedMetricsToTotal()))}incrementMetric(e,n){const t=C(e)
if(this.metrics.has(t))n(this.metrics.get(t))
else{const r=new I(e)
n(r),this.metrics.set(t,r)}}}function M(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}var w
!function(e){e.ProductName="productName",e.AdditionalDegradedResponseCodes="additionalDegradedResponseCodes",e.NonDegradedResponseCodes="nonDegradedResponseCodes",e.DegradationKeyOverrides="degradationKeyOverrides",e.ClientSensorGroupName="clientSensorGroupName",e.EnablePerformanceMeasurement="enablePerformanceMeasurement",e.CustomTrackingId="customTrackingId",e.DisableAvailabilityCalculation="disableAvailabilityCalculation",e.EnableSessionRecording="enableSessionRecording"}(w||(w={}))
const N=new Set(Object.values(w))
class P extends Error{constructor(e){super(e),Object.setPrototypeOf(this,P.prototype)}}function D(e){return 0===e.length||!e.trim()}function U(e){if("string"!=typeof e)throw new P(`The product name must be a string. ${u}.`)
if(D(e))throw new P(`No product name was specified. Please configure a defaultProductName or specify it per instrumented API call. ${u}.`)
if(/[^a-zA-Z0-9-_ \\/]/.test(e))throw new P(`Product name '${e}' can only contain alphanumeric, underscores (_), spaces ( ), dashes (-) and forward slashes (/). ${u}.`)
return e}function x(e){if("string"!=typeof e)throw new P(`Keys must be strings. ${u}.`)
if(D(e))throw new P(`Keys should not be blank. ${u}.`)
if(/[^a-z0-9-]/.test(e))throw new P(`'${e}' can only contain lowercase alphanumeric characters and dashes (-). ${u}.`)
return e}class L{constructor(e,n,t){var r,i,a
if(this._shouldEnablePerformanceMeasurement=!1,this._shouldDisableAvailabilityCalculation=!1,this._shouldRecordSession=!1,this._featureKey=x(e),this._defaultDegradationKey=x(n),!t)return this._additionalDegradedResponseCodes=[],this._nonDegradedResponseCodes=[],void(this._degradationKeyOverrides=[])
if("object"!=typeof t)throw new P(`DegradationTrackingMetadata options should be an object. ${u}.`)
const o=t.productName
o&&(this._productName=U(o))
const s=t.additionalDegradedResponseCodes,c=t.nonDegradedResponseCodes
!function(e,n){const t=(e,n)=>{if(!M(e)||e<=0||e>999)throw new P(`Please only specify positive integer response codes between 1 and 999 for the ${n} option. ${e} was specified. ${u}.`)
if(429===e||999===e)throw new P(`PEM does not consider 429 and 999 API responses indications of the real member experience because it represents LinkedIn throttling abusive requests. We drop 429s and 999s by default, so please remove them from your ${n} options.`)
if(n===w.NonDegradedResponseCodes&&e>=400&&e<500)throw new P(`For server responses that have a status code, PEM does not consider 4xx as degraded. ${e} is not considered a degradation unless you explicitly add it to the ${w.AdditionalDegradedResponseCodes} option. Please remove ${e} from the ${w.NonDegradedResponseCodes} option. ${u}.`)}
if(void 0!==e&&!Array.isArray(e))throw new P(`Please specify an array of positive integer response codes between 1 and 999 for the response codes that shouldn't be counted as degraded for the ${w.NonDegradedResponseCodes} option. ${u}.`)
if(void 0!==n&&!Array.isArray(n))throw new P(`Please specify an array of positive integer response codes between 1 and 999 for the response codes that should only be considered as the degraded state(s) for the ${w.AdditionalDegradedResponseCodes} option. ${u}.`)
e&&e.forEach((e=>t(e,w.NonDegradedResponseCodes))),n&&n.forEach((e=>t(e,w.AdditionalDegradedResponseCodes)))}(c,s),this._nonDegradedResponseCodes=c||[],this._additionalDegradedResponseCodes=s||[],this._degradationKeyOverrides=t.degradationKeyOverrides||[],this._clientSensorGroupName=t.clientSensorGroupName,this._shouldEnablePerformanceMeasurement=null!==(r=t.enablePerformanceMeasurement)&&void 0!==r&&r,this._customTrackingId=t.customTrackingId,this._shouldDisableAvailabilityCalculation=null!==(i=t.disableAvailabilityCalculation)&&void 0!==i&&i,this._shouldRecordSession=null!==(a=t.enableSessionRecording)&&void 0!==a&&a,function(e){Object.keys(e).forEach((e=>{if(!N.has(e))throw new P(`An unsupported degradation tracking option '${e}' was provided. Please fix or remove it. ${u}`)}))}(t)}static isDegradationTrackingMetadata(e){return null!=e&&Object.getOwnPropertyNames(L.prototype).every((n=>Object.hasOwnProperty.call(Object.getPrototypeOf(e),n)))}get featureKey(){return this._featureKey}get defaultDegradationKey(){return this._defaultDegradationKey}get degradationKey(){return this._defaultDegradationKey}get productName(){return this._productName}get additionalDegradedResponseCodes(){return this._additionalDegradedResponseCodes}get nonDegradedResponseCodes(){return this._nonDegradedResponseCodes}get degradationKeyOverrides(){return this._degradationKeyOverrides}get clientSensorGroupName(){return this._clientSensorGroupName}get shouldEnablePerformanceMeasurement(){return this._shouldEnablePerformanceMeasurement}get customTrackingId(){return this._customTrackingId}get shouldDisableAvailabilityCalculation(){return this._shouldDisableAvailabilityCalculation}get shouldRecordSession(){return this._shouldRecordSession}}class F{constructor(e){this._degradationTrackingMetadata=e,this._featureMetricStore=new O,this._lastRequestMetricStore=new O,this._requestsMade=0,this._trackingId=function(e,n,t){var r=(e=e||{}).random||(e.rng||a)()
if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0
for(var i=0;i<16;++i)n[t+i]=r[i]
return n}return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(c[e[n+0]]+c[e[n+1]]+c[e[n+2]]+c[e[n+3]]+"-"+c[e[n+4]]+c[e[n+5]]+"-"+c[e[n+6]]+c[e[n+7]]+"-"+c[e[n+8]]+c[e[n+9]]+"-"+c[e[n+10]]+c[e[n+11]]+c[e[n+12]]+c[e[n+13]]+c[e[n+14]]+c[e[n+15]]).toLowerCase()
if(!s(t))throw TypeError("Stringified UUID is invalid")
return t}(r)}()}static isRetryableDegradationTrackingMetadata(e){return null!=e&&Object.getOwnPropertyNames(F.prototype).every((n=>Object.hasOwnProperty.call(Object.getPrototypeOf(e),n)))}get degradationTrackingMetadata(){return this._degradationTrackingMetadata}get featureMetricStore(){return this._featureMetricStore}get currentRequestSequenceId(){return this._requestsMade-1}get flowTrackingId(){return this._trackingId}get shouldDisableAvailabilityCalculation(){return this._degradationTrackingMetadata.shouldDisableAvailabilityCalculation}get featureKey(){return this._degradationTrackingMetadata.featureKey}get defaultDegradationKey(){return this._degradationTrackingMetadata.defaultDegradationKey}get productName(){return this._degradationTrackingMetadata.productName}get nonDegradedResponseCodes(){return new Set(this._degradationTrackingMetadata.nonDegradedResponseCodes)}get additionalDegradedResponseCodes(){return this._degradationTrackingMetadata.additionalDegradedResponseCodes}get degradationKeyOverrides(){return this._degradationTrackingMetadata.degradationKeyOverrides}get customTrackingId(){return this._degradationTrackingMetadata.customTrackingId}get clientSensorGroupName(){return this._degradationTrackingMetadata.clientSensorGroupName}get shouldEnablePerformanceMeasurement(){return this._degradationTrackingMetadata.shouldEnablePerformanceMeasurement}incrementRetriedFeatureApiCall(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0
this._requestsMade++,this._featureMetricStore.mergeMetricsFrom(this._lastRequestMetricStore),this._lastRequestMetricStore.flushMetrics(),this._lastRequestMetricStore.incrementRetriedFeatureApiCall(e,n,t)}incrementRetriedSuccessfulApiCall(e,n){this._requestsMade++,this._featureMetricStore.mergeMetricsFrom(this._lastRequestMetricStore),this._lastRequestMetricStore.flushMetrics(),this._lastRequestMetricStore.incrementRetriedSuccessfulApiCall(e,n)}flushMetricStoreToServiceStore(e){this._lastRequestMetricStore.changeRetriedMetricsToTotal(),this._featureMetricStore.mergeMetricsFrom(this._lastRequestMetricStore),e.mergeMetricsFrom(this._featureMetricStore),this._featureMetricStore.flushMetrics(),this._lastRequestMetricStore.flushMetrics()}}function B(e,n){if(!e.includes("/"))return e
const t=function(e){const n=document.createElement("a")
return n.href=e,n.pathname}(e),r=t.split("/").filter((e=>e.length))
if(!n.length)return r.join("/")
const i=[]
for(let e=r.length-1;e>=0;e--){const t=r[e],a=n.indexOf(t)
a>=0?n.splice(a,1):i.push(t)}return i.reverse().join("/")}function q(e){if(e){if(e.fabric)return"SERVER_ERROR"
if(e.pointOfPresenceId)return"TRAFFIC_L0_TO_L1_ERROR"
if(e.microsoftEdgeReference)return"TRAFFIC_AFD_TO_L0_ERROR"}return"SERVER_ERROR"}function j(e){const n=e.responseError,t=e.parsedHeaders,r=e.responseCode
if(r){if(429===r||999===r)return"TOO_MANY_REQUESTS"
if(t&&!t.hasAnyLinkedInHeaders()&&r&&r>=400&&r<600)return"BLOCKED_BY_CLIENT_PROXY"
if((i=r)>=400&&i<500)return function(e){return 429===e?"TOO_MANY_REQUESTS":"CLIENT_ERROR"}(r)
if(function(e){return e>=500&&e<600}(r))return q(t)
if(function(e,n){return!!(e>=200&&e<300&&n&&n.downstreamAvailability<1)}(r,t))return"DOWNSTREAM_GRACEFUL_DEGRADATION"}var i
if(!n)return null
if(n instanceof Error){if("AbortError"===n.name)return"CLIENT_ABORTED"
if(n instanceof TypeError&&(n.message.indexOf("Network request failed")>=0||n.message.indexOf("NetworkError when attempting to fetch resource")>=0||n.message.indexOf("Failed to fetch")>=0))return"NETWORK_ERROR"}else{if("timeout"===n.statusText)return"CLIENT_TIMEOUT"
if(0===n.status&&"abort"===n.statusText)return"CLIENT_ABORTED"
if("readyState"in n&&0===n.readyState)return"NETWORK_ERROR"}return"UNCLASSIFIED"}function V(e,n,t,r){if(!(null==e?void 0:e.trim())||!n||!Array.isArray(n))return[]
const i=[],a=r.responseCode
return n.forEach((n=>{const o=n.getDegradationKey(a),s=n.shouldImpactAvailability(t)&&n.isCountedAgainstAvailability(t,a),c={endpointPath:e,degradationKey:o,responseErrorTypeV2:t,isCountedAgainstAvailability:s,downstreamServiceErrorCode:r.downstreamServiceErrorCode}
a&&(c.responseCode=a)
const d=r.parsedHeaders
d.callTreeId&&(c.responseCallTreeId=d.callTreeId),(null==d?void 0:d.pointOfPresenceId)&&(c.pointOfPresenceId=d.pointOfPresenceId),(null==d?void 0:d.microsoftEdgeReference)&&(c.microsoftEdgeReference=d.microsoftEdgeReference),(null==d?void 0:d.fabric)&&(c.fabric=d.fabric),F.isRetryableDegradationTrackingMetadata(n.retryableTrackingMetadata)&&(c.retryDetails={trackingId:n.retryableTrackingMetadata.flowTrackingId,sequenceId:n.retryableTrackingMetadata.currentRequestSequenceId,maxAttempts:0}),i.push({header:{},requestHeader:{},productName:n.productName,featureKey:n.featureKey,failedDownstreamRequests:[c],customTrackingId:n.customTrackingId})})),i}function H(e){if(!e)return"-success"
switch(e){case"SERVER_ERROR":case"GRAPHQL_FULL_FAILURE":return"-server-error"
case"CLIENT_ERROR":case"TOO_MANY_REQUESTS":return"-client-error"
default:return"-misc-error"}}function G(e,n){return"DOWNSTREAM_GRACEFUL_DEGRADATION"===e?n.downstreamAvailability:0}var K
!function(e){e.ProductName="productName",e.CustomTrackingId="customTrackingId",e.ClientSensorGroupName="clientSensorGroupName",e.AdditionalDegradedResponseCodes="additionalDegradedResponseCodes",e.NonDegradedResponseCodes="nonDegradedResponseCodes",e.DegradationKeyOverrides="degradationKeyOverrides",e.ShouldDisableDegradationTracking="shouldDisableDegradationTracking",e.EnablePerformanceMeasurement="enablePerformanceMeasurement"}(K||(K={}))
const $=new Set(Object.values(K))
class W{constructor(e,n,t){if(!t)return void(this._degradationTrackingMetadata=new L(e,n,{nonDegradedResponseCodes:[],additionalDegradedResponseCodes:[],degradationKeyOverrides:[]}))
if("object"!=typeof t)throw new P(`FailureTrackingMetadata options should be an object. ${u}.`)
const r=t.additionalDegradedResponseCodes,i=t.nonDegradedResponseCodes
this.validateResponseCodes(r,i)
const a={productName:t.productName,additionalDegradedResponseCodes:t.additionalDegradedResponseCodes,nonDegradedResponseCodes:t.nonDegradedResponseCodes,degradationKeyOverrides:t.degradationKeyOverrides,clientSensorGroupName:t.clientSensorGroupName,customTrackingId:t.customTrackingId,enablePerformanceMeasurement:t.enablePerformanceMeasurement}
this._degradationTrackingMetadata=new L(e,n,a),function(e){Object.keys(e).forEach((e=>{if(!$.has(e))throw new P(`An unsupported failure tracking option '${e}' was provided. Please fix or remove it. ${u}`)}))}(t)}static isFailureTrackingMetadata(e){return null!=e&&Object.getOwnPropertyNames(W.prototype).every((n=>Object.hasOwnProperty.call(Object.getPrototypeOf(e),n)))}get featureKey(){return this._degradationTrackingMetadata.featureKey}get defaultDegradationKey(){return this._degradationTrackingMetadata.defaultDegradationKey}get productName(){return this._degradationTrackingMetadata.productName}get nonDegradedResponseCodes(){return new Set(this._degradationTrackingMetadata.nonDegradedResponseCodes)}get additionalDegradedResponseCodes(){return new Set(this._degradationTrackingMetadata.additionalDegradedResponseCodes)}get degradationKeyOverrides(){return this._degradationTrackingMetadata.degradationKeyOverrides}get customTrackingId(){return this._degradationTrackingMetadata.customTrackingId}get clientSensorGroupName(){return this._degradationTrackingMetadata.clientSensorGroupName}get shouldEnablePerformanceMeasurement(){return this._degradationTrackingMetadata.shouldEnablePerformanceMeasurement}validateResponseCodes(e,n){const t=(e,n)=>{if(!M(e)||e<=0||e>999)throw new P(`Please only specify positive integer response codes between 1 and 999 for the ${n} option. ${e} was specified. ${u}.`)
if(429===e||999===e)throw new P(`PEM does not consider 429 and 999 API responses indications of the real member experience because it represents LinkedIn throttling abusive requests. We drop 429s and 999s by default, so please remove them from your ${n} options.`)
if(n===K.NonDegradedResponseCodes&&(e<500||e>=600))throw new P(`For server responses that have a status code, PEM does not consider non-5xx as degradations by default anymore. ${e} is not considered a degradation unless you explicitly add it to the ${K.AdditionalDegradedResponseCodes} option. Please remove ${e} from the ${K.NonDegradedResponseCodes} option. ${u}.`)}
if(void 0!==n&&!Array.isArray(n))throw new P(`Please specify an array of positive integer response codes between 1 and 999 for the response codes that shouldn't be counted as degraded for the ${K.NonDegradedResponseCodes} option. ${u}.`)
if(void 0!==e&&!Array.isArray(e))throw new P(`Please specify an array of positive integer response codes between 1 and 999 for the response codes that should also be considered as the degraded state(s) for the ${K.AdditionalDegradedResponseCodes} option. ${u}.`)
null==n||n.forEach((e=>t(e,K.NonDegradedResponseCodes))),null==e||e.forEach((e=>t(e,K.AdditionalDegradedResponseCodes)))
const r=new Set(e),i=new Set(n)
if([...r].some((e=>i.has(e))))throw new P(`Response codes can't be both degraded and non-degraded. Please ensure that your additionalDegradedResponseCodes and nonDegradedResponseCodes don't have any overlapping response codes. ${u}.`)}}class Q{constructor(e,n){if(this._additionalDegradedResponseCodes=new Set,this._degradationKeyByResponseCode=new Map,this._shouldDisableAvailabilityCalculation=!1,this._shouldRecordSession=!1,this._retryableTrackingMetadata=null,!F.isRetryableDegradationTrackingMetadata(e)&&!L.isDegradationTrackingMetadata(e)&&!W.isFailureTrackingMetadata(e))throw new P("We encountered a bug where we forgot to provide the tracking metadata as an argument. Please report it to the #pem team.")
if(!n)throw new P("We encountered a bug where we forgot to provide the product name as an argument. Please report it to the #pem team.")
this._featureKey=e.featureKey,this._productName=n,this._clientSensorGroupName=e.clientSensorGroupName,this._defaultDegradationKey=e.defaultDegradationKey
let t=L.isDegradationTrackingMetadata(e)?e:void 0
F.isRetryableDegradationTrackingMetadata(e)&&(t=e.degradationTrackingMetadata,this._retryableTrackingMetadata=e),void 0!==t?(this._nonDegradedResponseCodes=new Set(t.nonDegradedResponseCodes),this._customTrackingId=t.customTrackingId,this._shouldDisableAvailabilityCalculation=t.shouldDisableAvailabilityCalculation,this._shouldRecordSession=t.shouldRecordSession,t.additionalDegradedResponseCodes.length&&(this.processAdditionalDegradedResponseCodes(e.additionalDegradedResponseCodes),this.initializeDegradationKeyOverrides(e.degradationKeyOverrides))):(this._nonDegradedResponseCodes=new Set(e.nonDegradedResponseCodes),this._customTrackingId=e.customTrackingId,this.processAdditionalDegradedResponseCodes(e.additionalDegradedResponseCodes),this.initializeDegradationKeyOverrides(e.degradationKeyOverrides))}getDegradationKey(e){return this._degradationKeyByResponseCode.has(e)?this._degradationKeyByResponseCode.get(e):this._defaultDegradationKey}get featureKey(){return this._featureKey}get productName(){return this._productName}get customTrackingId(){return this._customTrackingId}get clientSensorGroupName(){return this._clientSensorGroupName}get shouldDisableAvailabilityCalculation(){return this._shouldDisableAvailabilityCalculation}get shouldRecordSession(){return this._shouldRecordSession}get retryableTrackingMetadata(){return this._retryableTrackingMetadata}get retryMetricStore(){var e,n
return void 0!==(null===(e=this._retryableTrackingMetadata)||void 0===e?void 0:e.featureMetricStore)?null===(n=this._retryableTrackingMetadata)||void 0===n?void 0:n.featureMetricStore:null}isCountedAgainstAvailability(e,n){return null!==e&&(null==n||this.canResponseCodeCountAgainstAvailability(n))}canResponseCodeCountAgainstAvailability(e){if(this._degradationKeyByResponseCode.has(e))return!0
if(this._additionalDegradedResponseCodes.has(e))return!0
const n=e>=400&&e<500,t=this._nonDegradedResponseCodes.has(e)
return!n&&!t}shouldImpactAvailability(e,n,t){return!(e&&"CLIENT_ABORTED"===e||"BLOCKED_BY_CLIENT_PROXY"===e||!(null==t?void 0:t.hasAnyLinkedInHeaders())&&n&&n>=400&&n<600||"TOO_MANY_REQUESTS"===e)}processAdditionalDegradedResponseCodes(e){e.forEach((e=>{if(this._nonDegradedResponseCodes.has(e))throw new P(`You attempted to specify ${e} as an additional degraded response code for the '${this.featureKey}' feature, however it is also specified in the non-degraded response codes for that feature. Please decide whether you want to consider ${e} responses a degraded state or not. ${u}.`)
this._additionalDegradedResponseCodes.add(e)}))}initializeDegradationKeyOverrides(e){e.forEach((e=>{if(!e.responseCodesToOverride||!e.degradationKey||!Array.isArray(e.responseCodesToOverride)||"string"!=typeof e.degradationKey)throw new P(`Degradation key overrides must consist of an array of responseCodesToOverride and a string degradationKey. ${u}.`)
new Set(e.responseCodesToOverride).forEach((n=>{if(!this.canResponseCodeCountAgainstAvailability(n))throw new P(`A degradation key override was specified for ${n}, but that response code isn't considered degraded. Please add it to additionalDegradedResponseCodes if you want it to count against your availability.`)
this._degradationKeyByResponseCode.set(n,e.degradationKey)}))}))}}class z{constructor(e){const n=new Map
null==e||e.forEach(((e,t)=>{n.set(t.toLowerCase(),e)})),this._callTreeId=n.get(f)||null,this._pointOfPresenceId=n.get(m)||null,this._msEdgeRef=n.get(y)||null,this._fabric=n.get(h)||null,this._responseMetadata=n.get(v)||null,this._downstreamAvailability=function(e){if(null==e)return null
const n=e.split(",")
for(const e of n){const n=e.split("=",2)
if(2===n.length&&n[0]===_){const e=parseFloat(n[1])
if(e>=0&&e<=1)return e}}return null}(this._responseMetadata)||1}get callTreeId(){return this._callTreeId}get pointOfPresenceId(){return this._pointOfPresenceId}get microsoftEdgeReference(){return this._msEdgeRef}get fabric(){return this._fabric}get downstreamAvailability(){return this._downstreamAvailability}hasAnyLinkedInHeaders(){return!!(this._fabric||this._pointOfPresenceId||this._msEdgeRef||this._callTreeId)}}class Y{constructor(e,n,t,r){this._responseCode=e||null,this._parsedResponseHeaders=n?new z(n):new z,this._responseError=t||null,this._downstreamServiceErrorCode=r}get responseCode(){return this._responseCode}get parsedHeaders(){return this._parsedResponseHeaders}get responseError(){return this._responseError}set responseError(e){this._responseError=e}get downstreamServiceErrorCode(){return this._downstreamServiceErrorCode}set downstreamServiceErrorCode(e){this._downstreamServiceErrorCode=e}}class X{constructor(e,n,t){this._featureMetricStore=new O,this._defaultProductName=e,this._fireEventCallback=n,this._jetErrorCallback=t,this._metricSender=new S(this._featureMetricStore,n),window.setInterval((()=>this._metricSender.produceMetricEvent()),E),window.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&this._metricSender.produceMetricEvent(!0)}))}trackFeatureDegradationsForFetch(e,n,t,r,i){let a,o=null
const s=new Map,c=this._createFailureProcessingMetadata(t)
return n=this._getAndValidateUrlEntityIDs(n),r.then((e=>{o=e.status,e.headers.forEach(((e,n)=>s.set(n.toLowerCase(),e))),!1===e.ok&&(a=e)})).catch((e=>{throw a=e,e})).finally((()=>{this._trackResponse(e,o,n,c,i,s,a)}))}trackFeatureDegradationsForJQueryAjax(e,n,t,r,i,a){const o=n.status,s=n.getAllResponseHeaders(),c=new Map
s&&s.trim().split(/[\r\n]+/).forEach((e=>{const n=e.split(": "),t=n.shift()
if(t){const e=n.join(": ")
c.set(t.toLowerCase(),e)}}))
const d=a?null:n,u=this._createFailureProcessingMetadata(r)
t=this._getAndValidateUrlEntityIDs(t),this._trackResponse(e,o,t,u,i,c,d)}startRetryFlow(e){return X.startRetryFlow(e)}static startRetryFlow(e){return new F(e)}completeRetryFlow(e){if(!F.isRetryableDegradationTrackingMetadata(e))throw new P("retryFlowMetadata must be an instance of RetryableDegradationTrackingMetadata")
e.flushMetricStoreToServiceStore(this._featureMetricStore)}_trackResponse(e,n,t,r,i,a,o){const s=new Y(n,a,o),c=s.parsedHeaders,d=j(s),u=B(e,t),l=new Set,f=new Set
r.forEach((e=>{l.add(e.productName),f.add(e.featureKey)
const t=null!==e.retryableTrackingMetadata&&null!==e.retryMetricStore
!e.shouldDisableAvailabilityCalculation&&e.shouldImpactAvailability(d)&&(e.isCountedAgainstAvailability(d,n)?(t?e.retryableTrackingMetadata.incrementRetriedFeatureApiCall.bind(e.retryableTrackingMetadata):this._featureMetricStore.incrementFailedFeatureApiCall.bind(this._featureMetricStore))({featureKey:e.featureKey,productName:e.productName,pointOfPresenceId:c.pointOfPresenceId,responseErrorType:d,responseFabric:c.fabric},i,G(d,c)):(t?e.retryableTrackingMetadata.incrementRetriedSuccessfulApiCall.bind(e.retryableTrackingMetadata):this._featureMetricStore.incrementSuccessfulFeatureApiCall.bind(this._featureMetricStore))({featureKey:e.featureKey,productName:e.productName,pointOfPresenceId:c.pointOfPresenceId,responseFabric:c.fabric},i))})),d&&(this._reportErrorIfUnclassified(o,d,n,l,f),V(u,r,d,s).forEach((e=>{this._fireEventCallback(p,e,i)})))}_reportErrorIfUnclassified(e,n,t,r,i){var a
if((0===t||null==t)&&"UNCLASSIFIED"===n){const n=[A,k]
let t
r.forEach((e=>n.push(`pem-product-${e}`))),i.forEach((e=>n.push(`pem-feature-${e}`))),t=e instanceof Error?e:new Error(`Could not classify jQuery response: ${JSON.stringify(e)}`),null===(a=this._jetErrorCallback)||void 0===a||a.call(this,t,n,!1)}}_createFailureProcessingMetadata(e){if(!e||!Array.isArray(e)||!e.length)throw new P(`Please specify a non-empty array of degradation tracking metadata. ${u}.`)
const n=new Set
return e.map((e=>{if(!L.isDegradationTrackingMetadata(e)&&!F.isRetryableDegradationTrackingMetadata(e))throw new P(`Please use DegradationTrackingMetadata or RetryableDegradationTrackingMetadata to specify the degradations. ${u}.`)
const t=U(e.productName||this._defaultProductName),r=`${t}!!${e.featureKey}`
if(n.has(r))throw new P("More than one degradation tracking metadata has the same productName/featureKey combination. Please merge them together")
return n.add(r),new Q(e,t)}))}_getAndValidateUrlEntityIDs(e){if(!Array.isArray(e))throw new P(`Please specify the queried IDs to remove from the request URL, or use an empty array if there are none. ${u}.`)
return e}}},686:(e,n,t)=>{"use strict"
t.r(n),t.d(n,{INPAGE_URL:()=>i,getShimmedLink:()=>c,initAnchorLinkShim:()=>l,isExternalLink:()=>s,removeAnchorLinkShim:()=>f})
var r=["linkedin.com","linkedin.cn","linkedin-ei.com","linkedin-ei.cn","lynda.com"],i="https://www.linkedin.com/safety/go",a=new RegExp(/^http(s)?:\/\/.*/)
function o(e){return e?(e=(e=(e=(e=(e=e.replace(/(https?:\/\/)?(www.)?/i,"")).includes("/")?e.split("/")[0]:e).includes("@")?e.split("@")[1]:e).includes(":")?e.split(":")[0]:e).split(".")).slice(e.length-2).join("."):(console.warn("Called getDomain with empty url"),e)}function s(e){var n
return!(!function(e){return!(!e||"string"!=typeof e||!e.match(1<arguments.length&&void 0!==arguments[1]?arguments[1]:a))}(e)||(e=o(e))===o(null==(n=window)?void 0:n.location.host)||-1!==r.indexOf(e))}function c(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}
if(s(e)){var t,r=i+"?url=".concat(encodeURIComponent(e))
for(t in n)r+="&"+t+"="+encodeURIComponent(n[t])
return r}return e}function d(e,n){return n instanceof HTMLAnchorElement?n:e instanceof HTMLAnchorElement?e:n===e||null===n?null:n.parentElement instanceof HTMLAnchorElement?n.parentElement:d(e,n.parentElement)}function u(e){return function(n){(n=n.currentTarget instanceof HTMLElement&&n.target instanceof HTMLElement?d(n.currentTarget,n.target):null)&&(n.href=c(n.href,e),n.removeAttribute("rel"))}}function p(e){return function(n){var t=n.currentTarget instanceof HTMLElement&&n.target instanceof HTMLElement?d(n.currentTarget,n.target):null
"Enter"===n.key&&t&&(t.href=c(t.href,e),t.removeAttribute("rel"))}}function l(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}
e instanceof HTMLElement?(e.addEventListener("mousedown",u(n)),e.addEventListener("keydown",p(n))):console.warn("attempting to `initAnchorLinkShim()` on non-`HTMLElement` item ".concat(e))}function f(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}
console.error("removeAnchorLinkShim is deprecated and does nothing. Please remove this call (with element ".concat(e," and params ").concat(JSON.stringify(n)))}},2965:(e,n,t)=>{"use strict"
Object.defineProperty(n,"__esModule",{value:!0}),n.decorate=function(e,n,t){var r=t
if(!e||!(e.begin||e.end||e.segment))return r
if(Array.isArray(n)&&n.length){var s=new i.default(t),c=s.length,d="function"==typeof e.begin?e.begin:o,u="function"==typeof e.end?e.end:o,p="function"==typeof e.segment?e.segment:a,l=[],f=n,m=[],y=void 0,h=c
for(y=c;y>=0;y--){var g=void 0,v=void 0
for(v=l.length>0&&l[l.length-1];l.length&&v&&y===v.start;)y!==h&&m.push(p.call(e,s.substring(y,h).toString())),m.push(d.call(e,v)),h=y,l.pop(),v=l[l.length-1]
for(g=f.length>0&&f[f.length-1];f.length&&g&&y===g.start+g.length;)y!==h&&m.push(p.call(e,s.substring(y,h).toString())),m.push(u.call(e,g)),h=y,l.push(f.pop()),g=f[f.length-1]
for(v=l.length>0&&l[l.length-1];l.length&&v&&y===v.start;)y!==h&&m.push(p.call(e,s.substring(y,h).toString())),m.push(d.call(e,v)),h=y,l.pop(),v=l[l.length-1]
0===y&&h!==y&&m.push(p(s.substring(y,h).toString()))}r=m.reverse().join("")}else r="function"==typeof e.segment?e.segment(r):r
return r}
var r,i=(r=t(9808))&&r.__esModule?r:{default:r}
function a(e){return e}function o(){return""}},7034:(e,n,t)=>{"use strict"
Object.defineProperty(n,"__esModule",{value:!0})
var r,i=t(9808)
n.StringView=(r=i)&&r.__esModule?r.default:r
var a=t(2965)
Object.defineProperty(n,"decorate",{enumerable:!0,get:function(){return a.decorate}})},9808:(e,n)=>{"use strict"
Object.defineProperty(n,"__esModule",{value:!0}),n.default=r
var t=String.fromCharCode
function r(e){Array.isArray(e)?(this.string=null,this.codePoints=e):(this.string=e,this.codePoints=function(e){for(var n,t,r=[],i=0,a=e.length;i<a;)(n=e.charCodeAt(i++))>=55296&&n<=56319&&i<a?56320==(64512&(t=e.charCodeAt(i++)))?r.push(((1023&n)<<10)+(1023&t)+65536):(r.push(n),i--):r.push(n)
return r}(e)),this.length=this.codePoints.length}r.prototype.constructor=r,r.prototype.substring=function(e,n){var t=this.length
if(0===n)return new r("")
if((isNaN(e)||e<0)&&(e=0),(isNaN(n)||n<0)&&(n=t),e>t&&(e=t),n>t&&(n=t),n<e){var i=[e,n]
n=i[0],e=i[1]}return new r(e===n?"":this.codePoints.slice(e,n))},r.prototype.toString=function(){return null!==this.string?this.string:this.codePoints.map((function(e){var n=""
return e>65535&&(n+=t((e-=65536)>>>10&1023|55296),e=56320|1023&e),n+t(e)})).join("")},e.exports=n.default},3484:(e,n,t)=>{var r=t(7034)
e.exports=r},2124:(e,n,t)=>{"use strict"
Object.defineProperty(n,"__esModule",{value:!0}),n.decodeObject=n.decodeList=n.reducedDecode=n.decode=n.paramDecode=void 0
const r=t(2726),i=/(%2C|%28|%29|%27|%3A)/g,a=/(%2C|%28|%29|%27|%3A)/
function o(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0
return e.indexOf(n,t)===t}function s(e,n){if(e[e.length-1]!==n)throw new Error(`Input has unbalanced prefix and suffix: ${e}`)}function c(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=0,r=!1
const i="(",a=")"
for(;n<e.length;){const o=e[n]
if(o===i&&(t++,r=!0),o===a&&t--,0===t&&r)break
n++}return n}function d(e,n){return n?a.test(e)&&(e=e.replace(i,unescape)):e=decodeURIComponent(e),void 0===e||"''"===e?"":e}function u(e){return p(e,!1)}function p(e,n){return void 0!==e&&"''"!==e||(e=""),o(e,r.LIST_PREFIX)?(s(e,r.LIST_SUFFIX),l(e.substring(5,e.length-1),n)):o(e,r.OBJ_PREFIX)?(s(e,r.OBJ_SUFFIX),f(e.substring(1,e.length-1),n)):d(e,n)}function l(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]
const t=[]
let i=0
for(;i<e.length;){if(o(e,r.LIST_PREFIX,i)||o(e,r.OBJ_PREFIX,i)){const r=c(e,i)
t.push(p(e.substring(i,r+1),n)),i=r+2
continue}let a=e.indexOf(",",i)
a<0&&(a=e.length),t.push(d(e.substring(i,a),n)),i=a+1}return t}function f(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]
const t={}
let i=0
for(;i<e.length;){const a=e.indexOf(":",i),o=d(e.substring(i,a),n)
if(i=a+1,e.startsWith(r.LIST_PREFIX,i)||e.startsWith(r.OBJ_PREFIX,i)){const r=c(e,i)
t[o]=p(e.substring(i,r+1),n),i=r+2
continue}let s=e.indexOf(",",i)
s<0&&(s=e.length)
const u=d(e.substring(i,s),n)
t[o]=u,i=s+1}return t}n.paramDecode=function(e){return e.split("&").reduce((function(e,n){if(!n.length)return e
if(0===n.indexOf("="))return e
let[t="",r]=n.split("=")
return"''"===t&&(t=""),void 0!==r&&""!==r||(r="''"),e[decodeURIComponent(t)]=u(r),e}),{})},n.decode=u,n.reducedDecode=function(e){return p(e,!0)},n.decodeList=l,n.decodeObject=f},6803:(e,n,t)=>{"use strict"
Object.defineProperty(n,"__esModule",{value:!0}),n.encodePrimitive=n.encodeObject=n.encodeArray=n.encodeAnyType=n.arrayParamToQueryStringObject=n.arrayParamEncode=n.paramEncode=n.reducedEncode=n.encode=void 0
const r=t(2726),i=/[,()':]/g,a=/[,()':]/
function o(e,n){if("object"!=typeof e)throw new Error(n)}function s(e){const n=JSON.parse(JSON.stringify(e))
return function(e,n){if(Array.isArray(e)||"object"!=typeof e||null===e)throw new Error("You must pass an object to the paramEncode function. Use arrayParamEncode.")}(n),Object.keys(n).map((e=>`${l(e)}=${d(n[e],!1)}`)).join("&")}function c(e){if(e=JSON.parse(JSON.stringify(e)),!Array.isArray(e))throw new Error("You must pass an array to the arrayParamEncode function.")
return e.reduce((function(e,n){if(!n||!n.hasOwnProperty("name")||!n.hasOwnProperty("value"))throw new Error("Objects passed to the arrayParamEncode function must have name and value properties.")
if("object"==typeof n.value&&null!==n.value)throw new Error("Only primitives may be passed to arrayParamEncode as item values.")
const t=n.name,r=e.hasOwnProperty(t),i=e[t]
return r?Array.isArray(i)?i.push(n.value):e[t]=[i,n.value]:e[t]=n.value,e}),{})}function d(e,n){return Array.isArray(e)?u(e,n):function(e){return"object"==typeof e&&null!==e}(e)?p(e,n):l(e,n)}function u(e,n){const t=new Array(e.length)
for(let r=0;r<e.length;r++)t[r]=d(e[r],n)
return`${r.LIST_PREFIX}${t.join(",")}${r.LIST_SUFFIX}`}function p(e,n){const t=Object.keys(e).map((t=>`${l(t,n)}:${d(e[t],n)}`))
return`${r.OBJ_PREFIX}${t.join(",")}${r.OBJ_SUFFIX}`}function l(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]
return""===e?"''":n&&"string"==typeof e&&a.test(e)?e.replace(i,escape):n?e:encodeURIComponent(e).replace(i,escape)}n.encode=function(e){const n=JSON.parse(JSON.stringify(e))
return o(n,"You must pass either an array or an object to the encode function."),d(n,!1)},n.reducedEncode=function(e){const n=JSON.parse(JSON.stringify(e))
return o(n,"You must pass either an array or an object to the reducedEncode function."),d(n,!0)},n.paramEncode=s,n.arrayParamEncode=function(e){return s(c(e))},n.arrayParamToQueryStringObject=c,n.encodeAnyType=d,n.encodeArray=u,n.encodeObject=p,n.encodePrimitive=l},1448:(e,n)=>{"use strict"
Object.defineProperty(n,"__esModule",{value:!0}),n.default=Object.freeze({S_100_CONTINUE:100,S_101_SWITCHING_PROTOCOLS:101,S_200_OK:200,S_201_CREATED:201,S_202_ACCEPTED:202,S_203_NON_AUTHORITATIVE_INFORMATION:203,S_204_NO_CONTENT:204,S_205_RESET_CONTENT:205,S_206_PARTIAL_CONTENT:206,S_207_MULTI_STATUS:207,S_300_MULTIPLE_CHOICES:300,S_301_MOVED_PERMANENTLY:301,S_302_FOUND:302,S_303_SEE_OTHER:303,S_304_NOT_MODIFIED:304,S_305_USE_PROXY:305,S_307_TEMPORARY_REDIRECT:307,S_400_BAD_REQUEST:400,S_401_UNAUTHORIZED:401,S_402_PAYMENT_REQUIRED:402,S_403_FORBIDDEN:403,S_404_NOT_FOUND:404,S_405_METHOD_NOT_ALLOWED:405,S_406_NOT_ACCEPTABLE:406,S_407_PROXY_AUTHENTICATION_REQUIRED:407,S_408_REQUEST_TIMEOUT:408,S_409_CONFLICT:409,S_410_GONE:410,S_411_LENGTH_REQUIRED:411,S_412_PRECONDITION_FAILED:412,S_413_REQUEST_ENTITY_TOO_LARGE:413,S_414_REQUEST_URI_TOO_LONG:414,S_415_UNSUPPORTED_MEDIA_TYPE:415,S_416_REQUESTED_RANGE_NOT_SATISFIABLE:416,S_417_EXPECTATION_FAILED:417,S_422_UNPROCESSABLE_ENTITY:422,S_423_LOCKED:423,S_424_FAILED_DEPENDENCY:424,S_428_PRECONDITION_REQUIRED:428,S_429_TOO_MANY_REQUESTS:429,S_500_INTERNAL_SERVER_ERROR:500,S_501_NOT_IMPLEMENTED:501,S_502_BAD_GATEWAY:502,S_503_SERVICE_UNAVAILABLE:503,S_504_GATEWAY_TIMEOUT:504,S_505_HTTP_VERSION_NOT_SUPPORTED:505})},5452:function(e,n,t){"use strict"
var r=this&&this.__createBinding||(Object.create?function(e,n,t,r){void 0===r&&(r=t)
var i=Object.getOwnPropertyDescriptor(n,t)
i&&!("get"in i?!n.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,r,i)}:function(e,n,t,r){void 0===r&&(r=t),e[r]=n[t]}),i=this&&this.__exportStar||function(e,n){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(n,t)||r(n,e,t)}
Object.defineProperty(n,"__esModule",{value:!0}),n.httpStatus=n.reducedEncode=n.paramEncode=n.encode=n.arrayParamToQueryStringObject=n.arrayParamEncode=void 0,i(t(2124),n)
var a=t(6803)
Object.defineProperty(n,"arrayParamEncode",{enumerable:!0,get:function(){return a.arrayParamEncode}}),Object.defineProperty(n,"arrayParamToQueryStringObject",{enumerable:!0,get:function(){return a.arrayParamToQueryStringObject}}),Object.defineProperty(n,"encode",{enumerable:!0,get:function(){return a.encode}}),Object.defineProperty(n,"paramEncode",{enumerable:!0,get:function(){return a.paramEncode}}),Object.defineProperty(n,"reducedEncode",{enumerable:!0,get:function(){return a.reducedEncode}})
var o=t(1448)
Object.defineProperty(n,"httpStatus",{enumerable:!0,get:function(){return o.default}}),i(t(9634),n),i(t(2726),n)},9634:(e,n,t)=>{"use strict"
Object.defineProperty(n,"__esModule",{value:!0}),n.queryTunnelRequest=n.queryTunnel=n.urlRequiresQueryTunneling=n.checkAndEncodeLongUrl=n.encodeRequest=void 0
const r=t(2726),i="application/x-www-form-urlencoded"
function a(e){if(!0===e.forceQueryTunnel){const{path:n,queryString:t}=(0,r.extractPathAndQueryStringFromUrl)(e.url||void 0)
if(t){const r={}
for(const n in e.headers)"CONTENT-TYPE"!==n.toUpperCase()&&(r[n]=e.headers[n])
let a,o
if(r["X-HTTP-Method-Override"]=e.method,e.body){const n=`RESTLI_${Date.now()}`
o="multipart/mixed; boundary="+n,a=["--"+n,"Content-Type: "+i,"",t,"--"+n,"Content-Type: application/json","",e.body,"--"+n+"--"].join("\r\n")}else o=i,a=t
return r["Content-Type"]=o,{body:a,headers:r,method:"POST",url:n}}}const n={method:e.method,url:e.url}
return e.body&&(n.body=e.body),n}function o(){const e=document.querySelector('meta[name="isQueryTunnelRequestSupported"]')
return e&&"true"===e.getAttribute("content")||!1}function s(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
return c(e)?d(e,n):{url:e,request:n}}function c(e){const{path:n,queryString:t}=(0,r.extractPathAndQueryStringFromUrl)(e)
if(n.length>8e3)throw new Error(`Per AFD limitations, this request url ${e} will not work. Please contact ask_traffic@.`)
return e.length>8e3||t.length>4e3}function d(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
const t=Object.assign({},n)
t.url=e,t.forceQueryTunnel=!0
const r=a(t)
return n.method=r.method,n.headers=r.headers,n.body=r.body,n.data=r.body,{url:r.url||void 0,request:n}}n.encodeRequest=a,n.checkAndEncodeLongUrl=s,n.urlRequiresQueryTunneling=c,n.queryTunnel=d,n.queryTunnelRequest=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
return o()?s(e,n):{url:e,request:n}}},2726:(e,n)=>{"use strict"
Object.defineProperty(n,"__esModule",{value:!0}),n.extractPathAndQueryStringFromUrl=n.OBJ_SUFFIX=n.OBJ_PREFIX=n.LIST_SUFFIX=n.LIST_PREFIX=void 0,n.LIST_PREFIX="List(",n.LIST_SUFFIX=")",n.OBJ_PREFIX="(",n.OBJ_SUFFIX=")"
const t=/^(\/[^?]+)\??(.*)$/
n.extractPathAndQueryStringFromUrl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:""
const n=t.exec(e)
if(n){const[,e="",t=""]=n
return{path:e,queryString:t}}return{path:"",queryString:""}}},9775:(e,n,t)=>{"use strict"
t.r(n),t.d(n,{abbreviateNumber:()=>mn,addNBSP:()=>ln,formatCurrency:()=>tn,formatNumber:()=>b,getCurrencyFormatData:()=>un,getNumberFormatData:()=>w,indiaNumberFormatter:()=>o,injectCurrencyFormatter:()=>g,injectNumberFormatter:()=>v,isNumberOrString:()=>a,parseNumber:()=>Ze,removeFormatting:()=>x,removeNBSP:()=>pn,resetCurrencyFormatter:()=>T,resetNumberFormatter:()=>_,toDecimalString:()=>L,trimFractionalNumbers:()=>nn,trimRadixPlaces:()=>en}),e=t.hmd(e)
var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,n){if(Array.isArray(e))return e
if(Symbol.iterator in Object(e))return function(e,n){var t=[],r=!0,i=!1,a=void 0
try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(t.push(o.value),!n||t.length!==n);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return t}(e,n)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}
function a(e){var n=void 0===e?"undefined":r(e)
return"number"===n?!isNaN(e-parseFloat(e)):"string"===n}var o=function(e,n){if(!a(e))return""
var t=e.toString().split("."),r=i(t,2),o=r[0],s=r[1],c=o=o.replace(/(\d)(?=(\d{2})+\d$)/g,"$1,")
return n&&(c=""+n+o),"string"==typeof s&&(c=c+"."+s),c},s=window&&window.t8?window.t8:{},c=null,d=null
Object.keys(s).length&&(c=new s.CurrencyFormatter,d=new s.NumberFormatter)
var u=c,p=d,l=null,f=null
function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:""
throw new Error("You need to inject a "+e+" formatter or have t8 available as a global, neither were found")}var y={currency:function(e,n,t){return l?l(e,n,t):(u||m("currency"),u.format(e,t,n))},number:function(){var e
return f?f.apply(void 0,arguments):(p||m("number"),(e=p).format.apply(e,arguments))}}
function h(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r]
return y[e].apply(y,t)}function g(e){var n=void 0===e?"undefined":r(e)
if(!e||"function"!==n)throw new Error("Expected function for currency formatter, got "+n)
l=e}function v(e){var n=void 0===e?"undefined":r(e)
if(!e||"function"!==n)throw new Error("Expected function for number formatter, got "+n)
f=e}function _(){f=null}function T(){l=null}function b(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en_US"
return"en_IN"===n?o(e):h("number",e,n)}var E="12345678.91",k={},A={en_US:["K","M","B"],zh_CN:["K","M","B"],en_IN:["K","Lakh","cr"]},S=["en_US","zh_CN"],C=["en_IN"],I=function(e){return Math.pow(10,3*(e+1))},R=function(e){return 0===e?1e3:Math.pow(10,2*(e+1.5))},O=function(){}
function M(e,n){var t=function(e){return[",","."," ",String.fromCharCode(160),"'"].reduce((function(n,t){return e.split(t).length>=3?t:n}))}(e),r=function(e){return[",","."].reduce((function(n,t){return 2===e.split(t).length?t:n}))}(e),i=function(e,n){return 4===e.split(n).length?"india":"thousands"}(e,t),a=function(e){return A[e]||[]}(n),o=function(e){return S.indexOf(e)>-1?I:C.indexOf(e)>-1?R:O}(n)
return{delimiter:t,radixMark:r,delimiterStyle:i,abbreviations:a,abbreviateOn:o}}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en_US",n=arguments[1],t=e,r=k[t]
if(r)return r
var i=M(b(E,e,n),e)
return k[t]=i,i}var N=function(e){return function(e){return/[a-z][_-][A-Z]/g.test(e)}(e)},P=function(e){return w(e)},D=function(e){return a(e)}
function U(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",t=x(e,n)
return t.replace(new RegExp("\\"+n,"g"),".")}function x(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",t=new RegExp("((&#(39|92|61);)|[^\\d\\"+n+"])","g")
return e.replace(t,"")}function L(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"."
if(!D(e))return""
var t=n
if(N(n)){var r=P(n)
t=r.radixMark}return U(e,t)}var F="object"==typeof global&&global&&global.Object===Object&&global,B="object"==typeof self&&self&&self.Object===Object&&self,q=F||B||Function("return this")(),j=q.Symbol,V=Object.prototype,H=V.hasOwnProperty,G=V.toString,K=j?j.toStringTag:void 0,$=Object.prototype.toString,W=j?j.toStringTag:void 0
function Q(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":W&&W in Object(e)?function(e){var n=H.call(e,K),t=e[K]
try{e[K]=void 0
var r=!0}catch(e){}var i=G.call(e)
return r&&(n?e[K]=t:delete e[K]),i}(e):function(e){return $.call(e)}(e)}function z(e){var n=typeof e
return null!=e&&("object"==n||"function"==n)}function Y(e){if(!z(e))return!1
var n=Q(e)
return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}var X,J=q["__core-js_shared__"],Z=(X=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+X:"",ee=Function.prototype.toString,ne=/^\[object .+?Constructor\]$/,te=Function.prototype,re=Object.prototype,ie=te.toString,ae=re.hasOwnProperty,oe=RegExp("^"+ie.call(ae).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),se=function(){try{var e=function(e){return!(!z(e)||(n=e,Z&&Z in n))&&(Y(e)?oe:ne).test(function(e){if(null!=e){try{return ee.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))
var n}(t=null==(n=Object)?void 0:n.defineProperty)?t:void 0
return e({},"",{}),e}catch(e){}var n,t}()
function ce(e,n,t){"__proto__"==n&&se?se(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}function de(e,n){return e===n||e!=e&&n!=n}var ue=Object.prototype.hasOwnProperty
function pe(e,n,t){var r=e[n]
ue.call(e,n)&&de(r,t)&&(void 0!==t||n in e)||ce(e,n,t)}function le(e){return e}function fe(e,n,t){switch(t.length){case 0:return e.call(n)
case 1:return e.call(n,t[0])
case 2:return e.call(n,t[0],t[1])
case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}var me,ye,he,ge=Math.max,ve=se?function(e,n){return se(e,"toString",{configurable:!0,enumerable:!1,value:(t=n,function(){return t}),writable:!0})
var t}:le,_e=Date.now,Te=(me=ve,ye=0,he=0,function(){var e=_e(),n=16-(e-he)
if(he=e,n>0){if(++ye>=800)return arguments[0]}else ye=0
return me.apply(void 0,arguments)})
function be(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ee(e){return null!=e&&be(e.length)&&!Y(e)}var ke=/^(?:0|[1-9]\d*)$/
function Ae(e,n){var t=typeof e
return!!(n=null==n?9007199254740991:n)&&("number"==t||"symbol"!=t&&ke.test(e))&&e>-1&&e%1==0&&e<n}var Se=Object.prototype
function Ce(e){var n=e&&e.constructor
return e===("function"==typeof n&&n.prototype||Se)}function Ie(e){return null!=e&&"object"==typeof e}function Re(e){return Ie(e)&&"[object Arguments]"==Q(e)}var Oe=Object.prototype,Me=Oe.hasOwnProperty,we=Oe.propertyIsEnumerable,Ne=Re(function(){return arguments}())?Re:function(e){return Ie(e)&&Me.call(e,"callee")&&!we.call(e,"callee")},Pe=Array.isArray,De="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ue=De&&e&&!e.nodeType&&e,xe=Ue&&Ue.exports===De?q.Buffer:void 0,Le=(xe?xe.isBuffer:void 0)||function(){return!1},Fe={}
Fe["[object Float32Array]"]=Fe["[object Float64Array]"]=Fe["[object Int8Array]"]=Fe["[object Int16Array]"]=Fe["[object Int32Array]"]=Fe["[object Uint8Array]"]=Fe["[object Uint8ClampedArray]"]=Fe["[object Uint16Array]"]=Fe["[object Uint32Array]"]=!0,Fe["[object Arguments]"]=Fe["[object Array]"]=Fe["[object ArrayBuffer]"]=Fe["[object Boolean]"]=Fe["[object DataView]"]=Fe["[object Date]"]=Fe["[object Error]"]=Fe["[object Function]"]=Fe["[object Map]"]=Fe["[object Number]"]=Fe["[object Object]"]=Fe["[object RegExp]"]=Fe["[object Set]"]=Fe["[object String]"]=Fe["[object WeakMap]"]=!1
var Be="object"==typeof exports&&exports&&!exports.nodeType&&exports,qe=Be&&e&&!e.nodeType&&e,je=qe&&qe.exports===Be&&F.process,Ve=function(){try{return qe&&qe.require&&qe.require("util").types||je&&je.binding&&je.binding("util")}catch(e){}}(),He=Ve&&Ve.isTypedArray,Ge=He?function(e){return function(n){return e(n)}}(He):function(e){return Ie(e)&&be(e.length)&&!!Fe[Q(e)]},Ke=Object.prototype.hasOwnProperty,$e=function(e,n){return function(t){return e(n(t))}}(Object.keys,Object),We=Object.prototype.hasOwnProperty
var Qe,ze=Object.prototype.hasOwnProperty,Ye=(Qe=function(e,n){if(Ce(n)||Ee(n))!function(e,n,t,r){var i=!t
t||(t={})
for(var a=-1,o=n.length;++a<o;){var s=n[a],c=void 0
void 0===c&&(c=e[s]),i?ce(t,s,c):pe(t,s,c)}}(n,function(e){return Ee(e)?function(e,n){var t=Pe(e),r=!t&&Ne(e),i=!t&&!r&&Le(e),a=!t&&!r&&!i&&Ge(e),o=t||r||i||a,s=o?function(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t)
return r}(e.length,String):[],c=s.length
for(var d in e)!Ke.call(e,d)||o&&("length"==d||i&&("offset"==d||"parent"==d)||a&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||Ae(d,c))||s.push(d)
return s}(e):function(e){if(!Ce(e))return $e(e)
var n=[]
for(var t in Object(e))We.call(e,t)&&"constructor"!=t&&n.push(t)
return n}(e)}(n),e)
else for(var t in n)ze.call(n,t)&&pe(e,t,n[t])},function(e,n){return Te(function(e,n,t){return n=ge(void 0===n?e.length-1:n,0),function(){for(var r=arguments,i=-1,a=ge(r.length-n,0),o=Array(a);++i<a;)o[i]=r[n+i]
i=-1
for(var s=Array(n+1);++i<n;)s[i]=r[i]
return s[n]=t(o),fe(e,this,s)}}(e,void 0,le),e+"")}((function(e,n){var t=-1,r=n.length,i=r>1?n[r-1]:void 0,a=r>2?n[2]:void 0
for(i=Qe.length>3&&"function"==typeof i?(r--,i):void 0,a&&function(e,n,t){if(!z(t))return!1
var r=typeof n
return!!("number"==r?Ee(t)&&Ae(n,t.length):"string"==r&&n in t)&&de(t[n],e)}(n[0],n[1],a)&&(i=r<3?void 0:i,r=1),e=Object(e);++t<r;){var o=n[t]
o&&Qe(e,o)}return e})))
function Xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".",n=[".",",","s","'"]
return n.splice(n.indexOf(e),1),n.join("\\")}function Je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".",n=Xe(e)
return new RegExp("([^,\\.\\d]*)(["+n+"\\d]*\\d+)(\\"+e+"?)(\\d*)(\\D*)")}function Ze(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",t=["","","","",""]
if(!a(e))return t
var r=Je(n),i=r.exec(e)
return i?(i.shift(),i.map((function(e){return e||""}))):t}function en(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",t=arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.keepTrailingRadixMark,s=void 0!==o&&o
if(!a(e))return""
var c=e.toString(),d=Ze(c,n),u=i(d,5),p=u[0],l=u[1],f=u[2],m=u[3],y=u[4],h=t
return a(h)&&""!==h&&(h=Number(h)),0===h?""+p+l+y:s&&""===m?""+p+l+f+y:(h&&(m=m.slice(0,h)),""===m?""+p+l+y:""+p+l+f+m+y)}function nn(e,n,t,r){return en(e,w(n).radixMark,t,r)}function tn(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en_US",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"USD"
if("en_IN"===n){var r=un("en_US",t),i=r.currencySymbol,a=r.radixPlaces,s=r.radixMark,c=en(e,s,a)
return o(c,i)}return h("currency",e,n,t)}var rn="12345678.91",an={}
function on(e){return Number(e.substring(0,1))?"after":"before"}function sn(e,n,t){var r=new RegExp("[^\\d\\"+n+"\\"+t+"\\s]+"),i=e.match(r)
return i?i[0]:""}function cn(e,n){var t=n.replace("$","\\$"),r=new RegExp("\\s?"+t+"\\s?"),i=e.match(r)
return i?i[0]:n}function dn(e,n){var t=new RegExp("\\"+n+"(\\d+)"),r=e.match(t)
return r?r[1].length:0}function un(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en_US",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD",t=arguments[2],r=e+":"+n,i=an[r]
if(i)return i
var a=w(e),o=a.radixMark,s=a.delimiter,c=tn(rn,e,n,t),d=on(c),u=sn(c,o,s),p=cn(c,u),l=dn(c,o),f=Ye({},a,{currencySymbolLocation:d,currencySymbol:u,currencySymbolWithWhitespace:p,radixPlaces:l})
return an[r]=f,f}function pn(e){return e.replace(/\s/g,(function(){return" "}))}function ln(e){var n=String.fromCharCode(160)
return e.replace(/\s/g,(function(){return n}))}function fn(e,n,t){for(var r=n.length-1;r>=0;r--){var i=t(r)
if(i<=e){var a=n[r],o=e/i,s=Math.round(e/i)
return Math.floor(o)!==o&&r>0?[o.toFixed(1),a]:[s.toString(),a]}}return[e.toString(),""]}function mn(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en_US"
if(!a(e))return""
var t=w(n),r=t.radixMark,o=t.abbreviations,s=t.abbreviateOn
if(!o.length)return e
var c=Ze(e,r),d=i(c,5),u=d[0],p=d[1],l=d[2],f=d[3],m=d[4],y=L(p,r),h=fn(y,o,s),g=i(h,2),v=g[0],_=g[1]
return v=v.replace(".",r),_?""+u+v+_+m:""+u+v+_+l+f+m}},1365:e=>{for(var n=[],t=0;t<256;++t)n[t]=(t+256).toString(16).substr(1)
e.exports=function(e,t){var r=t||0,i=n
return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},7969:e=>{var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)
if(n){var t=new Uint8Array(16)
e.exports=function(){return n(t),t}}else{var r=new Array(16)
e.exports=function(){for(var e,n=0;n<16;n++)0==(3&n)&&(e=4294967296*Math.random()),r[n]=e>>>((3&n)<<3)&255
return r}}},3503:(e,n,t)=>{var r=t(7969),i=t(1365)
e.exports=function(e,n,t){var a=n&&t||0
"string"==typeof e&&(n="binary"===e?new Array(16):null,e=null)
var o=(e=e||{}).random||(e.rng||r)()
if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n)for(var s=0;s<16;++s)n[a+s]=o[s]
return n||i(o)}},8389:(e,n,t)=>{"use strict"
t.r(n),t.d(n,{default:()=>F})
var r=t(9705),i=t.n(r)
class a{constructor(){const e=this.states={PENDING:!0,STARTED:!0,PAUSED:!0,COMPLETED:!1,FAILED:!1,CANCELLED:!1}
this.is={},Object.freeze(e),Object.keys(e).forEach((e=>{this.is[e]=!1,this[e]=e})),this.set(this.PENDING)}get(){return this.state}isFrozen(){return Object.isFrozen(this)}set(e){return e===this.state?Promise.resolve(e):Object.isFrozen(this)?Promise.reject(new Error(`[StateManager] cannot change immutable state '${this.state}' to '${e}'`)):this.states.hasOwnProperty(e)?(this.state&&(this.is[this.state]=!1),this.is[e]=!0,this.state=e,this.states[e]||Object.freeze(this),Promise.resolve(e)):Promise.reject(new Error(`[StateManager] cannot set invalid state: ${e}`))}}var o=t(3503),s=t.n(o)
class c extends(i()){constructor(){super(),this.reset()}set(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0
this.progress=e-(this.loaded||0),this.loaded=e,this.completed=n,this.active=this.loaded-this.completed,this.emit("change",this)}add(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0
this.set(this.loaded+e,this.completed+n)}done(){this.set(this.loaded,this.loaded)}reset(){this.progress=0,this.loaded=0,this.completed=0,this.active=0}}class d extends(i()){constructor(e){let{beforeSend:n,body:t,headers:r,method:i,mimeType:a,timeout:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
if(!e)throw new Error("[Request] an action must be provided")
super(),this.action=e,this.beforeSend=n,this.body=t,this.headers=r||{},this.method=i||"GET",this.mimeType=a,this.timeout=o,this.progress=new c,this.progress.on("change",(()=>{this.emit("progress",this.progress)})),this.reset()}send(){const e=this.request=new XMLHttpRequest
return this.attempts++,new Promise(((n,t)=>{const r=e=>{let{loaded:n}=e
this.progress.set(n)},i=e=>{r({loaded:0}),t(e)}
e.open(this.method,this.action),function(e,n){Object.keys(n).forEach((t=>{e.setRequestHeader(t,n[t])}))}(e,this.headers),e.onerror=()=>{i(new Error("[Request] a network error occurred"))},e.onabort=()=>{i(new Error("[Request] the request was aborted"))},e.onload=()=>{const{status:t,responseText:r}=e
t>=200&&t<300||304===t?this.state.set(this.state.COMPLETED).then((()=>{this.progress.done(),n(r)})):i(new Error(`[Request] server responded with status ${t}`))},this.timeout&&(e.timeout=this.timeout),this.mimeType&&e.overrideMimeType(this.mimeType),e.upload.onprogress=r
const a=new Promise((e=>{this.state.isFrozen()||(this.state.is.PAUSED?this.on("resume",e):e())}))
a.then((()=>{this.beforeSend&&this.beforeSend(e),e.send(this.body)}))}))}abort(){return this.state.set(this.state.CANCELLED).then((()=>{this.progress.reset(),this.request&&this.request.abort()}))}pause(){return this.state.set(this.state.PAUSED).then((()=>{this.emit("pause")}))}resume(){return this.state.set(this.state.STARTED).then((()=>{this.emit("resume")}))}reset(){return this.attempts=0,this.progress.reset(),this.state=new a,this}}class u extends d{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
if(!n.body)throw new Error("[UploadRequest] a body must be provided")
n.method=n.method||"PUT",super(e,n)}}function p(e,n){["then","catch"].forEach((t=>{e[t]=n[t].bind(n)}))}function l(e){return e&&"object"==typeof e&&!Array.isArray(e)}function f(e){return m({},e)}function m(e){if(l(e)){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r]
t.forEach((n=>{l(n)&&Object.keys(n).forEach((t=>{l(n[t])?l(e[t])?m(e[t],n[t]):e[t]=f(n[t]):e[t]=n[t]}))}))}return e}class y{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
this.defaults=e,Object.freeze(this)}extend(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t]
return m({},this.defaults,...n)}}const h={done:s()()},g=new y({action:"/",method:"PUT",headers:{},configure:null,maxConcurrentPartsPerFile:1/0,maxRetriesPerPart:0,retryDelay:0,timeout:0})
function v(){return this.consumer.next().then((e=>{if(e)return Promise.resolve(this.configure.call(this,e,this.config)||this.config).then((n=>{const{action:t,beforeSend:r,headers:i,method:a,mimeType:o,timeout:s}=n,c=new u(t,{body:e.blob,beforeSend:r,headers:i,method:a,mimeType:o,timeout:s})
return c.on("progress",k.bind(this)),c}))}),(()=>{}))}function _(e){e.send().then(T.bind(this,e),b.bind(this,e))}function T(e){this.emit("part:success",e),this.pending.delete(e),E.call(this)}function b(e,n){if(this.emit("part:error",n,e),4===Math.floor(e.request.status/100)||e.attempts>this.config.maxRetriesPerPart)C.call(this)
else{const n=_.bind(this,e)
setTimeout(n,this.config.retryDelay)}}function E(){this.pending.size<this.config.maxConcurrentPartsPerFile&&!this.state.isFrozen()&&v.call(this).then((e=>{e?(this.state.is.PAUSED&&e.pause(),this.results.push(e),this.pending.add(e),_.call(this,e)):this.pending.size||this.emit(h.done)}))}function k(e){this.progress.add(e.progress,e.completed),this.emit("progress",this.progress),A.call(this)}function A(){this.emit("status",this.status())}function S(e){return this.state.set(e).then((()=>(this.state.is.COMPLETED&&this.progress.done(),A.call(this),this.status())))}function C(e){return S.call(this,e||this.state.FAILED).then((()=>{this.pending.forEach((e=>{e.abort(),this.pending.delete(e)})),this.emit(h.done)}))}function I(){this.state=new a,this.consumer.reset(),this.progress.reset(),this.pending.clear(),this.results=[],p(this,R.call(this))}function R(){return new Promise(((e,n)=>{this.on(h.done,(()=>{S.call(this,this.state.COMPLETED).then((()=>{e(O(this))})).catch((()=>{n(O(this))}))}))}))}function O(e){return{meta:e.consumer.meta,results:e.results,status:e.status()}}class M extends(i()){constructor(e,n,t){super(),this.config=n=g.extend(n),this.configure=n.configure||function(){},this.meta=t,this.results=[],this.consumer=e,this.file=e.file,this.size=e.size,this.id=e.id||s()(),this.state=new a,this.progress=new c,this.pending=new Set,e.length===1/0&&(this.config.maxConcurrentPartsPerFile=1),p(this,R.call(this))}start(){return S.call(this,this.state.STARTED).then((()=>{this.pending.forEach((e=>{e.resume()}))
let e=Math.min(this.consumer.length,this.config.maxConcurrentPartsPerFile)-this.pending.size
for(;e--;)E.call(this)}))}reset(){return C.call(this).then(I.bind(this),I.bind(this))}retry(){return this.state.isFrozen()?this.state.is.COMPLETED?Promise.reject(new Error("[Uploader] cannot retry an upload that completed")):this.reset().then((()=>(this.start(),this))):Promise.reject(new Error("[Uploader] cannot retry a pending upload"))}resume(){return S.call(this,this.state.STARTED).then((()=>{this.pending.forEach((e=>{e.resume()}))}))}pause(){return S.call(this,this.state.PAUSED).then((()=>{this.pending.forEach((e=>{e.pause()}))}))}cancel(){return C.call(this,this.state.CANCELLED)}toggle(){return this.state.is.PAUSED?this.resume():this.pause()}status(){return{state:this.state.get(),progress:this.progress,total:this.size}}}const w=new y({maxConcurrentFiles:1/0})
function N(){if(this.queue.size&&this.pending.size<this.config.maxConcurrentFiles){let e
if(this.queue.forEach((n=>{e||(e=n)})),e){this.pending.add(e),this.queue.delete(e),this.state.is.STARTED&&e.start()
const n=()=>{this.delete(e)}
e.then(n,n)}}}function P(e){this.queue.add(e),N.call(this)}class D extends(i()){constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
if("function"!=typeof e.consume)throw new Error("[UploadManager] a consume() function is required")
super(),this.consume=e.consume,this.config=w.extend(e),this.pending=new Set,this.queue=new Set,this.state=new a}add(e,n,t){const r=(e=e&&("length"in e?Array.from(e):[e])||[]).filter(Boolean).map((e=>{const r=this.consume.call(this,e,n)
return Promise.resolve(r).then((()=>{const e=new M(r,this.config,n)
return"function"==typeof t&&t(e),this.emit("upload",e),P.call(this,e),e}))}))
return Promise.all(r)}delete(e){this.pending.delete(e),this.queue.delete(e),N.call(this)}start(){return this.state.set(this.state.STARTED).then((()=>{this.pending.forEach((e=>{e.start()}))}))}resume(){return this.start()}pause(){this.state.set(this.state.PAUSED).then((()=>{this.pending.forEach((e=>{e.pause()}))}))}cancel(){return this.state.set(this.state.STARTED).then((()=>{this.queue.clear(),this.pending.forEach((e=>{this.pending.delete(e),e.cancel()}))}))}toggle(){this.state.is.PAUSED?this.resume():this.pause()}}class U{constructor(e,n,t,r){this.file=t,this.blob=e,this.index=n,this.id=s()(),this.meta=r}}class x extends class{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0
this.id=n.id||s()(),this.file=e,this.size=e.size,this.meta=t,this.length=1/0}next(){throw new Error("[AbstractConsumer] Consumer must implement #next() method")}reset(){throw new Error("[AbstractConsumer] Consumer must implement #reset() method")}}{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0
if(!n.getUploadMetaData)throw new Error("a getUploadMetaData() function is required")
super(e,n,t),this.length=1/0,this.getUploadMetaData=()=>n.getUploadMetaData(e,t),this.reset()}next(){return this.then((()=>{if(this.index++,this.index>=this.length)return Promise.reject()
switch(this.meta.type){case"SINGLE":return Promise.resolve(new U(this.file,0,this.file,this.meta))
case"MULTIPART":const{partUploadRequests:e}=this.meta,n=e[this.index]
if(!n)return Promise.reject()
const t=this.file.slice(n.firstByte,n.lastByte+1,this.file.type)
return Promise.resolve(new U(t,this.index,this.file,n))
default:return Promise.reject(new Error(`TODO: unknown upload type '${this.meta.type}'`))}}))}reset(){return this.index=-1,this.meta={},p(this,this.getUploadMetaData().then((e=>{this.meta=e,this.length=e.partUploadRequests?e.partUploadRequests.length:1}))),this}}const L={headers:{},mimeType:"text/plain",getUploadMetaData(){}}
class F extends D{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
e=m({},L,e,{consume:(n,t)=>new x(n,{headers:e.headers,getUploadMetaData:e.getUploadMetaData},t),configure(e){const{meta:n}=this.consumer,{type:t}=n,r=e=>m({},this.config,e)
if("SINGLE"===t){const{singleUploadUrl:e,singleUploadHeaders:t}=n
return r({action:e,headers:t})}if("MULTIPART"===t){const{headers:n,uploadUrl:t}=e.meta
return r({action:t,headers:n})}throw new Error(`TODO: unknown type '${t}'`)}}),super(e)}}},1917:(e,n,t)=>{"use strict"
function r(e,n){var t=Object.keys(e)
if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e)
n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{}
n%2?r(Object(t),!0).forEach((function(n){d(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function s(e,n){for(var t=0;t<n.length;t++){var r=n[t]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,n,t){return n&&s(e.prototype,n),t&&s(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,n){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1
if(Reflect.construct.sham)return!1
if("function"==typeof Proxy)return!0
try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e,n,t){return(f=l()?Reflect.construct.bind():function(e,n,t){var r=[null]
r.push.apply(r,n)
var i=new(Function.bind.apply(e,r))
return t&&p(i,t.prototype),i}).apply(null,arguments)}function m(e){var n="function"==typeof Map?new Map:void 0
return(m=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e
var t
if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function")
if(void 0!==n){if(n.has(e))return n.get(e)
n.set(e,r)}function r(){return f(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),p(r,e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return e}function h(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]
if(null!=t){var r,i,a=[],o=!0,s=!1
try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==t.return||t.return()}finally{if(s)throw i}}return a}}(e,n)||v(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,n){if(e){if("string"==typeof e)return _(e,n)
var t=Object.prototype.toString.call(e).slice(8,-1)
return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_(e,n):void 0}}function _(e,n){(null==n||n>e.length)&&(n=e.length)
for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t]
return r}function T(e){var n=function(e,n){if("object"!=typeof e||null===e)return e
var t=e[Symbol.toPrimitive]
if(void 0!==t){var r=t.call(e,"string")
if("object"!=typeof r)return r
throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e)
return"symbol"==typeof n?n:String(n)}t.r(n),t.d(n,{ConversationsIterable:()=>dn,MDError:()=>Pe,Mailbox:()=>Uc,MailboxConnection:()=>xc,apiErrors:()=>Se,clearStateForTesting:()=>nn,clientErrors:()=>Ce,connectToMailbox:()=>Lc,conversationStateIdentifierIs:()=>Be,conversationStateUrnIs:()=>Le,getConversationById:()=>cr,getConvoStateFromMessageUrn:()=>G,getRealtimeConnectionHeaders:()=>Si,getRealtimeQueryMap:()=>Ai,getSyncMessagesByConversationId:()=>dr,graphQlErrors:()=>Ie,hasMessageData:()=>Ve,initialSyncConversations:()=>ur,isAttributedTextFragment:()=>H,isCommonTimeAPIError:()=>we,isConversationClientId:()=>F,isConversationUrn:()=>B,isError:()=>Oe,isIdentifier:()=>j,isMDError:()=>Me,isMemberParticipant:()=>V,isSavedConversationState:()=>L,isUrn:()=>q,messageStateClientIdIs:()=>je,realtimeErrors:()=>Re,rejectAsMDResponseError:()=>De,sendConversationUpdate:()=>fr,sendMessageToConversation:()=>yr})
var b=function(e,n){e.forEach((function(e){return e.next(n)}))},E=function(e){return null!=e},k=function(e){return null==e},A=function(e,n,t){return t.map((function(t,r){return e(t,r)?n(t):t}))},S=function(e){return Object.fromEntries(e)},C=function(e){return function(n){return n.reduce((function(n,t){return e(t)?n[0].push(t):n[1].push(t),[n[0],n[1]]}),[[],[]])}},I=function(e){return function(n){return!1===e.includes(n)}},R=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]
return n&&0!==n.length?[].concat(g(e),g(n.filter(I(e)))):e},O=function(e){return!e},M=function(e){return Object.keys(e)},w=function(e){return Object.values(e)},N=function(e,n,t){var r=new Map(e)
return r.set(n,t),r},P=function(e,n){var t=e[n],r=function(e,n){if(null==e)return{}
var t,r,i=function(e,n){if(null==e)return{}
var t,r,i={},a=Object.keys(e)
for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t])
return i}(e,n)
if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e)
for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}(e,[n].map(T))
return t?r:e},D=function(e,n){if(e.has(n))return e
var t=new Set(e)
return Object.freeze(t.add(n))},U=function(e,n){var t=new Set(e)
return t.delete(n)?Object.freeze(t):e},x=function(e){return"string"==typeof e},L=function(e){return void 0!==e.entityUrn},F=function(e){return/^[a-z0-9]+-[a-z0-9]+-[a-z0-9]+-[a-z0-9]+-[a-z0-9]+$/.test(e)},B=function(e){return/^urn:li:msg_conversation:.*$/.test(e)},q=function(e){return x(e)&&e.startsWith("urn:")},j=function(e){return q(e)||x(e)&&F(e)},V=function(e){return"MEMBER"===e.kind},H=function(e){return void 0!==e.text&&"string"==typeof e.text},G=function(e,n){return e.find((function(e){return void 0!==e.messages.getByIdentifier(n)}))}
function K(e,n){var t=Object.keys(e)
if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e)
n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function $(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{}
n%2?K(Object(t),!0).forEach((function(n){Y(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):K(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function W(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Q(e,n){for(var t=0;t<n.length;t++){var r=n[t]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,n,t){return n&&Q(e.prototype,n),t&&Q(e,t),e}function Y(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function X(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]
if(null!=t){var r,i,a=[],o=!0,s=!1
try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==t.return||t.return()}finally{if(s)throw i}}return a}}(e,n)||Z(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e){return function(e){if(Array.isArray(e))return ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,n){if(e){if("string"==typeof e)return ee(e,n)
var t=Object.prototype.toString.call(e).slice(8,-1)
return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ee(e,n):void 0}}function ee(e,n){(null==n||n>e.length)&&(n=e.length)
for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t]
return r}for(var ne,te,re,ie=new Uint8Array(16),ae=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,oe=[],se=0;se<256;++se)oe.push((se+256).toString(16).substr(1))
function ce(e,n,t){var r=(e=e||{}).random||(e.rng||function(){if(!ne&&!(ne="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")
return ne(ie)})()
if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0
for(var i=0;i<16;++i)n[t+i]=r[i]
return n}return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(oe[e[n+0]]+oe[e[n+1]]+oe[e[n+2]]+oe[e[n+3]]+"-"+oe[e[n+4]]+oe[e[n+5]]+"-"+oe[e[n+6]]+oe[e[n+7]]+"-"+oe[e[n+8]]+oe[e[n+9]]+"-"+oe[e[n+10]]+oe[e[n+11]]+oe[e[n+12]]+oe[e[n+13]]+oe[e[n+14]]+oe[e[n+15]]).toLowerCase()
if(!function(e){return"string"==typeof e&&ae.test(e)}(t))throw TypeError("Stringified UUID is invalid")
return t}(r)}!function(e){e.invalid="com.linkedin.realtimefrontend.Invalid",e.clientConnection="com.linkedin.realtimefrontend.ClientConnection",e.heartbeat="com.linkedin.realtimefrontend.Heartbeat",e.decoratedEvent="com.linkedin.realtimefrontend.DecoratedEvent"}(te||(te={})),function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSE=2]="CLOSE"}(re||(re={}))
var de="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}
function ue(e){var n={exports:{}}
return e(n,n.exports),n.exports}var pe=ue((function(e,n){e.exports=function(){var e="List(",n="(",t=/^(\/[^?]+)\??(.*)$/,r={extractPathAndQueryStringFromUrl:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=t.exec(e)
return n?{path:n[1],queryString:n[2]}:{path:"",queryString:""}}},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=/[,()':]/g,o=/[,()':]/,s={encode:function(e){if("object"!==(void 0===(e=JSON.parse(JSON.stringify(e)))?"undefined":i(e)))throw new Error("You must pass either an array or an object to the encode function.")
return this._process(e,!1)},reducedEncode:function(e){if("object"!==(void 0===(e=JSON.parse(JSON.stringify(e)))?"undefined":i(e)))throw new Error("You must pass either an array or an object to the reducedEncode function.")
return this._process(e,!0)},paramEncode:function(e){if(e=JSON.parse(JSON.stringify(e)),Array.isArray(e)||"object"!==(void 0===e?"undefined":i(e)))throw new Error("You must pass an object to the paramEncode function. Use arrayParamEncode.")
var n=[]
for(var t in e)e.hasOwnProperty(t)&&n.push(this._processPrimitive(t)+"="+this._process(e[t],!1))
return n.join("&")},arrayParamEncode:function(e){return this.paramEncode(this._arrayParamEncode(e))},_arrayParamEncode:function(e){if(e=JSON.parse(JSON.stringify(e)),!Array.isArray(e))throw new Error("You must pass an array to the arrayParamEncode function.")
return e.reduce((function(e,n){if(!n||!n.hasOwnProperty("name")||!n.hasOwnProperty("value"))throw new Error("Objects passed to the arrayParamEncode function must have name and value properties.")
if("object"===i(n.value)&&null!==n.value)throw new Error("Only primitives may be passed to arrayParamEncode as item values.")
var t=n.name,r=e.hasOwnProperty(t)
return r?r&&"object"===i(e[t])&&null!==e[t]?e[t].push(n.value):e[t]=[e[t],n.value]:e[t]=n.value,e}),{})},_process:function(e,n){return Array.isArray(e)?this._processArray(e,n):"object"===(void 0===e?"undefined":i(e))&&null!==e?this._processObject(e,n):this._processPrimitive(e,n)},_processArray:function(n,t){for(var r=new Array(n.length),i=0;i<n.length;i++)r[i]=this._process(n[i],t)
return e+r.join(",")+")"},_processObject:function(e,t){var r=[]
for(var i in e)e.hasOwnProperty(i)&&r.push(this._processPrimitive(i,t)+":"+this._process(e[i],t))
return n+r.join(",")+")"},_processPrimitive:function(e,n){return""===e?"''":n&&"string"==typeof e&&o.test(e)?e.replace(a,escape):n?e:encodeURIComponent(e).replace(a,escape)}},c=/(%2C|%28|%29|%27|%3A)/g,d=/(%2C|%28|%29|%27|%3A)/
function u(e,n,t){var r=2<arguments.length&&void 0!==t?t:0
return e.indexOf(n,r)===r}function p(e,n){if(e[e.length-1]!==n)throw new Error("Input has unbalanced prefix and suffix: "+e)}function l(e,n){for(var t=1<arguments.length&&void 0!==n?n:0,r=0,i=!1;t<e.length;){var a=e[t]
if("("===a&&(r++,i=!0),")"===a&&r--,0===r&&i)break
t++}return t}function f(e,n){return n?d.test(e)&&(e=e.replace(c,unescape)):e=decodeURIComponent(e),void 0===e||"''"===e?"":e}var m={paramDecode:function(e){var n=this
return e.split("&").reduce((function(e,t){if(!t.length)return e
if(0===t.indexOf("="))return e
var r=function(e,n){if(Array.isArray(e))return e
if(Symbol.iterator in Object(e))return function(e,n){var t=[],r=!0,i=!1,a=void 0
try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(t.push(o.value),2!==t.length);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return t}(e)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}(t.split("=")),i=r[0],a=r[1]
return"''"===i&&(i=""),void 0!==a&&""!==a||(a="''"),e[decodeURIComponent(i)]=n._decode(a),e}),{})},decode:function(e){return this._decode(e,!1)},reducedDecode:function(e){return this._decode(e,!0)},_decode:function(t,r){return void 0!==t&&"''"!==t||(t=""),u(t,e)?(p(t,")"),this._decodeList(t.substring(5,t.length-1),r)):u(t,n)?(p(t,")"),this._decodeObject(t.substring(1,t.length-1),r)):f(t,r)},_decodeList:function(t,r){for(var i=[],a=0;a<t.length;)if(u(t,e,a)||u(t,n,a)){var o=l(t,a)
i.push(this._decode(t.substring(a,o+1),r)),a=o+2}else{var s=t.indexOf(",",a)
s<0&&(s=t.length),i.push(f(t.substring(a,s),r)),a=s+1}return i},_decodeObject:function(t,r){for(var i={},a=0;a<t.length;){var o=t.indexOf(":",a),s=f(t.substring(a,o),r)
if(a=o+1,t.startsWith(e,a)||t.startsWith(n,a)){var c=l(t,a)
i[s]=this._decode(t.substring(a,c+1),r),a=c+2}else{var d=t.indexOf(",",a)
d<0&&(d=t.length)
var u=f(t.substring(a,d),r)
i[s]=u,a=d+1}}return i}},y=Object.freeze({S_100_CONTINUE:100,S_101_SWITCHING_PROTOCOLS:101,S_200_OK:200,S_201_CREATED:201,S_202_ACCEPTED:202,S_203_NON_AUTHORITATIVE_INFORMATION:203,S_204_NO_CONTENT:204,S_205_RESET_CONTENT:205,S_206_PARTIAL_CONTENT:206,S_207_MULTI_STATUS:207,S_300_MULTIPLE_CHOICES:300,S_301_MOVED_PERMANENTLY:301,S_302_FOUND:302,S_303_SEE_OTHER:303,S_304_NOT_MODIFIED:304,S_305_USE_PROXY:305,S_307_TEMPORARY_REDIRECT:307,S_400_BAD_REQUEST:400,S_401_UNAUTHORIZED:401,S_402_PAYMENT_REQUIRED:402,S_403_FORBIDDEN:403,S_404_NOT_FOUND:404,S_405_METHOD_NOT_ALLOWED:405,S_406_NOT_ACCEPTABLE:406,S_407_PROXY_AUTHENTICATION_REQUIRED:407,S_408_REQUEST_TIMEOUT:408,S_409_CONFLICT:409,S_410_GONE:410,S_411_LENGTH_REQUIRED:411,S_412_PRECONDITION_FAILED:412,S_413_REQUEST_ENTITY_TOO_LARGE:413,S_414_REQUEST_URI_TOO_LONG:414,S_415_UNSUPPORTED_MEDIA_TYPE:415,S_416_REQUESTED_RANGE_NOT_SATISFIABLE:416,S_417_EXPECTATION_FAILED:417,S_422_UNPROCESSABLE_ENTITY:422,S_423_LOCKED:423,S_424_FAILED_DEPENDENCY:424,S_428_PRECONDITION_REQUIRED:428,S_429_TOO_MANY_REQUESTS:429,S_500_INTERNAL_SERVER_ERROR:500,S_501_NOT_IMPLEMENTED:501,S_502_BAD_GATEWAY:502,S_503_SERVICE_UNAVAILABLE:503,S_504_GATEWAY_TIMEOUT:504,S_505_HTTP_VERSION_NOT_SUPPORTED:505}),h="application/x-www-form-urlencoded",g=8e3
function v(e){if(Object&&Object.assign)return Object.assign.apply(Object,arguments)
if(null==e)throw new TypeError("Cannot convert undefined or null to object")
for(var n=Object(e),t=1;t<arguments.length;t++){var r=arguments[t]
if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n}function _(e){if(!0===e.forceQueryTunnel){var n=r.extractPathAndQueryStringFromUrl(e.url),t=n.path,i=n.queryString
if(i){var a=v({},e.headers,{"X-HTTP-Method-Override":e.method}),o=void 0,s=void 0
if(e.body){var c="RESTLI_"+Date.now()
s="multipart/mixed; boundary="+c,o=["--"+c,"Content-Type: "+h,"",i,"--"+c,"Content-Type: application/json","",e.body,"--"+c+"--"].join("\r\n")}else s=h,o=i
return a["Content-Type"]=s,{body:o,headers:a,method:"POST",url:t}}}var d={method:e.method,url:e.url}
return e.body&&(d.body=e.body),d}function T(){var e=document.querySelector('meta[name="isQueryTunnelRequestSupported"]')
return e&&"true"===e.getAttribute("content")||!1}function b(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=r.extractPathAndQueryStringFromUrl(e),i=t.path,a=t.queryString
if(i.length>g)throw new Error("Per AFD limitations, this request url "+e+" will not work. Please contact ask_traffic@.")
if((e.length>g||a.length>4e3)&&"GET"===n.method){var o=v({},n)
o.url=e,o.forceQueryTunnel=!0
var s=_(o)
n.method=s.method,e=s.url,n.headers=s.headers,n.body=s.body,n.data=s.body}return{url:e,request:n}}return{encoder:s,decoder:m,httpStatus:y,queryTunnel:{encodeRequest:_,isQueryTunnelSupportedForAFD:T,checkAndEncodeLongUrl:b,queryTunnelRequest:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}
return T()?b(e,n):{url:e,request:n}}},utils:r}}()})),le=ue((function(e,n){e.exports=function(){var e=new RegExp("urn:[^:]+:([a-z]\\w*)(?::(.+))?"),n=/^fs_/
function t(t){if("string"!=typeof t)throw new TypeError("URNs must be of type string, but the parameter passed to extractEntityInfoFromUrn was of type "+typeof t+".")
var r,i,a=e.exec(t)
return a&&(r=a[1].replace(n,""),i=a[2]),{id:i,type:r}}var r=/(?![^(]*\)),/
return{checkForEntityId:function(n){var t=e.exec(n)
return t?t[2]:n},extractEntityInfoFromUrn:t,urnToObject:function e(n){var i=t(n),a=i.id,o=i.type,s={}
if("("===a.charAt(0)){for(var c,d=a.substring(1,a.length-1).split(r),u=0;c=d[u];++u)0===c.indexOf("urn")&&(d[u]=e(c))
a=d}return s[o]=a,s}}}()}))
function fe(e){return void 0!==e.error&&null!==e.error}var me=function(e,n,t){return t.indexOf(e)===n},ye=function(e){return function(n){return!e.includes(n)}},he=function(e){return 5===Math.floor(e/100)},ge=function(){function e(n,t,r){var i=this
W(this,e),Y(this,"_endpoint",void 0),Y(this,"_connectionId",void 0),Y(this,"_requestHeaders",void 0),Y(this,"_serverClockTimeDiff",0),Y(this,"_lastTimeClockSynced",0),Y(this,"_recentServerClockTimeDiffs",[]),Y(this,"_mpName",void 0),Y(this,"_mpVersion",void 0),Y(this,"_clientId",void 0),Y(this,"parseResponse",(function(e,n){var t=Object.keys(e.errors||{}).filter((function(n){return!he(e.errors[n].status)})),r=Object.keys(e.errors||{}).filter((function(n){return he(e.errors[n].status)}))
return[n.filter((function(e){return!t.includes(e)&&!r.includes(e)})),t,r]})),Y(this,"clockSyncConfig",(function(){return{method:"GET",url:"".concat((e=i._endpoint,n=e.endsWith("/")?"":"/","".concat(e).concat(n,"realtime/realtimeFrontendTimestamp"))),body:[],headers:i._requestHeaders}
var e,n})),Y(this,"connectivityTrackConfig",(function(e,n){var t,r,a={isFirstHeartbeat:"FIRST_BEAT"===n,isLastHeartbeat:"FINAL_BEAT"===n,realtimeSessionId:e,mpName:i._mpName,mpVersion:i._mpVersion,clientId:i._clientId}
return{method:"POST",url:"".concat((t=i._endpoint,r=t.endsWith("/")?"":"/","".concat(t).concat(r,"realtime/realtimeFrontendClientConnectivityTracking")),"?").concat(pe.encoder.paramEncode({action:"sendHeartbeat"})),body:a,headers:$({},i._requestHeaders)}})),Y(this,"subscribeConfig",(function(e){var n,t,r=i.connectionId,a=i._requestHeaders,o=e.map((function(e){return{clientConnectionId:r,topic:e}})),s=(n=o.map((function(e){return[pe.encoder.encode(e),{}]})),Object.fromEntries?Object.fromEntries(n):J(n).reduce((function(e,n){var t=X(n,2),r=t[0],i=t[1]
return e[r]=i,e}),{}))
return{method:"PUT",url:"".concat((t=i._endpoint,"".concat(t,"/realtimeFrontendSubscriptions")),"?").concat(pe.encoder.paramEncode({ids:o})),body:s,headers:a}})),Y(this,"unsubscribeConfig",(function(e){return $($({},i.subscribeConfig(e)),{},{method:"DELETE"})})),Y(this,"apiCallSubscribe",(function(e){return i.sendRequest(i.subscribeConfig(e))})),Y(this,"apiCallUnsubscribe",(function(e){return i.sendRequest(i.unsubscribeConfig(e))})),Y(this,"apiCallClockSync",(function(){return i.sendRequest(i.clockSyncConfig())})),Y(this,"apiCallConnectivityTrack",(function(e,n){return i.sendRequest(i.connectivityTrackConfig(e,n))})),this._endpoint=n,this._connectionId=null,this._requestHeaders=t,this._mpName=r.name,this._mpVersion=r.version,this._clientId=r.id}return z(e,[{key:"connectionId",get:function(){return this._connectionId}},{key:"setConnectionId",value:function(e){e&&(this._connectionId=e)}},{key:"disconnect",value:function(){this._connectionId=null}},{key:"subscribe",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0
return new Promise((function(r,i){null!==n.connectionId?n.apiCallSubscribe(e).then((function(t){r(n.parseResponse(t,e))})).catch((function(a){var o=a.status
412!==o&&he(o)&&t<2?n.subscribe(e,t+1).then(r):i(a)})):i(new Error("RealtimeAPI: error - missing connectionID"))}))}},{key:"unsubscribe",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0
return new Promise((function(r,i){null!==n.connectionId?n.apiCallUnsubscribe(e).then((function(t){var i=n.parseResponse(t,e)
r(i)})).catch((function(a){var o=a.status
412!==o&&he(o)&&t<2?n.unsubscribe(e,t+1).then(r).catch(i):i(a)})):i(new Error("RealtimeAPI: error - missing connectionID"))}))}},{key:"getTimestamp",value:function(){return this.apiCallClockSync()}},{key:"trackActiveConnection",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ALIVE"
return this.apiCallConnectivityTrack(e,n)}},{key:"syncRealtimeServerClockTime",value:function(){var e=this,n=Date.now()
if(!(n-this._lastTimeClockSynced<86e4))return this._lastTimeClockSynced=n,this.getTimestamp().then((function(t){var r=Date.now()
e._recentServerClockTimeDiffs=e._recentServerClockTimeDiffs.filter((function(e){return r-e.syncedAt<36e5}))
var i=r-n
0===i&&(i=1),e._recentServerClockTimeDiffs.push({syncedAt:r,clockDiff:t.timestamp-(n+r)/2,weight:1/i}),e._serverClockTimeDiff=e._computeWeightedAverageOfServerClockTimeDiff(e._recentServerClockTimeDiffs)}))}},{key:"getServerClockTime",value:function(){return this._serverClockTimeDiff?Date.now()+this._serverClockTimeDiff:-1}},{key:"_computeWeightedAverageOfServerClockTimeDiff",value:function(e){var n,t=0,r=0,i=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]
if(!t){if(Array.isArray(e)||(t=Z(e))){t&&(e=t)
var r=0,i=function(){}
return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1
return{s:function(){t=t.call(e)},n:function(){var e=t.next()
return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw a}}}}(e)
try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.clockDiff,s=a.weight
t+=s*o,r+=s}}catch(e){i.e(e)}finally{i.f()}return Math.round(t/r)}},{key:"sendRequest",value:function(e){return new Promise((function(n,t){var r=$({},e)
r.body&&(r.body=JSON.stringify(r.body)),r.url.length>1e3&&(r.forceQueryTunnel=!0,r=pe.queryTunnel.encodeRequest(r))
var i=new XMLHttpRequest
i.open(r.method,r.url),Object.entries(r.headers).forEach((function(e){var n=X(e,2),t=n[0],r=n[1]
return i.setRequestHeader(t,r)})),i.onerror=function(e){t({status:i.status,message:e.message||"Realtime: request failed"})},i.onreadystatechange=function(){var e=i.status
if(i.readyState===XMLHttpRequest.DONE)if(e>=200&&e<300)try{n(i.responseText?JSON.parse(i.responseText):null)}catch(n){t({status:e,message:"Realtime: Invalid JSON in API response"})}else t({status:null!=e?e:500,message:"Realtime: API Server Error"})},i.withCredentials=!0,i.send(r.body)}))}}]),e}(),ve=function(){function e(n){W(this,e),Y(this,"_timer",0),Y(this,"_taskFunction",void 0),this._taskFunction=n}return z(e,[{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0
this._timer&&this.cancel(),this.schedule(this._taskFunction,e)}},{key:"cancel",value:function(){this._timer&&(window.clearTimeout(this._timer),this._timer=0)}},{key:"schedule",value:function(e,n){var t=this
this._timer=window.setTimeout((function(){e((function(r){return t.schedule(e,r||n)}))}),n)}}]),e}(),_e=function(){function e(n){W(this,e),Y(this,"fireEventTracking",void 0),this.fireEventTracking=n}return z(e,[{key:"fireRealtimeTracking",value:function(e,n){var t=n.topic,r=n.publisherTrackingId,i=n.trackingId,a={publisherTrackingId:r,realtimeEventId:n.id,realtimeTrackingId:i,topicUrn:t,receivedTime:n.receivedTime}
this.fireEventTracking(e,a)}}]),e}(),Te={domain:"",mpInfo:{name:"common-time",version:"3.1.0",id:"common-time"},detectMissedHeartbeat:!0,heartbeatPollInterval:15e3,heartbeatGapThreshold:3e4,sessionHeartbeat:3e5,coverageGap:18e4,acceptableErrorCount:2,alertChannelErrors:!1,maxRetryCount:2,connectHeaders:{},urlQueryParams:"?rc=1",enableCustomRetry:!1},be=function(){function e(n){var t,r=this
W(this,e),Y(this,"_options",void 0),Y(this,"_events",{}),Y(this,"_eventSourceErrorCount",0),Y(this,"_api",void 0),Y(this,"_eventSource",null),Y(this,"_eventSourceUrl",""),Y(this,"_lastHeartBeatReceivedAt",null),Y(this,"_heartBeatMonitor",void 0),Y(this,"_reconnectTask",void 0),Y(this,"_reconnectDelay",void 0),Y(this,"_realtimeTracking",void 0),Y(this,"_subscribedTopics",[]),Y(this,"_personalTopicsTypes",[]),Y(this,"_lastConnectedStatus",!1),Y(this,"_explicitlyConnected",!1),Y(this,"_autoReconnect","FAIL-ON-ERROR"),Y(this,"_timeConnectionLost",void 0),Y(this,"_boundUnloadHandler",null),Y(this,"eventSourceOnmessage",(function(e){var n,t=r.parseMessage(e),i=t.type,a=t.eventData
switch(i){case te.invalid:r.triggerEvent("error",{status:500,message:a})
break
case te.clientConnection:var o=a.id,s=a.personalTopics
if(r._api.setConnectionId(o),r._personalTopicsTypes=J(s),r._subscribedTopics.length>0&&r.restoreSubscriptions(),r._lastHeartBeatReceivedAt=Date.now(),r.triggerEvent("connect",{id:o,personalTopicsTypes:r._personalTopicsTypes}),null!==r._timeConnectionLost){var c=Date.now()-r._timeConnectionLost
r._timeConnectionLost=null,c>r.options.heartbeatGapThreshold&&r.triggerEvent("reconnected",c)}break
case te.heartbeat:r._lastHeartBeatReceivedAt=Date.now(),r.triggerEvent("heartbeat",r._lastHeartBeatReceivedAt)
break
case te.decoratedEvent:default:var d=(n=r._personalTopicsTypes,function(e){var t=le.extractEntityInfoFromUrn(e).type
return n.includes(t)})
if(r._subscribedTopics.includes(a.topic)||d(a.topic)){if(r.triggerEvent("topic",$({},a)),r.realtimeTracking){var u=r.serverClockTime
a.receivedTime=u,r.realtimeTracking.fireRealtimeTracking("RealtimeEventDeliveredEvent",a)}}else r.triggerEvent("error",{status:500,message:'Received a message for "'.concat(a.topic,'" that was not subscribed to')})}})),Y(this,"triggerEvent",(function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t]
var i=n[0],a=n[1]
return!!r._events[i]&&(r._events[i].forEach((function(e){return e(i,a)})),!0)})),Y(this,"eventSourceOnError",(function(e){var n,t
r._eventSourceErrorCount++,(r.detectConnectionLost()||r.connected)&&(fe(e)?(r.itShouldRetry(e.error.status)&&r.scheduleReconnect(),r.triggerEvent("error",{status:null!==(n=e.error.status)&&void 0!==n?n:500,message:"EventSource error - ".concat(null!==(t=e.error.message)&&void 0!==t?t:"unknown"),originalEvent:e.error})):(r.itShouldRetry()&&r.scheduleReconnect(),r.options.alertChannelErrors&&r.triggerEvent("error",{status:900,message:"Unknown EventSource connection error/warning event",originalEvent:e})))})),Y(this,"parseMessage",(function(e){var n
try{n=JSON.parse(e.data)}catch(e){var t=e instanceof Error?e.message:"JSON not valid"
return{type:te.invalid,eventData:"Error while parsing event data - ".concat(t)}}var r=Object.keys(n)[0]
return{type:r,eventData:n[r]}})),Y(this,"_reconnectHandler",(function(e){r.triggerEvent("reconnecting",null),r._internalConnect().catch((function(n){var t,i
r._eventSource=null
var a={status:null!==(t=n.status)&&void 0!==t?t:900,message:"EventSource connection failed - ".concat(null!==(i=n.message)&&void 0!==i?i:"unknown reason"),originalEvent:n}
r.itShouldRetry(a.status)?(r.options.alertChannelErrors&&r.triggerEvent("error",a),e(r._reconnectDelay())):r.triggerEvent("error",a)}))})),Y(this,"_heartbeatCheck",(function(e){if(null===r._timeConnectionLost){if(null===r._lastHeartBeatReceivedAt)return void r.scheduleReconnect()
var n=Date.now()-r._lastHeartBeatReceivedAt
if(n>r.options.heartbeatGapThreshold)return r.triggerEvent("poorRealtimeConnectionDetected",n),void r.scheduleReconnect()}e()})),Y(this,"scheduleReconnect",(function(){r._options.enableCustomRetry&&(r.disconnectAndClose(),r._reconnectTask.start(r._reconnectDelay()))})),Y(this,"startHeartBeatMonitoring",(function(){r._options.detectMissedHeartbeat&&r._heartBeatMonitor.start(r.options.heartbeatPollInterval)})),Y(this,"setupLeaveGuard",(function(){r._boundUnloadHandler&&window.removeEventListener("beforeunload",r._boundUnloadHandler),r._boundUnloadHandler=r.beforeUnloadHandler.bind(r),window.addEventListener("beforeunload",r._boundUnloadHandler)})),Y(this,"setupOnlineGuard",(function(){window.addEventListener("offline",r.handleLoseInternetConection.bind(r)),window.addEventListener("online",r.handleGainInternetConnection.bind(r))})),this._options=$($({},Te),n),this._options.connectHeaders["x-li-realtime-session"]=this.sessionId,this._options.sessionHeartbeat=this._options.sessionHeartbeat?Math.max(6e4,this._options.sessionHeartbeat):null,this._options.heartbeatGapThreshold=Math.max(2*this._options.heartbeatPollInterval,this.options.heartbeatGapThreshold),this._reconnectDelay=(t=0,function(){var e=++t-Math.max(1,0)
if(e<=0)return 0
var n=4*Math.random()
return 1===e?1e3*(5+n):1e3*(10+n)}),this._api=new ge(this._options.domain,this._options.connectHeaders,this._options.mpInfo),this._heartBeatMonitor=new ve(this._heartbeatCheck.bind(this)),this._reconnectTask=new ve(this._reconnectHandler.bind(this)),this._timeConnectionLost=null,this._options.tracking&&(this._realtimeTracking=new _e(this._options.tracking.fireEventCallback)),this.startConnectivityTracker(),this.setupLeaveGuard(),this.setupOnlineGuard()}return z(e,[{key:"options",get:function(){return this._options}},{key:"realtimeTracking",get:function(){return this._realtimeTracking}},{key:"connected",get:function(){return null!==this._eventSource&&this._eventSource.readyState===re.OPEN}},{key:"sessionId",get:function(){return e._realtimeSessionId}},{key:"realtimeConnectUrl",get:function(){var e=this._options.domain.endsWith("/")?"":"/"
return"".concat(this._options.domain).concat(e,"realtime/connect").concat(this._options.urlQueryParams)}},{key:"eventSourceUrl",get:function(){return this._eventSourceUrl}},{key:"serverClockTime",get:function(){return this._api.getServerClockTime()}},{key:"sessionHeartbeatInterval",get:function(){return this._options.sessionHeartbeat}},{key:"HeartbeatGapThreshold",get:function(){return this._options.heartbeatGapThreshold}},{key:"addSubscriptions",value:function(e){var n=this.filterSubscriptionList(e,this._subscribedTopics)
return 0===n.length?Promise.resolve({succeeded:[],failed:[]}):this.apiSubscribe(n)}},{key:"removeSubscriptions",value:function(e){var n=this
return new Promise((function(t,r){var i,a=(e instanceof Array?e:[e]).filter(me).filter((i=n._subscribedTopics,function(e){return i.includes(e)}))
if(0===a.length)return t({succeeded:[],failed:[]})
n._api.unsubscribe(a).then((function(e){var r=X(e,2),i=r[0],a=r[1]
i.forEach((function(e){return n.triggerEvent("unsubscribe",e)})),a.forEach((function(e){return n.triggerEvent("unsubscribeFailed",e)})),n._subscribedTopics=n._subscribedTopics.filter(ye(i)),t({succeeded:i,failed:a})})).catch((function(e){n.triggerEvent("error",e),r(e)}))}))}},{key:"addEventListener",value:function(){for(var e=this,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r]
var i=t[0],a=t[1]
return this._events[i]||(this._events[i]=[]),this._events[i].includes(a)?null:(this._events[i].push(a),function(){return e.removeEventListener.apply(e,J([i,a]))})}},{key:"removeEventListener",value:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t]
var r=n[0],i=n[1]
if(!this._events[r])return!1
var a=this._events[r].length
return this._events[r]=this._events[r].filter((function(e){return e!==i})),a!==this._events[r].length}},{key:"_getConnectionHandler",value:function(e,n,t){var r=this
return function(i){t.removeEventListener("error",n),t.addEventListener("error",r.eventSourceOnError.bind(r)),r.startHeartBeatMonitoring(),r.triggerEvent("open",null),r._lastConnectedStatus=r.connected,e()}}},{key:"connect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"FAIL-ON-ERROR"
return"RETRY"===this._autoReconnect?Promise.resolve():(this._explicitlyConnected=!0,this._autoReconnect=e,this._internalConnect(e))}},{key:"_internalConnect",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"FAIL-ON-ERROR",t=function(t,r){return function(i){"FAIL-ON-ERROR"===n?r(fe(i)?i.error:i):(e.eventSourceOnError(i),t())}}
return this._options.connectHeaders["x-li-realtime-session"]=this.sessionId,this._eventSource?Promise.resolve():new Promise((function(n,r){e._lastConnectedStatus=!0
var i=e.connectEventSource()
if(i.readyState!==re.CONNECTING){var a=new Error("EventSource readyState is incorrect: ".concat(i.readyState))
e.triggerEvent("error",a),r(a)}else{var o=t(n,r)
i.addEventListener("error",o),i.addEventListener("open",e._getConnectionHandler(n,o,i)),i.addEventListener("message",e.eventSourceOnmessage.bind(e)),e._api.syncRealtimeServerClockTime()}}))}},{key:"disconnectAndClose",value:function(){this._timeConnectionLost||(this._timeConnectionLost=Date.now()),this._heartBeatMonitor.cancel(),this._reconnectTask.cancel(),this._eventSource&&(this._api.disconnect(),this._eventSource.close(),this._eventSource=null),this._eventSourceErrorCount=0,this.triggerEvent("close",null)}},{key:"startConnectivityTracker",value:function(){var n=this
e._connectivityTrackingTimer&&(window.clearInterval(e._connectivityTrackingTimer),e._connectivityTrackingTimer=0),this._options.sessionHeartbeat&&(this._api.trackActiveConnection(this.sessionId,"FIRST_BEAT"),e._connectivityTrackingTimer=window.setInterval((function(){n._api.trackActiveConnection(n.sessionId)}),this._options.sessionHeartbeat))}},{key:"stopConnectivityTracker",value:function(){var n
e._connectivityTrackingTimer&&(window.clearInterval(e._connectivityTrackingTimer),e._connectivityTrackingTimer=0,null===(n=e.singleton)||void 0===n||n._api.trackActiveConnection(e.singleton.sessionId,"FINAL_BEAT"))}},{key:"handleLoseInternetConection",value:function(){this.disconnectAndClose(),this.stopConnectivityTracker(),e._realtimeSessionId=ce()}},{key:"handleGainInternetConnection",value:function(){this.startConnectivityTracker(),this._explicitlyConnected&&this._internalConnect(this._autoReconnect)}},{key:"filterSubscriptionList",value:function(e,n){var t,r=(t=this._personalTopicsTypes,function(e){var n=le.extractEntityInfoFromUrn(e).type
return!t.includes(n)}),i=ye(n)
return(e instanceof Array?e:[e]).filter(me).filter(r).filter(i)}},{key:"restoreSubscriptions",value:function(){var e=this.filterSubscriptionList(this._subscribedTopics,[])
return 0===e.length?Promise.resolve({succeeded:[],failed:[]}):this.apiSubscribe(e)}},{key:"apiSubscribe",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1
return new Promise((function(r,i){n._api.subscribe(e).then((function(e){var a=X(e,3),o=a[0],s=a[1],c=a[2]
n._subscribedTopics=[].concat(J(n._subscribedTopics),J(o.filter(ye(n._subscribedTopics)))),o.forEach((function(e){return n.triggerEvent("subscribe",e)})),c.length>0&&t<n.options.maxRetryCount?n.apiSubscribe(c,t+1).then((function(e){r({succeeded:[].concat(J(o),J(e.succeeded)),failed:[].concat(J(s),J(e.failed))})})).catch(i):(s.forEach((function(e){return n.triggerEvent("subscribeFailed",e)})),r({succeeded:o,failed:[].concat(J(s),J(c))}))})).catch((function(t){412===t.status?(n.scheduleReconnect(),r({succeeded:[],failed:e})):(n.triggerEvent("error",t),i(t))}))}))}},{key:"connectEventSource",value:function(){return this._eventSource||(this._eventSourceUrl=function(e,n){var t=Object.entries(n).map((function(e){var n=X(e,2),t=n[0],r=n[1]
return"".concat(t,"=").concat(encodeURIComponent(r))})).join("&"),r=e.charAt(e.length-1),i="/"===r||"?"===r||"&"===r?e.substr(0,e.length-1):e
if(t.length>0){var a=i.includes("?")?"&":"?"
return"".concat(i).concat(a).concat(t)}return i}(this.realtimeConnectUrl,this.options.connectHeaders),this._eventSource=new EventSource(this._eventSourceUrl,{withCredentials:!0})),this._eventSource}},{key:"itShouldRetry",value:function(e){return!(null!=e&&e>=400&&e<500)&&(!this._eventSource||this._eventSource.readyState===re.CLOSE||this._eventSourceErrorCount>this.options.acceptableErrorCount)}},{key:"lostConnection",value:function(){return this._lastConnectedStatus&&!this.connected}},{key:"detectConnectionLost",value:function(){var e=this.lostConnection()
return e&&(this._lastConnectedStatus=this.connected,this._timeConnectionLost=Date.now()),e}},{key:"beforeUnloadHandler",value:function(){e.close()}}],[{key:"create",value:function(n){if(e.singleton)e.singleton._options=$($({},e.singleton._options),n)
else{if(!n.mpInfo)throw new Error('Missing required "mpInfo" property in options')
e.singleton=new e(n)}return e.singleton}},{key:"close",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]
if(!e.singleton)return!1
var t=e.singleton._boundUnloadHandler
return t&&window.removeEventListener("beforeunload",t),e._connectivityTrackingTimer&&this.singleton&&(window.clearInterval(e._connectivityTrackingTimer),n&&this.singleton._api.trackActiveConnection(this.singleton.sessionId,"FINAL_BEAT")),e.singleton.disconnectAndClose(),e.singleton=null,!0}}]),e}()
Y(be,"singleton",void 0),Y(be,"_realtimeSessionId",ce()),Y(be,"_connectivityTrackingTimer",0)
var Ee,ke=ue((function(e,n){!function(t){var r=t.setTimeout,i=t.clearTimeout,a=t.XMLHttpRequest,o=t.XDomainRequest,s=t.ActiveXObject,c=t.EventSource,d=t.document,u=t.Promise,p=t.fetch,l=t.Response,f=t.TextDecoder,m=t.TextEncoder,y=t.AbortController
if("undefined"==typeof window||void 0===d||"readyState"in d||null!=d.body||(d.readyState="loading",window.addEventListener("load",(function(e){d.readyState="complete"}),!1)),null==a&&null!=s&&(a=function(){return new s("Microsoft.XMLHTTP")}),null==Object.create&&(Object.create=function(e){function n(){}return n.prototype=e,new n}),Date.now||(Date.now=function(){return(new Date).getTime()}),null==y){var h=p
p=function(e,n){var t=n.signal
return h(e,{headers:n.headers,credentials:n.credentials,cache:n.cache}).then((function(e){var n=e.body.getReader()
return t._reader=n,t._aborted&&t._reader.cancel(),{status:e.status,statusText:e.statusText,headers:e.headers,body:{getReader:function(){return n}}}}))},y=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){null!=this.signal._reader&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function g(){this.bitsNeeded=0,this.codePoint=0}g.prototype.decode=function(e){function n(e,n,t){if(1===t)return e>=128>>n&&e<<n<=2047
if(2===t)return e>=2048>>n&&e<<n<=55295||e>=57344>>n&&e<<n<=65535
if(3===t)return e>=65536>>n&&e<<n<=1114111
throw new Error}function t(e,n){if(6===e)return n>>6>15?3:n>31?2:1
if(12===e)return n>15?3:2
if(18===e)return 3
throw new Error}for(var r="",i=this.bitsNeeded,a=this.codePoint,o=0;o<e.length;o+=1){var s=e[o]
0!==i&&(s<128||s>191||!n(a<<6|63&s,i-6,t(i,a)))&&(i=0,a=65533,r+=String.fromCharCode(a)),0===i?(s>=0&&s<=127?(i=0,a=s):s>=192&&s<=223?(i=6,a=31&s):s>=224&&s<=239?(i=12,a=15&s):s>=240&&s<=247?(i=18,a=7&s):(i=0,a=65533),0===i||n(a,i,t(i,a))||(i=0,a=65533)):(i-=6,a=a<<6|63&s),0===i&&(a<=65535?r+=String.fromCharCode(a):(r+=String.fromCharCode(55296+(a-65535-1>>10)),r+=String.fromCharCode(56320+(a-65535-1&1023))))}return this.bitsNeeded=i,this.codePoint=a,r},null!=f&&null!=m&&function(){try{return"test"===(new f).decode((new m).encode("test"),{stream:!0})}catch(e){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+e)}return!1}()||(f=g)
var v=function(){}
function _(e){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=v,this.onload=v,this.onerror=v,this.onreadystatechange=v,this._contentType="",this._xhr=e,this._sendTimeout=0,this._abort=v}function T(e){return e.replace(/[A-Z]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)+32)}))}function b(e){for(var n=Object.create(null),t=e.split("\r\n"),r=0;r<t.length;r+=1){var i=t[r].split(": "),a=i.shift(),o=i.join(": ")
n[T(a)]=o}this._map=n}function E(){}function k(e){this._headers=e}function A(){}function S(){this._listeners=Object.create(null)}function C(e){r((function(){throw e}),0)}function I(e){this.type=e,this.target=void 0}function R(e,n){I.call(this,e),this.data=n.data,this.lastEventId=n.lastEventId}function O(e,n){I.call(this,e),this.status=n.status,this.statusText=n.statusText,this.headers=n.headers}function M(e,n){I.call(this,e),this.error=n.error}_.prototype.open=function(e,n){this._abort(!0)
var t=this,o=this._xhr,s=1,c=0
this._abort=function(e){0!==t._sendTimeout&&(i(t._sendTimeout),t._sendTimeout=0),1!==s&&2!==s&&3!==s||(s=4,o.onload=v,o.onerror=v,o.onabort=v,o.onprogress=v,o.onreadystatechange=v,o.abort(),0!==c&&(i(c),c=0),e||(t.readyState=4,t.onabort(null),t.onreadystatechange())),s=0}
var d=function(){if(1===s){var e=0,n="",r=void 0
if("contentType"in o)e=200,n="OK",r=o.contentType
else try{e=o.status,n=o.statusText,r=o.getResponseHeader("Content-Type")}catch(t){e=0,n="",r=void 0}0!==e&&(s=2,t.readyState=2,t.status=e,t.statusText=n,t._contentType=r,t.onreadystatechange())}},u=function(){if(d(),2===s||3===s){s=3
var e=""
try{e=o.responseText}catch(e){}t.readyState=3,t.responseText=e,t.onprogress()}},p=function(e,n){if(null!=n&&null!=n.preventDefault||(n={preventDefault:v}),u(),1===s||2===s||3===s){if(s=4,0!==c&&(i(c),c=0),t.readyState=4,"load"===e)t.onload(n)
else if("error"===e)t.onerror(n)
else{if("abort"!==e)throw new TypeError
t.onabort(n)}t.onreadystatechange()}},l=function(){c=r((function(){l()}),500),3===o.readyState&&u()}
"onload"in o&&(o.onload=function(e){p("load",e)}),"onerror"in o&&(o.onerror=function(e){p("error",e)}),"onabort"in o&&(o.onabort=function(e){p("abort",e)}),"onprogress"in o&&(o.onprogress=u),"onreadystatechange"in o&&(o.onreadystatechange=function(e){!function(e){null!=o&&(4===o.readyState?"onload"in o&&"onerror"in o&&"onabort"in o||p(""===o.responseText?"error":"load",e):3===o.readyState?"onprogress"in o||u():2===o.readyState&&d())}(e)}),!("contentType"in o)&&"ontimeout"in a.prototype||(n+=(-1===n.indexOf("?")?"?":"&")+"padding=true"),o.open(e,n,!0),"readyState"in o&&(c=r((function(){l()}),0))},_.prototype.abort=function(){this._abort(!1)},_.prototype.getResponseHeader=function(e){return this._contentType},_.prototype.setRequestHeader=function(e,n){var t=this._xhr
"setRequestHeader"in t&&t.setRequestHeader(e,n)},_.prototype.getAllResponseHeaders=function(){return null!=this._xhr.getAllResponseHeaders&&this._xhr.getAllResponseHeaders()||""},_.prototype.send=function(){if("ontimeout"in a.prototype&&("sendAsBinary"in a.prototype||"mozAnon"in a.prototype)||null==d||null==d.readyState||"complete"===d.readyState){var e=this._xhr
"withCredentials"in e&&(e.withCredentials=this.withCredentials)
try{e.send(void 0)}catch(e){throw e}}else{var n=this
n._sendTimeout=r((function(){n._sendTimeout=0,n.send()}),4)}},b.prototype.get=function(e){return this._map[T(e)]},null!=a&&null==a.HEADERS_RECEIVED&&(a.HEADERS_RECEIVED=2),E.prototype.open=function(e,n,t,r,i,o,s){e.open("GET",i)
var c=0
for(var d in e.onprogress=function(){var n=e.responseText.slice(c)
c+=n.length,t(n)},e.onerror=function(e){e.preventDefault(),r(new Error("NetworkError"))},e.onload=function(){r(null)},e.onabort=function(){r(null)},e.onreadystatechange=function(){if(e.readyState===a.HEADERS_RECEIVED){var t=e.status,r=e.statusText,i=e.getResponseHeader("Content-Type"),o=e.getAllResponseHeaders()
n(t,r,i,new b(o))}},e.withCredentials=o,s)Object.prototype.hasOwnProperty.call(s,d)&&e.setRequestHeader(d,s[d])
return e.send(),e},k.prototype.get=function(e){return this._headers.get(e)},A.prototype.open=function(e,n,t,r,i,a,o){var s=null,c=new y,d=c.signal,l=new f
return p(i,{headers:o,credentials:a?"include":"same-origin",signal:d,cache:"no-store"}).then((function(e){return s=e.body.getReader(),n(e.status,e.statusText,e.headers.get("Content-Type"),new k(e.headers)),new u((function(e,n){var r=function(){s.read().then((function(n){if(n.done)e(void 0)
else{var i=l.decode(n.value,{stream:!0})
t(i),r()}})).catch((function(e){n(e)}))}
r()}))})).catch((function(e){return"AbortError"===e.name?void 0:e})).then((function(e){r(e)})),{abort:function(){null!=s&&s.cancel(),c.abort()}}},S.prototype.dispatchEvent=function(e){e.target=this
var n=this._listeners[e.type]
if(null!=n)for(var t=n.length,r=0;r<t;r+=1){var i=n[r]
try{"function"==typeof i.handleEvent?i.handleEvent(e):i.call(this,e)}catch(e){C(e)}}},S.prototype.addEventListener=function(e,n){e=String(e)
var t=this._listeners,r=t[e]
null==r&&(r=[],t[e]=r)
for(var i=!1,a=0;a<r.length;a+=1)r[a]===n&&(i=!0)
i||r.push(n)},S.prototype.removeEventListener=function(e,n){e=String(e)
var t=this._listeners,r=t[e]
if(null!=r){for(var i=[],a=0;a<r.length;a+=1)r[a]!==n&&i.push(r[a])
0===i.length?delete t[e]:t[e]=i}},R.prototype=Object.create(I.prototype),O.prototype=Object.create(I.prototype),M.prototype=Object.create(I.prototype)
var w=/^text\/event\-stream(;.*)?$/i,N=function(e,n){var t=null==e?n:parseInt(e,10)
return t!=t&&(t=n),P(t)},P=function(e){return Math.min(Math.max(e,1e3),18e6)},D=function(e,n,t){try{"function"==typeof n&&n.call(e,t)}catch(e){C(e)}}
function U(e,n){S.call(this),n=n||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,function(e,n,t){n=String(n)
var s=Boolean(t.withCredentials),c=t.lastEventIdQueryParameterName||"lastEventId",d=P(1e3),u=N(t.heartbeatTimeout,45e3),p="",l=d,f=!1,m=0,y=t.headers||{},h=t.Transport,g=x&&null==h?void 0:new _(null!=h?new h:null!=a&&"withCredentials"in a.prototype||null==o?new a:new o),v=null!=h&&"string"!=typeof h?new h:null==g?new A:new E,T=void 0,b=0,k=-1,S="",C="",I="",U="",L=0,F=0,B=0,q=function(n,t,r,i){if(0===k)if(200===n&&null!=r&&w.test(r)){k=1,f=Date.now(),l=d,e.readyState=1
var a=new O("open",{status:n,statusText:t,headers:i})
e.dispatchEvent(a),D(e,e.onopen,a)}else{var o=""
200!==n?(t&&(t=t.replace(/\s+/g," ")),o="EventSource's response has a status "+n+" "+t+" that is not 200. Aborting the connection."):o="EventSource's response has a Content-Type specifying an unsupported type: "+(null==r?"-":r.replace(/\s+/g," "))+". Aborting the connection.",H(),a=new O("error",{status:n,statusText:t,headers:i}),e.dispatchEvent(a),D(e,e.onerror,a),console.error(o)}},j=function(n){if(1===k){for(var t=-1,a=0;a<n.length;a+=1)(c=n.charCodeAt(a))!=="\n".charCodeAt(0)&&c!=="\r".charCodeAt(0)||(t=a)
var o=(-1!==t?U:"")+n.slice(0,t+1)
U=(-1===t?U:"")+n.slice(t+1),""!==n&&(f=Date.now(),m+=n.length)
for(var s=0;s<o.length;s+=1){var c=o.charCodeAt(s)
if(-1===L&&c==="\n".charCodeAt(0))L=0
else if(-1===L&&(L=0),c==="\r".charCodeAt(0)||c==="\n".charCodeAt(0)){if(0!==L){1===L&&(B=s+1)
var y=o.slice(F,B-1),h=o.slice(B+(B<s&&o.charCodeAt(B)===" ".charCodeAt(0)?1:0),s)
"data"===y?(S+="\n",S+=h):"id"===y?C=h:"event"===y?I=h:"retry"===y?(d=N(h,d),l=d):"heartbeatTimeout"===y&&(u=N(h,u),0!==b&&(i(b),b=r((function(){G()}),u)))}if(0===L){if(""!==S){p=C,""===I&&(I="message")
var g=new R(I,{data:S.slice(1),lastEventId:C})
if(e.dispatchEvent(g),"open"===I?D(e,e.onopen,g):"message"===I?D(e,e.onmessage,g):"error"===I&&D(e,e.onerror,g),2===k)return}S="",I=""}L=c==="\r".charCodeAt(0)?-1:0}else 0===L&&(F=s,L=1),1===L?c===":".charCodeAt(0)&&(B=s+1,L=2):2===L&&(L=3)}}},V=function(n){if(1===k||0===k){k=-1,0!==b&&(i(b),b=0),b=r((function(){G()}),l),l=P(Math.min(16*d,2*l)),e.readyState=0
var t=new M("error",{error:n})
e.dispatchEvent(t),D(e,e.onerror,t),null!=n&&console.error(n)}},H=function(){k=2,null!=T&&(T.abort(),T=void 0),0!==b&&(i(b),b=0),e.readyState=2},G=function(){if(b=0,-1===k){f=!1,m=0,b=r((function(){G()}),u),k=0,S="",I="",C=p,U="",F=0,B=0,L=0
var t=n
if("data:"!==n.slice(0,5)&&"blob:"!==n.slice(0,5)&&""!==p){var i=n.indexOf("?")
t=-1===i?n:n.slice(0,i+1)+n.slice(i+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,(function(e,n){return n===c?"":e})),t+=(-1===n.indexOf("?")?"?":"&")+c+"="+encodeURIComponent(p)}var a=e.withCredentials,o={Accept:"text/event-stream"},s=e.headers
if(null!=s)for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(o[d]=s[d])
try{T=v.open(g,q,j,V,t,a,o)}catch(e){throw H(),e}}else if(f||null==T){var l=Math.max((f||Date.now())+u-Date.now(),1)
f=!1,b=r((function(){G()}),l)}else V(new Error("No activity within "+u+" milliseconds. "+(0===k?"No response received.":m+" chars received.")+" Reconnecting.")),null!=T&&(T.abort(),T=void 0)}
e.url=n,e.readyState=0,e.withCredentials=s,e.headers=y,e._close=H,G()}(this,e,n)}var x=null!=p&&null!=l&&"body"in l.prototype
U.prototype=Object.create(S.prototype),U.prototype.CONNECTING=0,U.prototype.OPEN=1,U.prototype.CLOSED=2,U.prototype.close=function(){this._close()},U.CONNECTING=0,U.OPEN=1,U.CLOSED=2,U.prototype.withCredentials=void 0
var L,F=c
null==a||null!=c&&"withCredentials"in c.prototype||(F=U),void 0!==(L=function(e){e.EventSourcePolyfill=U,e.NativeEventSource=c,e.EventSource=F}(n))&&(e.exports=L)}("undefined"==typeof globalThis?"undefined"!=typeof window?window:"undefined"!=typeof self?self:de:globalThis)}))
function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
return be.create(e)}"undefined"!=typeof globalThis?globalThis.EventSource=ke.EventSourcePolyfill:window.EventSource=ke.EventSourcePolyfill
var Se={MISSING_DATA_FROM_RESPONSE:{message:"Some data was missing or invalid from the response",code:100},ERRORS_IN_RESPONSE:{message:"Some errors were returned in the response",code:101},RESPONSE_INVALID_JSON:{message:"Failed to parse a JSON response",code:102},NO_RESPONSE_RECEIVED:{message:"No response received",code:103},NETWORK_ERROR:{message:"Network Error",code:104}},Ce={FEATURE_NOT_YET_AVAILABLE:{message:"This feature is not yet available",code:613},MAILBOX_CONNECT_FAILED:{message:"Connecting to the Mailbox failed",code:614},MESSAGE_DECORATE_FAILED:{message:"Decoration of messages failed",code:600},CONVERSATION_DECORATE_FAILED:{message:"Decoration of conversation failed",code:601},MAILBOX_DECORATE_FAILED:{message:"Decoration of mailbox failed",code:602},CONVERSATION_DOES_NOT_EXIST:{message:"The conversation does not exist",code:603},DRAFT_MESSAGE_IS_EMPTY:{message:"The draft message is empty",code:604},MESSAGE_SEND_FAILED:{message:"Could not send the message",code:605},MESSAGE_DELETE_FAILED:{message:"Could not delete the message",code:606},MESSAGE_EDIT_FAILED:{message:"Could not edit the message",code:607},MESSAGE_DOES_NOT_EXIST:{message:"The message does not exist",code:608},DRAFT_CONVERSATION_NOT_FOUND:{message:"The draft conversation could not be found",code:610},PARTICIPANTS_DECORATE_FAILED:{message:"Decoration of participants failed",code:611},TOO_MANY_CATEGORIES:{message:"Too many categories specified and no keywords for find conversations",code:612},CANNOT_CREATE_FILTERED_MAILBOX:{message:"Cannot create a FilteredMailbox from a non-root mailbox",code:616},LOAD_OLDER_MESSAGES_FAILED:{message:"Cannot load older messages",code:617},RETRY_CANCELLED:{message:"The exponential backoff retry was cancelled",code:618},SENDING_QUEUE_IN_PROGRESS:{message:"The sending queue is already in progress. Cannot sendPendingMessages.",code:619},CANNOT_ADD_MESSAGES_IN_CONVERSATION:{message:"The draft conversation is in the process of sending the first message and creating a saved conversation. Cannot add more messages.",code:620},CANNOT_ADD_PARTICIPANTS_IN_CONVERSATION:{message:"Cannot add participants in conversation",code:621},CANNOT_REMOVE_PARTICIPANTS_FROM_CONVERSATION:{message:"Cannot remove participants from conversation",code:622},CANNOT_DISMISS_INLINE_WARNING:{message:"Cannot dismiss inline warning",code:623},MESSAGE_LIST_SYNC_FAILED:{message:"Message list sync failed",code:624},CHAIN_SYNC_FAILED:{message:"Chain sync failed",code:625},GET_REACTORS_FAILED:{message:"Get reactors by message and emoji failed",code:628},REACTION_LIMIT_REACHED:{message:"Cannot react to message because the reaction limit has been reached on this message",code:628},CONTENT_IS_NOT_ATTRIBUTED_TEXT:{message:"Content is not in the proper format of an AttributedTextFragment",code:629},INVALID_URL:{message:"Invalid restli or graphql URL",code:630},CHAIN_SYNC_CANNOT_START:{message:"Chain sync cannot start because missing syncToken",code:631},INVALID_TYPE_ARGUMENT:{message:"Invalid type argument",code:632},COMPOSE_BY_RECIPIENTS_FAILED:{message:"composeByRecipients failed: The conversation found could not be added to the Mailbox State",code:633}},Ie={CANNOT_QUERY_FRAGMENT:{message:"Cannot submit a GraphQL request with a fragment query",code:800},GRAPHQL_ERROR_PAYLOAD:{message:"Error in GraphQL response",code:801},GRAPHQL_INVALID_LOOKUP:{message:"Could not lookup the graphql query - invalid query",code:802}},Re={CANNOT_CONNECT:{message:"Connection to Realtime failed",code:700},PAYLOAD_DATA_DOES_NOT_EXIST:{message:"Realtime response decorated payload data does not exist",code:701},PAYLOAD_DECORATION_DOES_NOT_EXIST:{message:"Realtime response decorated payload decoration does not exist",code:702},PAYLOAD_RESULT_DOES_NOT_EXIST:{message:"Realtime response decorated payload result does not exist",code:703},COMMON_TIME_ERROR:{message:"Error event emitted from common-time",code:704},EVENT_ERROR:{message:"Event data received from Realtime is invalid",code:705},EVENT_RESPONSE_ERROR:{message:"Event data contains GraphQL decoration errors",code:706}},Oe=function(e){return e instanceof Error},Me=function(e){return e instanceof Pe},we=function(e){var n=e
return void 0!==n.status&&null!==n.status}
Ee=Symbol.toPrimitive
var Ne,Pe=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function")
e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&p(e,n)}(t,m(Error))
var n=function(e){var n=l()
return function(){var t,r=u(e)
if(n){var i=u(this).constructor
t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments)
return function(e,n){if(n&&("object"==typeof n||"function"==typeof n))return n
if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined")
return y(e)}(this,t)}}(t)
function t(e,r,i,a){var s
return o(this,t),d(y(s=n.call(this,"[web-messenger-data] ".concat(i.trim()," (").concat(r,")").concat(a?Array.isArray(a)?" - ".concat(a.map((function(e){return e.message})).join()):" - ".concat(a.message):""))),"namespace",void 0),d(y(s),"code",void 0),d(y(s),"cause",void 0),s.name="MDError",s.code=r,s.namespace=e,s.cause=a,Object.setPrototypeOf(y(s),(this instanceof t?this.constructor:void 0).prototype),s}return c(t,[{key:"id",get:function(){return"".concat(this.namespace,":").concat(this.code)}},{key:Ee,value:function(e){return"string"===e?this.toString():null}}],[{key:"fromUnknown",value:function(e,n){var r=Ce[n],i=r.code,a=r.message
return Oe(e)?new t("client",i,"".concat(a," - ").concat(e.message)):new t("client",i,a)}},{key:"fromMDResponseError",value:function(e,n,r){var i=n.message||n.code,a=void 0!==i?"".concat(e," ").concat(i):e
return new t("api",null!=r?r:n.status,a)}},{key:"fromClientErrorMemo",value:function(e,n){var r=Ce[e]
return new t("client",r.code,r.message,n)}},{key:"fromInvalidType",value:function(e,n,r){var i=Ce.INVALID_TYPE_ARGUMENT,a=i.code,o=i.message,s="".concat(e,"() invalid argument ").concat(n," not a ").concat(r,"'")
return new t("client",a,"".concat(o," - ").concat(s))}},{key:"fromApiErrorMemo",value:function(e,n){var r=Se[e],i=r.code,a=r.message
return new t("api",i,"".concat(a).concat(null!=n&&n.msg?" - "+n.msg:""),null==n?void 0:n.cause)}},{key:"fromGraphQLErrorMemo",value:function(e,n){var r=Ie[e]
return new t("graphql",r.code,r.message,n)}},{key:"fromRealtimeErrorMemo",value:function(e,n){var r=Re[e]
return new t("realtime",r.code,r.message,n)}},{key:"buildCommonTimeError",value:function(e){var n=Re.COMMON_TIME_ERROR.message,r=e.message?"".concat(n," - ").concat(e.message):n,i=h(we(e)?[e.originalEvent,e.status]:[void 0,Re.COMMON_TIME_ERROR.code],2),a=i[0]
return new t("realtime",i[1],r,a)}},{key:"buildGraphQLPayloadError",value:function(e,n){var r,i,a=Ie.GRAPHQL_ERROR_PAYLOAD.message,o=e.message,s='"'.concat(n,'" ').concat(a," - ").concat(null!=o?o:"")
return new t("graphql",null!==(r=null===(i=e.extensions)||void 0===i?void 0:i.status)&&void 0!==r?r:Ie.GRAPHQL_ERROR_PAYLOAD.code,s)}}]),t}(),De=function(e,n,t){return Promise.reject(Pe.fromMDResponseError(e,n,t))},Ue={fullyLoaded:!1,loading:!1,nextCursor:null,syncToken:null,lastRequestId:0},xe={},Le=function(e){return function(n){return!!L(n)&&n.entityUrn===e}},Fe=function(e){return function(n){return!!L(n)&&e.includes(n.entityUrn)}},Be=function(e){return function(n){return e===(q(e)?n.entityUrn:n.clientId)}},qe=function(e){return function(n){return n.entityUrn===e}},je=function(e){return function(n){return n.clientId===e}},Ve=function(e){return function(n){return void 0!==e[n.clientId]&&null!==e[n.clientId]}},He=function(e,n){var t,r,i,a,o,s
return{renderContent:"ADD"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ADD")?[].concat(g(e.renderContent),g(n.renderContent)):n.renderContent,messageRequestContextByRecipient:null!==(t=n.messageRequestContextByRecipient)&&void 0!==t?t:e.messageRequestContextByRecipient,quickActionContextUrn:null!==(r=n.quickActionContextUrn)&&void 0!==r?r:e.quickActionContextUrn,invitationUrn:null!==(i=n.invitationUrn)&&void 0!==i?i:e.invitationUrn,forwardedMessageUrn:null!==(a=n.forwardedMessageUrn)&&void 0!==a?a:e.forwardedMessageUrn,conversationState:null!==(o=n.conversationState)&&void 0!==o?o:e.conversationState,conversationTitle:null!==(s=n.conversationTitle)&&void 0!==s?s:e.conversationTitle}},Ge=function(e){return function(n){var t
return n?i(i(i({},n),e),{},{optionalSendData:e.optionalSendData?He(n.optionalSendData,e.optionalSendData,"REPLACE"):n.optionalSendData,status:"Delivered"===n.status?"Delivered":null!==(t=e.status)&&void 0!==t?t:n.status,additionalData:e.additionalData||n.additionalData,entityUrn:n.entityUrn||e.entityUrn,clientId:n.clientId}):e}},Ke=function(e){return e.connected.api},$e=function(e){return e.slice().sort((function(e,n){return"Delivered"===e.status&&"Delivered"!==n.status?-1:"Delivered"!==e.status&&"Delivered"===n.status?1:e.deliveredAt.getTime()-n.deliveredAt.getTime()}))},We=function(e){return e.slice().sort((function(e,n){return n.lastActivityAt.getTime()-e.lastActivityAt.getTime()}))},Qe=function(e){return e.reduce((function(e,n){return[].concat(g(e),g(n.messages))}),[])},ze=function(e){return void 0===e.messages&&void 0!==e.status},Ye=function(e,n){var t,r,a,o,s
if(n.lastActivityAt&&n.lastActivityAt<e.lastActivityAt)return e
var c=tn(null!==(t=e.seenReceiptsMap)&&void 0!==t?t:{},null!==(r=n.seenReceiptsMap)&&void 0!==r?r:{}),d=rn(c)
return i(i(i({},e),n),{},{seenReceiptsMap:d,lastActivityAt:null!==(a=n.lastActivityAt)&&void 0!==a?a:e.lastActivityAt,status:i(i({},e.status),n.status),metadata:{prevCursor:null!==(o=n.metadata)&&void 0!==o&&o.prevCursor&&""!==n.metadata.prevCursor?n.metadata.prevCursor:e.metadata.prevCursor,syncToken:null!==(s=n.metadata)&&void 0!==s&&s.syncToken&&""!==n.metadata.syncToken?n.metadata.syncToken:e.metadata.syncToken},quickReplies:n.quickReplies&&n.quickReplies.length>0?n.quickReplies:e.quickReplies})},Xe=function(e,n){var t,r,a,o
if(ze(n))return i(i({},e),{},{status:i(i({},e.status),n.status)})
var s=n.participants||[],c=g(n.messages||[]),d=n.matchingSearches||[]
return i(i(i({},e),n),{},{participants:s.length>0?R(e.participants,s).filter((function(e){return void 0!==e})).sort():e.participants,messages:c.length>0?e.messages.add(c):e.messages,clientId:e.clientId,draftMessage:e.draftMessage,matchingSearches:d.length>0?R(e.matchingSearches,d):e.matchingSearches,metadata:{prevCursor:null!==(t=n.metadata)&&void 0!==t&&t.prevCursor&&""!==(null===(r=n.metadata)||void 0===r?void 0:r.prevCursor)?n.metadata.prevCursor:e.metadata.prevCursor,syncToken:null!==(a=n.metadata)&&void 0!==a&&a.syncToken&&""!==(null===(o=n.metadata)||void 0===o?void 0:o.syncToken)?n.metadata.syncToken:e.metadata.syncToken},quickReplies:n.quickReplies&&n.quickReplies.length>0?n.quickReplies:e.quickReplies})},Je=function(e,n){return function(t){var r=t.entityUrn?e.get(t.entityUrn):void 0,i=n.get(t.clientId)
return void 0!==r||void 0!==i&&(void 0===i.entityUrn||void 0===t.entityUrn)}},Ze=function(e,n){return function(t){var r=e.state.draftConversations.get(n)||e.state.conversations.getByIdentifier(n,"FullMailboxState")
if(!r)throw Pe.fromClientErrorMemo("CONVERSATION_DOES_NOT_EXIST")
return void 0!==r.messages.getByIdentifier(t)}},en=function(e,n,t){if(0===n.length)return[]
var r=n[0].message,i=e.messages.last()
if(!i)return[]
var a=i.entityUrn
return t&&t.deliveredAt&&(a=i.deliveredAt.getTime()>t.deliveredAt.getTime()?i.entityUrn:t.entityUrn),a===r.entityUrn?n:[]},nn=function(){be.close(!1),function(){try{for(var e in xe)delete xe[e]}catch(e){console.error("clearStateTable",e)}}()},tn=function(e,n){var t=i({},e)
return M(n).forEach((function(e){var r
t[e]?(r=t[e]).push.apply(r,g(n[e])):(t[e]=n[e],t[e].sort((function(e,n){return e.seenAt-n.seenAt})))})),t},rn=function(e){return function(e){var n={}
return M(e).forEach((function(t){n[e[t].messageUrn]?n[e[t].messageUrn].push({participantUrn:t,seenAt:e[t].seenAt}):n[e[t].messageUrn]=[{participantUrn:t,seenAt:e[t].seenAt}]})),n}(function(e){var n={}
return M(e).forEach((function(t){e[t].forEach((function(e){var r=e.participantUrn
if(n[r]){var i=n[r].seenAt
new Date(e.seenAt)>new Date(i)&&(n[r]={messageUrn:t,seenAt:e.seenAt})}else n[r]={messageUrn:t,seenAt:e.seenAt}}))})),n}(e))},an=function(e,n){return e.lastActivityAt.getTime()>=n},on=function(e,n){var t=e.reduce((function(e,n){return i(i({},e),{},d({},n.hostIdentityUrn,n))}),{}),r=n.reduce((function(e,n){return i(i({},e),{},d({},n.hostIdentityUrn,n))}),t)
return w(r)},sn=function(){return dn.fromConversationArray([])},cn=function(e){return!0}
Ne=Symbol.iterator
var dn=function(){function e(n,t){o(this,e),d(this,"_conversations",void 0),d(this,"_filterPredicate",void 0),d(this,"_entityUrnIndex",new Map),d(this,"_clientIdIndex",new Map),d(this,"_idx",0),this._conversations=We(n),this._filterPredicate=t||cn,this._entityUrnIndex=new Map(this._conversations.map((function(e){return[e.entityUrn,e]}))),this._clientIdIndex=new Map(this._conversations.map((function(e){return[e.clientId,e]})))}return c(e,[{key:"getByIdentifier",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FilteredMailboxState",t=q(e)?this._entityUrnIndex.get(e):this._clientIdIndex.get(e)
return"FullMailboxState"===n||t&&this._filterPredicate(t)?t:void 0}},{key:"filterPredicate",get:function(){return this._filterPredicate}},{key:"filtered",value:function(n){return new e(this._conversations,n)}},{key:Ne,value:function(){return this}},{key:"next",value:function(){for(;this._idx<this._conversations.length&&!this._filterPredicate(this._conversations[this._idx]);)this._idx++
return this._idx<this._conversations.length?{done:!1,value:this._conversations[this._idx++]}:(this._idx=0,{done:!0,value:void 0})}},{key:"last",value:function(){if(0!==this._conversations.length){for(var e=this._conversations.length-1;e>=0&&!this._filterPredicate(this._conversations[e]);)e--
return e>=0?this._conversations[e]:void 0}}},{key:"first",value:function(){if(0!==this._conversations.length){for(var e=0;e<this._conversations.length&&!this._filterPredicate(this._conversations[e]);)e++
return e<this._conversations.length?this._conversations[e]:void 0}}},{key:"find",value:function(e){return this._conversations.filter(this._filterPredicate).find(e)}},{key:"findMessage",value:function(e){var n
return null===(n=this._conversations.filter(this._filterPredicate).find((function(n){return void 0!==n.messages.getByIdentifier(e)})))||void 0===n?void 0:n.messages.getByIdentifier(e)}},{key:"filter",value:function(e){return this._conversations.filter(this._filterPredicate).filter(e)}},{key:"updateItem",value:function(n,t){return new e(A(n,t,this._conversations))}},{key:"updateItemByIdentifier",value:function(n,t){var r
if(!(r=q(n)?this._entityUrnIndex.get(n):this._clientIdIndex.get(n)))throw Pe.fromClientErrorMemo("CONVERSATION_DOES_NOT_EXIST")
return new e(this._conversations.map((function(e){return e.clientId===r.clientId?Ye(e,t):e})),this._filterPredicate)}},{key:"addItem",value:function(n){var t=!1,r=this._conversations.map((function(e){return e.entityUrn===n.entityUrn?(t=!0,Xe(e,n)):e}))
return new e(t?r:[].concat(g(this._conversations),[n]),this._filterPredicate)}},{key:"addItems",value:function(n){var t,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=h(C((t=this._conversations,function(e){return void 0===t.find((n=e,function(e){return n.entityUrn===e.entityUrn}))
var n}))(n),2),o=a[0],s=a[1],c=r?o:o.map((function(e){return i(i({},e),{},{categories:[]})})),d=this._conversations.map((function(e){var n=s.find(Le(e.entityUrn))
return n?Xe(e,n):e}))
return new e([].concat(g(d),g(c)),this._filterPredicate)}},{key:"updateAny",value:function(n,t){return new e(A(n,t,this._conversations))}},{key:"deleteItems",value:function(n){return new e(this._conversations.filter(this._filterPredicate).filter((function(e){return!n(e)})),this._filterPredicate)}},{key:"map",value:function(e){return this._conversations.filter(this._filterPredicate).map(e)}},{key:"reduce",value:function(e,n){return this._conversations.filter(this._filterPredicate).reduce(e,n)}},{key:"splitCollection",value:function(n){var t=h(C(n)(this._conversations.filter(this._filterPredicate)),2),r=t[0],i=t[1]
return[new e(r),new e(i)]}},{key:"length",get:function(){return this._conversations.filter(this._filterPredicate).length}},{key:"toString",value:function(){return this.map((function(e){return e.toString()})).toString()}}],[{key:"fromConversationArray",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],arguments.length>1?arguments[1]:void 0)}},{key:"fromConversationIterable",value:function(n){return new e(n._conversations,n._filterPredicate)}},{key:"merge",value:function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cn
return new e([].concat(g(n),g(t)),r)}}]),e}()
const un=/^(\/[^?]+)\??(.*)$/
function pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:""
const n=un.exec(e)
if(n){const[,e="",t=""]=n
return{path:e,queryString:t}}return{path:"",queryString:""}}const ln=/[,()':]/g,fn=/[,()':]/
function mn(e){const n=JSON.parse(JSON.stringify(e))
return function(e,n){if(Array.isArray(e)||"object"!=typeof e||null===e)throw new Error("You must pass an object to the paramEncode function. Use arrayParamEncode.")}(n),Object.keys(n).map((e=>`${hn(e)}=${yn(n[e],!1)}`)).join("&")}function yn(e,n){return Array.isArray(e)?function(e,n){const t=new Array(e.length)
for(let r=0;r<e.length;r++)t[r]=yn(e[r],n)
return`List(${t.join(",")})`}(e,n):function(e){return"object"==typeof e&&null!==e}(e)?function(e,n){return`(${Object.keys(e).map((t=>`${hn(t,n)}:${yn(e[t],n)}`)).join(",")})`}(e,n):hn(e,n)}function hn(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]
return""===e?"''":n&&"string"==typeof e&&fn.test(e)?e.replace(ln,escape):n?e:encodeURIComponent(e).replace(ln,escape)}Object.freeze({S_100_CONTINUE:100,S_101_SWITCHING_PROTOCOLS:101,S_200_OK:200,S_201_CREATED:201,S_202_ACCEPTED:202,S_203_NON_AUTHORITATIVE_INFORMATION:203,S_204_NO_CONTENT:204,S_205_RESET_CONTENT:205,S_206_PARTIAL_CONTENT:206,S_207_MULTI_STATUS:207,S_300_MULTIPLE_CHOICES:300,S_301_MOVED_PERMANENTLY:301,S_302_FOUND:302,S_303_SEE_OTHER:303,S_304_NOT_MODIFIED:304,S_305_USE_PROXY:305,S_307_TEMPORARY_REDIRECT:307,S_400_BAD_REQUEST:400,S_401_UNAUTHORIZED:401,S_402_PAYMENT_REQUIRED:402,S_403_FORBIDDEN:403,S_404_NOT_FOUND:404,S_405_METHOD_NOT_ALLOWED:405,S_406_NOT_ACCEPTABLE:406,S_407_PROXY_AUTHENTICATION_REQUIRED:407,S_408_REQUEST_TIMEOUT:408,S_409_CONFLICT:409,S_410_GONE:410,S_411_LENGTH_REQUIRED:411,S_412_PRECONDITION_FAILED:412,S_413_REQUEST_ENTITY_TOO_LARGE:413,S_414_REQUEST_URI_TOO_LONG:414,S_415_UNSUPPORTED_MEDIA_TYPE:415,S_416_REQUESTED_RANGE_NOT_SATISFIABLE:416,S_417_EXPECTATION_FAILED:417,S_422_UNPROCESSABLE_ENTITY:422,S_423_LOCKED:423,S_424_FAILED_DEPENDENCY:424,S_428_PRECONDITION_REQUIRED:428,S_429_TOO_MANY_REQUESTS:429,S_500_INTERNAL_SERVER_ERROR:500,S_501_NOT_IMPLEMENTED:501,S_502_BAD_GATEWAY:502,S_503_SERVICE_UNAVAILABLE:503,S_504_GATEWAY_TIMEOUT:504,S_505_HTTP_VERSION_NOT_SUPPORTED:505})
const gn="application/x-www-form-urlencoded",vn="POST",_n=8e3
function Tn(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=("graphql"===e?En:kn)(n,t)
return Object.keys(r).length?"".concat(i,"?").concat(mn(r)):i}var bn,En=function(e,n){var t=Sn(e.path),r=Sn(e.host),i=e.graphQLPrefix?Sn(e.graphQLPrefix):""
return"".concat(r).concat(t).concat(i).concat(n)},kn=function(e,n){var t=Sn(e.path),r=Sn(e.host),i=An(e.restliPrefix,n)
return"".concat(r).concat(t).concat(i)},An=function(e,n){return e?"".concat(e).concat(n.substring(0,1).toUpperCase()).concat(n.substring(1)):n},Sn=function(e){var n=e.endsWith("/")?"":"/"
return"".concat(e).concat(n)},Cn=function(e){return e.map((function(e){return function(e){return encodeURIComponent(e).replace(/\(/g,"%28").replace(/\)/g,"%29")}(e)})).join(",")},In=0,Rn=function(){return In+=1},On={accept:"application/graphql","x-restli-protocol-version":"2.0.0"},Mn=function(e){On=i(i({},On),e())},wn=function(e){var n=Rn(),t=function(e,n){var t={url:n,request:{}},r=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
return function(e){const{path:n,queryString:t}=pn(e)
if(n.length>_n)throw new Error(`Per AFD limitations, this request url ${e} will not work. Please contact ask_traffic@.`)
return e.length>_n||t.length>4e3}(e)?function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
const t=Object.assign({},n)
t.url=e,t.forceQueryTunnel=!0
const r=function(e){if(!0===e.forceQueryTunnel){const{path:n,queryString:t}=pn(e.url||void 0)
if(t){const r={}
for(const n in e.headers)"CONTENT-TYPE"!==n.toUpperCase()&&(r[n]=e.headers[n])
let i,a
if(r["X-HTTP-Method-Override"]=e.method,e.body){const n=`RESTLI_${Date.now()}`
a="multipart/mixed; boundary="+n,i=["--"+n,"Content-Type: "+gn,"",t,"--"+n,"Content-Type: application/json","",e.body,"--"+n+"--"].join("\r\n")}else a=gn,i=t
return r["Content-Type"]=a,{body:i,headers:r,method:vn,url:n}}}const n={method:e.method,url:e.url}
return e.body&&(n.body=e.body),n}(t)
return n.method=r.method,n.headers=r.headers,n.body=r.body,n.data=r.body,{url:r.url||void 0,request:n}}(e,n):{url:e,request:n}}("/".concat(n),{method:"GET"})
if(n&&r.url)return t.url=r.url.substring(1),t.request=r.request,{url:t.url,request:t.request}
throw Pe.fromClientErrorMemo("INVALID_URL")}(0,e),r=t.url,a=t.request
return bn&&Mn(bn),fetch(r,{body:a.body,headers:i(i(i({},a.headers),On),{},{accept:"application/graphql","x-restli-protocol-version":"2.0.0"}),method:a.method||"GET"}).then((function(e){return{response:e,requestId:n}}))},Nn=function(e,n){var t=Rn()
return bn&&Mn(bn),fetch(e,{headers:i({},On),body:n,method:"POST"}).then((function(e){return{response:e,requestId:t}}))},Pn=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Tn("restli",e.messengerResource,n,t),a=Rn()
return fetch(r,{headers:i({"x-restli-protocol-version":"2.0.0"},On),method:"DELETE"}).then((function(e){return{response:e,requestId:a}}))},Dn=new Map
function Un(e){var n=Object.freeze({$debug:i({kind:e.kind},"query"===e.kind?{queryId:e.id,querySource:e.source}:{})})
return Dn.set(n,e),n}var xn=new Map,Ln=function(e){if(!e.name||"query"!==e.kind)return e
var n=Fn(e.name)
return n?i(i({},e),{},{id:n}):e},Fn=function(e){return xn.get(e)},Bn=Un({kind:"query",id:"messengerConversations.f6b72f54aa2a1d09675f60a67d6780c3",typeName:"com.linkedin.a48779e96d56416b455684d54ca0a605",name:"find-conversations-by-category",source:'query findConversationsByCategory($category: String!, $count: Int, $lastUpdatedBefore: Long, $mailboxUrn: String!, $nextCursor: String) @recipeType(name: "com.linkedin.a48779e96d56416b455684d54ca0a605") {\n  messengerConversationsByCategory(category: $category, count: $count, lastUpdatedBefore: $lastUpdatedBefore, mailboxUrn: $mailboxUrn, nextCursor: $nextCursor) @recipeType(name: "com.linkedin.a73b8d5735721f1ec465168cdaa142b9") {\n    elements @recipeType(name: "com.linkedin.e1658c761fec94488fdd088b9fdb9a69") {\n      ...Conversation\n      messages(count: 1, sortOrder: DESCENDING) @required @recipeType(name: "com.linkedin.438d87be109cbb09469835a99d6b6f2f") {\n        elements @allOrNothing @recipeType(name: "com.linkedin.c68c6da406b1fe9e72b3696e90742b5f") {\n          ...MessagePartialParticipant\n          _recipeType\n          _type\n        }\n        _recipeType\n        _type\n      }\n      _recipeType\n      _type\n    }\n    metadata @recipeType(name: "com.linkedin.5476b6f6131b92f9257f7c830d64c187") {\n      nextCursor\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  _recipeType\n  _type\n}\n\nfragment VectorImage on common_VectorImage {\n  artifacts @recipeType(name: "com.linkedin.a6a436fa6f17407bd8c8147f46fcff28") {\n    width\n    height\n    fileIdentifyingUrlPathSegment\n    _recipeType\n    _type\n  }\n  attribution\n  rootUrl\n  focalPoint @recipeType(name: "com.linkedin.ac430a4df660e223b7f4f7c373a4ccf0") {\n    xOffsetPercentage\n    yOffsetPercentage\n    _recipeType\n    _type\n  }\n  digitalmediaAsset\n}\n\nfragment AttributeKind on pemberly_text_AttributeKind {\n  bold @recipeType(name: "com.linkedin.3b08767bb20a5c78102fa8a9fe50fdd1") {\n    __typename\n    _recipeType\n    _type\n  }\n  italic @recipeType(name: "com.linkedin.451ff444eb8982d2fbbfe5b156046452") {\n    __typename\n    _recipeType\n    _type\n  }\n  hyperlink @recipeType(name: "com.linkedin.e54582439de47f7669a170ea5a53d2e1") {\n    url\n    __typename\n    _recipeType\n    _type\n  }\n  paragraph @recipeType(name: "com.linkedin.a82ff00edd015184a01711bba9d208bc") {\n    __typename\n    _recipeType\n    _type\n  }\n  list @recipeType(name: "com.linkedin.096e9846aa6fdd7640e1d48cbf951703") {\n    ordered\n    __typename\n    _recipeType\n    _type\n  }\n  listItem @recipeType(name: "com.linkedin.b288716f8064dfd0ee726fe59dbac2cf") {\n    __typename\n    _recipeType\n    _type\n  }\n  lineBreak @recipeType(name: "com.linkedin.1803df07940f4da07e985ad47a485455") {\n    __typename\n    _recipeType\n    _type\n  }\n  underline @recipeType(name: "com.linkedin.cd14dd378cce5c41ae247b3718808a8d") {\n    __typename\n    _recipeType\n    _type\n  }\n  subscript @recipeType(name: "com.linkedin.61c5d9bc9b7540235f8f9f68f7695fe0") {\n    __typename\n    _recipeType\n    _type\n  }\n  superscript @recipeType(name: "com.linkedin.32cdb2401630b4ea1db1049f0dce279f") {\n    __typename\n    _recipeType\n    _type\n  }\n  entity @recipeType(name: "com.linkedin.5b729f0d82ced97a1897195b00832a9f") {\n    urn\n    _recipeType\n    _type\n  }\n}\n\nfragment AttributedText on pemberly_text_AttributedText {\n  text\n  attributes @recipeType(name: "com.linkedin.97f0379fa4ba5468e14cbd5c68053810") {\n    attributeKind {\n      ...AttributeKind\n    }\n    start\n    length\n    _recipeType\n    _type\n  }\n}\n\nfragment Participant on messenger_MessagingParticipant {\n  entityUrn\n  hostIdentityUrn\n  backendUrn\n  participantType {\n    member @recipeType(name: "com.linkedin.70998a19dcae8fa5e43630a55ef0d4e6") {\n      firstName @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      lastName @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      headline @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      profilePicture @recipeType(name: "com.linkedin.44ed3bb9ce20ace95c362517868c950d") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      profileUrl\n      pronoun {\n        customPronoun\n        standardizedPronoun\n      }\n      distance\n      _recipeType\n      _type\n    }\n    organization @recipeType(name: "com.linkedin.b5b44a2405d5ad0bf6c7bac0a15264d6") {\n      name @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      tagline @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      logo @recipeType(name: "com.linkedin.44ed3bb9ce20ace95c362517868c950d") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      pageType\n      pageUrl\n      _recipeType\n      _type\n    }\n    custom @recipeType(name: "com.linkedin.0d08b58967a4c3b72b7d82f27c087076") {\n      name @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      image @recipeType(name: "com.linkedin.44ed3bb9ce20ace95c362517868c950d") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      _recipeType\n      _type\n    }\n  }\n}\n\nfragment CreativeAdsReportingInfo on messenger_CreativeAdsReportingInfo {\n  contentSource\n  sponsoredAccountUrn\n  sponsoredCreativeUrn\n}\n\nfragment SponsoredMetadata on messenger_SponsoredMetadata {\n  adRequestId\n  activityType\n  adTrackingCode\n  leadTrackingCode\n  version\n  videoBehavior\n  adTrackingCode\n  sponsoredCampaignUrn\n  adServingUrn\n}\n\nfragment ConversationAdsContent on messenger_ConversationAdsContent {\n  adUnit @recipeType(name: "com.linkedin.44ed3bb9ce20ace95c362517868c950d") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  advertiserLabel\n  advertiserLegalText @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  clickTrackingUrl\n  creativeAdsReportingInfo @recipeType(name: "com.linkedin.8eb25da4c068096c9747394f0b9c6284") {\n    ...CreativeAdsReportingInfo\n    _recipeType\n    _type\n  }\n  linkedInLegalText @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  sponsoredConversationTrackingId\n  sponsoredTracking @recipeType(name: "com.linkedin.3651c975dd1476734086735ba5da8a22") {\n    ...SponsoredMetadata\n    _recipeType\n    _type\n  }\n}\n\nfragment Conversation on messenger_Conversation {\n  entityUrn\n  backendUrn\n  read\n  createdAt\n  lastActivityAt\n  lastReadAt\n  title\n  headlineText @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  shortHeadlineText @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  notificationStatus\n  categories\n  unreadCount\n  conversationUrl\n  hostConversationActions\n  conversationTypeText @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  state\n  groupChat\n  creator @recipeType(name: "com.linkedin.58c76c96823fed925ab4d67f45c41515") {\n    ...Participant\n    _recipeType\n    _type\n  }\n  disabledFeatures @recipeType(name: "com.linkedin.988fdd52ee12553570a449e3687e2c00") {\n    disabledFeature\n    reasonText @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  contentMetadata {\n    conversationAdContent @recipeType(name: "com.linkedin.c250ee3ee7ca72ac5d57f4772687ee8e") {\n      ...ConversationAdsContent\n      _recipeType\n      _type\n    }\n  }\n  conversationParticipants @recipeType(name: "com.linkedin.58c76c96823fed925ab4d67f45c41515") {\n    ...Participant\n    _recipeType\n    _type\n  }\n}\n\nfragment ReactionSummary on messenger_ReactionSummary {\n  count\n  emoji\n  firstReactedAt\n  viewerReacted\n}\n\nfragment MessageBaseWithoutConversation on messenger_Message {\n  entityUrn\n  backendConversationUrn\n  backendUrn\n  subject\n  body @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  inlineWarning @recipeType(name: "com.linkedin.d9b5547d27737812851fe3d107da5441") {\n    obfuscatedMessageWarning @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    inlineWarningPrompt @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  originToken\n  deliveredAt\n  messageBodyRenderFormat\n  renderContentFallbackText\n  reactionSummaries @recipeType(name: "com.linkedin.95c4ea34721e0046181b339f52ff27d6") {\n    ...ReactionSummary\n    _recipeType\n    _type\n  }\n}\n\nfragment MessageBase on messenger_Message {\n  ...MessageBaseWithoutConversation\n  conversation @recipeType(name: "com.linkedin.e1658c761fec94488fdd088b9fdb9a69") {\n    entityUrn\n    _recipeType\n    _type\n  }\n}\n\nfragment AudioMetadata on messenger_AudioMetadata {\n  duration\n  url\n}\n\nfragment AwayMessage on messenger_AwayMessage {\n  footerText @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  text @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n}\n\nfragment ExternalMedia on messenger_ExternalMedia {\n  entityUrn\n  title\n  media @recipeType(name: "com.linkedin.578efc3dc45f6204ef3609e978da6634") {\n    originalHeight\n    originalWidth\n    url\n    _recipeType\n    _type\n  }\n  previewMedia @recipeType(name: "com.linkedin.578efc3dc45f6204ef3609e978da6634") {\n    originalHeight\n    originalWidth\n    url\n    _recipeType\n    _type\n  }\n}\n\nfragment FileAttachment on messenger_FileAttachment {\n  assetUrn\n  byteSize\n  mediaType\n  name\n  url\n}\n\nfragment MessageAdRenderContent on messenger_MessageAdRenderContent {\n  advertiserLabel\n  bodyTracking\n  creativeAdsReportingInfo @recipeType(name: "com.linkedin.8eb25da4c068096c9747394f0b9c6284") {\n    contentSource\n    sponsoredAccountUrn\n    sponsoredCreativeUrn\n    _recipeType\n    _type\n  }\n  legalText @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  legalTextTracking\n  openTracking\n  sponsoredCampaignUrn\n  sponsoredTracking @recipeType(name: "com.linkedin.3651c975dd1476734086735ba5da8a22") {\n    ...SponsoredMetadata\n    _recipeType\n    _type\n  }\n  status\n  subContent @recipeType(name: "com.linkedin.79d9e8e17548ee6b78cc6d0478534d47") {\n    action\n    actionText\n    actionTracking\n    callToActionLabel\n    leadGenFormOpenTracking\n    leadGenFormUrn\n    leadTrackingCode\n    leadTrackingParams\n    tscpUrl\n    adUnit @recipeType(name: "com.linkedin.e55b3cc50623802541bbf563e2d8c443") {\n      adUnit @recipeType(name: "com.linkedin.44ed3bb9ce20ace95c362517868c950d") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      adUnitTracking\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment VideoPlayMetadata on videocontent_VideoPlayMetadata {\n  entityUrn\n  adaptiveStreams @recipeType(name: "com.linkedin.d98709a73534a771dc64d8d7199330e2") {\n    initialBitRate\n    masterPlaylists @recipeType(name: "com.linkedin.7f1121931194e998bc1b4ea0891ad2ae") {\n      expiresAt\n      url\n      _recipeType\n      _type\n    }\n    mediaType\n    protocol\n    _recipeType\n    _type\n  }\n  aspectRatio\n  duration\n  liveStreamCreatedAt\n  liveStreamEndedAt\n  media\n  nextMedia\n  prevMedia\n  progressiveStreams @recipeType(name: "com.linkedin.899d1fe17e53465a1e2e1a7f068c1a3d") {\n    bitRate\n    height\n    mediaType\n    mimeType\n    size\n    streamingLocations @recipeType(name: "com.linkedin.7f1121931194e998bc1b4ea0891ad2ae") {\n      expiresAt\n      url\n      _recipeType\n      _type\n    }\n    width\n    _recipeType\n    _type\n  }\n  provider\n  thumbnail @recipeType(name: "com.linkedin.44ed3bb9ce20ace95c362517868c950d") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  trackingId\n  transcripts @recipeType(name: "com.linkedin.d98a5df6b459eabc86916de3efe99dbf") {\n    captionFile\n    captionFormat\n    isAutogenerated\n    lines @recipeType(name: "com.linkedin.b711d5a6aa4c17e305bce381e7ad2a5b") {\n      caption\n      lineEndAt\n      lineStartAt\n      _recipeType\n      _type\n    }\n    locale @recipeType(name: "com.linkedin.3072aa9dcc423d530b618db09e53699d") {\n      country\n      extensions @recipeType(name: "com.linkedin.3dc125cbeda1099d08ef46eac53186c3") {\n        t\n        u\n        x\n        _recipeType\n        _type\n      }\n      language\n      script\n      variant\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment VideoMeeting on messenger_VideoMeeting {\n  videoMeeting @recipeType(name: "com.linkedin.c439cde8ef7577d0a58e7b24066b7d7c") {\n    entityUrn\n    _recipeType\n    _type\n  }\n  earliestStartAt\n  expiresAt\n  timeRange @recipeType(name: "com.linkedin.26cea42d83a8b4074bf987dfa8ce4bc5") {\n    end\n    start\n    _recipeType\n    _type\n  }\n}\n\nfragment ConversationAdsMessageContent on messenger_ConversationAdsMessageContent {\n  sponsoredMessageContentUrn\n  sponsoredMessageTrackingId\n  sponsoredMessageOptions @recipeType(name: "com.linkedin.dc82aa5700dc2891aecbc7085b5228c9") {\n    clickAction {\n      externalWebsiteClickAction @recipeType(name: "com.linkedin.9a890742b7fd44d278739c890bf26e89") {\n        redirectUrl\n        _recipeType\n        _type\n      }\n      leadGenClickAction @recipeType(name: "com.linkedin.143e2938d676cb3276a8844859ad8e08") {\n        leadGenFormUrn\n        leadTrackingCode\n        leadTrackingParams\n        _recipeType\n        _type\n      }\n    }\n    optionText @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    tscpUrl\n    sponsoredMessageOption @recipeType(name: "com.linkedin.1c0d4217e953cefc22684bde72a8cb7f") {\n      entityUrn\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment MessageRenderContent on messenger_RenderContent {\n  audio @recipeType(name: "com.linkedin.819f17cb2f8e20624cbc4c482c64a921") {\n    ...AudioMetadata\n    _recipeType\n    _type\n  }\n  awayMessage @recipeType(name: "com.linkedin.a9b778a895a630807e8656edb8c2fb10") {\n    ...AwayMessage\n    _recipeType\n    _type\n  }\n  externalMedia @recipeType(name: "com.linkedin.96ea1277e90b082f2dce2f65fb92ffba") {\n    ...ExternalMedia\n    _recipeType\n    _type\n  }\n  file @recipeType(name: "com.linkedin.50f39033128726441a0f42ef8d648cf0") {\n    ...FileAttachment\n    _recipeType\n    _type\n  }\n  messageAdRenderContent @recipeType(name: "com.linkedin.587e08a3254a75acc7be84a6e830cd2b") {\n    ...MessageAdRenderContent\n    _recipeType\n    _type\n  }\n  vectorImage @recipeType(name: "com.linkedin.44ed3bb9ce20ace95c362517868c950d") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  video @recipeType(name: "com.linkedin.33c8051984340fcd44e052471e633f01") {\n    ...VideoPlayMetadata\n    _recipeType\n    _type\n  }\n  videoMeeting @recipeType(name: "com.linkedin.3ecd326f413c05157f0a38fbeb56d49e") {\n    ...VideoMeeting\n    _recipeType\n    _type\n  }\n  hostUrnData @recipeType(name: "com.linkedin.3b13ed81acf43af83b1817fe6d68aaf9") {\n    hostUrn\n    type\n    _recipeType\n    _type\n  }\n  conversationAdsMessageContent @recipeType(name: "com.linkedin.548b5ed0017e3048ef0c60dc48baa9ef") {\n    ...ConversationAdsMessageContent\n    _recipeType\n    _type\n  }\n  forwardedMessageContent @recipeType(name: "com.linkedin.510056f05feb00a00754f3b54aa85c95") {\n    originalSender @recipeType(name: "com.linkedin.58c76c96823fed925ab4d67f45c41515") {\n      ...Participant\n      _recipeType\n      _type\n    }\n    originalSendAt\n    forwardedBody @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    footerText @recipeType(name: "com.linkedin.172be6e8cdafe3fc0ee986fb972a7109") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment MessagePartialParticipant on messenger_Message {\n  ...MessageBase\n  sender @recipeType(name: "com.linkedin.58c76c96823fed925ab4d67f45c41515") {\n    entityUrn\n    hostIdentityUrn\n    _recipeType\n    _type\n  }\n  renderContent {\n    ...MessageRenderContent\n  }\n}\n',variablesTypes:{category:{type:"String",isRequired:!0,kind:"Scalar"},count:{type:"Int",isRequired:!1,kind:"Scalar"},lastUpdatedBefore:{type:"Long",isRequired:!1,kind:"Scalar"},mailboxUrn:{type:"String",isRequired:!0,kind:"Scalar"},nextCursor:{type:"String",isRequired:!1,kind:"Scalar"}}}),qn=Un({kind:"query",id:"messengerConversations.8a54da2d20128358f9853e6f8bec3276",typeName:"com.linkedin.637753efb2e5d51c7275035cac9b4c5f",name:"find-conversations-by-recipients",source:'query findConversationsByRecipients($mailboxUrn: String!, $recipients: [String!]!) @recipeType(name: "com.linkedin.637753efb2e5d51c7275035cac9b4c5f") {\n  messengerConversationsByRecipients(mailboxUrn: $mailboxUrn, recipients: $recipients) @recipeType(name: "com.linkedin.033878da33550a1f330eeaf7883b4321") {\n    elements @recipeType(name: "com.linkedin.128c009a69cdd7bfb2f134cbbbf9a397") {\n      ...Conversation\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  _recipeType\n  _type\n}\n\nfragment VectorImage on common_VectorImage {\n  artifacts @recipeType(name: "com.linkedin.09228bb8171dd68774500c2d789b2542") {\n    width\n    height\n    fileIdentifyingUrlPathSegment\n    _recipeType\n    _type\n  }\n  attribution\n  rootUrl\n  focalPoint @recipeType(name: "com.linkedin.15a83ff1c890b31b7a7fe3fc611b5f9a") {\n    xOffsetPercentage\n    yOffsetPercentage\n    _recipeType\n    _type\n  }\n  digitalmediaAsset\n}\n\nfragment AttributeKind on pemberly_text_AttributeKind {\n  bold @recipeType(name: "com.linkedin.4ae7587cf42013da5e540c5d2de5624e") {\n    __typename\n    _recipeType\n    _type\n  }\n  italic @recipeType(name: "com.linkedin.2566589f404a86abf02bda63a6500393") {\n    __typename\n    _recipeType\n    _type\n  }\n  hyperlink @recipeType(name: "com.linkedin.27e8caede551ddc11ea0bd2c48f3c5e1") {\n    url\n    __typename\n    _recipeType\n    _type\n  }\n  paragraph @recipeType(name: "com.linkedin.21ee657d4ac32c1c1e5bf777b131830f") {\n    __typename\n    _recipeType\n    _type\n  }\n  list @recipeType(name: "com.linkedin.2899f08083867b774e4b7dd3be10abc1") {\n    ordered\n    __typename\n    _recipeType\n    _type\n  }\n  listItem @recipeType(name: "com.linkedin.cec8212252a33cad2a25dd92772f6098") {\n    __typename\n    _recipeType\n    _type\n  }\n  lineBreak @recipeType(name: "com.linkedin.4698b01fbc53cf61a11e56134775ca3f") {\n    __typename\n    _recipeType\n    _type\n  }\n  underline @recipeType(name: "com.linkedin.810a970e1d444ed8fa907f901db408a7") {\n    __typename\n    _recipeType\n    _type\n  }\n  subscript @recipeType(name: "com.linkedin.dd46d970fdfe85b48a86cb201f6b59cf") {\n    __typename\n    _recipeType\n    _type\n  }\n  superscript @recipeType(name: "com.linkedin.43630e8f64f9af0ec9d63605915b0ae2") {\n    __typename\n    _recipeType\n    _type\n  }\n  entity @recipeType(name: "com.linkedin.4b385e971ec0515ee23f2fc1e93f80dc") {\n    urn\n    _recipeType\n    _type\n  }\n}\n\nfragment AttributedText on pemberly_text_AttributedText {\n  text\n  attributes @recipeType(name: "com.linkedin.46edbc17c83db73c1c168d5609d6fbb0") {\n    attributeKind {\n      ...AttributeKind\n    }\n    start\n    length\n    _recipeType\n    _type\n  }\n}\n\nfragment Participant on messenger_MessagingParticipant {\n  entityUrn\n  hostIdentityUrn\n  backendUrn\n  participantType {\n    member @recipeType(name: "com.linkedin.c95fcb34903375c2bf082dc19e08afe9") {\n      firstName @recipeType(name: "com.linkedin.170635a4a6c03944472b6a91bb39e1ff") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      lastName @recipeType(name: "com.linkedin.170635a4a6c03944472b6a91bb39e1ff") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      headline @recipeType(name: "com.linkedin.170635a4a6c03944472b6a91bb39e1ff") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      profilePicture @recipeType(name: "com.linkedin.12fbed95295806f914db1a049012110f") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      profileUrl\n      pronoun {\n        customPronoun\n        standardizedPronoun\n      }\n      distance\n      _recipeType\n      _type\n    }\n    organization @recipeType(name: "com.linkedin.3587bb32347eaf7d2483e00bc0846d9c") {\n      name @recipeType(name: "com.linkedin.170635a4a6c03944472b6a91bb39e1ff") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      tagline @recipeType(name: "com.linkedin.170635a4a6c03944472b6a91bb39e1ff") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      logo @recipeType(name: "com.linkedin.12fbed95295806f914db1a049012110f") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      pageType\n      pageUrl\n      _recipeType\n      _type\n    }\n    custom @recipeType(name: "com.linkedin.35a65043a89d9556f36e9efbffee7c1e") {\n      name @recipeType(name: "com.linkedin.170635a4a6c03944472b6a91bb39e1ff") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      image @recipeType(name: "com.linkedin.12fbed95295806f914db1a049012110f") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      _recipeType\n      _type\n    }\n  }\n}\n\nfragment CreativeAdsReportingInfo on messenger_CreativeAdsReportingInfo {\n  contentSource\n  sponsoredAccountUrn\n  sponsoredCreativeUrn\n}\n\nfragment SponsoredMetadata on messenger_SponsoredMetadata {\n  adRequestId\n  activityType\n  adTrackingCode\n  leadTrackingCode\n  version\n  videoBehavior\n  adTrackingCode\n  sponsoredCampaignUrn\n  adServingUrn\n}\n\nfragment ConversationAdsContent on messenger_ConversationAdsContent {\n  adUnit @recipeType(name: "com.linkedin.12fbed95295806f914db1a049012110f") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  advertiserLabel\n  advertiserLegalText @recipeType(name: "com.linkedin.170635a4a6c03944472b6a91bb39e1ff") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  clickTrackingUrl\n  creativeAdsReportingInfo @recipeType(name: "com.linkedin.f95e439de1f94fa96a08b86fb8c7c66a") {\n    ...CreativeAdsReportingInfo\n    _recipeType\n    _type\n  }\n  linkedInLegalText @recipeType(name: "com.linkedin.170635a4a6c03944472b6a91bb39e1ff") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  sponsoredConversationTrackingId\n  sponsoredTracking @recipeType(name: "com.linkedin.3d99942c97deb43cf5874499c62d5a76") {\n    ...SponsoredMetadata\n    _recipeType\n    _type\n  }\n}\n\nfragment Conversation on messenger_Conversation {\n  entityUrn\n  backendUrn\n  read\n  createdAt\n  lastActivityAt\n  lastReadAt\n  title\n  headlineText @recipeType(name: "com.linkedin.170635a4a6c03944472b6a91bb39e1ff") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  shortHeadlineText @recipeType(name: "com.linkedin.170635a4a6c03944472b6a91bb39e1ff") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  notificationStatus\n  categories\n  unreadCount\n  conversationUrl\n  hostConversationActions\n  conversationTypeText @recipeType(name: "com.linkedin.170635a4a6c03944472b6a91bb39e1ff") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  state\n  groupChat\n  creator @recipeType(name: "com.linkedin.0d9eace028f0468a2d108c3ac54bd009") {\n    ...Participant\n    _recipeType\n    _type\n  }\n  disabledFeatures @recipeType(name: "com.linkedin.f4eb28d3f7844665dacc4e816eec852c") {\n    disabledFeature\n    reasonText @recipeType(name: "com.linkedin.170635a4a6c03944472b6a91bb39e1ff") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  contentMetadata {\n    conversationAdContent @recipeType(name: "com.linkedin.6af9bce1de695d637397a582319c5307") {\n      ...ConversationAdsContent\n      _recipeType\n      _type\n    }\n  }\n  conversationParticipants @recipeType(name: "com.linkedin.0d9eace028f0468a2d108c3ac54bd009") {\n    ...Participant\n    _recipeType\n    _type\n  }\n}\n',variablesTypes:{mailboxUrn:{type:"String",isRequired:!0,kind:"Scalar"},recipients:{type:"Array",isRequired:!0,innerType:{type:"String",isRequired:!0,kind:"Scalar"},kind:"Array"}}}),jn=Un({kind:"query",id:"messengerConversations.f7a355224af11c305e9d3a6b57b2c9cd",typeName:"com.linkedin.c3d42ec0291728dbe7f3aced6f0826e5",name:"find-conversations-by-search-criteria",source:'query FindConversationsBySearchCriteria($categories: [String!] = [], $count: Int = 10, $firstDegreeConnections: Boolean = false, $keywords: String, $mailboxUrn: String!, $nextCursor: String, $read: Boolean) @recipeType(name: "com.linkedin.c3d42ec0291728dbe7f3aced6f0826e5") {\n  messengerConversationsBySearchCriteria(categories: $categories, count: $count, firstDegreeConnections: $firstDegreeConnections, keywords: $keywords, mailboxUrn: $mailboxUrn, nextCursor: $nextCursor, read: $read) @recipeType(name: "com.linkedin.cc7c78e409f93d88a171f825fe0d8629") {\n    elements @recipeType(name: "com.linkedin.aed049a49fceb4311a08d530a54727f7") {\n      ...Conversation\n      messages(count: 1, sortOrder: DESCENDING) @required @recipeType(name: "com.linkedin.243a0da9c776132286f7d390f6cd67dc") {\n        elements @allOrNothing @recipeType(name: "com.linkedin.4cf8e0578b3ab8a8bdd8d9b3cdeacee0") {\n          ...MessagePartialParticipant\n          _recipeType\n          _type\n        }\n        _recipeType\n        _type\n      }\n      _recipeType\n      _type\n    }\n    metadata @recipeType(name: "com.linkedin.d417d4710ab69db0cead999706012b23") {\n      ...ConversationCursorMetadata\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  _recipeType\n  _type\n}\n\nfragment VectorImage on common_VectorImage {\n  artifacts @recipeType(name: "com.linkedin.b58763f17b3066a28387e37a39070c38") {\n    width\n    height\n    fileIdentifyingUrlPathSegment\n    _recipeType\n    _type\n  }\n  attribution\n  rootUrl\n  focalPoint @recipeType(name: "com.linkedin.08f13fbb111fdeb2de77234c8cc37927") {\n    xOffsetPercentage\n    yOffsetPercentage\n    _recipeType\n    _type\n  }\n  digitalmediaAsset\n}\n\nfragment AttributeKind on pemberly_text_AttributeKind {\n  bold @recipeType(name: "com.linkedin.d98ea502796de9a46275f270c8da7f92") {\n    __typename\n    _recipeType\n    _type\n  }\n  italic @recipeType(name: "com.linkedin.6c8b66070f8773c96509d828d6a05b3d") {\n    __typename\n    _recipeType\n    _type\n  }\n  hyperlink @recipeType(name: "com.linkedin.16ff88323bde36839fd76346af9bb305") {\n    url\n    __typename\n    _recipeType\n    _type\n  }\n  paragraph @recipeType(name: "com.linkedin.e1faf92a024971783219dffe58936c03") {\n    __typename\n    _recipeType\n    _type\n  }\n  list @recipeType(name: "com.linkedin.d11382dc4567d2ebbfc16f9dda45511a") {\n    ordered\n    __typename\n    _recipeType\n    _type\n  }\n  listItem @recipeType(name: "com.linkedin.5d6c23f69f74b7ed5b72bdf8a42c0a58") {\n    __typename\n    _recipeType\n    _type\n  }\n  lineBreak @recipeType(name: "com.linkedin.917e2697debe114e1f6635c8d7d6a2fb") {\n    __typename\n    _recipeType\n    _type\n  }\n  underline @recipeType(name: "com.linkedin.2cc1a5484d8589a0fdba7567eb060176") {\n    __typename\n    _recipeType\n    _type\n  }\n  subscript @recipeType(name: "com.linkedin.9f815bc6015528a062b691e80cb58f95") {\n    __typename\n    _recipeType\n    _type\n  }\n  superscript @recipeType(name: "com.linkedin.e8c76e7c50b11b0640d6aae1556dc643") {\n    __typename\n    _recipeType\n    _type\n  }\n  entity @recipeType(name: "com.linkedin.7355651748f3690a24ab45ef61385b0f") {\n    urn\n    _recipeType\n    _type\n  }\n}\n\nfragment AttributedText on pemberly_text_AttributedText {\n  text\n  attributes @recipeType(name: "com.linkedin.862090c7fd1ecbc9353fc1bda6dafe92") {\n    attributeKind {\n      ...AttributeKind\n    }\n    start\n    length\n    _recipeType\n    _type\n  }\n}\n\nfragment Participant on messenger_MessagingParticipant {\n  entityUrn\n  hostIdentityUrn\n  backendUrn\n  participantType {\n    member @recipeType(name: "com.linkedin.6ec40d2da20c6b9d8f73c6648057b47f") {\n      firstName @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      lastName @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      headline @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      profilePicture @recipeType(name: "com.linkedin.e3d271c5c175a42a23a8e62222c2a872") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      profileUrl\n      pronoun {\n        customPronoun\n        standardizedPronoun\n      }\n      distance\n      _recipeType\n      _type\n    }\n    organization @recipeType(name: "com.linkedin.7eb2879d374ff89be8b91f2f4c181bd7") {\n      name @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      tagline @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      logo @recipeType(name: "com.linkedin.e3d271c5c175a42a23a8e62222c2a872") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      pageType\n      pageUrl\n      _recipeType\n      _type\n    }\n    custom @recipeType(name: "com.linkedin.6356b6f0ad0155ca2bfaa5cb91a815ba") {\n      name @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      image @recipeType(name: "com.linkedin.e3d271c5c175a42a23a8e62222c2a872") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      _recipeType\n      _type\n    }\n  }\n}\n\nfragment CreativeAdsReportingInfo on messenger_CreativeAdsReportingInfo {\n  contentSource\n  sponsoredAccountUrn\n  sponsoredCreativeUrn\n}\n\nfragment SponsoredMetadata on messenger_SponsoredMetadata {\n  adRequestId\n  activityType\n  adTrackingCode\n  leadTrackingCode\n  version\n  videoBehavior\n  adTrackingCode\n  sponsoredCampaignUrn\n  adServingUrn\n}\n\nfragment ConversationAdsContent on messenger_ConversationAdsContent {\n  adUnit @recipeType(name: "com.linkedin.e3d271c5c175a42a23a8e62222c2a872") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  advertiserLabel\n  advertiserLegalText @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  clickTrackingUrl\n  creativeAdsReportingInfo @recipeType(name: "com.linkedin.de423c0e668a2e3937ba0767defe646f") {\n    ...CreativeAdsReportingInfo\n    _recipeType\n    _type\n  }\n  linkedInLegalText @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  sponsoredConversationTrackingId\n  sponsoredTracking @recipeType(name: "com.linkedin.151f71de764f34ef43820f56d5d914c2") {\n    ...SponsoredMetadata\n    _recipeType\n    _type\n  }\n}\n\nfragment Conversation on messenger_Conversation {\n  entityUrn\n  backendUrn\n  read\n  createdAt\n  lastActivityAt\n  lastReadAt\n  title\n  headlineText @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  shortHeadlineText @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  notificationStatus\n  categories\n  unreadCount\n  conversationUrl\n  hostConversationActions\n  conversationTypeText @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  state\n  groupChat\n  creator @recipeType(name: "com.linkedin.b576b99ebabe7b19d6a7c65dba01db86") {\n    ...Participant\n    _recipeType\n    _type\n  }\n  disabledFeatures @recipeType(name: "com.linkedin.02bd52c0e1880e99ba50011654b56308") {\n    disabledFeature\n    reasonText @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  contentMetadata {\n    conversationAdContent @recipeType(name: "com.linkedin.c949d9daf5e17ad5c66d1fdbabd4b52c") {\n      ...ConversationAdsContent\n      _recipeType\n      _type\n    }\n  }\n  conversationParticipants @recipeType(name: "com.linkedin.b576b99ebabe7b19d6a7c65dba01db86") {\n    ...Participant\n    _recipeType\n    _type\n  }\n}\n\nfragment ReactionSummary on messenger_ReactionSummary {\n  count\n  emoji\n  firstReactedAt\n  viewerReacted\n}\n\nfragment MessageBaseWithoutConversation on messenger_Message {\n  entityUrn\n  backendConversationUrn\n  backendUrn\n  subject\n  body @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  inlineWarning @recipeType(name: "com.linkedin.fdf2f6e4651fa98389fd0c9940ee943c") {\n    obfuscatedMessageWarning @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    inlineWarningPrompt @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  originToken\n  deliveredAt\n  messageBodyRenderFormat\n  renderContentFallbackText\n  reactionSummaries @recipeType(name: "com.linkedin.d5645f344392d647ea5a068fbe7e9a8c") {\n    ...ReactionSummary\n    _recipeType\n    _type\n  }\n}\n\nfragment MessageBase on messenger_Message {\n  ...MessageBaseWithoutConversation\n  conversation @recipeType(name: "com.linkedin.aed049a49fceb4311a08d530a54727f7") {\n    entityUrn\n    _recipeType\n    _type\n  }\n}\n\nfragment AudioMetadata on messenger_AudioMetadata {\n  duration\n  url\n}\n\nfragment AwayMessage on messenger_AwayMessage {\n  footerText @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  text @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n}\n\nfragment ExternalMedia on messenger_ExternalMedia {\n  entityUrn\n  title\n  media @recipeType(name: "com.linkedin.5fcffd1a9bc36206175265e0c15e6608") {\n    originalHeight\n    originalWidth\n    url\n    _recipeType\n    _type\n  }\n  previewMedia @recipeType(name: "com.linkedin.5fcffd1a9bc36206175265e0c15e6608") {\n    originalHeight\n    originalWidth\n    url\n    _recipeType\n    _type\n  }\n}\n\nfragment FileAttachment on messenger_FileAttachment {\n  assetUrn\n  byteSize\n  mediaType\n  name\n  url\n}\n\nfragment MessageAdRenderContent on messenger_MessageAdRenderContent {\n  advertiserLabel\n  bodyTracking\n  creativeAdsReportingInfo @recipeType(name: "com.linkedin.de423c0e668a2e3937ba0767defe646f") {\n    contentSource\n    sponsoredAccountUrn\n    sponsoredCreativeUrn\n    _recipeType\n    _type\n  }\n  legalText @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  legalTextTracking\n  openTracking\n  sponsoredCampaignUrn\n  sponsoredTracking @recipeType(name: "com.linkedin.151f71de764f34ef43820f56d5d914c2") {\n    ...SponsoredMetadata\n    _recipeType\n    _type\n  }\n  status\n  subContent @recipeType(name: "com.linkedin.c76480b983b274e78981740fe67f2d61") {\n    action\n    actionText\n    actionTracking\n    callToActionLabel\n    leadGenFormOpenTracking\n    leadGenFormUrn\n    leadTrackingCode\n    leadTrackingParams\n    tscpUrl\n    adUnit @recipeType(name: "com.linkedin.8b2f75e37b9adaf3c2c529083186e490") {\n      adUnit @recipeType(name: "com.linkedin.e3d271c5c175a42a23a8e62222c2a872") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      adUnitTracking\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment VideoPlayMetadata on videocontent_VideoPlayMetadata {\n  entityUrn\n  adaptiveStreams @recipeType(name: "com.linkedin.fcaf3274a0ceed650fe8b3d032a594c2") {\n    initialBitRate\n    masterPlaylists @recipeType(name: "com.linkedin.c0ec60b6b839e03ef93f96dd5e6e3038") {\n      expiresAt\n      url\n      _recipeType\n      _type\n    }\n    mediaType\n    protocol\n    _recipeType\n    _type\n  }\n  aspectRatio\n  duration\n  liveStreamCreatedAt\n  liveStreamEndedAt\n  media\n  nextMedia\n  prevMedia\n  progressiveStreams @recipeType(name: "com.linkedin.7a5111f59bd313e7ec3f07ec7cfe8b72") {\n    bitRate\n    height\n    mediaType\n    mimeType\n    size\n    streamingLocations @recipeType(name: "com.linkedin.c0ec60b6b839e03ef93f96dd5e6e3038") {\n      expiresAt\n      url\n      _recipeType\n      _type\n    }\n    width\n    _recipeType\n    _type\n  }\n  provider\n  thumbnail @recipeType(name: "com.linkedin.e3d271c5c175a42a23a8e62222c2a872") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  trackingId\n  transcripts @recipeType(name: "com.linkedin.7b79ea430f20fe0031d3a55c1f6fcfd3") {\n    captionFile\n    captionFormat\n    isAutogenerated\n    lines @recipeType(name: "com.linkedin.fc3d6e611bc00fff78fc0a87cbee0d6e") {\n      caption\n      lineEndAt\n      lineStartAt\n      _recipeType\n      _type\n    }\n    locale @recipeType(name: "com.linkedin.14d0bacca404231a31fa6599bf59ecf8") {\n      country\n      extensions @recipeType(name: "com.linkedin.4133b57aa880beea36b47cd8248b1274") {\n        t\n        u\n        x\n        _recipeType\n        _type\n      }\n      language\n      script\n      variant\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment VideoMeeting on messenger_VideoMeeting {\n  videoMeeting @recipeType(name: "com.linkedin.19b6719cdc80996d2bd13d3c90717d3e") {\n    entityUrn\n    _recipeType\n    _type\n  }\n  earliestStartAt\n  expiresAt\n  timeRange @recipeType(name: "com.linkedin.e441dc571e210362b62dc5158ea85540") {\n    end\n    start\n    _recipeType\n    _type\n  }\n}\n\nfragment ConversationAdsMessageContent on messenger_ConversationAdsMessageContent {\n  sponsoredMessageContentUrn\n  sponsoredMessageTrackingId\n  sponsoredMessageOptions @recipeType(name: "com.linkedin.7598f75c888707bf85007beadaa3c717") {\n    clickAction {\n      externalWebsiteClickAction @recipeType(name: "com.linkedin.0ab0b312b8ed94f551dcbd5d8fb0f4ac") {\n        redirectUrl\n        _recipeType\n        _type\n      }\n      leadGenClickAction @recipeType(name: "com.linkedin.7d5c0ada85235084e6d54a96a7adf2e8") {\n        leadGenFormUrn\n        leadTrackingCode\n        leadTrackingParams\n        _recipeType\n        _type\n      }\n    }\n    optionText @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    tscpUrl\n    sponsoredMessageOption @recipeType(name: "com.linkedin.2e92f14674f98dd400e059afc5b71c89") {\n      entityUrn\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment MessageRenderContent on messenger_RenderContent {\n  audio @recipeType(name: "com.linkedin.1b6fbcf645e16c5c4bfead9c35f020f6") {\n    ...AudioMetadata\n    _recipeType\n    _type\n  }\n  awayMessage @recipeType(name: "com.linkedin.0355c17b95f4491a9d25b187afeacb00") {\n    ...AwayMessage\n    _recipeType\n    _type\n  }\n  externalMedia @recipeType(name: "com.linkedin.0bff71d4415b526879d04cf6f7582cce") {\n    ...ExternalMedia\n    _recipeType\n    _type\n  }\n  file @recipeType(name: "com.linkedin.b1e3a6cae32bb821942c4420f6694aec") {\n    ...FileAttachment\n    _recipeType\n    _type\n  }\n  messageAdRenderContent @recipeType(name: "com.linkedin.1b2e71e5057a05272f25767bb394d51c") {\n    ...MessageAdRenderContent\n    _recipeType\n    _type\n  }\n  vectorImage @recipeType(name: "com.linkedin.e3d271c5c175a42a23a8e62222c2a872") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  video @recipeType(name: "com.linkedin.03ffb0b0d60241bf1c6b321b355e957c") {\n    ...VideoPlayMetadata\n    _recipeType\n    _type\n  }\n  videoMeeting @recipeType(name: "com.linkedin.326307ca4cc134468e08972ed67f0fbe") {\n    ...VideoMeeting\n    _recipeType\n    _type\n  }\n  hostUrnData @recipeType(name: "com.linkedin.e984e34f93945ed185e28a7ca8c6f89a") {\n    hostUrn\n    type\n    _recipeType\n    _type\n  }\n  conversationAdsMessageContent @recipeType(name: "com.linkedin.cd88c1dbed4b27fce064f42a0dc68b83") {\n    ...ConversationAdsMessageContent\n    _recipeType\n    _type\n  }\n  forwardedMessageContent @recipeType(name: "com.linkedin.d241d4c2afd64b8349aecb99d247045a") {\n    originalSender @recipeType(name: "com.linkedin.b576b99ebabe7b19d6a7c65dba01db86") {\n      ...Participant\n      _recipeType\n      _type\n    }\n    originalSendAt\n    forwardedBody @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    footerText @recipeType(name: "com.linkedin.099b0d128706e11931b6cbc393b16563") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment MessagePartialParticipant on messenger_Message {\n  ...MessageBase\n  sender @recipeType(name: "com.linkedin.b576b99ebabe7b19d6a7c65dba01db86") {\n    entityUrn\n    hostIdentityUrn\n    _recipeType\n    _type\n  }\n  renderContent {\n    ...MessageRenderContent\n  }\n}\n\nfragment ConversationCursorMetadata on messenger_ConversationCursorMetadata {\n  nextCursor\n  rawSearchId\n  trackingIds @recipeType(name: "com.linkedin.60b3f53535cc832f751f7b6c4900542f") {\n    hitEntityUrn\n    trackingId\n    _recipeType\n    _type\n  }\n}\n',variablesTypes:{categories:{type:"Array",isRequired:!1,innerType:{type:"String",isRequired:!0,kind:"Scalar"},kind:"Array"},count:{type:"Int",isRequired:!1,kind:"Scalar"},firstDegreeConnections:{type:"Boolean",isRequired:!1,kind:"Scalar"},keywords:{type:"String",isRequired:!1,kind:"Scalar"},mailboxUrn:{type:"String",isRequired:!0,kind:"Scalar"},nextCursor:{type:"String",isRequired:!1,kind:"Scalar"},read:{type:"Boolean",isRequired:!1,kind:"Scalar"}}}),Vn=Un({kind:"query",id:"messengerConversations.766c30b60a40d2035453432f30aa03ce",typeName:"com.linkedin.47459727fe9dc4c6dd28af91d35c3bea",name:"get-conversation-by-id",source:'query messengerConversationsById($messengerConversationsId: String!, $count: Int!) @recipeType(name: "com.linkedin.47459727fe9dc4c6dd28af91d35c3bea") {\n  messengerConversationsById(messengerConversationsId: $messengerConversationsId) @recipeType(name: "com.linkedin.e24fb0136dc26353ab4f648e1902823f") {\n    ...Conversation\n    messages(count: $count, sortOrder: DESCENDING) @required @recipeType(name: "com.linkedin.21260d920db9d4ce4a3fb5b914ff484b") {\n      elements @allOrNothing @recipeType(name: "com.linkedin.c651c0905361fb348dda3baddd8def78") {\n        ...MessagePartialParticipant\n        _recipeType\n        _type\n      }\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  _recipeType\n  _type\n}\n\nfragment VectorImage on common_VectorImage {\n  artifacts @recipeType(name: "com.linkedin.cb0399b0cfb57151df335eba0c7a9beb") {\n    width\n    height\n    fileIdentifyingUrlPathSegment\n    _recipeType\n    _type\n  }\n  attribution\n  rootUrl\n  focalPoint @recipeType(name: "com.linkedin.dcd6f20b165238cfac4ba2ff9bae619a") {\n    xOffsetPercentage\n    yOffsetPercentage\n    _recipeType\n    _type\n  }\n  digitalmediaAsset\n}\n\nfragment AttributeKind on pemberly_text_AttributeKind {\n  bold @recipeType(name: "com.linkedin.6a73b1fb7660a0f309f384f33d44d7d8") {\n    __typename\n    _recipeType\n    _type\n  }\n  italic @recipeType(name: "com.linkedin.e9c1bd26ff54b4d1a9fc4c08cfcc8b62") {\n    __typename\n    _recipeType\n    _type\n  }\n  hyperlink @recipeType(name: "com.linkedin.c91f35ab4ac93fde74b875304a95183b") {\n    url\n    __typename\n    _recipeType\n    _type\n  }\n  paragraph @recipeType(name: "com.linkedin.18d7a7f8bed44dd5e35ea80c2e979c4d") {\n    __typename\n    _recipeType\n    _type\n  }\n  list @recipeType(name: "com.linkedin.01699396fde3b5ddee6eee2c8e9c0a4c") {\n    ordered\n    __typename\n    _recipeType\n    _type\n  }\n  listItem @recipeType(name: "com.linkedin.14e9c56c121c5b8c0b50cce82e6fc7c5") {\n    __typename\n    _recipeType\n    _type\n  }\n  lineBreak @recipeType(name: "com.linkedin.615d3d1dfeac70c1d562defb1ef76239") {\n    __typename\n    _recipeType\n    _type\n  }\n  underline @recipeType(name: "com.linkedin.5b496a0b1d1de8f86e61bc62819de9e4") {\n    __typename\n    _recipeType\n    _type\n  }\n  subscript @recipeType(name: "com.linkedin.1685f9c69f38dd22af99782629656269") {\n    __typename\n    _recipeType\n    _type\n  }\n  superscript @recipeType(name: "com.linkedin.11f0fe2ec9d279724079e6290abb0174") {\n    __typename\n    _recipeType\n    _type\n  }\n  entity @recipeType(name: "com.linkedin.ddee62b7ab28b4e997ae9a296bddad48") {\n    urn\n    _recipeType\n    _type\n  }\n}\n\nfragment AttributedText on pemberly_text_AttributedText {\n  text\n  attributes @recipeType(name: "com.linkedin.f39203ab15462f00cb5b7476b37bce3a") {\n    attributeKind {\n      ...AttributeKind\n    }\n    start\n    length\n    _recipeType\n    _type\n  }\n}\n\nfragment Participant on messenger_MessagingParticipant {\n  entityUrn\n  hostIdentityUrn\n  backendUrn\n  participantType {\n    member @recipeType(name: "com.linkedin.fb6d591552493d3745fa77c0b9b04298") {\n      firstName @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      lastName @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      headline @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      profilePicture @recipeType(name: "com.linkedin.c3916397cddd7d4516a85e51540553e4") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      profileUrl\n      pronoun {\n        customPronoun\n        standardizedPronoun\n      }\n      distance\n      _recipeType\n      _type\n    }\n    organization @recipeType(name: "com.linkedin.2ccf3198425dfd5af50085e114a4a1d2") {\n      name @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      tagline @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      logo @recipeType(name: "com.linkedin.c3916397cddd7d4516a85e51540553e4") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      pageType\n      pageUrl\n      _recipeType\n      _type\n    }\n    custom @recipeType(name: "com.linkedin.3796598c7caa08b8b5f4c1dbbbd15c0c") {\n      name @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      image @recipeType(name: "com.linkedin.c3916397cddd7d4516a85e51540553e4") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      _recipeType\n      _type\n    }\n  }\n}\n\nfragment CreativeAdsReportingInfo on messenger_CreativeAdsReportingInfo {\n  contentSource\n  sponsoredAccountUrn\n  sponsoredCreativeUrn\n}\n\nfragment SponsoredMetadata on messenger_SponsoredMetadata {\n  adRequestId\n  activityType\n  adTrackingCode\n  leadTrackingCode\n  version\n  videoBehavior\n  adTrackingCode\n  sponsoredCampaignUrn\n  adServingUrn\n}\n\nfragment ConversationAdsContent on messenger_ConversationAdsContent {\n  adUnit @recipeType(name: "com.linkedin.c3916397cddd7d4516a85e51540553e4") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  advertiserLabel\n  advertiserLegalText @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  clickTrackingUrl\n  creativeAdsReportingInfo @recipeType(name: "com.linkedin.33513a00530f05e5410877de1ab3e8e1") {\n    ...CreativeAdsReportingInfo\n    _recipeType\n    _type\n  }\n  linkedInLegalText @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  sponsoredConversationTrackingId\n  sponsoredTracking @recipeType(name: "com.linkedin.6307aa03e4da766e9192cfd7ce8353fa") {\n    ...SponsoredMetadata\n    _recipeType\n    _type\n  }\n}\n\nfragment Conversation on messenger_Conversation {\n  entityUrn\n  backendUrn\n  read\n  createdAt\n  lastActivityAt\n  lastReadAt\n  title\n  headlineText @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  shortHeadlineText @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  notificationStatus\n  categories\n  unreadCount\n  conversationUrl\n  hostConversationActions\n  conversationTypeText @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  state\n  groupChat\n  creator @recipeType(name: "com.linkedin.aab5818f3c6ab5e70b2bc52d67fe946e") {\n    ...Participant\n    _recipeType\n    _type\n  }\n  disabledFeatures @recipeType(name: "com.linkedin.06d67602d00d78e95969ac52753eeb72") {\n    disabledFeature\n    reasonText @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  contentMetadata {\n    conversationAdContent @recipeType(name: "com.linkedin.3c80f646550a626bf7eaecc033b459a8") {\n      ...ConversationAdsContent\n      _recipeType\n      _type\n    }\n  }\n  conversationParticipants @recipeType(name: "com.linkedin.aab5818f3c6ab5e70b2bc52d67fe946e") {\n    ...Participant\n    _recipeType\n    _type\n  }\n}\n\nfragment ReactionSummary on messenger_ReactionSummary {\n  count\n  emoji\n  firstReactedAt\n  viewerReacted\n}\n\nfragment MessageBaseWithoutConversation on messenger_Message {\n  entityUrn\n  backendConversationUrn\n  backendUrn\n  subject\n  body @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  inlineWarning @recipeType(name: "com.linkedin.b9d617623216b909de7e48157cc90c6b") {\n    obfuscatedMessageWarning @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    inlineWarningPrompt @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  originToken\n  deliveredAt\n  messageBodyRenderFormat\n  renderContentFallbackText\n  reactionSummaries @recipeType(name: "com.linkedin.c4cc5a6074539401c466484e0d446ed6") {\n    ...ReactionSummary\n    _recipeType\n    _type\n  }\n}\n\nfragment MessageBase on messenger_Message {\n  ...MessageBaseWithoutConversation\n  conversation @recipeType(name: "com.linkedin.e24fb0136dc26353ab4f648e1902823f") {\n    entityUrn\n    _recipeType\n    _type\n  }\n}\n\nfragment AudioMetadata on messenger_AudioMetadata {\n  duration\n  url\n}\n\nfragment AwayMessage on messenger_AwayMessage {\n  footerText @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  text @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n}\n\nfragment ExternalMedia on messenger_ExternalMedia {\n  entityUrn\n  title\n  media @recipeType(name: "com.linkedin.ac94868c85ec6dc5d93e9507f4e015c8") {\n    originalHeight\n    originalWidth\n    url\n    _recipeType\n    _type\n  }\n  previewMedia @recipeType(name: "com.linkedin.ac94868c85ec6dc5d93e9507f4e015c8") {\n    originalHeight\n    originalWidth\n    url\n    _recipeType\n    _type\n  }\n}\n\nfragment FileAttachment on messenger_FileAttachment {\n  assetUrn\n  byteSize\n  mediaType\n  name\n  url\n}\n\nfragment MessageAdRenderContent on messenger_MessageAdRenderContent {\n  advertiserLabel\n  bodyTracking\n  creativeAdsReportingInfo @recipeType(name: "com.linkedin.33513a00530f05e5410877de1ab3e8e1") {\n    contentSource\n    sponsoredAccountUrn\n    sponsoredCreativeUrn\n    _recipeType\n    _type\n  }\n  legalText @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  legalTextTracking\n  openTracking\n  sponsoredCampaignUrn\n  sponsoredTracking @recipeType(name: "com.linkedin.6307aa03e4da766e9192cfd7ce8353fa") {\n    ...SponsoredMetadata\n    _recipeType\n    _type\n  }\n  status\n  subContent @recipeType(name: "com.linkedin.776464b9f5b21efa54a107762c20be41") {\n    action\n    actionText\n    actionTracking\n    callToActionLabel\n    leadGenFormOpenTracking\n    leadGenFormUrn\n    leadTrackingCode\n    leadTrackingParams\n    tscpUrl\n    adUnit @recipeType(name: "com.linkedin.50b2b86a1a9368d9dbd3cec835b33a2e") {\n      adUnit @recipeType(name: "com.linkedin.c3916397cddd7d4516a85e51540553e4") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      adUnitTracking\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment VideoPlayMetadata on videocontent_VideoPlayMetadata {\n  entityUrn\n  adaptiveStreams @recipeType(name: "com.linkedin.2a922294194be0d4a083a08a7c0b13a7") {\n    initialBitRate\n    masterPlaylists @recipeType(name: "com.linkedin.2fb6e9538cf9a75f82ef540708047b66") {\n      expiresAt\n      url\n      _recipeType\n      _type\n    }\n    mediaType\n    protocol\n    _recipeType\n    _type\n  }\n  aspectRatio\n  duration\n  liveStreamCreatedAt\n  liveStreamEndedAt\n  media\n  nextMedia\n  prevMedia\n  progressiveStreams @recipeType(name: "com.linkedin.eec8d2f072683bf2e6cac979f0f21027") {\n    bitRate\n    height\n    mediaType\n    mimeType\n    size\n    streamingLocations @recipeType(name: "com.linkedin.2fb6e9538cf9a75f82ef540708047b66") {\n      expiresAt\n      url\n      _recipeType\n      _type\n    }\n    width\n    _recipeType\n    _type\n  }\n  provider\n  thumbnail @recipeType(name: "com.linkedin.c3916397cddd7d4516a85e51540553e4") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  trackingId\n  transcripts @recipeType(name: "com.linkedin.76ee4351004ccd6294ed2c4ae88812ca") {\n    captionFile\n    captionFormat\n    isAutogenerated\n    lines @recipeType(name: "com.linkedin.43cd992edd4c0486fcb43b5e8a601a03") {\n      caption\n      lineEndAt\n      lineStartAt\n      _recipeType\n      _type\n    }\n    locale @recipeType(name: "com.linkedin.d18fd8751eebb115ebdcaa1ce26b98b7") {\n      country\n      extensions @recipeType(name: "com.linkedin.450eb5bee544df534926f3d5cb165c44") {\n        t\n        u\n        x\n        _recipeType\n        _type\n      }\n      language\n      script\n      variant\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment VideoMeeting on messenger_VideoMeeting {\n  videoMeeting @recipeType(name: "com.linkedin.2f7a949633d9dd0d22b7d4cac4f6eff9") {\n    entityUrn\n    _recipeType\n    _type\n  }\n  earliestStartAt\n  expiresAt\n  timeRange @recipeType(name: "com.linkedin.264a252634ac15bafcee8ff3cc12d649") {\n    end\n    start\n    _recipeType\n    _type\n  }\n}\n\nfragment ConversationAdsMessageContent on messenger_ConversationAdsMessageContent {\n  sponsoredMessageContentUrn\n  sponsoredMessageTrackingId\n  sponsoredMessageOptions @recipeType(name: "com.linkedin.b9fb5ddb75fc93b0bfcd2e4b06a8eaf2") {\n    clickAction {\n      externalWebsiteClickAction @recipeType(name: "com.linkedin.46dac2303162d415e48fa8016b034026") {\n        redirectUrl\n        _recipeType\n        _type\n      }\n      leadGenClickAction @recipeType(name: "com.linkedin.9c84646dea76aeadd3cb2a8ea3faf201") {\n        leadGenFormUrn\n        leadTrackingCode\n        leadTrackingParams\n        _recipeType\n        _type\n      }\n    }\n    optionText @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    tscpUrl\n    sponsoredMessageOption @recipeType(name: "com.linkedin.de9244bde84290263084b5073c529674") {\n      entityUrn\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment MessageRenderContent on messenger_RenderContent {\n  audio @recipeType(name: "com.linkedin.c3faf46044ea3486f348246e8d30035a") {\n    ...AudioMetadata\n    _recipeType\n    _type\n  }\n  awayMessage @recipeType(name: "com.linkedin.81272291d2752fda333844ba4e0bbf8a") {\n    ...AwayMessage\n    _recipeType\n    _type\n  }\n  externalMedia @recipeType(name: "com.linkedin.2d681fcdb4624c3db9eadad5d63934a0") {\n    ...ExternalMedia\n    _recipeType\n    _type\n  }\n  file @recipeType(name: "com.linkedin.b5517e23ad7b47cb72c0cf380906ade4") {\n    ...FileAttachment\n    _recipeType\n    _type\n  }\n  messageAdRenderContent @recipeType(name: "com.linkedin.b2033e3b5e90ee3b391cf9536b93d3c6") {\n    ...MessageAdRenderContent\n    _recipeType\n    _type\n  }\n  vectorImage @recipeType(name: "com.linkedin.c3916397cddd7d4516a85e51540553e4") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  video @recipeType(name: "com.linkedin.f6bd5263639264e7fd5b051ba08541fd") {\n    ...VideoPlayMetadata\n    _recipeType\n    _type\n  }\n  videoMeeting @recipeType(name: "com.linkedin.533776559fb08d619af234005b26b343") {\n    ...VideoMeeting\n    _recipeType\n    _type\n  }\n  hostUrnData @recipeType(name: "com.linkedin.1e9dc094fa5ab32d30eda58e41329430") {\n    hostUrn\n    type\n    _recipeType\n    _type\n  }\n  conversationAdsMessageContent @recipeType(name: "com.linkedin.7fef48f52b9439ce2f94bcc7d9c89538") {\n    ...ConversationAdsMessageContent\n    _recipeType\n    _type\n  }\n  forwardedMessageContent @recipeType(name: "com.linkedin.2f094c70bdff85cf0c86412f359a710a") {\n    originalSender @recipeType(name: "com.linkedin.aab5818f3c6ab5e70b2bc52d67fe946e") {\n      ...Participant\n      _recipeType\n      _type\n    }\n    originalSendAt\n    forwardedBody @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    footerText @recipeType(name: "com.linkedin.a60cd29c3c46198469c59cdd3e986906") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment MessagePartialParticipant on messenger_Message {\n  ...MessageBase\n  sender @recipeType(name: "com.linkedin.aab5818f3c6ab5e70b2bc52d67fe946e") {\n    entityUrn\n    hostIdentityUrn\n    _recipeType\n    _type\n  }\n  renderContent {\n    ...MessageRenderContent\n  }\n}\n',variablesTypes:{messengerConversationsId:{type:"String",isRequired:!0,kind:"Scalar"},count:{type:"Int",isRequired:!0,kind:"Scalar"}}}),Hn=Un({kind:"query",id:"messengerMessages.377636847892a71d7e915107d5b4abc1",typeName:"com.linkedin.5ead02a2479291ebdce3f63ac66fbe93",name:"get-messages-by-conversation",source:'query messengerMessagesByConversation($conversationUrn: String!, $count: Int!, $nextCursor: String, $prevCursor: String) @recipeType(name: "com.linkedin.5ead02a2479291ebdce3f63ac66fbe93") {\n  messengerMessagesByConversation(conversationUrn: $conversationUrn, count: $count, nextCursor: $nextCursor, prevCursor: $prevCursor) @recipeType(name: "com.linkedin.fae8765faf662cca102ede587d8e456d") {\n    elements @recipeType(name: "com.linkedin.a43c319dce4af407d65375b77123709c") {\n      ...MessageFullParticipant\n      _recipeType\n      _type\n    }\n    metadata @recipeType(name: "com.linkedin.718bc5c98107bb05a6b017a76589a62b") {\n      nextCursor\n      prevCursor\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  _recipeType\n  _type\n}\n\nfragment AttributeKind on pemberly_text_AttributeKind {\n  bold @recipeType(name: "com.linkedin.ffcdef84f5a777ed88fb4b45658a9e14") {\n    __typename\n    _recipeType\n    _type\n  }\n  italic @recipeType(name: "com.linkedin.5b03af2277489fb7027a1150fd9575ff") {\n    __typename\n    _recipeType\n    _type\n  }\n  hyperlink @recipeType(name: "com.linkedin.303b9eb6e59a5450e0577d461cb48f40") {\n    url\n    __typename\n    _recipeType\n    _type\n  }\n  paragraph @recipeType(name: "com.linkedin.575d0c1dd58a5ba293bab78a6a3ddbb1") {\n    __typename\n    _recipeType\n    _type\n  }\n  list @recipeType(name: "com.linkedin.230175b918f13003da6b4a753ce5a368") {\n    ordered\n    __typename\n    _recipeType\n    _type\n  }\n  listItem @recipeType(name: "com.linkedin.6db106eda0592bf5546c0e479e9f1654") {\n    __typename\n    _recipeType\n    _type\n  }\n  lineBreak @recipeType(name: "com.linkedin.d6e832aceb42049c6562501bc02e7be4") {\n    __typename\n    _recipeType\n    _type\n  }\n  underline @recipeType(name: "com.linkedin.3986eb36516ea239d872dcfe4ad9ea0b") {\n    __typename\n    _recipeType\n    _type\n  }\n  subscript @recipeType(name: "com.linkedin.f91bd457d68eb9514d5c05b79c16a5a9") {\n    __typename\n    _recipeType\n    _type\n  }\n  superscript @recipeType(name: "com.linkedin.35023eb3e2f6f5f605cbd00edf448fcc") {\n    __typename\n    _recipeType\n    _type\n  }\n  entity @recipeType(name: "com.linkedin.50c7f5d75aa51467c8da0e1a008a9624") {\n    urn\n    _recipeType\n    _type\n  }\n}\n\nfragment AttributedText on pemberly_text_AttributedText {\n  text\n  attributes @recipeType(name: "com.linkedin.92da8d6b385317069652fac33b0347b4") {\n    attributeKind {\n      ...AttributeKind\n    }\n    start\n    length\n    _recipeType\n    _type\n  }\n}\n\nfragment ReactionSummary on messenger_ReactionSummary {\n  count\n  emoji\n  firstReactedAt\n  viewerReacted\n}\n\nfragment MessageBaseWithoutConversation on messenger_Message {\n  entityUrn\n  backendConversationUrn\n  backendUrn\n  subject\n  body @recipeType(name: "com.linkedin.7d9827a3bb2e1622a4438e965842a824") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  inlineWarning @recipeType(name: "com.linkedin.d4a62fceb0bfd38cde178e7adbff9d10") {\n    obfuscatedMessageWarning @recipeType(name: "com.linkedin.7d9827a3bb2e1622a4438e965842a824") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    inlineWarningPrompt @recipeType(name: "com.linkedin.7d9827a3bb2e1622a4438e965842a824") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  originToken\n  deliveredAt\n  messageBodyRenderFormat\n  renderContentFallbackText\n  reactionSummaries @recipeType(name: "com.linkedin.1f1ebfba843743df30587498837a386f") {\n    ...ReactionSummary\n    _recipeType\n    _type\n  }\n}\n\nfragment MessageBase on messenger_Message {\n  ...MessageBaseWithoutConversation\n  conversation @recipeType(name: "com.linkedin.70b7922a3ce488ad14b508eb6aa52c2a") {\n    entityUrn\n    _recipeType\n    _type\n  }\n}\n\nfragment AudioMetadata on messenger_AudioMetadata {\n  duration\n  url\n}\n\nfragment AwayMessage on messenger_AwayMessage {\n  footerText @recipeType(name: "com.linkedin.7d9827a3bb2e1622a4438e965842a824") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  text @recipeType(name: "com.linkedin.7d9827a3bb2e1622a4438e965842a824") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n}\n\nfragment ExternalMedia on messenger_ExternalMedia {\n  entityUrn\n  title\n  media @recipeType(name: "com.linkedin.6f4a28f99bc2508097b38f69f639e5f1") {\n    originalHeight\n    originalWidth\n    url\n    _recipeType\n    _type\n  }\n  previewMedia @recipeType(name: "com.linkedin.6f4a28f99bc2508097b38f69f639e5f1") {\n    originalHeight\n    originalWidth\n    url\n    _recipeType\n    _type\n  }\n}\n\nfragment FileAttachment on messenger_FileAttachment {\n  assetUrn\n  byteSize\n  mediaType\n  name\n  url\n}\n\nfragment SponsoredMetadata on messenger_SponsoredMetadata {\n  adRequestId\n  activityType\n  adTrackingCode\n  leadTrackingCode\n  version\n  videoBehavior\n  adTrackingCode\n  sponsoredCampaignUrn\n  adServingUrn\n}\n\nfragment VectorImage on common_VectorImage {\n  artifacts @recipeType(name: "com.linkedin.34c00ff1eb711be7d1cff3638d7a8a1b") {\n    width\n    height\n    fileIdentifyingUrlPathSegment\n    _recipeType\n    _type\n  }\n  attribution\n  rootUrl\n  focalPoint @recipeType(name: "com.linkedin.dba12761bc6277862e052485d4d26c4a") {\n    xOffsetPercentage\n    yOffsetPercentage\n    _recipeType\n    _type\n  }\n  digitalmediaAsset\n}\n\nfragment MessageAdRenderContent on messenger_MessageAdRenderContent {\n  advertiserLabel\n  bodyTracking\n  creativeAdsReportingInfo @recipeType(name: "com.linkedin.e3b1d59ecc45f4592691c275d8e57eb2") {\n    contentSource\n    sponsoredAccountUrn\n    sponsoredCreativeUrn\n    _recipeType\n    _type\n  }\n  legalText @recipeType(name: "com.linkedin.7d9827a3bb2e1622a4438e965842a824") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  legalTextTracking\n  openTracking\n  sponsoredCampaignUrn\n  sponsoredTracking @recipeType(name: "com.linkedin.49d0b65974a4e8d9a78e80c3964e478b") {\n    ...SponsoredMetadata\n    _recipeType\n    _type\n  }\n  status\n  subContent @recipeType(name: "com.linkedin.13eda39e4476fc2ff349f6d99207c536") {\n    action\n    actionText\n    actionTracking\n    callToActionLabel\n    leadGenFormOpenTracking\n    leadGenFormUrn\n    leadTrackingCode\n    leadTrackingParams\n    tscpUrl\n    adUnit @recipeType(name: "com.linkedin.22a92192c99c325348cd20f44405a46f") {\n      adUnit @recipeType(name: "com.linkedin.d230f4e5e9335e807da3d29675796d63") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      adUnitTracking\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment VideoPlayMetadata on videocontent_VideoPlayMetadata {\n  entityUrn\n  adaptiveStreams @recipeType(name: "com.linkedin.3a13e0e679d90c09669de8d182c25e42") {\n    initialBitRate\n    masterPlaylists @recipeType(name: "com.linkedin.456e02a149d79bd7a6b9ddaa10c87685") {\n      expiresAt\n      url\n      _recipeType\n      _type\n    }\n    mediaType\n    protocol\n    _recipeType\n    _type\n  }\n  aspectRatio\n  duration\n  liveStreamCreatedAt\n  liveStreamEndedAt\n  media\n  nextMedia\n  prevMedia\n  progressiveStreams @recipeType(name: "com.linkedin.5e0a5f02346ad067f242429d64c3965f") {\n    bitRate\n    height\n    mediaType\n    mimeType\n    size\n    streamingLocations @recipeType(name: "com.linkedin.456e02a149d79bd7a6b9ddaa10c87685") {\n      expiresAt\n      url\n      _recipeType\n      _type\n    }\n    width\n    _recipeType\n    _type\n  }\n  provider\n  thumbnail @recipeType(name: "com.linkedin.d230f4e5e9335e807da3d29675796d63") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  trackingId\n  transcripts @recipeType(name: "com.linkedin.33b07249a4668d2be9c5bc5f3aa1b1dd") {\n    captionFile\n    captionFormat\n    isAutogenerated\n    lines @recipeType(name: "com.linkedin.a9d5ed7dc3be35ed1f1849acb00a00c2") {\n      caption\n      lineEndAt\n      lineStartAt\n      _recipeType\n      _type\n    }\n    locale @recipeType(name: "com.linkedin.b0f1a50a37f641bc5e84959cd542588d") {\n      country\n      extensions @recipeType(name: "com.linkedin.614f84808734f4a3019637f511bfdaf1") {\n        t\n        u\n        x\n        _recipeType\n        _type\n      }\n      language\n      script\n      variant\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment VideoMeeting on messenger_VideoMeeting {\n  videoMeeting @recipeType(name: "com.linkedin.4356ab368a2fc500442ef43619913ad5") {\n    entityUrn\n    _recipeType\n    _type\n  }\n  earliestStartAt\n  expiresAt\n  timeRange @recipeType(name: "com.linkedin.95f7dff8470f1c4d01c93606259d3a3e") {\n    end\n    start\n    _recipeType\n    _type\n  }\n}\n\nfragment ConversationAdsMessageContent on messenger_ConversationAdsMessageContent {\n  sponsoredMessageContentUrn\n  sponsoredMessageTrackingId\n  sponsoredMessageOptions @recipeType(name: "com.linkedin.48411f74c5d9fcc7309459278674a7c4") {\n    clickAction {\n      externalWebsiteClickAction @recipeType(name: "com.linkedin.06be6a4a9fb1d03a5bb534cdfc0fb023") {\n        redirectUrl\n        _recipeType\n        _type\n      }\n      leadGenClickAction @recipeType(name: "com.linkedin.075269c5962458383d2fd90c6386bfa2") {\n        leadGenFormUrn\n        leadTrackingCode\n        leadTrackingParams\n        _recipeType\n        _type\n      }\n    }\n    optionText @recipeType(name: "com.linkedin.7d9827a3bb2e1622a4438e965842a824") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    tscpUrl\n    sponsoredMessageOption @recipeType(name: "com.linkedin.88b0b93577342865bd6ed68e405c5dbf") {\n      entityUrn\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment Participant on messenger_MessagingParticipant {\n  entityUrn\n  hostIdentityUrn\n  backendUrn\n  participantType {\n    member @recipeType(name: "com.linkedin.5203d1a2bcc81b8a7119a52e40b9f6e9") {\n      firstName @recipeType(name: "com.linkedin.7d9827a3bb2e1622a4438e965842a824") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      lastName @recipeType(name: "com.linkedin.7d9827a3bb2e1622a4438e965842a824") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      headline @recipeType(name: "com.linkedin.7d9827a3bb2e1622a4438e965842a824") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      profilePicture @recipeType(name: "com.linkedin.d230f4e5e9335e807da3d29675796d63") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      profileUrl\n      pronoun {\n        customPronoun\n        standardizedPronoun\n      }\n      distance\n      _recipeType\n      _type\n    }\n    organization @recipeType(name: "com.linkedin.5f7040cfe52ee5a28e98a43fe8d34142") {\n      name @recipeType(name: "com.linkedin.7d9827a3bb2e1622a4438e965842a824") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      tagline @recipeType(name: "com.linkedin.7d9827a3bb2e1622a4438e965842a824") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      logo @recipeType(name: "com.linkedin.d230f4e5e9335e807da3d29675796d63") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      pageType\n      pageUrl\n      _recipeType\n      _type\n    }\n    custom @recipeType(name: "com.linkedin.e37d7fc189f22baa912a8939be2e3f6a") {\n      name @recipeType(name: "com.linkedin.7d9827a3bb2e1622a4438e965842a824") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      image @recipeType(name: "com.linkedin.d230f4e5e9335e807da3d29675796d63") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      _recipeType\n      _type\n    }\n  }\n}\n\nfragment MessageRenderContent on messenger_RenderContent {\n  audio @recipeType(name: "com.linkedin.570c8456a814d58227df110f692ca235") {\n    ...AudioMetadata\n    _recipeType\n    _type\n  }\n  awayMessage @recipeType(name: "com.linkedin.74e737536ff745b60c7e7712ebf7653a") {\n    ...AwayMessage\n    _recipeType\n    _type\n  }\n  externalMedia @recipeType(name: "com.linkedin.bf59c1e69c9fbc8bb621bd0360e3b108") {\n    ...ExternalMedia\n    _recipeType\n    _type\n  }\n  file @recipeType(name: "com.linkedin.e5b22526f909056ce375d43240cb1c4a") {\n    ...FileAttachment\n    _recipeType\n    _type\n  }\n  messageAdRenderContent @recipeType(name: "com.linkedin.6208ae69c8a9065c05d29a7da7a66247") {\n    ...MessageAdRenderContent\n    _recipeType\n    _type\n  }\n  vectorImage @recipeType(name: "com.linkedin.d230f4e5e9335e807da3d29675796d63") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  video @recipeType(name: "com.linkedin.aa1bb399179f7f666b5918724dcfeab6") {\n    ...VideoPlayMetadata\n    _recipeType\n    _type\n  }\n  videoMeeting @recipeType(name: "com.linkedin.26eb3e25741fe5a252a7a40fb679a26b") {\n    ...VideoMeeting\n    _recipeType\n    _type\n  }\n  hostUrnData @recipeType(name: "com.linkedin.d6f9d3d15b9ce005d3332a70d65e87a4") {\n    hostUrn\n    type\n    _recipeType\n    _type\n  }\n  conversationAdsMessageContent @recipeType(name: "com.linkedin.f2b815c7a52091b01033e7da4c710f6d") {\n    ...ConversationAdsMessageContent\n    _recipeType\n    _type\n  }\n  forwardedMessageContent @recipeType(name: "com.linkedin.d3eef7c9b92c2d6c582e06ddd4b101ab") {\n    originalSender @recipeType(name: "com.linkedin.c864ba3445a21261e2b3df0b57b1fe18") {\n      ...Participant\n      _recipeType\n      _type\n    }\n    originalSendAt\n    forwardedBody @recipeType(name: "com.linkedin.7d9827a3bb2e1622a4438e965842a824") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    footerText @recipeType(name: "com.linkedin.7d9827a3bb2e1622a4438e965842a824") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment MessageFullParticipant on messenger_Message {\n  ...MessageBase\n  sender @recipeType(name: "com.linkedin.c864ba3445a21261e2b3df0b57b1fe18") {\n    ...Participant\n    _recipeType\n    _type\n  }\n  renderContent {\n    ...MessageRenderContent\n  }\n}\n',variablesTypes:{conversationUrn:{type:"String",isRequired:!0,kind:"Scalar"},count:{type:"Int",isRequired:!0,kind:"Scalar"},nextCursor:{type:"String",isRequired:!1,kind:"Scalar"},prevCursor:{type:"String",isRequired:!1,kind:"Scalar"}}}),Gn=Un({kind:"query",id:"messengerMessages.41f713c7de5635f9e81d2b0dfc65df1b",typeName:"com.linkedin.f06a0d9d67201ccfd952b77289ff240e",name:"get-messages-by-timestamp",source:'query messengerMessagesByAnchorTimestamp($conversationUrn: String!, $deliveredAt: Long!, $countBefore: Int!, $countAfter: Int!) @recipeType(name: "com.linkedin.f06a0d9d67201ccfd952b77289ff240e") {\n  messengerMessagesByAnchorTimestamp(conversationUrn: $conversationUrn, deliveredAt: $deliveredAt, countAfter: $countAfter, countBefore: $countBefore) @recipeType(name: "com.linkedin.f904502daab23faa50d8f386e7995b56") {\n    elements @recipeType(name: "com.linkedin.231285ee6af57dbbe6266161b7c6a150") {\n      ...MessageFullParticipant\n      _recipeType\n      _type\n    }\n    metadata @recipeType(name: "com.linkedin.a2e0a7f4f881a95411a11b1746169343") {\n      nextCursor\n      prevCursor\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  _recipeType\n  _type\n}\n\nfragment AttributeKind on pemberly_text_AttributeKind {\n  bold @recipeType(name: "com.linkedin.e545ef8a692fdb8327d2709264ebfd4c") {\n    __typename\n    _recipeType\n    _type\n  }\n  italic @recipeType(name: "com.linkedin.cc4b819dfb194cebcca16bf20054c11f") {\n    __typename\n    _recipeType\n    _type\n  }\n  hyperlink @recipeType(name: "com.linkedin.ba4b30a74c5b7b374eff33e2ca40edbc") {\n    url\n    __typename\n    _recipeType\n    _type\n  }\n  paragraph @recipeType(name: "com.linkedin.bb8b9f6bc8796ae251eca1334b3f092a") {\n    __typename\n    _recipeType\n    _type\n  }\n  list @recipeType(name: "com.linkedin.25d10cc18d63b33341d582fe22a4f5c9") {\n    ordered\n    __typename\n    _recipeType\n    _type\n  }\n  listItem @recipeType(name: "com.linkedin.d95b97c1b252a9dced9f0bd928cbb47c") {\n    __typename\n    _recipeType\n    _type\n  }\n  lineBreak @recipeType(name: "com.linkedin.9c282b4fb14f174ee0396ed27d7bc71d") {\n    __typename\n    _recipeType\n    _type\n  }\n  underline @recipeType(name: "com.linkedin.61a744d51d12ffd69112108194fc687f") {\n    __typename\n    _recipeType\n    _type\n  }\n  subscript @recipeType(name: "com.linkedin.46db4b237275c1e711a115c0dcd987e5") {\n    __typename\n    _recipeType\n    _type\n  }\n  superscript @recipeType(name: "com.linkedin.4648a3db4eb9ec4da772a185f25f8175") {\n    __typename\n    _recipeType\n    _type\n  }\n  entity @recipeType(name: "com.linkedin.5752fc5f1b14322b0051b8f0d8b0085d") {\n    urn\n    _recipeType\n    _type\n  }\n}\n\nfragment AttributedText on pemberly_text_AttributedText {\n  text\n  attributes @recipeType(name: "com.linkedin.be0e5acdecfe12dada0041f3d644cfa4") {\n    attributeKind {\n      ...AttributeKind\n    }\n    start\n    length\n    _recipeType\n    _type\n  }\n}\n\nfragment ReactionSummary on messenger_ReactionSummary {\n  count\n  emoji\n  firstReactedAt\n  viewerReacted\n}\n\nfragment MessageBaseWithoutConversation on messenger_Message {\n  entityUrn\n  backendConversationUrn\n  backendUrn\n  subject\n  body @recipeType(name: "com.linkedin.e42015befb40f6eae45546693a8cac36") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  inlineWarning @recipeType(name: "com.linkedin.df2207b7cb43b31871f4f29c25a7bbc7") {\n    obfuscatedMessageWarning @recipeType(name: "com.linkedin.e42015befb40f6eae45546693a8cac36") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    inlineWarningPrompt @recipeType(name: "com.linkedin.e42015befb40f6eae45546693a8cac36") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  originToken\n  deliveredAt\n  messageBodyRenderFormat\n  renderContentFallbackText\n  reactionSummaries @recipeType(name: "com.linkedin.d1285d9066b9c85c30f04b3704b6d0fa") {\n    ...ReactionSummary\n    _recipeType\n    _type\n  }\n}\n\nfragment MessageBase on messenger_Message {\n  ...MessageBaseWithoutConversation\n  conversation @recipeType(name: "com.linkedin.f361d0d7a48d349833f078e3e38d18b6") {\n    entityUrn\n    _recipeType\n    _type\n  }\n}\n\nfragment AudioMetadata on messenger_AudioMetadata {\n  duration\n  url\n}\n\nfragment AwayMessage on messenger_AwayMessage {\n  footerText @recipeType(name: "com.linkedin.e42015befb40f6eae45546693a8cac36") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  text @recipeType(name: "com.linkedin.e42015befb40f6eae45546693a8cac36") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n}\n\nfragment ExternalMedia on messenger_ExternalMedia {\n  entityUrn\n  title\n  media @recipeType(name: "com.linkedin.ac42a972ef433129aa59887db3ca001f") {\n    originalHeight\n    originalWidth\n    url\n    _recipeType\n    _type\n  }\n  previewMedia @recipeType(name: "com.linkedin.ac42a972ef433129aa59887db3ca001f") {\n    originalHeight\n    originalWidth\n    url\n    _recipeType\n    _type\n  }\n}\n\nfragment FileAttachment on messenger_FileAttachment {\n  assetUrn\n  byteSize\n  mediaType\n  name\n  url\n}\n\nfragment SponsoredMetadata on messenger_SponsoredMetadata {\n  adRequestId\n  activityType\n  adTrackingCode\n  leadTrackingCode\n  version\n  videoBehavior\n  adTrackingCode\n  sponsoredCampaignUrn\n  adServingUrn\n}\n\nfragment VectorImage on common_VectorImage {\n  artifacts @recipeType(name: "com.linkedin.ea116566e3091e00c76f1ca2aa202d09") {\n    width\n    height\n    fileIdentifyingUrlPathSegment\n    _recipeType\n    _type\n  }\n  attribution\n  rootUrl\n  focalPoint @recipeType(name: "com.linkedin.877f5193c30eeb2edcc55a86e3ab3b92") {\n    xOffsetPercentage\n    yOffsetPercentage\n    _recipeType\n    _type\n  }\n  digitalmediaAsset\n}\n\nfragment MessageAdRenderContent on messenger_MessageAdRenderContent {\n  advertiserLabel\n  bodyTracking\n  creativeAdsReportingInfo @recipeType(name: "com.linkedin.d5730cbdb9cc811036bf0600594dc0af") {\n    contentSource\n    sponsoredAccountUrn\n    sponsoredCreativeUrn\n    _recipeType\n    _type\n  }\n  legalText @recipeType(name: "com.linkedin.e42015befb40f6eae45546693a8cac36") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  legalTextTracking\n  openTracking\n  sponsoredCampaignUrn\n  sponsoredTracking @recipeType(name: "com.linkedin.6e0874affec37686fc1ffe18acb84427") {\n    ...SponsoredMetadata\n    _recipeType\n    _type\n  }\n  status\n  subContent @recipeType(name: "com.linkedin.69f9292c0fe9f61cb473ab22f2993252") {\n    action\n    actionText\n    actionTracking\n    callToActionLabel\n    leadGenFormOpenTracking\n    leadGenFormUrn\n    leadTrackingCode\n    leadTrackingParams\n    tscpUrl\n    adUnit @recipeType(name: "com.linkedin.fe87cc8ab204f9214b9a188fe3e198fe") {\n      adUnit @recipeType(name: "com.linkedin.7fb4f25aa4c3ab41c6bba613782b9d34") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      adUnitTracking\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment VideoPlayMetadata on videocontent_VideoPlayMetadata {\n  entityUrn\n  adaptiveStreams @recipeType(name: "com.linkedin.fb5ab118dcb596bde9317540efa3e622") {\n    initialBitRate\n    masterPlaylists @recipeType(name: "com.linkedin.3837d7d46962c583a8a33e3356713ac7") {\n      expiresAt\n      url\n      _recipeType\n      _type\n    }\n    mediaType\n    protocol\n    _recipeType\n    _type\n  }\n  aspectRatio\n  duration\n  liveStreamCreatedAt\n  liveStreamEndedAt\n  media\n  nextMedia\n  prevMedia\n  progressiveStreams @recipeType(name: "com.linkedin.ddbefd99ac6092b48411efd2914527aa") {\n    bitRate\n    height\n    mediaType\n    mimeType\n    size\n    streamingLocations @recipeType(name: "com.linkedin.3837d7d46962c583a8a33e3356713ac7") {\n      expiresAt\n      url\n      _recipeType\n      _type\n    }\n    width\n    _recipeType\n    _type\n  }\n  provider\n  thumbnail @recipeType(name: "com.linkedin.7fb4f25aa4c3ab41c6bba613782b9d34") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  trackingId\n  transcripts @recipeType(name: "com.linkedin.26f2d3c87b875eec7ec44ded1e473e67") {\n    captionFile\n    captionFormat\n    isAutogenerated\n    lines @recipeType(name: "com.linkedin.fc0da931c5a176942fd54e907f1582ae") {\n      caption\n      lineEndAt\n      lineStartAt\n      _recipeType\n      _type\n    }\n    locale @recipeType(name: "com.linkedin.9ec094e3def07911b4380a62c6d5abd5") {\n      country\n      extensions @recipeType(name: "com.linkedin.ca1e5e5c555d14ddcc7f52ba3f181dea") {\n        t\n        u\n        x\n        _recipeType\n        _type\n      }\n      language\n      script\n      variant\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment VideoMeeting on messenger_VideoMeeting {\n  videoMeeting @recipeType(name: "com.linkedin.c7a42a56695951aafaa6d0705af4fcfb") {\n    entityUrn\n    _recipeType\n    _type\n  }\n  earliestStartAt\n  expiresAt\n  timeRange @recipeType(name: "com.linkedin.5bb6c184f84002e76d9322702d47ae51") {\n    end\n    start\n    _recipeType\n    _type\n  }\n}\n\nfragment ConversationAdsMessageContent on messenger_ConversationAdsMessageContent {\n  sponsoredMessageContentUrn\n  sponsoredMessageTrackingId\n  sponsoredMessageOptions @recipeType(name: "com.linkedin.157ed49fda9e090b1ea1e629897a7005") {\n    clickAction {\n      externalWebsiteClickAction @recipeType(name: "com.linkedin.9ef5cae49bcbd97d39774fc27a998d63") {\n        redirectUrl\n        _recipeType\n        _type\n      }\n      leadGenClickAction @recipeType(name: "com.linkedin.4757bf27c029dc4b9e9b890dae934909") {\n        leadGenFormUrn\n        leadTrackingCode\n        leadTrackingParams\n        _recipeType\n        _type\n      }\n    }\n    optionText @recipeType(name: "com.linkedin.e42015befb40f6eae45546693a8cac36") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    tscpUrl\n    sponsoredMessageOption @recipeType(name: "com.linkedin.c2d4c83a959dcb4b759f9037b54a0388") {\n      entityUrn\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment Participant on messenger_MessagingParticipant {\n  entityUrn\n  hostIdentityUrn\n  backendUrn\n  participantType {\n    member @recipeType(name: "com.linkedin.108a437e3ab0dd42a62fc3d18a5b049a") {\n      firstName @recipeType(name: "com.linkedin.e42015befb40f6eae45546693a8cac36") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      lastName @recipeType(name: "com.linkedin.e42015befb40f6eae45546693a8cac36") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      headline @recipeType(name: "com.linkedin.e42015befb40f6eae45546693a8cac36") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      profilePicture @recipeType(name: "com.linkedin.7fb4f25aa4c3ab41c6bba613782b9d34") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      profileUrl\n      pronoun {\n        customPronoun\n        standardizedPronoun\n      }\n      distance\n      _recipeType\n      _type\n    }\n    organization @recipeType(name: "com.linkedin.07953e7472a7ac99ea930ee110846b07") {\n      name @recipeType(name: "com.linkedin.e42015befb40f6eae45546693a8cac36") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      tagline @recipeType(name: "com.linkedin.e42015befb40f6eae45546693a8cac36") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      logo @recipeType(name: "com.linkedin.7fb4f25aa4c3ab41c6bba613782b9d34") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      pageType\n      pageUrl\n      _recipeType\n      _type\n    }\n    custom @recipeType(name: "com.linkedin.36e35a3dd73fdcc7da4179fa0753362f") {\n      name @recipeType(name: "com.linkedin.e42015befb40f6eae45546693a8cac36") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      image @recipeType(name: "com.linkedin.7fb4f25aa4c3ab41c6bba613782b9d34") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      _recipeType\n      _type\n    }\n  }\n}\n\nfragment MessageRenderContent on messenger_RenderContent {\n  audio @recipeType(name: "com.linkedin.9d014ff494a179168acc7dbdcaac714d") {\n    ...AudioMetadata\n    _recipeType\n    _type\n  }\n  awayMessage @recipeType(name: "com.linkedin.87c9a9cd416518b3ae3ec7fa913beda9") {\n    ...AwayMessage\n    _recipeType\n    _type\n  }\n  externalMedia @recipeType(name: "com.linkedin.ab643b2a910f8d01515e3de05ea3ed58") {\n    ...ExternalMedia\n    _recipeType\n    _type\n  }\n  file @recipeType(name: "com.linkedin.7aa5683921913aade8fa5c4519baa702") {\n    ...FileAttachment\n    _recipeType\n    _type\n  }\n  messageAdRenderContent @recipeType(name: "com.linkedin.fe6a30e3187263cbe5e35ddaefad8057") {\n    ...MessageAdRenderContent\n    _recipeType\n    _type\n  }\n  vectorImage @recipeType(name: "com.linkedin.7fb4f25aa4c3ab41c6bba613782b9d34") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  video @recipeType(name: "com.linkedin.7925b565d0d566800b8922aea3867f4a") {\n    ...VideoPlayMetadata\n    _recipeType\n    _type\n  }\n  videoMeeting @recipeType(name: "com.linkedin.60105a4be7268dcb47c025ca8d8a2ed7") {\n    ...VideoMeeting\n    _recipeType\n    _type\n  }\n  hostUrnData @recipeType(name: "com.linkedin.b0d4ad02fc936b49872f65040e8bc08d") {\n    hostUrn\n    type\n    _recipeType\n    _type\n  }\n  conversationAdsMessageContent @recipeType(name: "com.linkedin.639ce822a6f22d98acc6ad69cac31ba7") {\n    ...ConversationAdsMessageContent\n    _recipeType\n    _type\n  }\n  forwardedMessageContent @recipeType(name: "com.linkedin.9b5797921a5dfc2f612edaaeaca81f76") {\n    originalSender @recipeType(name: "com.linkedin.587bcc596204b389c9305679283b14f7") {\n      ...Participant\n      _recipeType\n      _type\n    }\n    originalSendAt\n    forwardedBody @recipeType(name: "com.linkedin.e42015befb40f6eae45546693a8cac36") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    footerText @recipeType(name: "com.linkedin.e42015befb40f6eae45546693a8cac36") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment MessageFullParticipant on messenger_Message {\n  ...MessageBase\n  sender @recipeType(name: "com.linkedin.587bcc596204b389c9305679283b14f7") {\n    ...Participant\n    _recipeType\n    _type\n  }\n  renderContent {\n    ...MessageRenderContent\n  }\n}\n',variablesTypes:{conversationUrn:{type:"String",isRequired:!0,kind:"Scalar"},deliveredAt:{type:"Long",isRequired:!0,kind:"Scalar"},countBefore:{type:"Int",isRequired:!0,kind:"Scalar"},countAfter:{type:"Int",isRequired:!0,kind:"Scalar"}}}),Kn=Un({kind:"query",id:"messengerConversations.b22fc2fbadc541053eca0c42fe5aedf4",typeName:"com.linkedin.2a7f21c8d98d18e3a6c802f0dd8d222d",name:"get-conversations-by-ids",source:'query getConversationsByIds($conversationIds: [String!]!) @recipeType(name: "com.linkedin.2a7f21c8d98d18e3a6c802f0dd8d222d") {\n  messengerConversationsByIds(messengerConversationsIds: $conversationIds) @recipeType(name: "com.linkedin.ea0ca8ae0158145afa86564919192206") {\n    ...Conversation\n    _recipeType\n    _type\n  }\n  _recipeType\n  _type\n}\n\nfragment VectorImage on common_VectorImage {\n  artifacts @recipeType(name: "com.linkedin.a5c2366e94678fa4e07fb9d0071575b4") {\n    width\n    height\n    fileIdentifyingUrlPathSegment\n    _recipeType\n    _type\n  }\n  attribution\n  rootUrl\n  focalPoint @recipeType(name: "com.linkedin.e2c105c22c33e11df69a87b97fe9e6c9") {\n    xOffsetPercentage\n    yOffsetPercentage\n    _recipeType\n    _type\n  }\n  digitalmediaAsset\n}\n\nfragment AttributeKind on pemberly_text_AttributeKind {\n  bold @recipeType(name: "com.linkedin.cd08a6957071c175673f38f8940c9900") {\n    __typename\n    _recipeType\n    _type\n  }\n  italic @recipeType(name: "com.linkedin.032ed558567b54b1e4b608f3efbbf6da") {\n    __typename\n    _recipeType\n    _type\n  }\n  hyperlink @recipeType(name: "com.linkedin.963451af762cd092f1fd92fb99464320") {\n    url\n    __typename\n    _recipeType\n    _type\n  }\n  paragraph @recipeType(name: "com.linkedin.a3bd3f5867b1277cb58b73e20ddbae88") {\n    __typename\n    _recipeType\n    _type\n  }\n  list @recipeType(name: "com.linkedin.1fd95451f0a7fb0e33f983671ba1418a") {\n    ordered\n    __typename\n    _recipeType\n    _type\n  }\n  listItem @recipeType(name: "com.linkedin.c8734b47faca5bddba8a78b7760aaadd") {\n    __typename\n    _recipeType\n    _type\n  }\n  lineBreak @recipeType(name: "com.linkedin.22650e98f182951259aa94c93545a09a") {\n    __typename\n    _recipeType\n    _type\n  }\n  underline @recipeType(name: "com.linkedin.031579b3719a1e2effe3cacb8f5fce81") {\n    __typename\n    _recipeType\n    _type\n  }\n  subscript @recipeType(name: "com.linkedin.f7c85a4de7cde9c8bf03f5130b170fa2") {\n    __typename\n    _recipeType\n    _type\n  }\n  superscript @recipeType(name: "com.linkedin.7dbe4cb9011f7a05f44b7bb7b7698ba8") {\n    __typename\n    _recipeType\n    _type\n  }\n  entity @recipeType(name: "com.linkedin.3d51fe0e0f8aecebb80748069fc288ab") {\n    urn\n    _recipeType\n    _type\n  }\n}\n\nfragment AttributedText on pemberly_text_AttributedText {\n  text\n  attributes @recipeType(name: "com.linkedin.39b36fe069d9848219c9cc8da60cf830") {\n    attributeKind {\n      ...AttributeKind\n    }\n    start\n    length\n    _recipeType\n    _type\n  }\n}\n\nfragment Participant on messenger_MessagingParticipant {\n  entityUrn\n  hostIdentityUrn\n  backendUrn\n  participantType {\n    member @recipeType(name: "com.linkedin.f1e3d6ded8aa9a59e30c6c0255837530") {\n      firstName @recipeType(name: "com.linkedin.88865589e44fcff43acff8f555b77e23") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      lastName @recipeType(name: "com.linkedin.88865589e44fcff43acff8f555b77e23") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      headline @recipeType(name: "com.linkedin.88865589e44fcff43acff8f555b77e23") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      profilePicture @recipeType(name: "com.linkedin.d1856ac08224ed7648057a35f7eba906") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      profileUrl\n      pronoun {\n        customPronoun\n        standardizedPronoun\n      }\n      distance\n      _recipeType\n      _type\n    }\n    organization @recipeType(name: "com.linkedin.1af67415b1fcedf1c55abbf24ce37c94") {\n      name @recipeType(name: "com.linkedin.88865589e44fcff43acff8f555b77e23") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      tagline @recipeType(name: "com.linkedin.88865589e44fcff43acff8f555b77e23") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      logo @recipeType(name: "com.linkedin.d1856ac08224ed7648057a35f7eba906") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      pageType\n      pageUrl\n      _recipeType\n      _type\n    }\n    custom @recipeType(name: "com.linkedin.e03936aaee4f7145b8623f8b0882ee06") {\n      name @recipeType(name: "com.linkedin.88865589e44fcff43acff8f555b77e23") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      image @recipeType(name: "com.linkedin.d1856ac08224ed7648057a35f7eba906") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      _recipeType\n      _type\n    }\n  }\n}\n\nfragment CreativeAdsReportingInfo on messenger_CreativeAdsReportingInfo {\n  contentSource\n  sponsoredAccountUrn\n  sponsoredCreativeUrn\n}\n\nfragment SponsoredMetadata on messenger_SponsoredMetadata {\n  adRequestId\n  activityType\n  adTrackingCode\n  leadTrackingCode\n  version\n  videoBehavior\n  adTrackingCode\n  sponsoredCampaignUrn\n  adServingUrn\n}\n\nfragment ConversationAdsContent on messenger_ConversationAdsContent {\n  adUnit @recipeType(name: "com.linkedin.d1856ac08224ed7648057a35f7eba906") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  advertiserLabel\n  advertiserLegalText @recipeType(name: "com.linkedin.88865589e44fcff43acff8f555b77e23") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  clickTrackingUrl\n  creativeAdsReportingInfo @recipeType(name: "com.linkedin.6c239bf7949c35b1ca0559ccbb29215c") {\n    ...CreativeAdsReportingInfo\n    _recipeType\n    _type\n  }\n  linkedInLegalText @recipeType(name: "com.linkedin.88865589e44fcff43acff8f555b77e23") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  sponsoredConversationTrackingId\n  sponsoredTracking @recipeType(name: "com.linkedin.65fe1b0695991a83fe42e5c54b26a7e6") {\n    ...SponsoredMetadata\n    _recipeType\n    _type\n  }\n}\n\nfragment Conversation on messenger_Conversation {\n  entityUrn\n  backendUrn\n  read\n  createdAt\n  lastActivityAt\n  lastReadAt\n  title\n  headlineText @recipeType(name: "com.linkedin.88865589e44fcff43acff8f555b77e23") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  shortHeadlineText @recipeType(name: "com.linkedin.88865589e44fcff43acff8f555b77e23") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  notificationStatus\n  categories\n  unreadCount\n  conversationUrl\n  hostConversationActions\n  conversationTypeText @recipeType(name: "com.linkedin.88865589e44fcff43acff8f555b77e23") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  state\n  groupChat\n  creator @recipeType(name: "com.linkedin.e48ff5b94807782a785860f6062bfaab") {\n    ...Participant\n    _recipeType\n    _type\n  }\n  disabledFeatures @recipeType(name: "com.linkedin.25a5e21bab98c96b35b8397913f07722") {\n    disabledFeature\n    reasonText @recipeType(name: "com.linkedin.88865589e44fcff43acff8f555b77e23") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  contentMetadata {\n    conversationAdContent @recipeType(name: "com.linkedin.0c5a19f04be34234ac632fdfb2397ef9") {\n      ...ConversationAdsContent\n      _recipeType\n      _type\n    }\n  }\n  conversationParticipants @recipeType(name: "com.linkedin.e48ff5b94807782a785860f6062bfaab") {\n    ...Participant\n    _recipeType\n    _type\n  }\n}\n',variablesTypes:{conversationIds:{type:"Array",isRequired:!0,innerType:{type:"String",isRequired:!0,kind:"Scalar"},kind:"Array"}}}),$n=Un({kind:"query",id:"messengerMailboxCounts.2dd1b6450198aa97a16184e509bb6312",typeName:"com.linkedin.7455e0e579fcb3a34f96eb0eefe7a411",name:"get-mailbox-unreadcounts",source:'query getMailboxUnreadCount($mailboxUrn: String!) @recipeType(name: "com.linkedin.7455e0e579fcb3a34f96eb0eefe7a411") {\n  messengerMailboxCountsByMailbox(mailboxUrn: $mailboxUrn) @recipeType(name: "com.linkedin.53337f34a47b3c672713f3ba35605146") {\n    elements @recipeType(name: "com.linkedin.47d6db71cf3196fbd94e1d63c2031539") {\n      category\n      unreadConversationCount\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  _recipeType\n  _type\n}\n',variablesTypes:{mailboxUrn:{type:"String",isRequired:!0,kind:"Scalar"}}}),Wn=Un({kind:"query",id:"messengerQuickReplies.555e25a44c54321da609f423f80016e6",typeName:"com.linkedin.4c7816368899aefc0404a81a21b89aad",name:"get-quick-replies-by-conversation",source:'query GetQuickRepliesByConversation($conversationUrn: String!) @recipeType(name: "com.linkedin.4c7816368899aefc0404a81a21b89aad") {\n  messengerQuickRepliesByConversation(conversationUrn: $conversationUrn) @recipeType(name: "com.linkedin.b6e858f35d83d6cf5dfa51c1f4e9cf33") {\n    elements @recipeType(name: "com.linkedin.97e0c984dad39a9337fa7f8a08b5bb2c") {\n      ...QuickReply\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  _recipeType\n  _type\n}\n\nfragment AttributeKind on pemberly_text_AttributeKind {\n  bold @recipeType(name: "com.linkedin.9d302f859c4add9e1a2b277a07e5e2bc") {\n    __typename\n    _recipeType\n    _type\n  }\n  italic @recipeType(name: "com.linkedin.a47efe23ef54dcfffbae34d2714a7709") {\n    __typename\n    _recipeType\n    _type\n  }\n  hyperlink @recipeType(name: "com.linkedin.814d6a3abc3892b25d5efeda1dfdb21b") {\n    url\n    __typename\n    _recipeType\n    _type\n  }\n  paragraph @recipeType(name: "com.linkedin.079f490924ce9ea0a2e300c8b005f125") {\n    __typename\n    _recipeType\n    _type\n  }\n  list @recipeType(name: "com.linkedin.323f1daea090cebaa7394cb723af7f64") {\n    ordered\n    __typename\n    _recipeType\n    _type\n  }\n  listItem @recipeType(name: "com.linkedin.987bbc542a2213455845aa9cd0aa823c") {\n    __typename\n    _recipeType\n    _type\n  }\n  lineBreak @recipeType(name: "com.linkedin.a68b6f013115bc3c9f99e7643ee1958f") {\n    __typename\n    _recipeType\n    _type\n  }\n  underline @recipeType(name: "com.linkedin.accbc6f97f0585bc2766916e8dfd3abf") {\n    __typename\n    _recipeType\n    _type\n  }\n  subscript @recipeType(name: "com.linkedin.5eba473fa8c633e37c165ba147eac5bf") {\n    __typename\n    _recipeType\n    _type\n  }\n  superscript @recipeType(name: "com.linkedin.a91704e48ba8e5816c625494c2f97e48") {\n    __typename\n    _recipeType\n    _type\n  }\n  entity @recipeType(name: "com.linkedin.c8fcea02494286c36cdd22ccc61fb32b") {\n    urn\n    _recipeType\n    _type\n  }\n}\n\nfragment AttributedText on pemberly_text_AttributedText {\n  text\n  attributes @recipeType(name: "com.linkedin.9530dd0266c5e3dfdd2d57398081b9ba") {\n    attributeKind {\n      ...AttributeKind\n    }\n    start\n    length\n    _recipeType\n    _type\n  }\n}\n\nfragment QuickReply on messenger_QuickReply {\n  displayText @recipeType(name: "com.linkedin.407cdcf10dddee1f9ee388bf65c637e6") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  message @recipeType(name: "com.linkedin.61b815121b717e1b355148c7cffbce70") {\n    entityUrn\n    _recipeType\n    _type\n  }\n  objectUrn\n  prefillText @recipeType(name: "com.linkedin.407cdcf10dddee1f9ee388bf65c637e6") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  quickReplyType {\n    type\n    customType\n  }\n  trackingId\n}\n',variablesTypes:{conversationUrn:{type:"String",isRequired:!0,kind:"Scalar"}}}),Qn=Un({kind:"query",id:"messengerMessagingParticipants.d8df65a2f55f270ced7e37ff2fafc8c8",typeName:"com.linkedin.17d2b5b00f250b93fa250e00473c98a2",name:"get-reactors-by-message-and-emoji",source:'query getReactorsByMessageAndEmoji($messageUrn: String!, $emoji: String!) @recipeType(name: "com.linkedin.17d2b5b00f250b93fa250e00473c98a2") {\n  messengerMessagingParticipantsByMessageAndEmoji(messageUrn: $messageUrn, emoji: $emoji) @recipeType(name: "com.linkedin.f808af31529de4c2c4abd0976d7bcfaa") {\n    elements @recipeType(name: "com.linkedin.fa6606f7f339c4a8571ac9043f664f4b") {\n      ...Participant\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  _recipeType\n  _type\n}\n\nfragment VectorImage on common_VectorImage {\n  artifacts @recipeType(name: "com.linkedin.30426cc31a0002f3526931f9b04d7a2c") {\n    width\n    height\n    fileIdentifyingUrlPathSegment\n    _recipeType\n    _type\n  }\n  attribution\n  rootUrl\n  focalPoint @recipeType(name: "com.linkedin.92edcfdf0a2c55c82fac4f52136f2277") {\n    xOffsetPercentage\n    yOffsetPercentage\n    _recipeType\n    _type\n  }\n  digitalmediaAsset\n}\n\nfragment AttributeKind on pemberly_text_AttributeKind {\n  bold @recipeType(name: "com.linkedin.5e529d741267fbcfd8d758446609293d") {\n    __typename\n    _recipeType\n    _type\n  }\n  italic @recipeType(name: "com.linkedin.d6ae29dada06ce0c9022ffd1bdbcf0f5") {\n    __typename\n    _recipeType\n    _type\n  }\n  hyperlink @recipeType(name: "com.linkedin.1630188842f9c02068e6b3d3c8759d8e") {\n    url\n    __typename\n    _recipeType\n    _type\n  }\n  paragraph @recipeType(name: "com.linkedin.e1ac93598c33825817ae2d22ab66a34c") {\n    __typename\n    _recipeType\n    _type\n  }\n  list @recipeType(name: "com.linkedin.aa6aa1d53b0ef47e7626fcc03c76c0d5") {\n    ordered\n    __typename\n    _recipeType\n    _type\n  }\n  listItem @recipeType(name: "com.linkedin.717d4681d555c659ed7a3a52fe4cf8ed") {\n    __typename\n    _recipeType\n    _type\n  }\n  lineBreak @recipeType(name: "com.linkedin.a106ec2c8d753f89d77776bff2253dcc") {\n    __typename\n    _recipeType\n    _type\n  }\n  underline @recipeType(name: "com.linkedin.a5ef24120169ecc1af0d004f4155c3ef") {\n    __typename\n    _recipeType\n    _type\n  }\n  subscript @recipeType(name: "com.linkedin.5f0afe1fb5e10f3bd70e3076aa777924") {\n    __typename\n    _recipeType\n    _type\n  }\n  superscript @recipeType(name: "com.linkedin.e3a8be2a344d7a4cb105ac0117852d9b") {\n    __typename\n    _recipeType\n    _type\n  }\n  entity @recipeType(name: "com.linkedin.b42f4e2270bfbce9ad6c2d81a686d5ed") {\n    urn\n    _recipeType\n    _type\n  }\n}\n\nfragment AttributedText on pemberly_text_AttributedText {\n  text\n  attributes @recipeType(name: "com.linkedin.4c69a590d6bc461dd9ba423c5a7295b2") {\n    attributeKind {\n      ...AttributeKind\n    }\n    start\n    length\n    _recipeType\n    _type\n  }\n}\n\nfragment Participant on messenger_MessagingParticipant {\n  entityUrn\n  hostIdentityUrn\n  backendUrn\n  participantType {\n    member @recipeType(name: "com.linkedin.f5afbea91d7f182d4f9fa71aae797789") {\n      firstName @recipeType(name: "com.linkedin.6c89a87e9d6583a8a3c3b0ae85ca60f8") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      lastName @recipeType(name: "com.linkedin.6c89a87e9d6583a8a3c3b0ae85ca60f8") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      headline @recipeType(name: "com.linkedin.6c89a87e9d6583a8a3c3b0ae85ca60f8") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      profilePicture @recipeType(name: "com.linkedin.30d979b6847245f55adfe80ebcc52b24") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      profileUrl\n      pronoun {\n        customPronoun\n        standardizedPronoun\n      }\n      distance\n      _recipeType\n      _type\n    }\n    organization @recipeType(name: "com.linkedin.1b19a2135e616984e3517477d48289f3") {\n      name @recipeType(name: "com.linkedin.6c89a87e9d6583a8a3c3b0ae85ca60f8") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      tagline @recipeType(name: "com.linkedin.6c89a87e9d6583a8a3c3b0ae85ca60f8") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      logo @recipeType(name: "com.linkedin.30d979b6847245f55adfe80ebcc52b24") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      pageType\n      pageUrl\n      _recipeType\n      _type\n    }\n    custom @recipeType(name: "com.linkedin.fb7f16d6ad24fc071e8e4c9a507d1a4c") {\n      name @recipeType(name: "com.linkedin.6c89a87e9d6583a8a3c3b0ae85ca60f8") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      image @recipeType(name: "com.linkedin.30d979b6847245f55adfe80ebcc52b24") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      _recipeType\n      _type\n    }\n  }\n}\n',variablesTypes:{messageUrn:{type:"String",isRequired:!0,kind:"Scalar"},emoji:{type:"String",isRequired:!0,kind:"Scalar"}}}),zn=Un({kind:"query",id:"messengerSeenReceipts.39189b4d57a591c0da1718497ac78521",typeName:"com.linkedin.33851ce67c1a444c09e057014b5c4d81",name:"get-seen-receipts-by-conversation",source:'query getSeenReceiptsByConversation($conversationUrn: String!) @recipeType(name: "com.linkedin.33851ce67c1a444c09e057014b5c4d81") {\n  messengerSeenReceiptsByConversation(conversationUrn: $conversationUrn) @recipeType(name: "com.linkedin.610dc666c5c0bd249902fc4a6e29137d") {\n    elements @recipeType(name: "com.linkedin.f2277acfd7c0704a70201139df579a65") {\n      ...SeenReceipt\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  _recipeType\n  _type\n}\n\nfragment VectorImage on common_VectorImage {\n  artifacts @recipeType(name: "com.linkedin.c521d0834988414cb543494eff1defa8") {\n    width\n    height\n    fileIdentifyingUrlPathSegment\n    _recipeType\n    _type\n  }\n  attribution\n  rootUrl\n  focalPoint @recipeType(name: "com.linkedin.f513b47df8c0ff6632ad0cc6e5123ebd") {\n    xOffsetPercentage\n    yOffsetPercentage\n    _recipeType\n    _type\n  }\n  digitalmediaAsset\n}\n\nfragment AttributeKind on pemberly_text_AttributeKind {\n  bold @recipeType(name: "com.linkedin.eaf33696dfedf327ee1b3eb79b41200d") {\n    __typename\n    _recipeType\n    _type\n  }\n  italic @recipeType(name: "com.linkedin.104498b8848142b8dcdaa5be37aedb4d") {\n    __typename\n    _recipeType\n    _type\n  }\n  hyperlink @recipeType(name: "com.linkedin.ccef7b4aabce99014e8de62c834d3365") {\n    url\n    __typename\n    _recipeType\n    _type\n  }\n  paragraph @recipeType(name: "com.linkedin.8356230738038667e9e81ce3f2af228a") {\n    __typename\n    _recipeType\n    _type\n  }\n  list @recipeType(name: "com.linkedin.64eeb4db61c989c19f2d0742f4e13511") {\n    ordered\n    __typename\n    _recipeType\n    _type\n  }\n  listItem @recipeType(name: "com.linkedin.e057e3072c193e04323ff658a6d277c8") {\n    __typename\n    _recipeType\n    _type\n  }\n  lineBreak @recipeType(name: "com.linkedin.3a614eefd18e324ebee546b84786adb9") {\n    __typename\n    _recipeType\n    _type\n  }\n  underline @recipeType(name: "com.linkedin.92c7f66d7ef276b12852a8f360a337b7") {\n    __typename\n    _recipeType\n    _type\n  }\n  subscript @recipeType(name: "com.linkedin.3b5950e1cbcc19255c56ebb11566314b") {\n    __typename\n    _recipeType\n    _type\n  }\n  superscript @recipeType(name: "com.linkedin.6b36e9ed4db8e3d415c01840cec60622") {\n    __typename\n    _recipeType\n    _type\n  }\n  entity @recipeType(name: "com.linkedin.e7979b3d0486a3852e5c295c954c551b") {\n    urn\n    _recipeType\n    _type\n  }\n}\n\nfragment AttributedText on pemberly_text_AttributedText {\n  text\n  attributes @recipeType(name: "com.linkedin.48242b0d0c19cbd10a9c27e5146a605c") {\n    attributeKind {\n      ...AttributeKind\n    }\n    start\n    length\n    _recipeType\n    _type\n  }\n}\n\nfragment Participant on messenger_MessagingParticipant {\n  entityUrn\n  hostIdentityUrn\n  backendUrn\n  participantType {\n    member @recipeType(name: "com.linkedin.9623b7f05521f9e416e4aa0e8fd3d9ae") {\n      firstName @recipeType(name: "com.linkedin.1071bc7f9843d7f7dc90e1efdae1b2cf") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      lastName @recipeType(name: "com.linkedin.1071bc7f9843d7f7dc90e1efdae1b2cf") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      headline @recipeType(name: "com.linkedin.1071bc7f9843d7f7dc90e1efdae1b2cf") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      profilePicture @recipeType(name: "com.linkedin.7425e7cb63a718d023074f06d27eba3b") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      profileUrl\n      pronoun {\n        customPronoun\n        standardizedPronoun\n      }\n      distance\n      _recipeType\n      _type\n    }\n    organization @recipeType(name: "com.linkedin.b7042771447567c33cd352afd4d46456") {\n      name @recipeType(name: "com.linkedin.1071bc7f9843d7f7dc90e1efdae1b2cf") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      tagline @recipeType(name: "com.linkedin.1071bc7f9843d7f7dc90e1efdae1b2cf") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      logo @recipeType(name: "com.linkedin.7425e7cb63a718d023074f06d27eba3b") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      pageType\n      pageUrl\n      _recipeType\n      _type\n    }\n    custom @recipeType(name: "com.linkedin.57e7c3e516f17ecd0668b1133e8f358f") {\n      name @recipeType(name: "com.linkedin.1071bc7f9843d7f7dc90e1efdae1b2cf") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      image @recipeType(name: "com.linkedin.7425e7cb63a718d023074f06d27eba3b") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      _recipeType\n      _type\n    }\n  }\n}\n\nfragment SeenReceipt on messenger_SeenReceipt {\n  message @recipeType(name: "com.linkedin.dc3ad25c62e56a24aa27aa71fac75dcf") {\n    entityUrn\n    _recipeType\n    _type\n  }\n  seenAt\n  seenByParticipant @recipeType(name: "com.linkedin.29bd4036bc585aa87377842ee2563fb2") {\n    ...Participant\n    _recipeType\n    _type\n  }\n}\n',variablesTypes:{conversationUrn:{type:"String",isRequired:!0,kind:"Scalar"}}}),Yn=Un({kind:"query",id:"messengerConversations.a0870fd7313399d0a7f05d77cf50479d",typeName:"com.linkedin.bc13e1b1426cc03e36eab503d342cabe",name:"initial-sync-conversations",source:'query initialSyncConversations($mailboxUrn: String!) @recipeType(name: "com.linkedin.bc13e1b1426cc03e36eab503d342cabe") {\n  messengerConversationsBySyncToken(mailboxUrn: $mailboxUrn) @recipeType(name: "com.linkedin.c4d40619b988a313e6dbd442876520d5") {\n    elements @recipeType(name: "com.linkedin.e0457b8b4985e4e141d2bd624526db5a") {\n      ...Conversation\n      messages(count: 1, sortOrder: DESCENDING) @required @recipeType(name: "com.linkedin.2fd852a9be7c7d3602803db62bded474") {\n        elements @allOrNothing @recipeType(name: "com.linkedin.7f5095a72b369d7ce1483bdfc62ee3e0") {\n          ...MessagePartialParticipant\n          _recipeType\n          _type\n        }\n        _recipeType\n        _type\n      }\n      _recipeType\n      _type\n    }\n    metadata @recipeType(name: "com.linkedin.6614bca623fc9720b29edae666a9bdb4") {\n      newSyncToken\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  _recipeType\n  _type\n}\n\nfragment VectorImage on common_VectorImage {\n  artifacts @recipeType(name: "com.linkedin.adae398a316afc92d9372666e5da2b7d") {\n    width\n    height\n    fileIdentifyingUrlPathSegment\n    _recipeType\n    _type\n  }\n  attribution\n  rootUrl\n  focalPoint @recipeType(name: "com.linkedin.381a4569be39fc83e21c406f0337b620") {\n    xOffsetPercentage\n    yOffsetPercentage\n    _recipeType\n    _type\n  }\n  digitalmediaAsset\n}\n\nfragment AttributeKind on pemberly_text_AttributeKind {\n  bold @recipeType(name: "com.linkedin.9b949b440138d45d2f931879b66187c9") {\n    __typename\n    _recipeType\n    _type\n  }\n  italic @recipeType(name: "com.linkedin.a4b572cbcce10658bd90feee6736182f") {\n    __typename\n    _recipeType\n    _type\n  }\n  hyperlink @recipeType(name: "com.linkedin.14ea4bb04f4abe63f83e2bc9f36f7abe") {\n    url\n    __typename\n    _recipeType\n    _type\n  }\n  paragraph @recipeType(name: "com.linkedin.a696eef5f5d40723095820da042f0287") {\n    __typename\n    _recipeType\n    _type\n  }\n  list @recipeType(name: "com.linkedin.15f11baf4bf3e61a26d61843a47eae67") {\n    ordered\n    __typename\n    _recipeType\n    _type\n  }\n  listItem @recipeType(name: "com.linkedin.34dd0dcbc21fe095004daa39964cc858") {\n    __typename\n    _recipeType\n    _type\n  }\n  lineBreak @recipeType(name: "com.linkedin.2a4bd6f512c36c102e60d42a8726fe61") {\n    __typename\n    _recipeType\n    _type\n  }\n  underline @recipeType(name: "com.linkedin.54de8e51102bb201fc1b831d17a81d96") {\n    __typename\n    _recipeType\n    _type\n  }\n  subscript @recipeType(name: "com.linkedin.70fab14b53c2a72345b27c970c804bd2") {\n    __typename\n    _recipeType\n    _type\n  }\n  superscript @recipeType(name: "com.linkedin.e33a796e937400f974133f8fb6b41e9b") {\n    __typename\n    _recipeType\n    _type\n  }\n  entity @recipeType(name: "com.linkedin.75fd15a735d1668ef83e7e6921847f56") {\n    urn\n    _recipeType\n    _type\n  }\n}\n\nfragment AttributedText on pemberly_text_AttributedText {\n  text\n  attributes @recipeType(name: "com.linkedin.be4dc8a825294ba651235e4629a3404e") {\n    attributeKind {\n      ...AttributeKind\n    }\n    start\n    length\n    _recipeType\n    _type\n  }\n}\n\nfragment Participant on messenger_MessagingParticipant {\n  entityUrn\n  hostIdentityUrn\n  backendUrn\n  participantType {\n    member @recipeType(name: "com.linkedin.7eb3a14326aeb4c8c16f24e1979ffe01") {\n      firstName @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      lastName @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      headline @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      profilePicture @recipeType(name: "com.linkedin.5a06e769367ad613e374bfe0fb8b474c") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      profileUrl\n      pronoun {\n        customPronoun\n        standardizedPronoun\n      }\n      distance\n      _recipeType\n      _type\n    }\n    organization @recipeType(name: "com.linkedin.629151bbc2a2b8bde6b327b528766d45") {\n      name @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      tagline @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      logo @recipeType(name: "com.linkedin.5a06e769367ad613e374bfe0fb8b474c") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      pageType\n      pageUrl\n      _recipeType\n      _type\n    }\n    custom @recipeType(name: "com.linkedin.aa5278b3b55df5dcc2255a69addddc1e") {\n      name @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      image @recipeType(name: "com.linkedin.5a06e769367ad613e374bfe0fb8b474c") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      _recipeType\n      _type\n    }\n  }\n}\n\nfragment CreativeAdsReportingInfo on messenger_CreativeAdsReportingInfo {\n  contentSource\n  sponsoredAccountUrn\n  sponsoredCreativeUrn\n}\n\nfragment SponsoredMetadata on messenger_SponsoredMetadata {\n  adRequestId\n  activityType\n  adTrackingCode\n  leadTrackingCode\n  version\n  videoBehavior\n  adTrackingCode\n  sponsoredCampaignUrn\n  adServingUrn\n}\n\nfragment ConversationAdsContent on messenger_ConversationAdsContent {\n  adUnit @recipeType(name: "com.linkedin.5a06e769367ad613e374bfe0fb8b474c") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  advertiserLabel\n  advertiserLegalText @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  clickTrackingUrl\n  creativeAdsReportingInfo @recipeType(name: "com.linkedin.ca1e81b79e7b59bfd3fd25d991a977ae") {\n    ...CreativeAdsReportingInfo\n    _recipeType\n    _type\n  }\n  linkedInLegalText @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  sponsoredConversationTrackingId\n  sponsoredTracking @recipeType(name: "com.linkedin.c9ee5cbbe28e24c3c5d9c44f591b7515") {\n    ...SponsoredMetadata\n    _recipeType\n    _type\n  }\n}\n\nfragment Conversation on messenger_Conversation {\n  entityUrn\n  backendUrn\n  read\n  createdAt\n  lastActivityAt\n  lastReadAt\n  title\n  headlineText @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  shortHeadlineText @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  notificationStatus\n  categories\n  unreadCount\n  conversationUrl\n  hostConversationActions\n  conversationTypeText @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  state\n  groupChat\n  creator @recipeType(name: "com.linkedin.01f8e638b9e4e8fdedf2a35d7e7bc3dc") {\n    ...Participant\n    _recipeType\n    _type\n  }\n  disabledFeatures @recipeType(name: "com.linkedin.a2ca2658a10f32cd19074ed775ec6243") {\n    disabledFeature\n    reasonText @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  contentMetadata {\n    conversationAdContent @recipeType(name: "com.linkedin.1c1b542988ebe7ed2a1850a4dc1bbadc") {\n      ...ConversationAdsContent\n      _recipeType\n      _type\n    }\n  }\n  conversationParticipants @recipeType(name: "com.linkedin.01f8e638b9e4e8fdedf2a35d7e7bc3dc") {\n    ...Participant\n    _recipeType\n    _type\n  }\n}\n\nfragment ReactionSummary on messenger_ReactionSummary {\n  count\n  emoji\n  firstReactedAt\n  viewerReacted\n}\n\nfragment MessageBaseWithoutConversation on messenger_Message {\n  entityUrn\n  backendConversationUrn\n  backendUrn\n  subject\n  body @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  inlineWarning @recipeType(name: "com.linkedin.a8accbabea9e3c49fca55bf4f5fc610f") {\n    obfuscatedMessageWarning @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    inlineWarningPrompt @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  originToken\n  deliveredAt\n  messageBodyRenderFormat\n  renderContentFallbackText\n  reactionSummaries @recipeType(name: "com.linkedin.62100cc3671b2a7952cdf70d774f0c16") {\n    ...ReactionSummary\n    _recipeType\n    _type\n  }\n}\n\nfragment MessageBase on messenger_Message {\n  ...MessageBaseWithoutConversation\n  conversation @recipeType(name: "com.linkedin.e0457b8b4985e4e141d2bd624526db5a") {\n    entityUrn\n    _recipeType\n    _type\n  }\n}\n\nfragment AudioMetadata on messenger_AudioMetadata {\n  duration\n  url\n}\n\nfragment AwayMessage on messenger_AwayMessage {\n  footerText @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  text @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n}\n\nfragment ExternalMedia on messenger_ExternalMedia {\n  entityUrn\n  title\n  media @recipeType(name: "com.linkedin.d92301af8ae432c6a325c67221130182") {\n    originalHeight\n    originalWidth\n    url\n    _recipeType\n    _type\n  }\n  previewMedia @recipeType(name: "com.linkedin.d92301af8ae432c6a325c67221130182") {\n    originalHeight\n    originalWidth\n    url\n    _recipeType\n    _type\n  }\n}\n\nfragment FileAttachment on messenger_FileAttachment {\n  assetUrn\n  byteSize\n  mediaType\n  name\n  url\n}\n\nfragment MessageAdRenderContent on messenger_MessageAdRenderContent {\n  advertiserLabel\n  bodyTracking\n  creativeAdsReportingInfo @recipeType(name: "com.linkedin.ca1e81b79e7b59bfd3fd25d991a977ae") {\n    contentSource\n    sponsoredAccountUrn\n    sponsoredCreativeUrn\n    _recipeType\n    _type\n  }\n  legalText @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  legalTextTracking\n  openTracking\n  sponsoredCampaignUrn\n  sponsoredTracking @recipeType(name: "com.linkedin.c9ee5cbbe28e24c3c5d9c44f591b7515") {\n    ...SponsoredMetadata\n    _recipeType\n    _type\n  }\n  status\n  subContent @recipeType(name: "com.linkedin.27e4004b3e4d690d33de889202ae5924") {\n    action\n    actionText\n    actionTracking\n    callToActionLabel\n    leadGenFormOpenTracking\n    leadGenFormUrn\n    leadTrackingCode\n    leadTrackingParams\n    tscpUrl\n    adUnit @recipeType(name: "com.linkedin.eb76a49e634a1e9a69ac4c956e935846") {\n      adUnit @recipeType(name: "com.linkedin.5a06e769367ad613e374bfe0fb8b474c") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      adUnitTracking\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment VideoPlayMetadata on videocontent_VideoPlayMetadata {\n  entityUrn\n  adaptiveStreams @recipeType(name: "com.linkedin.61bf78953251fbd484afea91d3281c15") {\n    initialBitRate\n    masterPlaylists @recipeType(name: "com.linkedin.e133fb8d9410f731252f6f8545875260") {\n      expiresAt\n      url\n      _recipeType\n      _type\n    }\n    mediaType\n    protocol\n    _recipeType\n    _type\n  }\n  aspectRatio\n  duration\n  liveStreamCreatedAt\n  liveStreamEndedAt\n  media\n  nextMedia\n  prevMedia\n  progressiveStreams @recipeType(name: "com.linkedin.105290335920ffad003a428431f0a07d") {\n    bitRate\n    height\n    mediaType\n    mimeType\n    size\n    streamingLocations @recipeType(name: "com.linkedin.e133fb8d9410f731252f6f8545875260") {\n      expiresAt\n      url\n      _recipeType\n      _type\n    }\n    width\n    _recipeType\n    _type\n  }\n  provider\n  thumbnail @recipeType(name: "com.linkedin.5a06e769367ad613e374bfe0fb8b474c") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  trackingId\n  transcripts @recipeType(name: "com.linkedin.ac491e5455a5b4f9bfa0ccf930ef7c49") {\n    captionFile\n    captionFormat\n    isAutogenerated\n    lines @recipeType(name: "com.linkedin.6ad3ab8d5637607a196f6d574ad232c8") {\n      caption\n      lineEndAt\n      lineStartAt\n      _recipeType\n      _type\n    }\n    locale @recipeType(name: "com.linkedin.56948b02e64819b381226994b017f605") {\n      country\n      extensions @recipeType(name: "com.linkedin.8d5cb24a2a625a497d43832a952adbb3") {\n        t\n        u\n        x\n        _recipeType\n        _type\n      }\n      language\n      script\n      variant\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment VideoMeeting on messenger_VideoMeeting {\n  videoMeeting @recipeType(name: "com.linkedin.feb8f633df71861fcb35a7457a18b442") {\n    entityUrn\n    _recipeType\n    _type\n  }\n  earliestStartAt\n  expiresAt\n  timeRange @recipeType(name: "com.linkedin.e7e07cf52d05ed52f2a0d6b81646d262") {\n    end\n    start\n    _recipeType\n    _type\n  }\n}\n\nfragment ConversationAdsMessageContent on messenger_ConversationAdsMessageContent {\n  sponsoredMessageContentUrn\n  sponsoredMessageTrackingId\n  sponsoredMessageOptions @recipeType(name: "com.linkedin.c96be118330697a4f65f984bb931b08b") {\n    clickAction {\n      externalWebsiteClickAction @recipeType(name: "com.linkedin.8156b60527a213a678bd967456d241b1") {\n        redirectUrl\n        _recipeType\n        _type\n      }\n      leadGenClickAction @recipeType(name: "com.linkedin.3bb2afacaffe5eeddedb11a560bb7aac") {\n        leadGenFormUrn\n        leadTrackingCode\n        leadTrackingParams\n        _recipeType\n        _type\n      }\n    }\n    optionText @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    tscpUrl\n    sponsoredMessageOption @recipeType(name: "com.linkedin.cc640a0bc692dcdaf424217677e95eda") {\n      entityUrn\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment MessageRenderContent on messenger_RenderContent {\n  audio @recipeType(name: "com.linkedin.d98db434d0bedd33bd439eb153f15c23") {\n    ...AudioMetadata\n    _recipeType\n    _type\n  }\n  awayMessage @recipeType(name: "com.linkedin.8c293ff9011b1cd87e91a9f6125c4808") {\n    ...AwayMessage\n    _recipeType\n    _type\n  }\n  externalMedia @recipeType(name: "com.linkedin.5678e7f72a1365bc64e9b97e88f2caf5") {\n    ...ExternalMedia\n    _recipeType\n    _type\n  }\n  file @recipeType(name: "com.linkedin.a3d4d34ad04210655af3c5b561eb2ec9") {\n    ...FileAttachment\n    _recipeType\n    _type\n  }\n  messageAdRenderContent @recipeType(name: "com.linkedin.dae3f372acbf89bff4028183a1d3d01b") {\n    ...MessageAdRenderContent\n    _recipeType\n    _type\n  }\n  vectorImage @recipeType(name: "com.linkedin.5a06e769367ad613e374bfe0fb8b474c") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  video @recipeType(name: "com.linkedin.0dbd2db1ff294a149ae39c304fc92c26") {\n    ...VideoPlayMetadata\n    _recipeType\n    _type\n  }\n  videoMeeting @recipeType(name: "com.linkedin.9985fd78c330eed7474c708294217351") {\n    ...VideoMeeting\n    _recipeType\n    _type\n  }\n  hostUrnData @recipeType(name: "com.linkedin.5525505b2253ea794bd1c27d81a3f8cf") {\n    hostUrn\n    type\n    _recipeType\n    _type\n  }\n  conversationAdsMessageContent @recipeType(name: "com.linkedin.01a37a45120d8d9a82831780d024df16") {\n    ...ConversationAdsMessageContent\n    _recipeType\n    _type\n  }\n  forwardedMessageContent @recipeType(name: "com.linkedin.e81ed10998a09fe6281c751c3e45da6d") {\n    originalSender @recipeType(name: "com.linkedin.01f8e638b9e4e8fdedf2a35d7e7bc3dc") {\n      ...Participant\n      _recipeType\n      _type\n    }\n    originalSendAt\n    forwardedBody @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    footerText @recipeType(name: "com.linkedin.5d98a92dbd37a25932928c4b4b771881") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment MessagePartialParticipant on messenger_Message {\n  ...MessageBase\n  sender @recipeType(name: "com.linkedin.01f8e638b9e4e8fdedf2a35d7e7bc3dc") {\n    entityUrn\n    hostIdentityUrn\n    _recipeType\n    _type\n  }\n  renderContent {\n    ...MessageRenderContent\n  }\n}\n',variablesTypes:{mailboxUrn:{type:"String",isRequired:!0,kind:"Scalar"}}}),Xn=Un({kind:"query",id:"messengerConversations.e2947cc74e8683a35558fa84ce55de3e",typeName:"com.linkedin.2a25dae6962f40be897d5ffe00289c5c",name:"mark-all-conversations-as-read",source:'query MarkAllConversationsAsRead($categories: [String!]!, $mailboxUrn: String!) @recipeType(name: "com.linkedin.2a25dae6962f40be897d5ffe00289c5c") {\n  doMarkAllConversationsAsReadMessengerConversations(categories: $categories, mailboxUrn: $mailboxUrn) @recipeType(name: "com.linkedin.b487f4883be20a28b2aa5907ae18fc9d") {\n    result @recipeType(name: "com.linkedin.755f5f21dbfd545773568b4bb322b73a") {\n      ...MarkAllConversationsAsReadResult\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  _recipeType\n  _type\n}\n\nfragment MarkAllConversationsAsReadResult on messenger_MarkAllConversationsAsReadResult {\n  allSynchronouslyProcessed\n}\n',variablesTypes:{categories:{type:"Array",isRequired:!0,innerType:{type:"String",isRequired:!0,kind:"Scalar"},kind:"Array"},mailboxUrn:{type:"String",isRequired:!0,kind:"Scalar"}}}),Jn=Un({kind:"query",id:"messengerConversations.c75deaa4bc70a9d51d59288ae99749a3",typeName:"com.linkedin.13baefbc2d95f2e6498312456b544fc4",name:"sync-conversations",source:'query syncConversations($mailboxUrn: String!, $syncToken: String) @recipeType(name: "com.linkedin.13baefbc2d95f2e6498312456b544fc4") {\n  messengerConversationsBySyncToken(mailboxUrn: $mailboxUrn, syncToken: $syncToken) @recipeType(name: "com.linkedin.7a0e6dc56c290d2fef8307054ef628e9") {\n    elements @recipeType(name: "com.linkedin.d0131ba388bd4c274ad89836c477955c") {\n      ...Conversation\n      _recipeType\n      _type\n    }\n    metadata @recipeType(name: "com.linkedin.a15242ac776cda2233f011e562abeaaa") {\n      ...SyncMetadata\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  _recipeType\n  _type\n}\n\nfragment VectorImage on common_VectorImage {\n  artifacts @recipeType(name: "com.linkedin.686d9d1ed551117f94c5c18320822486") {\n    width\n    height\n    fileIdentifyingUrlPathSegment\n    _recipeType\n    _type\n  }\n  attribution\n  rootUrl\n  focalPoint @recipeType(name: "com.linkedin.ede146e2a194f51503310066fc058654") {\n    xOffsetPercentage\n    yOffsetPercentage\n    _recipeType\n    _type\n  }\n  digitalmediaAsset\n}\n\nfragment AttributeKind on pemberly_text_AttributeKind {\n  bold @recipeType(name: "com.linkedin.6c72b46c06253f9f7e713ee1c93ae444") {\n    __typename\n    _recipeType\n    _type\n  }\n  italic @recipeType(name: "com.linkedin.bfecdd43f8a76f54e395909400b3a47e") {\n    __typename\n    _recipeType\n    _type\n  }\n  hyperlink @recipeType(name: "com.linkedin.bbff3f0fc66c615b5067ffe7bdc86dcd") {\n    url\n    __typename\n    _recipeType\n    _type\n  }\n  paragraph @recipeType(name: "com.linkedin.2d59b6c40fe50dfc0ac0b64f317f23d3") {\n    __typename\n    _recipeType\n    _type\n  }\n  list @recipeType(name: "com.linkedin.0e6524ca57f62ca508a3032da64037fa") {\n    ordered\n    __typename\n    _recipeType\n    _type\n  }\n  listItem @recipeType(name: "com.linkedin.6bcb9fbf33d4ce137db4354209631166") {\n    __typename\n    _recipeType\n    _type\n  }\n  lineBreak @recipeType(name: "com.linkedin.468ac349c18b45e14ec4f937e0dee6c8") {\n    __typename\n    _recipeType\n    _type\n  }\n  underline @recipeType(name: "com.linkedin.a5c90d2abc284f2e8b735892dd061818") {\n    __typename\n    _recipeType\n    _type\n  }\n  subscript @recipeType(name: "com.linkedin.1d26b548f4e5b5288ef95723643d298a") {\n    __typename\n    _recipeType\n    _type\n  }\n  superscript @recipeType(name: "com.linkedin.e2f3217dde3d4432038a1eb1c50606d0") {\n    __typename\n    _recipeType\n    _type\n  }\n  entity @recipeType(name: "com.linkedin.3f007f728d032797f2c8875114902308") {\n    urn\n    _recipeType\n    _type\n  }\n}\n\nfragment AttributedText on pemberly_text_AttributedText {\n  text\n  attributes @recipeType(name: "com.linkedin.e5c5349791ff8f20cac26f5d4269aa10") {\n    attributeKind {\n      ...AttributeKind\n    }\n    start\n    length\n    _recipeType\n    _type\n  }\n}\n\nfragment Participant on messenger_MessagingParticipant {\n  entityUrn\n  hostIdentityUrn\n  backendUrn\n  participantType {\n    member @recipeType(name: "com.linkedin.059980bd802789beb784a8f9a9b69137") {\n      firstName @recipeType(name: "com.linkedin.9d6137b00db50cad01426799804d1192") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      lastName @recipeType(name: "com.linkedin.9d6137b00db50cad01426799804d1192") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      headline @recipeType(name: "com.linkedin.9d6137b00db50cad01426799804d1192") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      profilePicture @recipeType(name: "com.linkedin.322c3b2b26b1028031e2b0717b39e347") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      profileUrl\n      pronoun {\n        customPronoun\n        standardizedPronoun\n      }\n      distance\n      _recipeType\n      _type\n    }\n    organization @recipeType(name: "com.linkedin.173c2f2f123b97f4bb2543e42641c281") {\n      name @recipeType(name: "com.linkedin.9d6137b00db50cad01426799804d1192") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      tagline @recipeType(name: "com.linkedin.9d6137b00db50cad01426799804d1192") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      logo @recipeType(name: "com.linkedin.322c3b2b26b1028031e2b0717b39e347") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      pageType\n      pageUrl\n      _recipeType\n      _type\n    }\n    custom @recipeType(name: "com.linkedin.d6b31717df9125f818b1a1977d5b0653") {\n      name @recipeType(name: "com.linkedin.9d6137b00db50cad01426799804d1192") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      image @recipeType(name: "com.linkedin.322c3b2b26b1028031e2b0717b39e347") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      _recipeType\n      _type\n    }\n  }\n}\n\nfragment CreativeAdsReportingInfo on messenger_CreativeAdsReportingInfo {\n  contentSource\n  sponsoredAccountUrn\n  sponsoredCreativeUrn\n}\n\nfragment SponsoredMetadata on messenger_SponsoredMetadata {\n  adRequestId\n  activityType\n  adTrackingCode\n  leadTrackingCode\n  version\n  videoBehavior\n  adTrackingCode\n  sponsoredCampaignUrn\n  adServingUrn\n}\n\nfragment ConversationAdsContent on messenger_ConversationAdsContent {\n  adUnit @recipeType(name: "com.linkedin.322c3b2b26b1028031e2b0717b39e347") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  advertiserLabel\n  advertiserLegalText @recipeType(name: "com.linkedin.9d6137b00db50cad01426799804d1192") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  clickTrackingUrl\n  creativeAdsReportingInfo @recipeType(name: "com.linkedin.bc706a4c6c31ae1ed601f0f95c2f968f") {\n    ...CreativeAdsReportingInfo\n    _recipeType\n    _type\n  }\n  linkedInLegalText @recipeType(name: "com.linkedin.9d6137b00db50cad01426799804d1192") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  sponsoredConversationTrackingId\n  sponsoredTracking @recipeType(name: "com.linkedin.fec70614c7cf7cbb8e0fd6c57e2c8f6d") {\n    ...SponsoredMetadata\n    _recipeType\n    _type\n  }\n}\n\nfragment Conversation on messenger_Conversation {\n  entityUrn\n  backendUrn\n  read\n  createdAt\n  lastActivityAt\n  lastReadAt\n  title\n  headlineText @recipeType(name: "com.linkedin.9d6137b00db50cad01426799804d1192") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  shortHeadlineText @recipeType(name: "com.linkedin.9d6137b00db50cad01426799804d1192") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  notificationStatus\n  categories\n  unreadCount\n  conversationUrl\n  hostConversationActions\n  conversationTypeText @recipeType(name: "com.linkedin.9d6137b00db50cad01426799804d1192") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  state\n  groupChat\n  creator @recipeType(name: "com.linkedin.239fa054f2ae27d6d786746a5efe7fff") {\n    ...Participant\n    _recipeType\n    _type\n  }\n  disabledFeatures @recipeType(name: "com.linkedin.9d0a578a8c22b128956e58f44b165468") {\n    disabledFeature\n    reasonText @recipeType(name: "com.linkedin.9d6137b00db50cad01426799804d1192") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  contentMetadata {\n    conversationAdContent @recipeType(name: "com.linkedin.8340383189efb90020d96ae3d569b834") {\n      ...ConversationAdsContent\n      _recipeType\n      _type\n    }\n  }\n  conversationParticipants @recipeType(name: "com.linkedin.239fa054f2ae27d6d786746a5efe7fff") {\n    ...Participant\n    _recipeType\n    _type\n  }\n}\n\nfragment SyncMetadata on messenger_SyncMetadata {\n  deletedUrns {\n    conversation @recipeType(name: "com.linkedin.d0131ba388bd4c274ad89836c477955c") {\n      entityUrn\n      _recipeType\n      _type\n    }\n    message @recipeType(name: "com.linkedin.bd421aef6356c2da052bef9b3c2a3674") {\n      entityUrn\n      _recipeType\n      _type\n    }\n  }\n  newSyncToken\n  shouldClearCache\n}\n',variablesTypes:{mailboxUrn:{type:"String",isRequired:!0,kind:"Scalar"},syncToken:{type:"String",isRequired:!1,kind:"Scalar"}}}),Zn=Un({kind:"query",id:"messengerMessages.ef1c413076fc1370fe71019d71ba8b75",typeName:"com.linkedin.c38c518a13ae3dfabbd000dba2c1323a",name:"sync-messages",source:'query SyncMessages($conversationUrn: String!, $syncToken: String) @recipeType(name: "com.linkedin.c38c518a13ae3dfabbd000dba2c1323a") {\n  messengerMessagesBySyncToken(conversationUrn: $conversationUrn, syncToken: $syncToken) @recipeType(name: "com.linkedin.b3fb020d7a62182dcf15004c87ed6684") {\n    elements @recipeType(name: "com.linkedin.9a4948e0045f59eb49ee971c440d4e31") {\n      ...MessageFullParticipant\n      _recipeType\n      _type\n    }\n    metadata @recipeType(name: "com.linkedin.511454cd272357b3e0558c5dac215b69") {\n      ...SyncMetadata\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  _recipeType\n  _type\n}\n\nfragment AttributeKind on pemberly_text_AttributeKind {\n  bold @recipeType(name: "com.linkedin.465a32a11b07f3705fb16e61cce0b255") {\n    __typename\n    _recipeType\n    _type\n  }\n  italic @recipeType(name: "com.linkedin.76f7d68a0b8e0fb4ea4694c56eb8d254") {\n    __typename\n    _recipeType\n    _type\n  }\n  hyperlink @recipeType(name: "com.linkedin.c622780354d9de02db8b521c3b0b7589") {\n    url\n    __typename\n    _recipeType\n    _type\n  }\n  paragraph @recipeType(name: "com.linkedin.4044504975886ef020cfb369ea9250af") {\n    __typename\n    _recipeType\n    _type\n  }\n  list @recipeType(name: "com.linkedin.085d08f078b2e521c7173cd2c66b37c4") {\n    ordered\n    __typename\n    _recipeType\n    _type\n  }\n  listItem @recipeType(name: "com.linkedin.b9a402848439cea2c3fc3a80b6df14e1") {\n    __typename\n    _recipeType\n    _type\n  }\n  lineBreak @recipeType(name: "com.linkedin.67b4cbbed8d4f59d0731330356a63c9f") {\n    __typename\n    _recipeType\n    _type\n  }\n  underline @recipeType(name: "com.linkedin.8ba6d525a8f41d7dc36bcad232dea273") {\n    __typename\n    _recipeType\n    _type\n  }\n  subscript @recipeType(name: "com.linkedin.06e27543dfb2a7dfaf492c6f69cd9501") {\n    __typename\n    _recipeType\n    _type\n  }\n  superscript @recipeType(name: "com.linkedin.c3f280f743f59957949667e621ccec8d") {\n    __typename\n    _recipeType\n    _type\n  }\n  entity @recipeType(name: "com.linkedin.eafe8089647b6274ef230c4d4f4f0564") {\n    urn\n    _recipeType\n    _type\n  }\n}\n\nfragment AttributedText on pemberly_text_AttributedText {\n  text\n  attributes @recipeType(name: "com.linkedin.91a2d9e032fa053fe3e1f7eb8b8fb33a") {\n    attributeKind {\n      ...AttributeKind\n    }\n    start\n    length\n    _recipeType\n    _type\n  }\n}\n\nfragment ReactionSummary on messenger_ReactionSummary {\n  count\n  emoji\n  firstReactedAt\n  viewerReacted\n}\n\nfragment MessageBaseWithoutConversation on messenger_Message {\n  entityUrn\n  backendConversationUrn\n  backendUrn\n  subject\n  body @recipeType(name: "com.linkedin.1ea7e24db829a1347b841f2dd496da36") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  inlineWarning @recipeType(name: "com.linkedin.eccc411590cd40efb6a30363c2a4f6b7") {\n    obfuscatedMessageWarning @recipeType(name: "com.linkedin.1ea7e24db829a1347b841f2dd496da36") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    inlineWarningPrompt @recipeType(name: "com.linkedin.1ea7e24db829a1347b841f2dd496da36") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  originToken\n  deliveredAt\n  messageBodyRenderFormat\n  renderContentFallbackText\n  reactionSummaries @recipeType(name: "com.linkedin.f0b7db6037d7be0d51d3ef9f7a8532f0") {\n    ...ReactionSummary\n    _recipeType\n    _type\n  }\n}\n\nfragment MessageBase on messenger_Message {\n  ...MessageBaseWithoutConversation\n  conversation @recipeType(name: "com.linkedin.45234f48bb281d0b04e9cd2ee2d88237") {\n    entityUrn\n    _recipeType\n    _type\n  }\n}\n\nfragment AudioMetadata on messenger_AudioMetadata {\n  duration\n  url\n}\n\nfragment AwayMessage on messenger_AwayMessage {\n  footerText @recipeType(name: "com.linkedin.1ea7e24db829a1347b841f2dd496da36") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  text @recipeType(name: "com.linkedin.1ea7e24db829a1347b841f2dd496da36") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n}\n\nfragment ExternalMedia on messenger_ExternalMedia {\n  entityUrn\n  title\n  media @recipeType(name: "com.linkedin.4d35eb62cdac5ece15f151b81b23bc6a") {\n    originalHeight\n    originalWidth\n    url\n    _recipeType\n    _type\n  }\n  previewMedia @recipeType(name: "com.linkedin.4d35eb62cdac5ece15f151b81b23bc6a") {\n    originalHeight\n    originalWidth\n    url\n    _recipeType\n    _type\n  }\n}\n\nfragment FileAttachment on messenger_FileAttachment {\n  assetUrn\n  byteSize\n  mediaType\n  name\n  url\n}\n\nfragment SponsoredMetadata on messenger_SponsoredMetadata {\n  adRequestId\n  activityType\n  adTrackingCode\n  leadTrackingCode\n  version\n  videoBehavior\n  adTrackingCode\n  sponsoredCampaignUrn\n  adServingUrn\n}\n\nfragment VectorImage on common_VectorImage {\n  artifacts @recipeType(name: "com.linkedin.4e78982efcd19a00e60e23cb18452cb3") {\n    width\n    height\n    fileIdentifyingUrlPathSegment\n    _recipeType\n    _type\n  }\n  attribution\n  rootUrl\n  focalPoint @recipeType(name: "com.linkedin.71cc3c87a83e8848faa739599dff2495") {\n    xOffsetPercentage\n    yOffsetPercentage\n    _recipeType\n    _type\n  }\n  digitalmediaAsset\n}\n\nfragment MessageAdRenderContent on messenger_MessageAdRenderContent {\n  advertiserLabel\n  bodyTracking\n  creativeAdsReportingInfo @recipeType(name: "com.linkedin.1fd72fe3f101c7912879e714fee028aa") {\n    contentSource\n    sponsoredAccountUrn\n    sponsoredCreativeUrn\n    _recipeType\n    _type\n  }\n  legalText @recipeType(name: "com.linkedin.1ea7e24db829a1347b841f2dd496da36") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  legalTextTracking\n  openTracking\n  sponsoredCampaignUrn\n  sponsoredTracking @recipeType(name: "com.linkedin.5b6fc58175860d41ec0ed71f29c97de7") {\n    ...SponsoredMetadata\n    _recipeType\n    _type\n  }\n  status\n  subContent @recipeType(name: "com.linkedin.41b59b4ac9866b7de43f6c530c298847") {\n    action\n    actionText\n    actionTracking\n    callToActionLabel\n    leadGenFormOpenTracking\n    leadGenFormUrn\n    leadTrackingCode\n    leadTrackingParams\n    tscpUrl\n    adUnit @recipeType(name: "com.linkedin.4bf87417853a73e6a5bed863ba8f114d") {\n      adUnit @recipeType(name: "com.linkedin.c029dbe5105f8bef89f4685f7ef3839b") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      adUnitTracking\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment VideoPlayMetadata on videocontent_VideoPlayMetadata {\n  entityUrn\n  adaptiveStreams @recipeType(name: "com.linkedin.d421cf79bd9513a768a0122b5572b9f2") {\n    initialBitRate\n    masterPlaylists @recipeType(name: "com.linkedin.b75dd201eeaf5a8a40101e283425458d") {\n      expiresAt\n      url\n      _recipeType\n      _type\n    }\n    mediaType\n    protocol\n    _recipeType\n    _type\n  }\n  aspectRatio\n  duration\n  liveStreamCreatedAt\n  liveStreamEndedAt\n  media\n  nextMedia\n  prevMedia\n  progressiveStreams @recipeType(name: "com.linkedin.10d654a93349bcf0b7bd45dcea5d51ae") {\n    bitRate\n    height\n    mediaType\n    mimeType\n    size\n    streamingLocations @recipeType(name: "com.linkedin.b75dd201eeaf5a8a40101e283425458d") {\n      expiresAt\n      url\n      _recipeType\n      _type\n    }\n    width\n    _recipeType\n    _type\n  }\n  provider\n  thumbnail @recipeType(name: "com.linkedin.c029dbe5105f8bef89f4685f7ef3839b") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  trackingId\n  transcripts @recipeType(name: "com.linkedin.0495f491608a2d920cecbb2193a29027") {\n    captionFile\n    captionFormat\n    isAutogenerated\n    lines @recipeType(name: "com.linkedin.82dbc40d6a3cba3fa1ea02f713edc992") {\n      caption\n      lineEndAt\n      lineStartAt\n      _recipeType\n      _type\n    }\n    locale @recipeType(name: "com.linkedin.d42c8e81889d9c20b35a2959473d5a4e") {\n      country\n      extensions @recipeType(name: "com.linkedin.106a55544243c43a15d8a3b7247ba907") {\n        t\n        u\n        x\n        _recipeType\n        _type\n      }\n      language\n      script\n      variant\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment VideoMeeting on messenger_VideoMeeting {\n  videoMeeting @recipeType(name: "com.linkedin.232a58fec9a34ff9d644a27921895969") {\n    entityUrn\n    _recipeType\n    _type\n  }\n  earliestStartAt\n  expiresAt\n  timeRange @recipeType(name: "com.linkedin.d8130aaee573edd751fc3ce23bba2ba1") {\n    end\n    start\n    _recipeType\n    _type\n  }\n}\n\nfragment ConversationAdsMessageContent on messenger_ConversationAdsMessageContent {\n  sponsoredMessageContentUrn\n  sponsoredMessageTrackingId\n  sponsoredMessageOptions @recipeType(name: "com.linkedin.0f36502a4b30f3736241f333a711d363") {\n    clickAction {\n      externalWebsiteClickAction @recipeType(name: "com.linkedin.b30c79a1f13823f96ba29550dc25ad1b") {\n        redirectUrl\n        _recipeType\n        _type\n      }\n      leadGenClickAction @recipeType(name: "com.linkedin.64613929601e16b00a6f50c3a14f8489") {\n        leadGenFormUrn\n        leadTrackingCode\n        leadTrackingParams\n        _recipeType\n        _type\n      }\n    }\n    optionText @recipeType(name: "com.linkedin.1ea7e24db829a1347b841f2dd496da36") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    tscpUrl\n    sponsoredMessageOption @recipeType(name: "com.linkedin.c04631db04ec3f812f916286bcd78313") {\n      entityUrn\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment Participant on messenger_MessagingParticipant {\n  entityUrn\n  hostIdentityUrn\n  backendUrn\n  participantType {\n    member @recipeType(name: "com.linkedin.a9535f2b6c53c4b69a1dd57697b6de6e") {\n      firstName @recipeType(name: "com.linkedin.1ea7e24db829a1347b841f2dd496da36") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      lastName @recipeType(name: "com.linkedin.1ea7e24db829a1347b841f2dd496da36") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      headline @recipeType(name: "com.linkedin.1ea7e24db829a1347b841f2dd496da36") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      profilePicture @recipeType(name: "com.linkedin.c029dbe5105f8bef89f4685f7ef3839b") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      profileUrl\n      pronoun {\n        customPronoun\n        standardizedPronoun\n      }\n      distance\n      _recipeType\n      _type\n    }\n    organization @recipeType(name: "com.linkedin.9dc58bc555360d8643835a6506cbbcc8") {\n      name @recipeType(name: "com.linkedin.1ea7e24db829a1347b841f2dd496da36") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      tagline @recipeType(name: "com.linkedin.1ea7e24db829a1347b841f2dd496da36") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      logo @recipeType(name: "com.linkedin.c029dbe5105f8bef89f4685f7ef3839b") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      pageType\n      pageUrl\n      _recipeType\n      _type\n    }\n    custom @recipeType(name: "com.linkedin.054f7f9a6b88e95a0912a84064b97b08") {\n      name @recipeType(name: "com.linkedin.1ea7e24db829a1347b841f2dd496da36") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      image @recipeType(name: "com.linkedin.c029dbe5105f8bef89f4685f7ef3839b") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      _recipeType\n      _type\n    }\n  }\n}\n\nfragment MessageRenderContent on messenger_RenderContent {\n  audio @recipeType(name: "com.linkedin.25e9ea6346fdbd78900ed1c1f090abf4") {\n    ...AudioMetadata\n    _recipeType\n    _type\n  }\n  awayMessage @recipeType(name: "com.linkedin.d1b4ff7165007ffd58e7daa04e91dc83") {\n    ...AwayMessage\n    _recipeType\n    _type\n  }\n  externalMedia @recipeType(name: "com.linkedin.f6f94f97f4b492ea82eac78e8b78c90e") {\n    ...ExternalMedia\n    _recipeType\n    _type\n  }\n  file @recipeType(name: "com.linkedin.dee5494b0db49133c0ce4fbbe1028e2a") {\n    ...FileAttachment\n    _recipeType\n    _type\n  }\n  messageAdRenderContent @recipeType(name: "com.linkedin.8fc568c3b0a4f8b6d43e85cb2e31f8bf") {\n    ...MessageAdRenderContent\n    _recipeType\n    _type\n  }\n  vectorImage @recipeType(name: "com.linkedin.c029dbe5105f8bef89f4685f7ef3839b") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  video @recipeType(name: "com.linkedin.6d3caf68e88606ee9a78df95da083903") {\n    ...VideoPlayMetadata\n    _recipeType\n    _type\n  }\n  videoMeeting @recipeType(name: "com.linkedin.bd4d498efdc59d6464579320e78c71f2") {\n    ...VideoMeeting\n    _recipeType\n    _type\n  }\n  hostUrnData @recipeType(name: "com.linkedin.f5714b7ef519213cce06f2e65eeed6e6") {\n    hostUrn\n    type\n    _recipeType\n    _type\n  }\n  conversationAdsMessageContent @recipeType(name: "com.linkedin.6dd14eac60d40cd25525b7101e0e9724") {\n    ...ConversationAdsMessageContent\n    _recipeType\n    _type\n  }\n  forwardedMessageContent @recipeType(name: "com.linkedin.17a472afaec91a855b119a4c0e9cbc17") {\n    originalSender @recipeType(name: "com.linkedin.8e75e1b6100649895f69cf66c6e25b20") {\n      ...Participant\n      _recipeType\n      _type\n    }\n    originalSendAt\n    forwardedBody @recipeType(name: "com.linkedin.1ea7e24db829a1347b841f2dd496da36") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    footerText @recipeType(name: "com.linkedin.1ea7e24db829a1347b841f2dd496da36") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment MessageFullParticipant on messenger_Message {\n  ...MessageBase\n  sender @recipeType(name: "com.linkedin.8e75e1b6100649895f69cf66c6e25b20") {\n    ...Participant\n    _recipeType\n    _type\n  }\n  renderContent {\n    ...MessageRenderContent\n  }\n}\n\nfragment SyncMetadata on messenger_SyncMetadata {\n  deletedUrns {\n    conversation @recipeType(name: "com.linkedin.45234f48bb281d0b04e9cd2ee2d88237") {\n      entityUrn\n      _recipeType\n      _type\n    }\n    message @recipeType(name: "com.linkedin.9a4948e0045f59eb49ee971c440d4e31") {\n      entityUrn\n      _recipeType\n      _type\n    }\n  }\n  newSyncToken\n  shouldClearCache\n}\n',variablesTypes:{conversationUrn:{type:"String",isRequired:!0,kind:"Scalar"},syncToken:{type:"String",isRequired:!1,kind:"Scalar"}}}),et=Un({kind:"query",id:"messengerMessages.69eb9685a38720d81c5fb57e034e4de8",typeName:"com.linkedin.d517c530e9e9e6efa128b8e0e66d8226",name:"sync-messages-by-convo-id-in-batch",source:'query getSyncMessagesByConvoIdInBatch($criteria: [messenger_MessagesFindBySyncTokenCriteriaInput!]!) @recipeType(name: "com.linkedin.d517c530e9e9e6efa128b8e0e66d8226") {\n  messengerMessagesBySyncTokensInBatch(criteria: $criteria) @recipeType(name: "com.linkedin.f9a792d78ca98d67382ae32f4f9cefe9") {\n    elements @recipeType(name: "com.linkedin.3534d423e1e266c870d53cda731136a5") {\n      ...MessageFullParticipant\n      _recipeType\n      _type\n    }\n    metadata @recipeType(name: "com.linkedin.a2a48a5f0eedcac77801c6a5f37422ab") {\n      ...SyncMetadata\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  _recipeType\n  _type\n}\n\nfragment AttributeKind on pemberly_text_AttributeKind {\n  bold @recipeType(name: "com.linkedin.1bfd7f5e4ec38bb6502ddef8a60260fc") {\n    __typename\n    _recipeType\n    _type\n  }\n  italic @recipeType(name: "com.linkedin.1b8ef43cf021903c28bbeeaa99038ec8") {\n    __typename\n    _recipeType\n    _type\n  }\n  hyperlink @recipeType(name: "com.linkedin.50e5b5012fd5216da33dcf69c35fadc2") {\n    url\n    __typename\n    _recipeType\n    _type\n  }\n  paragraph @recipeType(name: "com.linkedin.27f753bd8e5ab72b4c9cf9976a60f61e") {\n    __typename\n    _recipeType\n    _type\n  }\n  list @recipeType(name: "com.linkedin.a0df47daad321ae7a54e5fa9a403b9dd") {\n    ordered\n    __typename\n    _recipeType\n    _type\n  }\n  listItem @recipeType(name: "com.linkedin.2f94b0c2b10f1d6e873cf4743abc5692") {\n    __typename\n    _recipeType\n    _type\n  }\n  lineBreak @recipeType(name: "com.linkedin.414ae77309e918fe9d357fddbae49cc1") {\n    __typename\n    _recipeType\n    _type\n  }\n  underline @recipeType(name: "com.linkedin.982779de2dfdf62592eadff32ffbe429") {\n    __typename\n    _recipeType\n    _type\n  }\n  subscript @recipeType(name: "com.linkedin.83d5cb314abbfc47c8c2d497866013ce") {\n    __typename\n    _recipeType\n    _type\n  }\n  superscript @recipeType(name: "com.linkedin.640da236512d63227a1b19e60cac628f") {\n    __typename\n    _recipeType\n    _type\n  }\n  entity @recipeType(name: "com.linkedin.a65a350fbf1d4be74450b4d58ed6866b") {\n    urn\n    _recipeType\n    _type\n  }\n}\n\nfragment AttributedText on pemberly_text_AttributedText {\n  text\n  attributes @recipeType(name: "com.linkedin.782b0c7286719fedf9957cfbd85363aa") {\n    attributeKind {\n      ...AttributeKind\n    }\n    start\n    length\n    _recipeType\n    _type\n  }\n}\n\nfragment ReactionSummary on messenger_ReactionSummary {\n  count\n  emoji\n  firstReactedAt\n  viewerReacted\n}\n\nfragment MessageBaseWithoutConversation on messenger_Message {\n  entityUrn\n  backendConversationUrn\n  backendUrn\n  subject\n  body @recipeType(name: "com.linkedin.aaff1126c4762f0dc02d914668fb7bf3") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  inlineWarning @recipeType(name: "com.linkedin.7189689d0c3f7d45b6f23427485c2bbd") {\n    obfuscatedMessageWarning @recipeType(name: "com.linkedin.aaff1126c4762f0dc02d914668fb7bf3") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    inlineWarningPrompt @recipeType(name: "com.linkedin.aaff1126c4762f0dc02d914668fb7bf3") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n  originToken\n  deliveredAt\n  messageBodyRenderFormat\n  renderContentFallbackText\n  reactionSummaries @recipeType(name: "com.linkedin.51341effca62deeb3af211b14b7c0193") {\n    ...ReactionSummary\n    _recipeType\n    _type\n  }\n}\n\nfragment MessageBase on messenger_Message {\n  ...MessageBaseWithoutConversation\n  conversation @recipeType(name: "com.linkedin.0d8ff88970ef6ffa8a6bcf6a5804f7e4") {\n    entityUrn\n    _recipeType\n    _type\n  }\n}\n\nfragment AudioMetadata on messenger_AudioMetadata {\n  duration\n  url\n}\n\nfragment AwayMessage on messenger_AwayMessage {\n  footerText @recipeType(name: "com.linkedin.aaff1126c4762f0dc02d914668fb7bf3") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  text @recipeType(name: "com.linkedin.aaff1126c4762f0dc02d914668fb7bf3") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n}\n\nfragment ExternalMedia on messenger_ExternalMedia {\n  entityUrn\n  title\n  media @recipeType(name: "com.linkedin.3ce159846977e249e2279cfd56e70e3b") {\n    originalHeight\n    originalWidth\n    url\n    _recipeType\n    _type\n  }\n  previewMedia @recipeType(name: "com.linkedin.3ce159846977e249e2279cfd56e70e3b") {\n    originalHeight\n    originalWidth\n    url\n    _recipeType\n    _type\n  }\n}\n\nfragment FileAttachment on messenger_FileAttachment {\n  assetUrn\n  byteSize\n  mediaType\n  name\n  url\n}\n\nfragment SponsoredMetadata on messenger_SponsoredMetadata {\n  adRequestId\n  activityType\n  adTrackingCode\n  leadTrackingCode\n  version\n  videoBehavior\n  adTrackingCode\n  sponsoredCampaignUrn\n  adServingUrn\n}\n\nfragment VectorImage on common_VectorImage {\n  artifacts @recipeType(name: "com.linkedin.d5f76b69247e45d5f2367725625ce659") {\n    width\n    height\n    fileIdentifyingUrlPathSegment\n    _recipeType\n    _type\n  }\n  attribution\n  rootUrl\n  focalPoint @recipeType(name: "com.linkedin.fdfc8ce7a273bff80d1d5b4338cff02e") {\n    xOffsetPercentage\n    yOffsetPercentage\n    _recipeType\n    _type\n  }\n  digitalmediaAsset\n}\n\nfragment MessageAdRenderContent on messenger_MessageAdRenderContent {\n  advertiserLabel\n  bodyTracking\n  creativeAdsReportingInfo @recipeType(name: "com.linkedin.761a2c6e0d05a4036ebfcf428a1384c2") {\n    contentSource\n    sponsoredAccountUrn\n    sponsoredCreativeUrn\n    _recipeType\n    _type\n  }\n  legalText @recipeType(name: "com.linkedin.aaff1126c4762f0dc02d914668fb7bf3") {\n    ...AttributedText\n    _recipeType\n    _type\n  }\n  legalTextTracking\n  openTracking\n  sponsoredCampaignUrn\n  sponsoredTracking @recipeType(name: "com.linkedin.6c4cdd5bf165b44000028b41b43832d5") {\n    ...SponsoredMetadata\n    _recipeType\n    _type\n  }\n  status\n  subContent @recipeType(name: "com.linkedin.64e6d609b1b585ae174e292c10f84ee3") {\n    action\n    actionText\n    actionTracking\n    callToActionLabel\n    leadGenFormOpenTracking\n    leadGenFormUrn\n    leadTrackingCode\n    leadTrackingParams\n    tscpUrl\n    adUnit @recipeType(name: "com.linkedin.c5b3e8fb88889ee77ec03fe3494e35d5") {\n      adUnit @recipeType(name: "com.linkedin.0a07c8c20913b922a9344d40f3df0453") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      adUnitTracking\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment VideoPlayMetadata on videocontent_VideoPlayMetadata {\n  entityUrn\n  adaptiveStreams @recipeType(name: "com.linkedin.a9a5875e22303c042d4f9c00eabd58b8") {\n    initialBitRate\n    masterPlaylists @recipeType(name: "com.linkedin.7ce0e208fc65f7f558d3d6d24b7035c6") {\n      expiresAt\n      url\n      _recipeType\n      _type\n    }\n    mediaType\n    protocol\n    _recipeType\n    _type\n  }\n  aspectRatio\n  duration\n  liveStreamCreatedAt\n  liveStreamEndedAt\n  media\n  nextMedia\n  prevMedia\n  progressiveStreams @recipeType(name: "com.linkedin.d5eefd150d0fd7c240fcc73e81609255") {\n    bitRate\n    height\n    mediaType\n    mimeType\n    size\n    streamingLocations @recipeType(name: "com.linkedin.7ce0e208fc65f7f558d3d6d24b7035c6") {\n      expiresAt\n      url\n      _recipeType\n      _type\n    }\n    width\n    _recipeType\n    _type\n  }\n  provider\n  thumbnail @recipeType(name: "com.linkedin.0a07c8c20913b922a9344d40f3df0453") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  trackingId\n  transcripts @recipeType(name: "com.linkedin.adc1c2497cb3562cedd916fe7153f242") {\n    captionFile\n    captionFormat\n    isAutogenerated\n    lines @recipeType(name: "com.linkedin.0879e6ae5a83e72217a572d0c3a4dc9b") {\n      caption\n      lineEndAt\n      lineStartAt\n      _recipeType\n      _type\n    }\n    locale @recipeType(name: "com.linkedin.e3d5652fa4c5185ea563784361520492") {\n      country\n      extensions @recipeType(name: "com.linkedin.e9c15d66cac66b0a284221167c0b05d8") {\n        t\n        u\n        x\n        _recipeType\n        _type\n      }\n      language\n      script\n      variant\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment VideoMeeting on messenger_VideoMeeting {\n  videoMeeting @recipeType(name: "com.linkedin.26fbe7af56f471221c53fc613495481a") {\n    entityUrn\n    _recipeType\n    _type\n  }\n  earliestStartAt\n  expiresAt\n  timeRange @recipeType(name: "com.linkedin.28793b47fb741bdc484cd5667dc46ab8") {\n    end\n    start\n    _recipeType\n    _type\n  }\n}\n\nfragment ConversationAdsMessageContent on messenger_ConversationAdsMessageContent {\n  sponsoredMessageContentUrn\n  sponsoredMessageTrackingId\n  sponsoredMessageOptions @recipeType(name: "com.linkedin.d610f549f9195397d29296c503de2349") {\n    clickAction {\n      externalWebsiteClickAction @recipeType(name: "com.linkedin.6c31f1578aa7f079a193fafeb7568532") {\n        redirectUrl\n        _recipeType\n        _type\n      }\n      leadGenClickAction @recipeType(name: "com.linkedin.c575890a7cb0edc35833067dbdaf7899") {\n        leadGenFormUrn\n        leadTrackingCode\n        leadTrackingParams\n        _recipeType\n        _type\n      }\n    }\n    optionText @recipeType(name: "com.linkedin.aaff1126c4762f0dc02d914668fb7bf3") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    tscpUrl\n    sponsoredMessageOption @recipeType(name: "com.linkedin.39a58a60ca0eba04af9009331df953e5") {\n      entityUrn\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment Participant on messenger_MessagingParticipant {\n  entityUrn\n  hostIdentityUrn\n  backendUrn\n  participantType {\n    member @recipeType(name: "com.linkedin.fa771270df50f4c8342710233b15830a") {\n      firstName @recipeType(name: "com.linkedin.aaff1126c4762f0dc02d914668fb7bf3") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      lastName @recipeType(name: "com.linkedin.aaff1126c4762f0dc02d914668fb7bf3") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      headline @recipeType(name: "com.linkedin.aaff1126c4762f0dc02d914668fb7bf3") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      profilePicture @recipeType(name: "com.linkedin.0a07c8c20913b922a9344d40f3df0453") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      profileUrl\n      pronoun {\n        customPronoun\n        standardizedPronoun\n      }\n      distance\n      _recipeType\n      _type\n    }\n    organization @recipeType(name: "com.linkedin.4f4e1faa3ba9eb2e3d60c798c5b24dc9") {\n      name @recipeType(name: "com.linkedin.aaff1126c4762f0dc02d914668fb7bf3") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      tagline @recipeType(name: "com.linkedin.aaff1126c4762f0dc02d914668fb7bf3") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      logo @recipeType(name: "com.linkedin.0a07c8c20913b922a9344d40f3df0453") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      pageType\n      pageUrl\n      _recipeType\n      _type\n    }\n    custom @recipeType(name: "com.linkedin.a129493e9d2a25c8929b4879a10be2ed") {\n      name @recipeType(name: "com.linkedin.aaff1126c4762f0dc02d914668fb7bf3") {\n        ...AttributedText\n        _recipeType\n        _type\n      }\n      image @recipeType(name: "com.linkedin.0a07c8c20913b922a9344d40f3df0453") {\n        ...VectorImage\n        _recipeType\n        _type\n      }\n      _recipeType\n      _type\n    }\n  }\n}\n\nfragment MessageRenderContent on messenger_RenderContent {\n  audio @recipeType(name: "com.linkedin.b9b02ed9c59c3183529f7802d0caad11") {\n    ...AudioMetadata\n    _recipeType\n    _type\n  }\n  awayMessage @recipeType(name: "com.linkedin.b18cfc1eebb1d9c93b20c40f9465c610") {\n    ...AwayMessage\n    _recipeType\n    _type\n  }\n  externalMedia @recipeType(name: "com.linkedin.35815160edef928290f8790250961350") {\n    ...ExternalMedia\n    _recipeType\n    _type\n  }\n  file @recipeType(name: "com.linkedin.68f0f70808d2a5572259dd6024e2fae2") {\n    ...FileAttachment\n    _recipeType\n    _type\n  }\n  messageAdRenderContent @recipeType(name: "com.linkedin.6972d7aae92d743baff7478009d73eed") {\n    ...MessageAdRenderContent\n    _recipeType\n    _type\n  }\n  vectorImage @recipeType(name: "com.linkedin.0a07c8c20913b922a9344d40f3df0453") {\n    ...VectorImage\n    _recipeType\n    _type\n  }\n  video @recipeType(name: "com.linkedin.0894306231bd12f14b5e90dd5bf17888") {\n    ...VideoPlayMetadata\n    _recipeType\n    _type\n  }\n  videoMeeting @recipeType(name: "com.linkedin.1a531c8ee7a98bf9397df570641dafb4") {\n    ...VideoMeeting\n    _recipeType\n    _type\n  }\n  hostUrnData @recipeType(name: "com.linkedin.58482ad6e40391d512e37ff73733e337") {\n    hostUrn\n    type\n    _recipeType\n    _type\n  }\n  conversationAdsMessageContent @recipeType(name: "com.linkedin.19ffdb9a3911183a033678d1784169fb") {\n    ...ConversationAdsMessageContent\n    _recipeType\n    _type\n  }\n  forwardedMessageContent @recipeType(name: "com.linkedin.11a42b0fe31f4e10f96d7d6a9d04387e") {\n    originalSender @recipeType(name: "com.linkedin.7191db3f68aa678cca83f1d52c3e478a") {\n      ...Participant\n      _recipeType\n      _type\n    }\n    originalSendAt\n    forwardedBody @recipeType(name: "com.linkedin.aaff1126c4762f0dc02d914668fb7bf3") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    footerText @recipeType(name: "com.linkedin.aaff1126c4762f0dc02d914668fb7bf3") {\n      ...AttributedText\n      _recipeType\n      _type\n    }\n    _recipeType\n    _type\n  }\n}\n\nfragment MessageFullParticipant on messenger_Message {\n  ...MessageBase\n  sender @recipeType(name: "com.linkedin.7191db3f68aa678cca83f1d52c3e478a") {\n    ...Participant\n    _recipeType\n    _type\n  }\n  renderContent {\n    ...MessageRenderContent\n  }\n}\n\nfragment SyncMetadata on messenger_SyncMetadata {\n  deletedUrns {\n    conversation @recipeType(name: "com.linkedin.0d8ff88970ef6ffa8a6bcf6a5804f7e4") {\n      entityUrn\n      _recipeType\n      _type\n    }\n    message @recipeType(name: "com.linkedin.3534d423e1e266c870d53cda731136a5") {\n      entityUrn\n      _recipeType\n      _type\n    }\n  }\n  newSyncToken\n  shouldClearCache\n}\n',variablesTypes:{criteria:{type:"Array",isRequired:!0,innerType:{type:"messenger_MessagesFindBySyncTokenCriteriaInput",isRequired:!0,innerType:{conversationUrn:{type:"String",isRequired:!0,kind:"Scalar"},syncToken:{type:"String",isRequired:!1,kind:"Scalar"}},kind:"Object"},kind:"Array"}}}),nt=function(e,n){if(!e||"query"!==e.kind){var t=Ie.CANNOT_QUERY_FRAGMENT
throw new Pe("graphql",t.code,t.message)}var r={}
"full"===n.queryFormat&&e.source?r.query=e.source:r.queryId=e.id
for(var i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o]
var s=a[0]
return r.variables=s||{},Tn("graphql",n.messengerResource,"graphql",r)}
function tt(e){return function(n){var t=function(e){return Dn.get(e)}(e)
if(!t)throw Pe.fromGraphQLErrorMemo("GRAPHQL_INVALID_LOOKUP")
var r=Ln(t)
return nt(r,n,arguments.length<=1?void 0:arguments[1])}}for(var rt,it=tt(Vn),at=tt(Yn),ot=tt($n),st=tt(Bn),ct=tt(qn),dt=tt(jn),ut=tt(Kn),pt=tt(Hn),lt=tt(Gn),ft=tt(zn),mt=tt(Jn),yt=tt(Zn),ht=tt(et),gt=tt(Xn),vt=tt(Qn),_t=tt(Wn),Tt=new Uint8Array(16),bt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Et=[],kt=0;kt<256;++kt)Et.push((kt+256).toString(16).substr(1))
function At(e,n,t){var r=(e=e||{}).random||(e.rng||function(){if(!rt&&!(rt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")
return rt(Tt)})()
if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0
for(var i=0;i<16;++i)n[t+i]=r[i]
return n}return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(Et[e[n+0]]+Et[e[n+1]]+Et[e[n+2]]+Et[e[n+3]]+"-"+Et[e[n+4]]+Et[e[n+5]]+"-"+Et[e[n+6]]+Et[e[n+7]]+"-"+Et[e[n+8]]+Et[e[n+9]]+"-"+Et[e[n+10]]+Et[e[n+11]]+Et[e[n+12]]+Et[e[n+13]]+Et[e[n+14]]+Et[e[n+15]]).toLowerCase()
if(!function(e){return"string"==typeof e&&bt.test(e)}(t))throw TypeError("Stringified UUID is invalid")
return t}(r)}const St="See https://go/pem/degradation-tracking-user-guide for instrumentation instructions"
class Ct extends class{constructor(e,n){this._collectedFeatureMetrics=e,this._fireEventCallback=n}}{produceMetricEvent(e){this._collectedFeatureMetrics.flushMetrics().forEach((n=>{const t=[]
n.featureCallCounts.forEach((e=>{t.push({featureProductName:e.featureMetricIdentifier.productName,featureKey:e.featureMetricIdentifier.featureKey,degradedDownstreamCallCount:e.failedApiCallCount,totalDownstreamCallCount:e.totalApiCallCount,retriedDownstreamCallCount:e.retriedApiCallCount,retriedSuccessfulDownstreamCallsRatio:e.retriedSuccessfulCallsRatio,pointOfPresenceId:e.featureMetricIdentifier.pointOfPresenceId,responseErrorTypeV2:e.featureMetricIdentifier.responseErrorType,successfulDownstreamCallsRatio:e.successfulApiCallsRatio,metricKey:{featureProductName:e.featureMetricIdentifier.productName,featureKey:e.featureMetricIdentifier.featureKey,pointOfPresenceId:e.featureMetricIdentifier.pointOfPresenceId,responseErrorTypeV2:e.featureMetricIdentifier.responseErrorType,responseFabric:e.featureMetricIdentifier.responseFabric}})}))
const r={header:{},requestHeader:{},time:Date.now(),metrics:t}
this._fireEventCallback("FeatureDegradationMetricEvent",r,n.pageInstance,e)}))}}function It(e){return JSON.stringify(e,Object.keys(e).sort())}class Rt extends class{constructor(e){this._featureCallCounts=new Map,this._pageInstance=e}get pageInstance(){return this._pageInstance}get featureCallCounts(){return this._featureCallCounts}}{trackSuccessfulFeatureApiCall(e){this.trackMetric(e,(e=>{e.successfulApiCallsRatio+=1,e.totalApiCallCount++}))}trackFailedFeatureApiCall(e,n){this.trackMetric(e,(e=>{0===n?e.failedApiCallCount++:e.successfulApiCallsRatio+=n,e.totalApiCallCount++}))}trackRetriedFeatureApiCall(e,n){this.trackMetric(e,(e=>{e.retriedApiCallCount++,e.retriedSuccessfulCallsRatio+=n}))}trackRetriedSuccessfulFeatureApiCall(e){this.trackMetric(e,(e=>{e.successfulApiCallsRatio++,e.totalApiCallCount++}))}changeRetriedMetricsToTotal(){this.featureCallCounts.forEach((e=>e.changeCallCountsFromRetriedToTotal()))}trackMetric(e,n){const t=It(e)
if(this.featureCallCounts.has(t))n(this.featureCallCounts.get(t))
else{const r=new Ot(e)
n(r),this.featureCallCounts.set(t,r)}}}class Ot extends class{constructor(e){this.featureMetricIdentifier=e}}{constructor(){super(...arguments),this.successfulApiCallsRatio=0,this.failedApiCallCount=0,this.totalApiCallCount=0,this.retriedApiCallCount=0,this.retriedSuccessfulCallsRatio=0}mergeCallCounts(e){return this.successfulApiCallsRatio+=e.successfulApiCallsRatio,this.failedApiCallCount+=e.failedApiCallCount,this.totalApiCallCount+=e.totalApiCallCount,this.retriedApiCallCount+=e.retriedApiCallCount,this.retriedSuccessfulCallsRatio+=e.retriedSuccessfulCallsRatio,this}changeCallCountsFromRetriedToTotal(){this.totalApiCallCount+=this.retriedApiCallCount,this.successfulApiCallsRatio+=this.retriedSuccessfulCallsRatio,0===this.successfulApiCallsRatio&&(this.failedApiCallCount+=1),this.retriedApiCallCount=0,this.retriedSuccessfulCallsRatio=0}}class Mt extends class{flushMetrics(){const e=[...this.metrics.values()]
return this.metrics=new Map,e}}{constructor(){super(...arguments),this.metrics=new Map}incrementSuccessfulFeatureApiCall(e,n){this.incrementMetric(n,(n=>n.trackSuccessfulFeatureApiCall(e)))}incrementFailedFeatureApiCall(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0
this.incrementMetric(n,(n=>n.trackFailedFeatureApiCall(e,t)))}incrementRetriedFeatureApiCall(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0
this.incrementMetric(n,(n=>n.trackRetriedFeatureApiCall(e,t)))}incrementRetriedSuccessfulApiCall(e,n){this.incrementMetric(n,(n=>n.trackRetriedSuccessfulFeatureApiCall(e)))}mergeMetricsFrom(e){e.metrics.forEach(((e,n)=>{const t=this.metrics.get(n)
void 0!==t?e.featureCallCounts.forEach(((e,r)=>{var i
let a=t.featureCallCounts.get(r)
void 0!==a?a=a.mergeCallCounts(e):null===(i=this.metrics.get(n))||void 0===i||i.featureCallCounts.set(n,e)})):this.metrics.set(n,e)}))}changeRetriedMetricsToTotal(){this.metrics.forEach((e=>e.changeRetriedMetricsToTotal()))}incrementMetric(e,n){const t=It(e)
if(this.metrics.has(t))n(this.metrics.get(t))
else{const r=new Rt(e)
n(r),this.metrics.set(t,r)}}}function wt(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}var Nt
!function(e){e.ProductName="productName",e.AdditionalDegradedResponseCodes="additionalDegradedResponseCodes",e.NonDegradedResponseCodes="nonDegradedResponseCodes",e.DegradationKeyOverrides="degradationKeyOverrides",e.ClientSensorGroupName="clientSensorGroupName",e.EnablePerformanceMeasurement="enablePerformanceMeasurement",e.CustomTrackingId="customTrackingId",e.DisableAvailabilityCalculation="disableAvailabilityCalculation",e.EnableSessionRecording="enableSessionRecording"}(Nt||(Nt={}))
const Pt=new Set(Object.values(Nt))
class Dt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Dt.prototype)}}function Ut(e){return 0===e.length||!e.trim()}function xt(e){if("string"!=typeof e)throw new Dt(`The product name must be a string. ${St}.`)
if(Ut(e))throw new Dt(`No product name was specified. Please configure a defaultProductName or specify it per instrumented API call. ${St}.`)
if(/[^a-zA-Z0-9-_ \\/]/.test(e))throw new Dt(`Product name '${e}' can only contain alphanumeric, underscores (_), spaces ( ), dashes (-) and forward slashes (/). ${St}.`)
return e}function Lt(e){if("string"!=typeof e)throw new Dt(`Keys must be strings. ${St}.`)
if(Ut(e))throw new Dt(`Keys should not be blank. ${St}.`)
if(/[^a-z0-9-]/.test(e))throw new Dt(`'${e}' can only contain lowercase alphanumeric characters and dashes (-). ${St}.`)
return e}class Ft{constructor(e,n,t){var r,i,a
if(this._shouldEnablePerformanceMeasurement=!1,this._shouldDisableAvailabilityCalculation=!1,this._shouldRecordSession=!1,this._featureKey=Lt(e),this._defaultDegradationKey=Lt(n),!t)return this._additionalDegradedResponseCodes=[],this._nonDegradedResponseCodes=[],void(this._degradationKeyOverrides=[])
if("object"!=typeof t)throw new Dt(`DegradationTrackingMetadata options should be an object. ${St}.`)
const o=t.productName
o&&(this._productName=xt(o))
const s=t.additionalDegradedResponseCodes,c=t.nonDegradedResponseCodes
!function(e,n){const t=(e,n)=>{if(!wt(e)||e<=0||e>999)throw new Dt(`Please only specify positive integer response codes between 1 and 999 for the ${n} option. ${e} was specified. ${St}.`)
if(429===e||999===e)throw new Dt(`PEM does not consider 429 and 999 API responses indications of the real member experience because it represents LinkedIn throttling abusive requests. We drop 429s and 999s by default, so please remove them from your ${n} options.`)
if(n===Nt.NonDegradedResponseCodes&&e>=400&&e<500)throw new Dt(`For server responses that have a status code, PEM does not consider 4xx as degraded. ${e} is not considered a degradation unless you explicitly add it to the ${Nt.AdditionalDegradedResponseCodes} option. Please remove ${e} from the ${Nt.NonDegradedResponseCodes} option. ${St}.`)}
if(void 0!==e&&!Array.isArray(e))throw new Dt(`Please specify an array of positive integer response codes between 1 and 999 for the response codes that shouldn't be counted as degraded for the ${Nt.NonDegradedResponseCodes} option. ${St}.`)
if(void 0!==n&&!Array.isArray(n))throw new Dt(`Please specify an array of positive integer response codes between 1 and 999 for the response codes that should only be considered as the degraded state(s) for the ${Nt.AdditionalDegradedResponseCodes} option. ${St}.`)
e&&e.forEach((e=>t(e,Nt.NonDegradedResponseCodes))),n&&n.forEach((e=>t(e,Nt.AdditionalDegradedResponseCodes)))}(c,s),this._nonDegradedResponseCodes=c||[],this._additionalDegradedResponseCodes=s||[],this._degradationKeyOverrides=t.degradationKeyOverrides||[],this._clientSensorGroupName=t.clientSensorGroupName,this._shouldEnablePerformanceMeasurement=null!==(r=t.enablePerformanceMeasurement)&&void 0!==r&&r,this._customTrackingId=t.customTrackingId,this._shouldDisableAvailabilityCalculation=null!==(i=t.disableAvailabilityCalculation)&&void 0!==i&&i,this._shouldRecordSession=null!==(a=t.enableSessionRecording)&&void 0!==a&&a,function(e){Object.keys(e).forEach((e=>{if(!Pt.has(e))throw new Dt(`An unsupported degradation tracking option '${e}' was provided. Please fix or remove it. ${St}`)}))}(t)}static isDegradationTrackingMetadata(e){return null!=e&&Object.getOwnPropertyNames(Ft.prototype).every((n=>Object.hasOwnProperty.call(Object.getPrototypeOf(e),n)))}get featureKey(){return this._featureKey}get defaultDegradationKey(){return this._defaultDegradationKey}get degradationKey(){return this._defaultDegradationKey}get productName(){return this._productName}get additionalDegradedResponseCodes(){return this._additionalDegradedResponseCodes}get nonDegradedResponseCodes(){return this._nonDegradedResponseCodes}get degradationKeyOverrides(){return this._degradationKeyOverrides}get clientSensorGroupName(){return this._clientSensorGroupName}get shouldEnablePerformanceMeasurement(){return this._shouldEnablePerformanceMeasurement}get customTrackingId(){return this._customTrackingId}get shouldDisableAvailabilityCalculation(){return this._shouldDisableAvailabilityCalculation}get shouldRecordSession(){return this._shouldRecordSession}}class Bt{constructor(e){this._degradationTrackingMetadata=e,this._featureMetricStore=new Mt,this._lastRequestMetricStore=new Mt,this._requestsMade=0,this._trackingId=At()}static isRetryableDegradationTrackingMetadata(e){return null!=e&&Object.getOwnPropertyNames(Bt.prototype).every((n=>Object.hasOwnProperty.call(Object.getPrototypeOf(e),n)))}get degradationTrackingMetadata(){return this._degradationTrackingMetadata}get featureMetricStore(){return this._featureMetricStore}get currentRequestSequenceId(){return this._requestsMade-1}get flowTrackingId(){return this._trackingId}get shouldDisableAvailabilityCalculation(){return this._degradationTrackingMetadata.shouldDisableAvailabilityCalculation}get featureKey(){return this._degradationTrackingMetadata.featureKey}get defaultDegradationKey(){return this._degradationTrackingMetadata.defaultDegradationKey}get productName(){return this._degradationTrackingMetadata.productName}get nonDegradedResponseCodes(){return new Set(this._degradationTrackingMetadata.nonDegradedResponseCodes)}get additionalDegradedResponseCodes(){return this._degradationTrackingMetadata.additionalDegradedResponseCodes}get degradationKeyOverrides(){return this._degradationTrackingMetadata.degradationKeyOverrides}get customTrackingId(){return this._degradationTrackingMetadata.customTrackingId}get clientSensorGroupName(){return this._degradationTrackingMetadata.clientSensorGroupName}get shouldEnablePerformanceMeasurement(){return this._degradationTrackingMetadata.shouldEnablePerformanceMeasurement}incrementRetriedFeatureApiCall(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0
this._requestsMade++,this._featureMetricStore.mergeMetricsFrom(this._lastRequestMetricStore),this._lastRequestMetricStore.flushMetrics(),this._lastRequestMetricStore.incrementRetriedFeatureApiCall(e,n,t)}incrementRetriedSuccessfulApiCall(e,n){this._requestsMade++,this._featureMetricStore.mergeMetricsFrom(this._lastRequestMetricStore),this._lastRequestMetricStore.flushMetrics(),this._lastRequestMetricStore.incrementRetriedSuccessfulApiCall(e,n)}flushMetricStoreToServiceStore(e){this._lastRequestMetricStore.changeRetriedMetricsToTotal(),this._featureMetricStore.mergeMetricsFrom(this._lastRequestMetricStore),e.mergeMetricsFrom(this._featureMetricStore),this._featureMetricStore.flushMetrics(),this._lastRequestMetricStore.flushMetrics()}}var qt
!function(e){e.ProductName="productName",e.CustomTrackingId="customTrackingId",e.ClientSensorGroupName="clientSensorGroupName",e.AdditionalDegradedResponseCodes="additionalDegradedResponseCodes",e.NonDegradedResponseCodes="nonDegradedResponseCodes",e.DegradationKeyOverrides="degradationKeyOverrides",e.ShouldDisableDegradationTracking="shouldDisableDegradationTracking",e.EnablePerformanceMeasurement="enablePerformanceMeasurement"}(qt||(qt={}))
const jt=new Set(Object.values(qt))
class Vt{constructor(e,n,t){if(!t)return void(this._degradationTrackingMetadata=new Ft(e,n,{nonDegradedResponseCodes:[],additionalDegradedResponseCodes:[],degradationKeyOverrides:[]}))
if("object"!=typeof t)throw new Dt(`FailureTrackingMetadata options should be an object. ${St}.`)
const r=t.additionalDegradedResponseCodes,i=t.nonDegradedResponseCodes
this.validateResponseCodes(r,i)
const a={productName:t.productName,additionalDegradedResponseCodes:t.additionalDegradedResponseCodes,nonDegradedResponseCodes:t.nonDegradedResponseCodes,degradationKeyOverrides:t.degradationKeyOverrides,clientSensorGroupName:t.clientSensorGroupName,customTrackingId:t.customTrackingId,enablePerformanceMeasurement:t.enablePerformanceMeasurement}
this._degradationTrackingMetadata=new Ft(e,n,a),function(e){Object.keys(e).forEach((e=>{if(!jt.has(e))throw new Dt(`An unsupported failure tracking option '${e}' was provided. Please fix or remove it. ${St}`)}))}(t)}static isFailureTrackingMetadata(e){return null!=e&&Object.getOwnPropertyNames(Vt.prototype).every((n=>Object.hasOwnProperty.call(Object.getPrototypeOf(e),n)))}get featureKey(){return this._degradationTrackingMetadata.featureKey}get defaultDegradationKey(){return this._degradationTrackingMetadata.defaultDegradationKey}get productName(){return this._degradationTrackingMetadata.productName}get nonDegradedResponseCodes(){return new Set(this._degradationTrackingMetadata.nonDegradedResponseCodes)}get additionalDegradedResponseCodes(){return new Set(this._degradationTrackingMetadata.additionalDegradedResponseCodes)}get degradationKeyOverrides(){return this._degradationTrackingMetadata.degradationKeyOverrides}get customTrackingId(){return this._degradationTrackingMetadata.customTrackingId}get clientSensorGroupName(){return this._degradationTrackingMetadata.clientSensorGroupName}get shouldEnablePerformanceMeasurement(){return this._degradationTrackingMetadata.shouldEnablePerformanceMeasurement}validateResponseCodes(e,n){const t=(e,n)=>{if(!wt(e)||e<=0||e>999)throw new Dt(`Please only specify positive integer response codes between 1 and 999 for the ${n} option. ${e} was specified. ${St}.`)
if(429===e||999===e)throw new Dt(`PEM does not consider 429 and 999 API responses indications of the real member experience because it represents LinkedIn throttling abusive requests. We drop 429s and 999s by default, so please remove them from your ${n} options.`)
if(n===qt.NonDegradedResponseCodes&&(e<500||e>=600))throw new Dt(`For server responses that have a status code, PEM does not consider non-5xx as degradations by default anymore. ${e} is not considered a degradation unless you explicitly add it to the ${qt.AdditionalDegradedResponseCodes} option. Please remove ${e} from the ${qt.NonDegradedResponseCodes} option. ${St}.`)}
if(void 0!==n&&!Array.isArray(n))throw new Dt(`Please specify an array of positive integer response codes between 1 and 999 for the response codes that shouldn't be counted as degraded for the ${qt.NonDegradedResponseCodes} option. ${St}.`)
if(void 0!==e&&!Array.isArray(e))throw new Dt(`Please specify an array of positive integer response codes between 1 and 999 for the response codes that should also be considered as the degraded state(s) for the ${qt.AdditionalDegradedResponseCodes} option. ${St}.`)
null==n||n.forEach((e=>t(e,qt.NonDegradedResponseCodes))),null==e||e.forEach((e=>t(e,qt.AdditionalDegradedResponseCodes)))
const r=new Set(e),i=new Set(n)
if([...r].some((e=>i.has(e))))throw new Dt(`Response codes can't be both degraded and non-degraded. Please ensure that your additionalDegradedResponseCodes and nonDegradedResponseCodes don't have any overlapping response codes. ${St}.`)}}class Ht{constructor(e,n){if(this._additionalDegradedResponseCodes=new Set,this._degradationKeyByResponseCode=new Map,this._shouldDisableAvailabilityCalculation=!1,this._shouldRecordSession=!1,this._retryableTrackingMetadata=null,!Bt.isRetryableDegradationTrackingMetadata(e)&&!Ft.isDegradationTrackingMetadata(e)&&!Vt.isFailureTrackingMetadata(e))throw new Dt("We encountered a bug where we forgot to provide the tracking metadata as an argument. Please report it to the #pem team.")
if(!n)throw new Dt("We encountered a bug where we forgot to provide the product name as an argument. Please report it to the #pem team.")
this._featureKey=e.featureKey,this._productName=n,this._clientSensorGroupName=e.clientSensorGroupName,this._defaultDegradationKey=e.defaultDegradationKey
let t=Ft.isDegradationTrackingMetadata(e)?e:void 0
Bt.isRetryableDegradationTrackingMetadata(e)&&(t=e.degradationTrackingMetadata,this._retryableTrackingMetadata=e),void 0!==t?(this._nonDegradedResponseCodes=new Set(t.nonDegradedResponseCodes),this._customTrackingId=t.customTrackingId,this._shouldDisableAvailabilityCalculation=t.shouldDisableAvailabilityCalculation,this._shouldRecordSession=t.shouldRecordSession,t.additionalDegradedResponseCodes.length&&(this.processAdditionalDegradedResponseCodes(e.additionalDegradedResponseCodes),this.initializeDegradationKeyOverrides(e.degradationKeyOverrides))):(this._nonDegradedResponseCodes=new Set(e.nonDegradedResponseCodes),this._customTrackingId=e.customTrackingId,this.processAdditionalDegradedResponseCodes(e.additionalDegradedResponseCodes),this.initializeDegradationKeyOverrides(e.degradationKeyOverrides))}getDegradationKey(e){return this._degradationKeyByResponseCode.has(e)?this._degradationKeyByResponseCode.get(e):this._defaultDegradationKey}get featureKey(){return this._featureKey}get productName(){return this._productName}get customTrackingId(){return this._customTrackingId}get clientSensorGroupName(){return this._clientSensorGroupName}get shouldDisableAvailabilityCalculation(){return this._shouldDisableAvailabilityCalculation}get shouldRecordSession(){return this._shouldRecordSession}get retryableTrackingMetadata(){return this._retryableTrackingMetadata}get retryMetricStore(){var e,n
return void 0!==(null===(e=this._retryableTrackingMetadata)||void 0===e?void 0:e.featureMetricStore)?null===(n=this._retryableTrackingMetadata)||void 0===n?void 0:n.featureMetricStore:null}isCountedAgainstAvailability(e,n){return null!==e&&(null==n||this.canResponseCodeCountAgainstAvailability(n))}canResponseCodeCountAgainstAvailability(e){if(this._degradationKeyByResponseCode.has(e))return!0
if(this._additionalDegradedResponseCodes.has(e))return!0
const n=e>=400&&e<500,t=this._nonDegradedResponseCodes.has(e)
return!n&&!t}shouldImpactAvailability(e,n,t){return!(e&&"CLIENT_ABORTED"===e||"BLOCKED_BY_CLIENT_PROXY"===e||!(null==t?void 0:t.hasAnyLinkedInHeaders())&&n&&n>=400&&n<600||"TOO_MANY_REQUESTS"===e)}processAdditionalDegradedResponseCodes(e){e.forEach((e=>{if(this._nonDegradedResponseCodes.has(e))throw new Dt(`You attempted to specify ${e} as an additional degraded response code for the '${this.featureKey}' feature, however it is also specified in the non-degraded response codes for that feature. Please decide whether you want to consider ${e} responses a degraded state or not. ${St}.`)
this._additionalDegradedResponseCodes.add(e)}))}initializeDegradationKeyOverrides(e){e.forEach((e=>{if(!e.responseCodesToOverride||!e.degradationKey||!Array.isArray(e.responseCodesToOverride)||"string"!=typeof e.degradationKey)throw new Dt(`Degradation key overrides must consist of an array of responseCodesToOverride and a string degradationKey. ${St}.`)
new Set(e.responseCodesToOverride).forEach((n=>{if(!this.canResponseCodeCountAgainstAvailability(n))throw new Dt(`A degradation key override was specified for ${n}, but that response code isn't considered degraded. Please add it to additionalDegradedResponseCodes if you want it to count against your availability.`)
this._degradationKeyByResponseCode.set(n,e.degradationKey)}))}))}}class Gt{constructor(e){const n=new Map
null==e||e.forEach(((e,t)=>{n.set(t.toLowerCase(),e)})),this._callTreeId=n.get("x-li-uuid")||null,this._pointOfPresenceId=n.get("x-li-pop")||null,this._msEdgeRef=n.get("x-msedge-ref")||null,this._fabric=n.get("x-li-fabric")||null,this._responseMetadata=n.get("x-li-pem-resp-metadata")||null,this._downstreamAvailability=function(e){if(null==e)return null
const n=e.split(",")
for(const e of n){const n=e.split("=",2)
if(2===n.length&&"availability"===n[0]){const e=parseFloat(n[1])
if(e>=0&&e<=1)return e}}return null}(this._responseMetadata)||1}get callTreeId(){return this._callTreeId}get pointOfPresenceId(){return this._pointOfPresenceId}get microsoftEdgeReference(){return this._msEdgeRef}get fabric(){return this._fabric}get downstreamAvailability(){return this._downstreamAvailability}hasAnyLinkedInHeaders(){return!!(this._fabric||this._pointOfPresenceId||this._msEdgeRef||this._callTreeId)}}class Kt{constructor(e,n,t,r){this._responseCode=e||null,this._parsedResponseHeaders=n?new Gt(n):new Gt,this._responseError=t||null,this._downstreamServiceErrorCode=r}get responseCode(){return this._responseCode}get parsedHeaders(){return this._parsedResponseHeaders}get responseError(){return this._responseError}set responseError(e){this._responseError=e}get downstreamServiceErrorCode(){return this._downstreamServiceErrorCode}set downstreamServiceErrorCode(e){this._downstreamServiceErrorCode=e}}class $t{constructor(e,n,t){this._featureMetricStore=new Mt,this._defaultProductName=e,this._fireEventCallback=n,this._jetErrorCallback=t,this._metricSender=new Ct(this._featureMetricStore,n),window.setInterval((()=>this._metricSender.produceMetricEvent()),6e4),window.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&this._metricSender.produceMetricEvent(!0)}))}trackFeatureDegradationsForFetch(e,n,t,r,i){let a,o=null
const s=new Map,c=this._createFailureProcessingMetadata(t)
return n=this._getAndValidateUrlEntityIDs(n),r.then((e=>{o=e.status,e.headers.forEach(((e,n)=>s.set(n.toLowerCase(),e))),!1===e.ok&&(a=e)})).catch((e=>{throw a=e,e})).finally((()=>{this._trackResponse(e,o,n,c,i,s,a)}))}trackFeatureDegradationsForJQueryAjax(e,n,t,r,i,a){const o=n.status,s=n.getAllResponseHeaders(),c=new Map
s&&s.trim().split(/[\r\n]+/).forEach((e=>{const n=e.split(": "),t=n.shift()
if(t){const e=n.join(": ")
c.set(t.toLowerCase(),e)}}))
const d=a?null:n,u=this._createFailureProcessingMetadata(r)
t=this._getAndValidateUrlEntityIDs(t),this._trackResponse(e,o,t,u,i,c,d)}startRetryFlow(e){return $t.startRetryFlow(e)}static startRetryFlow(e){return new Bt(e)}completeRetryFlow(e){if(!Bt.isRetryableDegradationTrackingMetadata(e))throw new Dt("retryFlowMetadata must be an instance of RetryableDegradationTrackingMetadata")
e.flushMetricStoreToServiceStore(this._featureMetricStore)}_trackResponse(e,n,t,r,i,a,o){const s=new Kt(n,a,o),c=s.parsedHeaders,d=function(e){const n=e.responseError,t=e.parsedHeaders,r=e.responseCode
if(r){if(429===r||999===r)return"TOO_MANY_REQUESTS"
if(t&&!t.hasAnyLinkedInHeaders()&&r&&r>=400&&r<600)return"BLOCKED_BY_CLIENT_PROXY"
if((i=r)>=400&&i<500)return function(e){return 429===e?"TOO_MANY_REQUESTS":"CLIENT_ERROR"}(r)
if(function(e){return e>=500&&e<600}(r))return function(e){if(e){if(e.fabric)return"SERVER_ERROR"
if(e.pointOfPresenceId)return"TRAFFIC_L0_TO_L1_ERROR"
if(e.microsoftEdgeReference)return"TRAFFIC_AFD_TO_L0_ERROR"}return"SERVER_ERROR"}(t)
if(function(e,n){return!!(e>=200&&e<300&&n&&n.downstreamAvailability<1)}(r,t))return"DOWNSTREAM_GRACEFUL_DEGRADATION"}var i
if(!n)return null
if(n instanceof Error){if("AbortError"===n.name)return"CLIENT_ABORTED"
if(n instanceof TypeError&&(n.message.indexOf("Network request failed")>=0||n.message.indexOf("NetworkError when attempting to fetch resource")>=0||n.message.indexOf("Failed to fetch")>=0))return"NETWORK_ERROR"}else{if("timeout"===n.statusText)return"CLIENT_TIMEOUT"
if(0===n.status&&"abort"===n.statusText)return"CLIENT_ABORTED"
if("readyState"in n&&0===n.readyState)return"NETWORK_ERROR"}return"UNCLASSIFIED"}(s),u=function(e,n){if(!e.includes("/"))return e
const t=function(e){const n=document.createElement("a")
return n.href=e,n.pathname}(e).split("/").filter((e=>e.length))
if(!n.length)return t.join("/")
const r=[]
for(let e=t.length-1;e>=0;e--){const i=t[e],a=n.indexOf(i)
a>=0?n.splice(a,1):r.push(i)}return r.reverse().join("/")}(e,t),p=new Set,l=new Set
r.forEach((e=>{p.add(e.productName),l.add(e.featureKey)
const t=null!==e.retryableTrackingMetadata&&null!==e.retryMetricStore
!e.shouldDisableAvailabilityCalculation&&e.shouldImpactAvailability(d)&&(e.isCountedAgainstAvailability(d,n)?(t?e.retryableTrackingMetadata.incrementRetriedFeatureApiCall.bind(e.retryableTrackingMetadata):this._featureMetricStore.incrementFailedFeatureApiCall.bind(this._featureMetricStore))({featureKey:e.featureKey,productName:e.productName,pointOfPresenceId:c.pointOfPresenceId,responseErrorType:d,responseFabric:c.fabric},i,function(e,n){return"DOWNSTREAM_GRACEFUL_DEGRADATION"===e?n.downstreamAvailability:0}(d,c)):(t?e.retryableTrackingMetadata.incrementRetriedSuccessfulApiCall.bind(e.retryableTrackingMetadata):this._featureMetricStore.incrementSuccessfulFeatureApiCall.bind(this._featureMetricStore))({featureKey:e.featureKey,productName:e.productName,pointOfPresenceId:c.pointOfPresenceId,responseFabric:c.fabric},i))})),d&&(this._reportErrorIfUnclassified(o,d,n,p,l),function(e,n,t,r){if(!(null==e?void 0:e.trim())||!n||!Array.isArray(n))return[]
const i=[],a=r.responseCode
return n.forEach((n=>{const o=n.getDegradationKey(a),s=n.shouldImpactAvailability(t)&&n.isCountedAgainstAvailability(t,a),c={endpointPath:e,degradationKey:o,responseErrorTypeV2:t,isCountedAgainstAvailability:s,downstreamServiceErrorCode:r.downstreamServiceErrorCode}
a&&(c.responseCode=a)
const d=r.parsedHeaders
d.callTreeId&&(c.responseCallTreeId=d.callTreeId),(null==d?void 0:d.pointOfPresenceId)&&(c.pointOfPresenceId=d.pointOfPresenceId),(null==d?void 0:d.microsoftEdgeReference)&&(c.microsoftEdgeReference=d.microsoftEdgeReference),(null==d?void 0:d.fabric)&&(c.fabric=d.fabric),Bt.isRetryableDegradationTrackingMetadata(n.retryableTrackingMetadata)&&(c.retryDetails={trackingId:n.retryableTrackingMetadata.flowTrackingId,sequenceId:n.retryableTrackingMetadata.currentRequestSequenceId,maxAttempts:0}),i.push({header:{},requestHeader:{},productName:n.productName,featureKey:n.featureKey,failedDownstreamRequests:[c],customTrackingId:n.customTrackingId})})),i}(u,r,d,s).forEach((e=>{this._fireEventCallback("FeatureDegradeEvent",e,i)})))}_reportErrorIfUnclassified(e,n,t,r,i){var a
if((0===t||null==t)&&"UNCLASSIFIED"===n){const n=["noise","pem-unclassified-error"]
let t
r.forEach((e=>n.push(`pem-product-${e}`))),i.forEach((e=>n.push(`pem-feature-${e}`))),t=e instanceof Error?e:new Error(`Could not classify jQuery response: ${JSON.stringify(e)}`),null===(a=this._jetErrorCallback)||void 0===a||a.call(this,t,n,!1)}}_createFailureProcessingMetadata(e){if(!e||!Array.isArray(e)||!e.length)throw new Dt(`Please specify a non-empty array of degradation tracking metadata. ${St}.`)
const n=new Set
return e.map((e=>{if(!Ft.isDegradationTrackingMetadata(e)&&!Bt.isRetryableDegradationTrackingMetadata(e))throw new Dt(`Please use DegradationTrackingMetadata or RetryableDegradationTrackingMetadata to specify the degradations. ${St}.`)
const t=xt(e.productName||this._defaultProductName),r=`${t}!!${e.featureKey}`
if(n.has(r))throw new Dt("More than one degradation tracking metadata has the same productName/featureKey combination. Please merge them together")
return n.add(r),new Ht(e,t)}))}_getAndValidateUrlEntityIDs(e){if(!Array.isArray(e))throw new Dt(`Please specify the queried IDs to remove from the request URL, or use an empty array if there are none. ${St}.`)
return e}}function Wt(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Qt="function"==typeof Symbol&&Symbol.observable||"@@observable",zt=function(){return Math.random().toString(36).substring(7).split("").join(".")},Yt={INIT:"@@redux/INIT"+zt(),REPLACE:"@@redux/REPLACE"+zt(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+zt()}}
function Xt(e,n,t){var r
if("function"==typeof n&&"function"==typeof t||"function"==typeof t&&"function"==typeof arguments[3])throw new Error(Wt(0))
if("function"==typeof n&&void 0===t&&(t=n,n=void 0),void 0!==t){if("function"!=typeof t)throw new Error(Wt(1))
return t(Xt)(e,n)}if("function"!=typeof e)throw new Error(Wt(2))
var i=e,a=n,o=[],s=o,c=!1
function d(){s===o&&(s=o.slice())}function u(){if(c)throw new Error(Wt(3))
return a}function p(e){if("function"!=typeof e)throw new Error(Wt(4))
if(c)throw new Error(Wt(5))
var n=!0
return d(),s.push(e),function(){if(n){if(c)throw new Error(Wt(6))
n=!1,d()
var t=s.indexOf(e)
s.splice(t,1),o=null}}}function l(e){if(!function(e){if("object"!=typeof e||null===e)return!1
for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n)
return Object.getPrototypeOf(e)===n}(e))throw new Error(Wt(7))
if(void 0===e.type)throw new Error(Wt(8))
if(c)throw new Error(Wt(9))
try{c=!0,a=i(a,e)}finally{c=!1}for(var n=o=s,t=0;t<n.length;t++)(0,n[t])()
return e}return l({type:Yt.INIT}),(r={dispatch:l,subscribe:p,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(Wt(10))
i=e,l({type:Yt.REPLACE})}})[Qt]=function(){var e,n=p
return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(Wt(11))
function t(){e.next&&e.next(u())}return t(),{unsubscribe:n(t)}}})[Qt]=function(){return this},e},r}function Jt(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t]
return 0===n.length?function(e){return e}:1===n.length?n[0]:n.reduce((function(e,n){return function(){return e(n.apply(void 0,arguments))}}))}var Zt,er=function(e,n,t){},nr=function(e){return function(n,t,r,i){e(n,t)}},tr=function(e){var n,t=null!==(n=e.trackingOptions)&&void 0!==n?n:{},r=t.pemPrefix,i=t.trackingFireEvent
return void 0!==r&&void 0!==i?function(e,n,t){var r={READ:new $t("".concat(e," - Read"),nr(t),er),WRITE:new $t("".concat(e," - Send"),nr(t),er),SEARCH:new $t("".concat(e," - Search"),nr(t),er)}
return function(e,t,i,a){return function(o){var s,c=(null!=a?a:{}).pageInstance
if(c){var d=[new Ft(n[t],"failed-to-".concat((s=i,s.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})))))],u=new Promise((function(e,n){o.then((function(n){return e(n.response)})).catch(n)}))
return r[t].trackFeatureDegradationsForFetch(e,[],d,u,c).then((function(){return o}))}return o}}}(r,{READ:"messaging-conversation-load-module",WRITE:"messaging-conversation-send-module",SEARCH:"messaging-conversation-search-module"},i):function(){return function(e){return e}}},rr=function(e,n,t,r){return function(){return Jt(e.track(n,"READ",t,r),wn)(n)}},ir=function(e,n,t,r){return function(i){return Jt(e.track(n,"WRITE",t,r),Nn)(n,i)}},ar=function(e){return function(n){return Promise.reject(Pe.fromApiErrorMemo("NETWORK_ERROR",{cause:n,msg:e}))}},or=function(e){return function(n){var t=n.response,r=n.requestId
return t?t.ok?t.json().then(function(e){return function(n){return i(i({},n),{},{requestId:e})}}(r)).catch((function(n){return Promise.reject(Pe.fromApiErrorMemo("RESPONSE_INVALID_JSON",{cause:n,msg:e}))})):t.json().catch((function(e){return Promise.reject(new Pe("api",t.status,t.statusText,e))})).then((function(n){return De("".concat(e," failed"),n,t.status)})):Promise.reject(Pe.fromApiErrorMemo("NO_RESPONSE_RECEIVED",{msg:e}))}},sr=function(e){return function(n){var t=n.response,r=n.requestId
return t?t.ok?Promise.resolve({requestId:r}):t.json().then((function(n){return De("".concat(e," failed"),n,t.status)})):Promise.reject(Pe.fromApiErrorMemo("NO_RESPONSE_RECEIVED",{msg:e}))}},cr=function(e,n,t,r){var i="getConversationById",a=it(e,{messengerConversationsId:n,count:t}),o=or(i)
return rr(e,a,i,r)().catch(ar(i)).then(o)},dr=function(e,n,t,r){var i="getSyncMessagesByConversationId",a={conversationUrn:n,syncToken:t}
t||delete a.syncToken
var o=yt(e,a),s=or(i)
return rr(e,o,i,r)().catch(ar(i)).then(s)},ur=function(e,n,t){var r="initialSyncConversations",i=at(e,{mailboxUrn:n}),a=or(r)
return rr(e,i,r,t)().catch(ar(r)).then(a)},pr={category:"INBOX",count:20},lr=function(e,n,t){var r="updateConversation",i=sr(r),a=function(e,n){var t="messengerConversations/".concat(encodeURIComponent(n))
return Tn("restli",e.messengerResource,t)}(e,n)
return Nn(a,t).catch(ar(r)).then(i)},fr=function(e,n,t){var r=JSON.stringify({patch:{$set:t}})
return lr(e,n,r)},mr=function(e,n){var t="activateTypingStatus",r=JSON.stringify({conversationUrn:n}),i=sr(t),a=function(e){return Tn("restli",e.messengerResource,"messengerConversations",{action:"typing"})}(e)
return Nn(a,r).catch(ar(t)).then(i)},yr=function(e,n,t,r,a,o,s){var c,d,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"NOT_DEDUPE",p="sendMessageToConversation",l=null!==(c=null==s?void 0:s.renderContent)&&void 0!==c?c:void 0,f=null!==(d=null==s?void 0:s.messageSubject)&&void 0!==d?d:void 0,m=i({},s)
m=P(m,"renderContent"),m=P(m,"messageSubject")
var y=i({message:{body:r,subject:f,renderContentUnions:l,conversationUrn:t,originToken:a},mailboxUrn:n,trackingId:o.trackingId,dedupeByClientGeneratedToken:"DEDUPE"===u},m),h=JSON.stringify(y),g=or(p),v=function(e){return Tn("restli",e.messengerResource,"messengerMessages",{action:"createMessage"})}(e)
return ir(e,v,p,o)(h).catch(ar(p)).then(g)},hr=function(e,n,t,r,a,o,s){var c,d,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"NOT_DEDUPE",p="sendFirstMessageToRecipients",l=null!==(c=null==s?void 0:s.renderContent)&&void 0!==c?c:void 0,f=null!==(d=null==s?void 0:s.messageSubject)&&void 0!==d?d:void 0,m=i({},s)
delete m.renderContent,delete m.messageSubject
var y=i({message:{body:t,subject:f,originToken:r,renderContentUnions:l},mailboxUrn:n,trackingId:o.trackingId,dedupeByClientGeneratedToken:"DEDUPE"===u,hostRecipientUrns:a},m),h=JSON.stringify(y),g=or(p),v=function(e){return Tn("restli",e.messengerResource,"messengerMessages",{action:"createMessage"})}(e)
return ir(e,v,p,o)(h).catch(ar(p)).then(g)}
Zt=Symbol.iterator
var gr,vr=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]
o(this,e),d(this,"_idx",0),d(this,"_messages",[]),d(this,"_clientIdIndex",new Map),d(this,"_entityUrnIndex",new Map),this._messages=$e(n),this._clientIdIndex=new Map(n.map((function(e){return[e.clientId,e]}))),this._entityUrnIndex=new Map(n.filter(E).map((function(e){return[e.entityUrn,e]})))}return c(e,[{key:"length",get:function(){return this._messages.length}},{key:"at",value:function(e){if(e>=0&&e<this._messages.length)return this._messages[e]
throw new Error("Index out of bounds")}},{key:"getByIdentifier",value:function(e){return q(e)?this._entityUrnIndex.get(e):this._clientIdIndex.get(e)}},{key:"next",value:function(){return this._idx<this._messages.length?{done:!1,value:this._messages[this._idx++]}:(this._idx=0,{done:!0,value:null})}},{key:"first",value:function(){try{return this.at(0)}catch(e){return}}},{key:"last",value:function(){try{return this.at(this.length-1)}catch(e){return}}},{key:Zt,value:function(){return this}},{key:"map",value:function(e){return Array.from(this,e)}},{key:"updateAny",value:function(n,t){return new e(A(n,t,this._messages))}},{key:"updateByUrn",value:function(n,t){return this._entityUrnIndex.has(n)?new e(A(qe(n),Ge(t),this._messages)):this}},{key:"updateByClientId",value:function(n,t){return this._clientIdIndex.has(n)?new e(A(je(n),Ge(t),this._messages)):this}},{key:"add",value:function(n){var t=this,r=n.filter(Jt(O,Je(this._entityUrnIndex,this._clientIdIndex))).map((function(e){return t._clientIdIndex.has(e.clientId)?i(i({},e),{},{clientId:At()}):e})),a=n.filter(Je(this._entityUrnIndex,this._clientIdIndex)).map((function(e){return Ge(e)(t.getByIdentifier(e.entityUrn||e.clientId))})),o=new Map(a.map((function(e){return[e.clientId,!0]}))),s=this._messages.filter((function(e){return!o.has(e.clientId)}))
return new e([].concat(g(s),g(a),g(r)))}},{key:"removeByClientId",value:function(n){var t=this._messages.filter((function(e){return e.clientId!==n}))
return[this._clientIdIndex.get(n),new e(t)]}},{key:"removeByUrns",value:function(n){return new e(this._messages.filter((function(e){return e.entityUrn&&!n.has(e.entityUrn)})))}}]),e}(),_r={continueOnFailure:!0,convCount:20,decorators:{},headers:function(){return{}},graphQlQueryIds:{},messengerResource:{host:"/",path:"messenger/api/",graphQLPrefix:"",restliPrefix:""},mpName:"web-messenger-data",mpVersion:"1.0.0",msgCount:20,queryFormat:"id",realtimeHost:null,sendRetryTimeoutInSecond:16,syncRetryTimeoutInSecond:80,typingIndicatorDelayInSecond:5},Tr=function(e){return e?e.filter(E):[]},br=function(e){var n,t,r,i=new Date
return{additionalData:e.additionalData||null,backendConversationUrn:e.backendConversationUrn,backendUrn:e.backendUrn,clientId:null!==(n=e.clientId)&&void 0!==n?n:At(),content:e.content,deliveredAt:e.deliveredAt?new Date(e.deliveredAt):i,entityUrn:e.entityUrn,inlineWarning:null!==(t=e.inlineWarning)&&void 0!==t?t:void 0,lastActivityAt:i,messageBodyRenderFormat:e.messageBodyRenderFormat||"DEFAULT",optionalSendData:null!==(r=e.optionalSendData)&&void 0!==r?r:{renderContent:[]},reactions:Er(e.reactions),retries:e.retries||0,senderUrn:e.senderUrn,status:e.status||"Pending",subject:e.subject}},Er=function(e){return(e||[]).filter(E).map((function(e){return i(i({},e),{},{reactors:[]})}))},kr=function(e){var n,t,r,i,a,o,s,c,d,u,p
return{backendUrn:e.backendUrn,categories:e.categories,contentMetadata:null!==(n=e.contentMetadata)&&void 0!==n?n:void 0,conversationTypeText:null!==(t=e.conversationTypeText)&&void 0!==t?t:void 0,conversationUrl:e.conversationUrl,createdAt:new Date(e.createdAt),creatorHostIdentityUrn:null===(r=e.creator)||void 0===r?void 0:r.hostIdentityUrn,disabledFeatures:null!==(i=e.disabledFeatures)&&void 0!==i?i:[],groupChat:null!==(a=e.groupChat)&&void 0!==a&&a,headlineText:null!==(o=e.headlineText)&&void 0!==o?o:void 0,lastActivityAt:new Date(e.lastActivityAt),lastReadAt:e.lastReadAt?new Date(e.lastReadAt):void 0,metadata:{},notificationStatus:e.notificationStatus,participants:(null!==(s=e.conversationParticipants)&&void 0!==s?s:[]).map((function(e){return e.hostIdentityUrn})).sort(),read:e.read,shortHeadlineText:null!==(c=e.shortHeadlineText)&&void 0!==c?c:void 0,state:null!==(d=e.state)&&void 0!==d?d:void 0,status:{},title:null!==(u=e.title)&&void 0!==u?u:void 0,unreadCount:e.unreadCount,hostConversationActions:e.hostConversationActions,quickReplies:null!==(p=e.quickReplies)&&void 0!==p?p:[]}},Ar=function(e,n,t){var r=new Date(Date.now())
return{clientId:At(),content:null!=n?n:{text:"",attributes:[]},lastActivityAt:r,optionalSendData:null!=t?t:{renderContent:[]},senderUrn:e,status:"Draft"}},Sr=function(e){return i(i({},e),{},{additionalData:null,deliveredAt:new Date(Date.now()),messageBodyRenderFormat:"DEFAULT",reactions:[],retries:0,status:"Pending"})},Cr=function(e){var n,t=new Date
return{clientId:e.clientId,content:e.content,optionalSendData:e.optionalSendData,lastActivityAt:null!==(n=e.lastActivityAt)&&void 0!==n?n:t,senderUrn:e.senderUrn,status:"Draft"}},Ir=function(e){return g(e?e.map((function(e){return Or(e)})):[])},Rr=function(e,n,t){var r,i,a,o,s,c,d,u,p,l,f,m
if(!e.entityUrn)throw Pe.fromApiErrorMemo("MISSING_DATA_FROM_RESPONSE",{msg:"conversationResponseToState: convoResponse.entityUrn is null or undefined"})
var y=e.creator&&e.creator.hostIdentityUrn?Or(e.creator):void 0,h=null!==(r=null===(i=e.messages)||void 0===i?void 0:i.elements)&&void 0!==r?r:[],g=Dr(h),v=g.messages,_=g.participants,T=Ir(e.conversationParticipants),b=null===(a=e.conversationParticipants)||void 0===a?void 0:a.map((function(e){return e.hostIdentityUrn})),E=on(_,T),k=E
T.length!==E.length&&(k=E.filter((function(e){return null==b?void 0:b.includes(e.hostIdentityUrn)})))
var A=null!==(o=null===(s=e.creator)||void 0===s?void 0:s.hostIdentityUrn)&&void 0!==o?o:void 0,S={additionalData:null,backendUrn:e.backendUrn,categories:e.categories,clientId:At(),contentMetadata:null!==(c=e.contentMetadata)&&void 0!==c?c:void 0,conversationTypeText:null!==(d=e.conversationTypeText)&&void 0!==d?d:void 0,conversationUrl:e.conversationUrl,createdAt:new Date(e.createdAt),creatorHostIdentityUrn:A,disabledFeatures:e.disabledFeatures,draftMessage:n,entityUrn:e.entityUrn,groupChat:null!==(u=e.groupChat)&&void 0!==u&&u,headlineText:null!==(p=e.headlineText)&&void 0!==p?p:void 0,lastActivityAt:new Date(e.lastActivityAt),lastReadAt:e.lastReadAt?new Date(e.lastReadAt):void 0,matchingSearches:t?[t]:[],messages:new vr(v),quickReplies:[],metadata:{prevCursor:e.prevCursor,syncToken:void 0},notificationStatus:e.notificationStatus,participants:k.map((function(e){return e.hostIdentityUrn})).sort(),read:e.read,shortHeadlineText:null!==(l=e.shortHeadlineText)&&void 0!==l?l:void 0,state:null!==(f=e.state)&&void 0!==f?f:void 0,status:{fullyLoaded:!1,loading:!1,sending:"Ready"},title:null!==(m=e.title)&&void 0!==m?m:void 0,typingUrns:new Set,unreadCount:e.unreadCount,hostConversationActions:e.hostConversationActions}
return y&&!E.find((function(e){return e.hostIdentityUrn===y.hostIdentityUrn}))&&E.push(y),[S,E]},Or=function(e){var n,t,r
if(!e.hostIdentityUrn)throw Pe.fromApiErrorMemo("MISSING_DATA_FROM_RESPONSE",{msg:"messageParticipantDataToState: hostIdentityUrn is missing"})
if(null!==(n=e.participantType)&&void 0!==n&&n.member||null!==(t=e.participantType)&&void 0!==t&&t.organization||null!==(r=e.participantType)&&void 0!==r&&r.custom){var i=e.participantType,a=i.member,o=i.organization,s=i.custom
if(s)return{kind:"CUSTOM",additionalData:null,clientId:At(),entityUrn:e.entityUrn,hostIdentityUrn:e.hostIdentityUrn,backendUrn:e.backendUrn,name:s.name,image:s.image}
if(o)return{kind:"ORGANIZATION",additionalData:null,clientId:At(),entityUrn:e.entityUrn,hostIdentityUrn:e.hostIdentityUrn,backendUrn:e.backendUrn,name:o.name,tagline:o.tagline,logo:o.logo,pageType:o.pageType,pageUrl:o.pageUrl}
if(a){var c,d,u,p,l,f,m,y,h,g={url:null!==(c=a.profileUrl)&&void 0!==c?c:void 0,picture:a.profilePicture&&a.profilePicture.rootUrl?{rootUrl:a.profilePicture.rootUrl,artifacts:a.profilePicture.artifacts.filter(E)}:void 0}
return{kind:"MEMBER",additionalData:null,clientId:At(),entityUrn:e.entityUrn,firstName:a.firstName.text,hostIdentityUrn:e.hostIdentityUrn,backendUrn:e.backendUrn,lastName:null!==(d=null===(u=a.lastName)||void 0===u?void 0:u.text)&&void 0!==d?d:"",headline:null!==(p=null===(l=a.headline)||void 0===l?void 0:l.text)&&void 0!==p?p:"",pronoun:{customPronoun:null!==(f=null===(m=a.pronoun)||void 0===m?void 0:m.customPronoun)&&void 0!==f?f:"",standardizedPronoun:null!==(y=null===(h=a.pronoun)||void 0===h?void 0:h.standardizedPronoun)&&void 0!==y?y:""},profile:g}}}return{kind:"EMPTY",additionalData:null,clientId:At(),entityUrn:e.entityUrn,hostIdentityUrn:e.hostIdentityUrn,backendUrn:e.backendUrn}},Mr=function(e){return null!==e},wr=function(e){return e&&e.length?e.reduce((function(e,n){return function(e,n){if(n&&n.participantType&&!e[n.entityUrn]){var t=Or(n)
return i(i({},e),{},d({},t.hostIdentityUrn,t))}return e}(e,n)}),{}):{}},Nr=function(e,n){var t={}
return{conversations:e.filter(Mr).map((function(e){var r=h(Rr(e,n),2),i=r[0]
return r[1].forEach((function(e){t[e.hostIdentityUrn]=e})),i})),participants:t}},Pr=function(e,n){var t,r,i,a,o,s,c=null===(t=e.metadata)||void 0===t?void 0:t.newSyncToken,d=null!==(r=null===(i=e.metadata)||void 0===i?void 0:i.shouldClearCache)&&void 0!==r&&r,u=null!==(a=null===(o=e.metadata)||void 0===o?void 0:o.deletedUrns)&&void 0!==a?a:[],p=(null!==(s=e.elements)&&void 0!==s?s:[]).filter(E),l=wr(function(e){return e.reduce((function(e,n){return[].concat(g(e),[n.sender])}),[])}(p)),f=p.reduce((function(e,n){var t=function(e){var n,t,r
if(!e.sender.hostIdentityUrn)throw Pe.fromApiErrorMemo("MISSING_DATA_FROM_RESPONSE",{msg:"messageWithFullParticipantToState: sender hostIdentityUrn is missing"})
var i=Lr(Tr(e.renderContent)),a=i.data
return{participants:i.participants,message:{additionalData:null,clientId:At(),content:null!==(n=e.body)&&void 0!==n?n:{text:"",attributes:[]},deliveredAt:new Date(e.deliveredAt),entityUrn:e.entityUrn,backendConversationUrn:e.backendConversationUrn,backendUrn:e.backendUrn,inlineWarning:null!==(t=e.inlineWarning)&&void 0!==t?t:void 0,messageBodyRenderFormat:e.messageBodyRenderFormat,subject:null!==(r=e.subject)&&void 0!==r?r:void 0,optionalSendData:a,reactions:Er(e.reactionSummaries),retries:0,senderUrn:e.sender.hostIdentityUrn,status:"Delivered"}}}(n),r=t.message,i=t.participants
return{messages:[].concat(g(e.messages),[r]),participants:on(i,e.participants).sort()}}),{messages:[],participants:[]})
return{messages:new vr(f.messages),newSyncToken:c,shouldClearCache:d,deletedUrns:u,participants:on(f.participants,w(l)),requestId:n}},Dr=function(e){return e.reduce((function(e,n){var t=function(e){var n,t,r
if(!e.sender.hostIdentityUrn)throw Pe.fromApiErrorMemo("MISSING_DATA_FROM_RESPONSE",{msg:"singleMessageAndParticipantsToState: sender hostIdentityUrn is missing"})
var i=Or(e.sender),a=Lr(Tr(e.renderContent)),o=a.data,s=a.participants
return{participants:on([i],s).sort(),message:{additionalData:null,clientId:At(),content:null!==(n=e.body)&&void 0!==n?n:{text:"",attributes:[]},optionalSendData:o,inlineWarning:null!==(t=e.inlineWarning)&&void 0!==t?t:void 0,deliveredAt:new Date(e.deliveredAt),entityUrn:e.entityUrn,backendConversationUrn:e.backendConversationUrn,backendUrn:e.backendUrn,subject:null!==(r=e.subject)&&void 0!==r?r:void 0,messageBodyRenderFormat:e.messageBodyRenderFormat,reactions:Er(e.reactionSummaries),retries:0,senderUrn:e.sender.hostIdentityUrn,status:"Delivered"}}}(n),r=t.participants,i=t.message
return{messages:[].concat(g(e.messages),[i]),participants:on(r,e.participants).sort()}}),{messages:[],participants:[]})},Ur=function(e){return"search"===e.kind},xr=function(e){if(!e.data||!e.data.messengerMailboxCountsByMailbox||!e.data.messengerMailboxCountsByMailbox.elements)throw Pe.fromApiErrorMemo("MISSING_DATA_FROM_RESPONSE",{msg:"mailboxUnreadCountsResponseToUnreadCounts: messengerMailboxCountsByMailbox response is missing"})
return function(e,n){return{counters:e.reduce((function(e,n){var t
return i(i({},e),{},d({},n.category,(null!==(t=e[n.category])&&void 0!==t?t:0)+n.unreadConversationCount))}),{}),requestId:n}}(e.data.messengerMailboxCountsByMailbox.elements.filter(E),e.requestId)},Lr=function(e){var n={}
return{data:{renderContent:e.map((function(e){var t,r,a=e.forwardedMessageContent?(t=e.forwardedMessageContent,r=Or(t.originalSender),{content:{originalSendAt:t.originalSendAt,originalSenderUrn:t.originalSender.hostIdentityUrn,forwardedBody:t.forwardedBody,footerText:t.footerText},participant:r}):{content:void 0,participant:void 0},o=a.content,s=a.participant
return s&&(n[s.hostIdentityUrn]=s),i(i({},P(e,"forwardedMessageContent")),{},{forwardedMessageContent:o})}))},participants:w(n)}},Fr=function(e,n){var t=e.errors
if(t){var r=t.map((function(e){return Pe.buildGraphQLPayloadError(e,n)}))
throw Pe.fromApiErrorMemo("ERRORS_IN_RESPONSE",{cause:r,msg:n})}},Br={kind:"category",category:"INBOX"},qr=function(e){var n,t
return null===(n=xe[e])||void 0===n||null===(t=n.store)||void 0===t?void 0:t.getState()},jr=function(e,n,t,r,a){var o=i(i({},e.status),{},{fullyLoaded:a,nextCursor:r})
switch(n.kind){case"category":return"INBOX"===n.category?i(i({},e),{},{status:o,conversations:e.conversations.filtered((function(e){return an(e,t)&&e.categories.includes("INBOX")&&!e.categories.some((function(e){return["SPAM","ARCHIVE"].includes(e)}))}))}):i(i({},e),{},{status:o,conversations:e.conversations.filtered((function(e){return an(e,t)&&e.categories.includes(n.category)}))})
case"search":return i(i({},e),{},{status:o,conversations:e.conversations.filtered((function(e){return an(e,t)&&e.matchingSearches.includes(n.id)}))})}},Vr=function(e){var n=xe[e]
if(n&&n.store)return{urn:e,data:n.store.getState(),realtime:n.realtime}},Hr=function(e){var n
return null===(n=xe[e])||void 0===n?void 0:n.store},Gr=function(e,n){xe[e].observers.push(n)},Kr=function(e,n){var t=xe[e]
return t?(n.message,t.observers.forEach((function(e){return e.error(n)})),t.observers.length):0},$r=function(e,n,t,r,i){return cr(e,t,20,i).then(function(e,n){return function(t){var r,i,a=null===(r=t.data)||void 0===r?void 0:r.messengerConversationsById,o=t.requestId
if(!a)throw Pe.fromApiErrorMemo("MISSING_DATA_FROM_RESPONSE",{msg:"conversationByIdResponseToState: messengerConversationsById response is missing"})
var s,c=a.backendUrn,d=a.categories,u=a.contentMetadata,p=a.conversationTypeText,l=a.conversationUrl,f=a.createdAt,m=a.creator,y=a.disabledFeatures,h=a.entityUrn,g=a.groupChat,v=a.lastActivityAt,_=a.lastReadAt,T=a.messages,b=a.notificationStatus,E=a.conversationParticipants,k=a.read,A=a.state,S=a.title,C=a.unreadCount,I=a.hostConversationActions,R=T.elements,O=wr(E),M=Dr(R),N=M.messages,P=M.participants,D=on(P,w(O))
return{conversationState:{additionalData:null,backendUrn:c,categories:d,clientId:n,conversationUrl:l,createdAt:new Date(f),creatorHostIdentityUrn:null!==(i=null==m?void 0:m.hostIdentityUrn)&&void 0!==i?i:void 0,draftMessage:Ar(e),entityUrn:h,lastActivityAt:new Date(v),lastReadAt:new Date(_),messages:new vr(N),participants:(s=O,Object.keys(s).sort()),quickReplies:[],read:k,title:S,state:A,groupChat:null!=g&&g,conversationTypeText:p,contentMetadata:u,disabledFeatures:y,typingUrns:new Set,matchingSearches:[],metadata:{},notificationStatus:b,status:{loading:!1,sending:"Ready",fullyLoaded:!1},unreadCount:C,hostConversationActions:I},participants:D.sort(),requestId:o}}}(n,r))},Wr=function(e,n){return function(t){var r=n?Pe.fromClientErrorMemo(n,t):t
return Kr(e,r),Promise.reject(r)}},Qr=function(e,n){return function(t){var r=Pe.fromUnknown(t,n)
Kr(e,r)}},zr=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null
return function(t){return Kr(e,t),Promise.resolve(n)}},Yr=function(){return new Map},Xr=function(e,n){return e.updateAny(Ve(n),function(e){return function(n){return i(i({},n),{},{additionalData:e[n.clientId]||n.additionalData})}}(n))},Jr=function(e,n){if(!n||!M(n).length||!n.emoji||!n.reactors&&void 0===n.viewerReacted||n.reactors&&(!e||!e.length))return e
var t=n.emoji,r=g(e),i=r.findIndex((function(e){return e.emoji===t}))
if(i>-1){var a=r[i]
if(n.reactors)return a.reactors=n.reactors,r.splice(i,1,a),r
if(a.viewerReacted=n.viewerReacted,n.count&&0===n.count)return r.splice(i,1),r
if(n.count&&n.count>0)a.count=n.count
else if(n.viewerReacted)a.count=a.count+1
else{if(1===a.count)return r.splice(i,1),r
a.count=a.count-1}return n.firstReactedAt&&n.firstReactedAt<a.firstReactedAt&&(a.firstReactedAt=n.firstReactedAt),r.splice(i,1,a),r}return 0===n.count?r:[].concat(g(r),[{count:void 0!==n.count?n.count:1,emoji:t,firstReactedAt:n.firstReactedAt?n.firstReactedAt:Date.now(),viewerReacted:n.viewerReacted,reactors:[]}]).sort((function(e,n){return e.firstReactedAt-n.firstReactedAt}))},Zr=function(e,n){return n&&n>e?n:e},ei=function(e){for(var n=Object.keys(e),t={},r=0;r<n.length;r++){var i=n[r]
"function"==typeof e[i]&&(t[i]=e[i])}var a,o=Object.keys(t)
try{!function(e){Object.keys(e).forEach((function(n){var t=e[n]
if(void 0===t(void 0,{type:Yt.INIT}))throw new Error(Wt(12))
if(void 0===t(void 0,{type:Yt.PROBE_UNKNOWN_ACTION()}))throw new Error(Wt(13))}))}(t)}catch(e){a=e}return function(e,n){if(void 0===e&&(e={}),a)throw a
for(var r=!1,i={},s=0;s<o.length;s++){var c=o[s],d=t[c],u=e[c],p=d(u,n)
if(void 0===p)throw n&&n.type,new Error(Wt(14))
i[c]=p,r=r||p!==u}return(r=r||o.length!==Object.keys(e).length)?i:e}}({entityUrn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0
return"UPDATE_MAILBOXURN"===n.type?n.entityUrn:e},lastActivityAt:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date
return(arguments.length>1?arguments[1]:void 0).type,e},draftConversations:function(){var e,n,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr(),a=arguments.length>1?arguments[1]:void 0
switch(a.type){case"REMOVE_DRAFT_CONVERSATION":case"CONVERT_DRAFT_CONVERSATION":return e=r,n=a.payload.conversationId,(t=new Map(e)).delete(n)?t:e
case"ADD_DRAFT_CONVERSATION":return N(r,a.payload.conversation.clientId,a.payload.conversation)
case"DRAFT_MESSAGE_READY_TO_SEND":var o=r.get(a.payload.clientId)
return o?N(r,a.payload.clientId,i(i({},o),{},{messages:o.messages.add([Sr(o.draftMessage)]),draftMessage:Ar(o.draftMessage.senderUrn)})):r
case"ADD_NEW_MESSAGE_BY_ID":var s=r.get(a.payload.conversationId)
return s?N(r,a.payload.conversationId,i(i({},s),{},{messages:s.messages.add([a.payload.message])})):r
case"READY_MESSAGE_BACK_TO_DRAFT":var c=r.get(a.payload.conversationId)
if(!c)return r
var d=h(c.messages.removeByClientId(a.payload.messageClientId),2),u=d[0],p=d[1]
return N(r,a.payload.conversationId,i(i({},c),{},{messages:p,draftMessage:u?Cr(u):Ar(a.payload.mboxUrn)}))
case"DELETE_MESSAGE":var l=r.get(a.payload.conversationId)
if(!l)return r
var f=h(l.messages.removeByClientId(a.payload.messageClientId),2)[1]
return N(r,a.payload.conversationId,i(i({},l),{},{messages:f}))
case"UPDATE_DRAFT_MESSAGE":var m=r.get(a.payload.conversationId)
return m?N(r,a.payload.conversationId,i(i({},m),{},{draftMessage:i(i({},a.payload.messageUpdate),{},{clientId:m.draftMessage.clientId})})):r
case"UPDATE_NEW_MESSAGE":if(!F(a.payload.conversationIdentifier))return r
var y=r.get(a.payload.conversationIdentifier)
return y?N(r,a.payload.conversationIdentifier,i(i({},y),{},{messages:y.messages.updateByClientId(a.payload.messageId,a.payload.message)})):r
case"UPDATE_DRAFT_CONVERSATION":var g=r.get(a.payload.conversationId)
return g?N(r,a.payload.conversationId,i(i({},g),{},{recipients:a.payload.recipientUrns})):r
case"UPDATE_DRAFT_CONVERSATION_SENDING_STATUS":var v=r.get(a.payload.conversationId)
return v?N(r,a.payload.conversationId,i(i({},v),{},{sending:a.payload.sendingStatus})):r
default:return r}},participants:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0
switch(n.type){case"DECORATE_PARTICIPANTS":var t=n.payload.data,r=S(M(t).map((function(n){return[n,i(i({},e[n]),{},{additionalData:t[n]})]})))
return i(i({},e),r)
case"ADD_MAILBOX_PARTICIPANTS":case"ADD_CONVERSATION":case"ADD_OLDER_CONVERSATIONS":case"ADD_CONVERSATIONS":var a=S(n.payload.participants.map((function(e){return[e.hostIdentityUrn,e]}))),o=M(a).reduce((function(n,t){return e[t]&&"EMPTY"!==e[t].kind&&a[t]&&"EMPTY"===a[t].kind?n[t]=i({},e[t]):n[t]=i(i(i({},e[t]),a[t]),{},{clientId:e[t]?e[t].clientId:a[t].clientId}),n}),{})
return i(i({},e),o)
default:return e}},conversations:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn(),t=arguments.length>1?arguments[1]:void 0
switch(t.type){case"DECORATE_CONVERSATIONS":return dn.fromConversationArray(n.map((function(e){return i(i({},e),{},{additionalData:t.payload.data[e.clientId]||e.additionalData})})))
case"DECORATE_ALL_MESSAGES":return dn.fromConversationArray(n.map((function(e){return i(i({},e),{},{messages:Xr(e.messages,t.payload.data)})})))
case"DECORATE_MESSAGES":return n.updateItem(Le(t.payload.conversationUrn),(function(e){return i(i({},e),{},{messages:Xr(e.messages,t.payload.data)})}))
case"DECORATE_MESSAGE":return n.updateItem(Le(t.payload.conversationUrn),(function(e){return i(i({},e),{},{messages:e.messages.updateByUrn(t.payload.messageUrn,{additionalData:t.payload.data})})}))
case"DRAFT_MESSAGE_READY_TO_SEND":return n.updateItem(Be(t.payload.clientId),(function(e){return i(i({},e),{},{messages:e.messages.add([Sr(e.draftMessage)]),draftMessage:Ar(e.draftMessage.senderUrn)})}))
case"UPDATE_DRAFT_MESSAGE":return n.updateItem(Be(t.payload.conversationId),(function(e){return i(i({},e),{},{draftMessage:i(i({},t.payload.messageUpdate),{},{clientId:e.draftMessage.clientId})})}))
case"UPDATE_NEW_MESSAGE":return n.updateItem(Be(t.payload.conversationIdentifier),(function(e){return i(i({},e),{},{messages:e.messages.updateByClientId(t.payload.messageId,t.payload.message),quickReplies:en(e,e.quickReplies,t.payload.message)})}))
case"UPDATE_MESSAGES":var r=t.payload.conversationUrn,a=t.payload.messageUpdateMap
if(!r){var o=M(a),s=G(n,o[0])
if(!s)return n
r=s.entityUrn}return n.updateItem(Le(r),(function(e){if(L(e)){var n=M(a)
return i(i({},e),{},{messages:e.messages.updateAny((t=n,function(e){return t.includes(e.entityUrn)}),(function(e){return e.entityUrn?i(i(i({},e),a[e.entityUrn]),{},{clientId:e.clientId}):e})),quickReplies:en(e,e.quickReplies)})}return e
var t}))
case"UPDATE_REACTIONS_ON_MESSAGE":var c=t.payload,d=c.messageUrn,u=c.reaction,p=G(n,d)
if(!p)return n
var l=p.entityUrn
return n.updateItem(Le(l),(function(e){if(L(e)){var n=e.messages.getByIdentifier(d)
return i(i({},e),{},{messages:e.messages.updateAny(qe(d),(function(e){return i(i({},e),{},{reactions:Jr(n.reactions,u),clientId:e.clientId})}))})}return e}))
case"READY_MESSAGE_BACK_TO_DRAFT":return n.updateItem(Be(t.payload.conversationId),(function(e){var n=h(e.messages.removeByClientId(t.payload.messageClientId),2),r=n[0],a=n[1]
return i(i({},e),{},{messages:a,draftMessage:r?Cr(r):Ar(t.payload.mboxUrn)})}))
case"DELETE_MESSAGE":return n.updateItem(Be(t.payload.conversationId),(function(e){var n=h(e.messages.removeByClientId(t.payload.messageClientId),2)[1]
return i(i({},e),{},{messages:n})}))
case"DELETE_MESSAGES":return n.updateItem(Le(t.payload.conversationUrn),(function(e){var n=t.payload.clearAll?new vr:e.messages.removeByUrns(t.payload.messageUrns)
return i(i({},e),{},{messages:n})}))
case"REALTIME_TYPING_ON":return n.updateItem(Le(t.payload.conversationUrn),(function(e){return i(i({},e),{},{typingUrns:D(e.typingUrns,t.payload.typingUrn)})}))
case"REALTIME_TYPING_OFF":return n.updateItem(Le(t.payload.conversationUrn),(function(e){return i(i({},e),{},{typingUrns:U(e.typingUrns,t.payload.typingUrn)})}))
case"ADD_NEW_MESSAGE_BY_ID":var f=t.payload,m=f.message,y=f.conversationId,v=m.optionalSendData.conversationState
return n.updateItem(Be(y),(function(e){return i(i({},e),{},{messages:e.messages.add([m]),typingUrns:U(e.typingUrns,m.senderUrn),quickReplies:en(e,e.quickReplies,m),state:null!=v?v:void 0})}))
case"ADD_NEW_MESSAGE_BY_CONVO_URN":return n.updateItem(Le(t.payload.conversationUrn),(function(e){var n=t.payload.message
return i(i({},e),{},{messages:e.messages.add([n]),typingUrns:U(e.typingUrns,n.senderUrn),quickReplies:en(e,e.quickReplies,n)})}))
case"CONVERSATION_LOADING":return n.updateItem(Be(t.payload.conversationId),(function(e){return i(i({},e),{},{status:i(i({},e.status),{},{loading:t.payload.loading})})}))
case"ADD_OLDER_MESSAGES":return n.updateItem(Be(t.payload.conversationUrn),(function(e){return i(i({},e),{},{messages:e.messages.add(t.payload.messages),metadata:i(i({},e.metadata),{},{prevCursor:t.payload.prevCursor}),status:i(i({},e.status),{},{fullyLoaded:t.payload.completed,loading:!1})})}))
case"ADD_NEW_MESSAGES":return n.updateItem(Be(t.payload.conversationUrn),(function(e){var n=e.messages.add(t.payload.messages)
return i(i({},e),{},{quickReplies:[],messages:n,metadata:i(i({},e.metadata),{},{syncToken:t.payload.syncToken,shouldClearCache:t.payload.shouldClearCache}),status:i(i({},e.status),{},{loading:!1})})}))
case"CONVERT_DRAFT_CONVERSATION":return n.find(Le(t.payload.conversation.entityUrn))?n.updateItem(Le(t.payload.conversation.entityUrn),(function(e){var n=t.payload.conversation.participants.filter(I(e.participants)),r=[].concat(g(e.participants),g(n))
return i(i(i({},e),t.payload.conversation),{},{participants:r,messages:e.messages.add(g(t.payload.conversation.messages)),clientId:t.payload.conversation.clientId})})):n.addItem(i(i({},t.payload.conversation),{},{clientId:t.payload.conversationId}))
case"ADD_OLDER_CONVERSATIONS":return n.addItems(t.payload.conversations,t.payload.writeCategories)
case"ADD_CONVERSATIONS":return n.addItems(t.payload.conversations)
case"ADD_CONVERSATION":return n.addItem(t.payload.conversation)
case"UPDATE_CONVERSATION_BY_URN":return n.updateItem(Le(t.payload.conversationUrn),(function(e){return Ye(e,t.payload.conversationUpdate)}))
case"UPDATE_CONVERSATIONS_BY_URN":return n.updateAny(Fe(M(t.payload.convoStatusUpdateMap)),(function(e){var n=t.payload.convoStatusUpdateMap[e.entityUrn]
if(!ze(n)&&n.seenReceiptsMap&&e.seenReceiptsMap){var r=tn(e.seenReceiptsMap,n.seenReceiptsMap),a=rn(r),o=i(i(i({},e),n),{},{seenReceiptsMap:a})
return Xe(e,o)}return Xe(e,n)}))
case"UPDATE_CONVERSATION_QUICK_REPLIES":return n.updateItem(Le(t.payload.conversationUrn),(function(e){return i(i({},e),{},{quickReplies:t.payload.quickReplies})}))
case"UPDATE_CONVERSATION_BY_MESSAGE_URN":var _=G(n,t.payload.messageUrn)
return _?n.updateItem(Be(_.entityUrn),(function(e){return t.payload.conversationUpdate.quickReplies?i(i({},e),{},{quickReplies:en(e,t.payload.conversationUpdate.quickReplies)}):i(i({},e),t.payload.conversationUpdate)})):n
case"UPDATE_ALL_CONVERSATIONS_IN_CATEGORIES":return n.updateAny((e=t.payload.categories,function(n){return void 0!==e.find((function(e){return n.categories.includes(e)}))}),(function(e){return Xe(e,t.payload.convoPartialState)}))
case"DELETE_CONVERSATION":return n.deleteItems(Le(t.payload.conversationUrn))
case"DELETE_CONVERSATIONS":return t.payload.clearAll?sn():n.deleteItems(Fe(t.payload.conversationUrns))
default:return n}},additionalData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0
return"DECORATE_MAILBOX"===n.type?n.payload:e},connected:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{api:!1,realtime:!1},n=arguments.length>1?arguments[1]:void 0
switch(n.type){case"CONNECT":return i(i({},e),{},{api:!0})
case"REALTIME_CONNECT":return i(i({},e),{},{realtime:n.payload})
default:return e}},status:function(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i({},Ue),r=arguments.length>1?arguments[1]:void 0
switch(r.type){case"MAILBOX_LOADING":return i(i({},t),{},{loading:r.payload.loading,lastRequestId:Zr(t.lastRequestId,r.requestId)})
case"ADD_OLDER_CONVERSATIONS":return i(i({},t),{},{nextCursor:null!==(e=r.payload.nextCursor)&&void 0!==e?e:t.nextCursor,fullyLoaded:r.payload.fullyLoaded,loading:!1,lastRequestId:Zr(t.lastRequestId,r.requestId)})
case"ADD_CONVERSATIONS":return i(i({},t),{},{loading:!1,syncToken:null!==(n=r.payload.syncToken)&&void 0!==n?n:t.syncToken,lastRequestId:Zr(t.lastRequestId,r.requestId)})
case"UPDATE_REQUEST_ID":return i(i({},t),{},{lastRequestId:Zr(t.lastRequestId,r.requestId)})
default:return r.requestId?i(i({},t),{},{lastRequestId:Zr(t.lastRequestId,r.requestId)}):t}},unreadCounts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{requestId:0},n=arguments.length>1?arguments[1]:void 0
return"UPDATE_MAILBOX_UNREAD_COUNT"===n.type?i(i({},e),n.payload):e}}),ni=function(e,n){return{type:"ADD_MAILBOX_PARTICIPANTS",payload:{participants:e},requestId:n}},ti=function(e,n){return{type:"REALTIME_TYPING_ON",payload:{conversationUrn:e,typingUrn:n}}},ri=function(e,n){return{type:"REALTIME_TYPING_OFF",payload:{conversationUrn:e,typingUrn:n}}},ii=function(e){return{type:"REALTIME_CONNECT",payload:e}},ai=function(e,n){return{type:"UPDATE_CONVERSATIONS_BY_URN",payload:{convoStatusUpdateMap:e},requestId:n}},oi=function(e,n){return{type:"DELETE_CONVERSATION",payload:{conversationUrn:e},requestId:n}},si=function(e){return{type:"DELETE_CONVERSATIONS",payload:{conversationUrns:e,clearAll:arguments.length>1&&void 0!==arguments[1]&&arguments[1]},requestId:arguments.length>2?arguments[2]:void 0}},ci=function(e,n,t){return{type:"ADD_CONVERSATION",payload:{conversation:e,participants:n},requestId:t}},di=function(e,n){return{type:"UPDATE_CONVERSATION_BY_URN",payload:{conversationUpdate:e,conversationUrn:n}}},ui=function(e,n){return{type:"ADD_CONVERSATIONS",payload:{syncToken:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,conversations:e,participants:n},requestId:arguments.length>3?arguments[3]:void 0}},pi=function(e,n,t){return{type:"ADD_NEW_MESSAGE_BY_ID",payload:{message:e,conversationId:n},requestId:t}},li=function(e,n){return{type:"CONVERSATION_LOADING",payload:{conversationId:e,loading:n}}},fi=function(e){return{type:"MAILBOX_LOADING",payload:{loading:e}}},mi=function(e,n,t,r,i){return{type:"ADD_OLDER_MESSAGES",payload:{messages:e,conversationUrn:n,completed:t,prevCursor:r},requestId:i}},yi=function(e,n,t,r,i){return{type:"ADD_NEW_MESSAGES",payload:{conversationUrn:n,messages:e,syncToken:t,shouldClearCache:r},requestId:i}},hi=function(e,n,t,r){return{type:"UPDATE_NEW_MESSAGE",payload:{message:e,messageId:n,conversationIdentifier:t},requestId:r}},gi=function(e,n,t){return{type:"UPDATE_MESSAGES",payload:{messageUpdateMap:e,conversationUrn:n},requestId:t}},vi=function(e,n,t){return{type:"UPDATE_REACTIONS_ON_MESSAGE",payload:{messageUrn:e,reaction:n},requestId:t}},_i=function(e,n,t){return{type:"UPDATE_CONVERSATION_BY_MESSAGE_URN",payload:{messageUrn:e,conversationUpdate:n},requestId:t}},Ti=function(e,n){return{type:"UPDATE_DRAFT_CONVERSATION_SENDING_STATUS",payload:{conversationId:e,sendingStatus:n}}},bi=function(e,n,t){return{type:"DELETE_MESSAGE",payload:{conversationId:e,messageClientId:n},requestId:t}},Ei=function(e,n){return{type:"DELETE_MESSAGES",payload:{conversationUrn:e,messageUrns:n,clearAll:arguments.length>2&&void 0!==arguments[2]&&arguments[2]},requestId:arguments.length>3?arguments[3]:void 0}},ki={quickReplies:{}},Ai=function(){return{topicToGraphQLQueryParams:{conversationsTopic:{queryId:Fn("realtime-conversation-update")||"".concat("messengerRealtimeDecoration",".").concat("482b614b64d67841aed30d0817b47921"),variables:{},extensions:{}},conversationDeletesTopic:{queryId:Fn("realtime-conversation-delete")||"".concat("messengerRealtimeDecoration",".").concat("f7025d03fc418cc84376d67b62e675f1"),variables:{},extensions:{}},messageReactionSummariesTopic:{queryId:Fn("realtime-reaction-summary")||"".concat("messengerRealtimeDecoration",".").concat("00c49be894a070931a1310f148c5c25b"),variables:{},extensions:{}},messageSeenReceiptsTopic:{queryId:Fn("realtime-seen-receipt")||"".concat("messengerRealtimeDecoration",".").concat("bdcf4ae95bae8078f1b65009a601a9f8"),variables:{},extensions:{}},messagesTopic:{queryId:Fn("realtime-message-update")||"".concat("messengerRealtimeDecoration",".").concat("fc3907a2e86aa836e5cb1a28e68c5adf"),variables:{},extensions:{}},replySuggestionTopicV2:{queryId:Fn("realtime-quick-reply")||"".concat("messengerRealtimeDecoration",".").concat("8c5d67b86a2b38128ec0f95f57893b18"),variables:{},extensions:{}},typingIndicatorsTopic:{queryId:Fn("realtime-typing-indicator")||"".concat("messengerRealtimeDecoration",".").concat("4cc9fee460e735c4f90cc00a9354ccf1"),variables:{},extensions:{}}}}},Si=function(e){var n={}
return e&&e.csrfToken&&(n={"csrf-token":e.csrfToken}),i({"x-RestLi-Protocol-Version":"2.0.0","x-li-query-accept":"application/graphql","x-li-track":JSON.stringify({mpName:e&&e.mpName?e.mpName:_r.mpName}),"x-li-query-map":JSON.stringify(Ai())},n)},Ci=function(e,n,t,r,a,o,s){try{switch(s&&function(e,n,t){if(t&&t.trackingFireEvent){var r={publisherTrackingId:e.publisherTrackingId||null,realtimeEventId:e.id,realtimeTrackingId:e.trackingId,topicUrn:e.topic,consumedTime:n}
t.trackingFireEvent("RealtimeEventConsumedEvent",r)}}(n,o,s),n.topic){case"urn:li-realtime:typingIndicatorsTopic:urn:li-realtime:myself":var c,u
Ii(n,"TypingIndicator","doDecorateTypingIndicatorMessengerRealtimeDecoration",e)
var p=null===(c=n.payload.data)||void 0===c||null===(u=c.doDecorateTypingIndicatorMessengerRealtimeDecoration)||void 0===u?void 0:u.result
if(p){var l=p.conversation.entityUrn,f=p.typingParticipant.hostIdentityUrn
r>=0&&function(e,n,t,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:5
r(i(e,n))
var s="".concat(e,",").concat(n)
t.has(s)&&clearTimeout(t.get(s))
var c=setTimeout((function(){r(a(e,n))}),1e3*o)
t.set(s,c)}(l,f,t,a.dispatch,ti,ri,r)}break
case"urn:li-realtime:messagesTopic:urn:li-realtime:myself":if(Ri(n,"NewMessage",e)){var m
a.triggerChainSync({pageInstance:null==s||null===(m=s.getPageInstance)||void 0===m?void 0:m.call(s)})}else{var y,h
Ii(n,"NewMessage","doDecorateMessageMessengerRealtimeDecoration",e)
var g=null===(y=n.payload.data)||void 0===y||null===(h=y.doDecorateMessageMessengerRealtimeDecoration)||void 0===h?void 0:h.result
if(g&&g.sender){var v,_,T,b=g.backendConversationUrn,k=g.backendUrn,A=g.body,S=g.conversation,C=g.deliveredAt,I=g.entityUrn,R=g.inlineWarning,O=g.messageBodyRenderFormat,M=g.originToken,w=g.previousMessages,N=g.reactionSummaries,P=g.renderContent,D=g.sender,U=g.subject,x=null!==(v=(null!==(_=null==w?void 0:w.elements)&&void 0!==_?_:[])[0])&&void 0!==v?v:null,L=S.entityUrn,F=Or(D),B=Lr(Tr(P)),q=B.data,j=B.participants,V=br({senderUrn:F.hostIdentityUrn,content:A,optionalSendData:q,entityUrn:I,inlineWarning:R,messageBodyRenderFormat:O,reactions:Er(N),status:"Delivered",clientId:M,deliveredAt:new Date(C),backendConversationUrn:b,backendUrn:k,subject:U}),H=ki.quickReplies[I]?ki.quickReplies[I]:[]
delete ki.quickReplies[I]
var G=i(i({},S),{},{quickReplies:H}),K=kr(G),$=on(j,Ir(S.conversationParticipants))
a.dispatch(ni($)),a.handleRealtimeNewMessage(L,K,V,x,{pageInstance:null==s||null===(T=s.getPageInstance)||void 0===T?void 0:T.call(s)}).catch((function(n){zr(e)(Pe.fromRealtimeErrorMemo("EVENT_ERROR",n))}))}}break
case"urn:li-realtime:conversationsTopic:urn:li-realtime:myself":if(Ri(n,"ConversationUpdate",e)){var W
a.triggerChainSync({pageInstance:null==s||null===(W=s.getPageInstance)||void 0===W?void 0:W.call(s)})}else{var Q,z
Ii(n,"ConversationUpdate","doDecorateConversationMessengerRealtimeDecoration",e)
var Y=null===(Q=n.payload.data)||void 0===Q||null===(z=Q.doDecorateConversationMessengerRealtimeDecoration)||void 0===z?void 0:z.result
if(Y){var X=Y.entityUrn,J=kr(Y)
a.dispatch(di(J,X))}}break
case"urn:li-realtime:conversationDeletesTopic:urn:li-realtime:myself":if(Ri(n,"ConversationDelete",e)){var Z
a.triggerChainSync({pageInstance:null==s||null===(Z=s.getPageInstance)||void 0===Z?void 0:Z.call(s)})}else{var ee,ne
Ii(n,"ConversationDelete","doDecorateConversationDeleteMessengerRealtimeDecoration",e)
var te=null===(ee=n.payload.data)||void 0===ee||null===(ne=ee.doDecorateConversationDeleteMessengerRealtimeDecoration)||void 0===ne?void 0:ne.result
if(te){var re=te.entityUrn
a.dispatch(oi(re))}}break
case"urn:li-realtime:messageSeenReceiptsTopic:urn:li-realtime:myself":var ie,ae
Ii(n,"SeenReceipt","doDecorateSeenReceiptMessengerRealtimeDecoration",e)
var oe=null===(ie=n.payload.data)||void 0===ie||null===(ae=ie.doDecorateSeenReceiptMessengerRealtimeDecoration)||void 0===ae?void 0:ae.result
if(oe&&oe.message){var se=oe.message.entityUrn,ce=d({},se,[{participantUrn:oe.seenByParticipant.hostIdentityUrn,seenAt:oe.seenAt}])
a.dispatch(_i(se,{seenReceiptsMap:ce}))}break
case"urn:li-realtime:replySuggestionTopicV2:urn:li-realtime:myself":var de,ue
Ii(n,"QuickReplies","doDecorateQuickRepliesMessengerRealtimeDecoration",e)
var pe=null===(de=n.payload.data)||void 0===de||null===(ue=de.doDecorateQuickRepliesMessengerRealtimeDecoration)||void 0===ue?void 0:ue.result
if(pe&&pe.length>0&&pe[0].message){var le=pe[0].message,fe=pe.filter(E)
ki.quickReplies=d({},le.entityUrn,fe),a.dispatch(_i(le.entityUrn,{quickReplies:fe}))}break
case"urn:li-realtime:messageReactionSummariesTopic:urn:li-realtime:myself":var me,ye
Ii(n,"ReactionSummary","doDecorateRealtimeReactionSummaryMessengerRealtimeDecoration",e)
var he=null===(me=n.payload.data)||void 0===me||null===(ye=me.doDecorateRealtimeReactionSummaryMessengerRealtimeDecoration)||void 0===ye?void 0:ye.result
if(he&&he.reactionSummary){var ge=he.message.entityUrn
a.dispatch(vi(ge,he.reactionSummary))}}}catch(n){var ve=Re.EVENT_ERROR
zr(e)(new Pe("realtime",ve.code,ve.message,n))}},Ii=function(e,n,t,r){var i=e.payload.data
if(i){var a=i[t]
if(a){if(!a.result){var o=Re.PAYLOAD_RESULT_DOES_NOT_EXIST
zr(r)(new Pe("realtime",o.code,'"'.concat(n,'": ').concat(o.message)))}}else{var s=Re.PAYLOAD_DECORATION_DOES_NOT_EXIST
zr(r)(new Pe("realtime",s.code,'"'.concat(n,'": ').concat(s.message)))}}else{var c=Re.PAYLOAD_DATA_DOES_NOT_EXIST
zr(r)(new Pe("realtime",c.code,"".concat(n,": ").concat(c.message)))}},Ri=function(e,n,t){var r=e.payload.errors
if(!r)return!1
var i=r.map((function(e){return Pe.buildGraphQLPayloadError(e,n)}))
return zr(t)(Pe.fromRealtimeErrorMemo("EVENT_RESPONSE_ERROR",i)),!0},Oi=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2
o(this,e),d(this,"_maxRetryCount",void 0),d(this,"_retryTimeoutInSecond",void 0),d(this,"_backoffMultiplier",void 0),d(this,"_attemptCount",0),d(this,"_startTime",Date.now()),d(this,"_currentTask",null),d(this,"_messageId",void 0),d(this,"_tryFn",void 0),d(this,"_cancelCondition",void 0),d(this,"_retryCondition",void 0),d(this,"_internalResolve",void 0),d(this,"_internalReject",void 0),this._messageId=n,this._backoffMultiplier=t,this.reset()}return c(e,[{key:"retryCount",get:function(){return this._attemptCount-1}},{key:"_backoff",get:function(){return Math.min(Math.pow(2,this._attemptCount)*this._backoffMultiplier,640)}},{key:"try",value:function(e){return this._tryFn=e,this}},{key:"times",value:function(e){return this._maxRetryCount=e,this}},{key:"timeoutAfter",value:function(e){return this._retryTimeoutInSecond=e,this}},{key:"cancelIf",value:function(e){return this._cancelCondition=e,this}},{key:"retryIf",value:function(e){return this._retryCondition=e,this}},{key:"start",value:function(){var e=this
this._startTime=Date.now()
var n=new Promise((function(n,t){e._internalResolve=n,e._internalReject=t}))
return this._cycle(),n}},{key:"cancel",value:function(){this._currentTask&&(this._currentTask.cancel(),this._currentTask=null),this._stopRetrying(Pe.fromClientErrorMemo("RETRY_CANCELLED"))}},{key:"reset",value:function(){this._attemptCount=0,this._startTime=Date.now()}},{key:"_cycle",value:function(){var e=this
this._currentTask=null,this._attemptCount++,void 0!==this._tryFn?this._tryFn(this._attemptCount).then((function(n){var t
return null===(t=e._internalResolve)||void 0===t||t.call(e,n),n})).catch((function(n){var t
if(null!==(t=e._cancelCondition)&&void 0!==t&&t.call(e,n)||e._exceedMaxRetryCount()||e._exceedRetryTimeout())e._stopRetrying(n)
else if(e._retryCondition&&e._messageId&&!e._retryCondition(e._messageId)){var r
null===(r=e._internalResolve)||void 0===r||r.call(e,n)}else{var i=new ve(e._cycle.bind(e))
i.start(1e3*e._backoff),e._currentTask=i}})):this._stopRetrying(new Error("No function supplied to retry"))}},{key:"_stopRetrying",value:function(e){var n
null===(n=this._internalReject)||void 0===n||n.call(this,e)}},{key:"_exceedMaxRetryCount",value:function(){return void 0!==this._maxRetryCount&&this._attemptCount>this._maxRetryCount}},{key:"_exceedRetryTimeout",value:function(){return void 0!==this._retryTimeoutInSecond&&(Date.now()-this._startTime)/1e3+this._backoff>this._retryTimeoutInSecond}}]),e}(),Mi=function(e,n,t,r){if(t&&r){var i=e?e.messages:null,a=i&&i.length>1?i.at(i.length-2):null,o={funnelBody:{clientSend:{isFirstMessage:!e||1===e.messages.length,isSelfReply:!(!a||!n)&&a.senderUrn===n.senderUrn,messagingThreadUrn:e?e.backendUrn:null,messagingMessageUrn:n?n.backendUrn:null,sourceType:null==t?void 0:t.sourceType,previousMessageCreatedTime:a?a.deliveredAt.getTime():null,previousMessagingMessageUrn:a?a.backendUrn:null}},trackingId:t.trackingId,funnelStep:"CLIENT_SEND"}
t.messageComposeFlowTrackingId&&(o.messageComposeFlowTrackingId=t.messageComposeFlowTrackingId),r&&r("MessageSendFunnelTrackingEvent",o)}}
function wi(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]
if(!t){if(Array.isArray(e)||(t=Li(e))||n&&e&&"number"==typeof e.length){t&&(e=t)
var r=0,i=function(){}
return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1
return{s:function(){t=t.call(e)},n:function(){var e=t.next()
return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw a}}}}function Ni(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Pi(e,n){for(var t=0;t<n.length;t++){var r=n[t]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Di(e,n,t){return n&&Pi(e.prototype,n),t&&Pi(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ui(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function xi(e){return function(e){if(Array.isArray(e))return Fi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Li(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Li(e,n){if(e){if("string"==typeof e)return Fi(e,n)
var t=Object.prototype.toString.call(e).slice(8,-1)
return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Fi(e,n):void 0}}function Fi(e,n){(null==n||n>e.length)&&(n=e.length)
for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t]
return r}function Bi(e){return(Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var qi,ji=new Uint8Array(16),Vi=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i
function Hi(e){return"string"==typeof e&&Vi.test(e)}for(var Gi=[],Ki=0;Ki<256;++Ki)Gi.push((Ki+256).toString(16).substr(1))
var $i=null
if("undefined"==typeof crypto||!crypto.getRandomValues){var Wi=("undefined"!=typeof FastBoot?FastBoot.require:require)("crypto")
if(Wi){var Qi=new Uint8Array(256),zi=Qi.length
$i={rng:function(){return zi>Qi.length-16&&(Wi.randomFillSync(Qi),zi=0),Qi.slice(zi,zi+=16)}}}}function Yi(){return function(e,n,t){var r=(e=e||{}).random||(e.rng||function(){if(!qi&&!(qi="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")
return qi(ji)})()
if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0
for(var i=0;i<16;++i)n[t+i]=r[i]
return n}return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(Gi[e[n+0]]+Gi[e[n+1]]+Gi[e[n+2]]+Gi[e[n+3]]+"-"+Gi[e[n+4]]+Gi[e[n+5]]+"-"+Gi[e[n+6]]+Gi[e[n+7]]+"-"+Gi[e[n+8]]+Gi[e[n+9]]+"-"+Gi[e[n+10]]+Gi[e[n+11]]+Gi[e[n+12]]+Gi[e[n+13]]+Gi[e[n+14]]+Gi[e[n+15]]).toLowerCase()
if(!Hi(t))throw TypeError("Stringified UUID is invalid")
return t}(r)}($i,new Array(16),0)}function Xi(e){return xi(e).map((function(e){return String.fromCharCode(e)})).join("")}function Ji(){return Xi(Yi())}"object"===("undefined"==typeof crypto?"undefined":Bi(crypto))&&crypto.randomUUID
var Zi=/^[a-zA-Z0-9/+]+[=]+$/
function ea(e){return function(e){if(!Hi(e))throw TypeError("Invalid UUID")
var n,t=new Uint8Array(16)
return t[0]=(n=parseInt(e.slice(0,8),16))>>>24,t[1]=n>>>16&255,t[2]=n>>>8&255,t[3]=255&n,t[4]=(n=parseInt(e.slice(9,13),16))>>>8,t[5]=255&n,t[6]=(n=parseInt(e.slice(14,18),16))>>>8,t[7]=255&n,t[8]=(n=parseInt(e.slice(19,23),16))>>>8,t[9]=255&n,t[10]=(n=parseInt(e.slice(24,36),16))/1099511627776&255,t[11]=n/4294967296&255,t[12]=n>>>24&255,t[13]=n>>>16&255,t[14]=n>>>8&255,t[15]=255&n,t}(e)}function na(e,n){return{pageUrn:ra(e),trackingId:n||function(e){for(var n,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[],i=0,a=e.length,o=a%3,s=a-o;i<s;)n=e[i]<<16,n|=e[i+1]<<8,n|=e[i+2],r.push(t.charAt(n>>>18&63)),r.push(t.charAt(n>>>12&63)),r.push(t.charAt(n>>>6&63)),r.push(t.charAt(63&n)),i+=3
switch(o){case 2:n=e[i]<<16,n|=e[i+1]<<8,r.push(t.charAt(n>>>18&63)),r.push(t.charAt(n>>>12&63)),r.push(t.charAt(n>>>6&63)),r.push("=")
break
case 1:n=e[i]<<16,r.push(t.charAt(n>>>18&63)),r.push(t.charAt(n>>>12&63)),r.push("="),r.push("=")}return r.join("")}(Yi())}}function ta(e,n){return"urn:li:control:".concat(e,"-").concat(n)}function ra(e){return"urn:li:page:".concat(e)}function ia(e,n){return{pageInstance:n.assign({},e.pageInstance),pageKey:e.pageKey,applicationInstance:e.applicationInstance}}function aa(e,n){return void 0!==n.allSettled?n.allSettled(e):function(e){return new Promise((function(n){var t=new Set,r=function(e){t.delete(e),0===t.size&&n()}
0===e.length?n():e.map((function(e){return e.then((function(){return r(e)})).catch((function(){return r(e)}))}))}))}(e)}function oa(e){var n=[]
return e.forEach((function(e){return n.push(e)})),n}function sa(e,n,t){var r=e.get(n)
r&&r.push(t)||e.set(n,[t])}function ca(e,n,t){var r=e.get(n)
r&&r.splice(r.indexOf(t)>>>0,1)}var da,ua,pa=(da=new Map,ua=new Map,{on:function(e,n){sa(da,e,n)},before:function(e,n){sa(ua,e,n)},off:function(e,n){ca(da,e,n)},offBefore:function(e,n){ca(ua,e,n)},emit:function(e,n){(ua.get(e)||[]).concat(da.get(e)||[]).slice().map((function(e){e(n)}))},clear:function(){ua.clear(),da.clear()}})
if("undefined"!=typeof document&&"undefined"!=typeof window){var la=function(e){"pagehide"!==e.type&&"hidden"!==document.visibilityState||pa.emit("internal:hide",e)}
document.addEventListener("visibilitychange",la),window.addEventListener("pagehide",la)}var fa=Uint8Array,ma=Uint16Array,ya=Uint32Array,ha=new fa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ga=new fa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),va=new fa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_a=function(e,n){for(var t=new ma(31),r=0;r<31;++r)t[r]=n+=1<<e[r-1]
var i=new ya(t[30])
for(r=1;r<30;++r)for(var a=t[r];a<t[r+1];++a)i[a]=a-t[r]<<5|r
return[t,i]},Ta=_a(ha,2),ba=Ta[0],Ea=Ta[1]
ba[28]=258,Ea[258]=28
for(var ka=_a(ga,0)[1],Aa=new ma(32768),Sa=0;Sa<32768;++Sa){var Ca=(43690&Sa)>>>1|(21845&Sa)<<1
Ca=(61680&(Ca=(52428&Ca)>>>2|(13107&Ca)<<2))>>>4|(3855&Ca)<<4,Aa[Sa]=((65280&Ca)>>>8|(255&Ca)<<8)>>>1}var Ia=function(e,n,t){for(var r=e.length,i=0,a=new ma(n);i<r;++i)e[i]&&++a[e[i]-1]
var o,s=new ma(n)
for(i=0;i<n;++i)s[i]=s[i-1]+a[i-1]<<1
if(t){o=new ma(1<<n)
var c=15-n
for(i=0;i<r;++i)if(e[i])for(var d=i<<4|e[i],u=n-e[i],p=s[e[i]-1]++<<u,l=p|(1<<u)-1;p<=l;++p)o[Aa[p]>>>c]=d}else for(o=new ma(r),i=0;i<r;++i)e[i]&&(o[i]=Aa[s[e[i]-1]++]>>>15-e[i])
return o},Ra=new fa(288)
for(Sa=0;Sa<144;++Sa)Ra[Sa]=8
for(Sa=144;Sa<256;++Sa)Ra[Sa]=9
for(Sa=256;Sa<280;++Sa)Ra[Sa]=7
for(Sa=280;Sa<288;++Sa)Ra[Sa]=8
var Oa=new fa(32)
for(Sa=0;Sa<32;++Sa)Oa[Sa]=5
var Ma=Ia(Ra,9,0),wa=Ia(Oa,5,0),Na=function(e){return(e+7)/8|0},Pa=function(e,n,t){t<<=7&n
var r=n/8|0
e[r]|=t,e[r+1]|=t>>>8},Da=function(e,n,t){t<<=7&n
var r=n/8|0
e[r]|=t,e[r+1]|=t>>>8,e[r+2]|=t>>>16},Ua=function(e,n){for(var t=[],r=0;r<e.length;++r)e[r]&&t.push({s:r,f:e[r]})
var i=t.length,a=t.slice()
if(!i)return[Va,0]
if(1==i){var o=new fa(t[0].s+1)
return o[t[0].s]=1,[o,1]}t.sort((function(e,n){return e.f-n.f})),t.push({s:-1,f:25001})
var s=t[0],c=t[1],d=0,u=1,p=2
for(t[0]={s:-1,f:s.f+c.f,l:s,r:c};u!=i-1;)s=t[t[d].f<t[p].f?d++:p++],c=t[d!=u&&t[d].f<t[p].f?d++:p++],t[u++]={s:-1,f:s.f+c.f,l:s,r:c}
var l=a[0].s
for(r=1;r<i;++r)a[r].s>l&&(l=a[r].s)
var f=new ma(l+1),m=xa(t[u-1],f,0)
if(m>n){r=0
var y=0,h=m-n,g=1<<h
for(a.sort((function(e,n){return f[n.s]-f[e.s]||e.f-n.f}));r<i;++r){var v=a[r].s
if(!(f[v]>n))break
y+=g-(1<<m-f[v]),f[v]=n}for(y>>>=h;y>0;){var _=a[r].s
f[_]<n?y-=1<<n-f[_]++-1:++r}for(;r>=0&&y;--r){var T=a[r].s
f[T]==n&&(--f[T],++y)}m=n}return[new fa(f),m]},xa=function e(n,t,r){return-1==n.s?Math.max(e(n.l,t,r+1),e(n.r,t,r+1)):t[n.s]=r},La=function(e){for(var n=e.length;n&&!e[--n];);for(var t=new ma(++n),r=0,i=e[0],a=1,o=function(e){t[r++]=e},s=1;s<=n;++s)if(e[s]==i&&s!=n)++a
else{if(!i&&a>2){for(;a>138;a-=138)o(32754)
a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304)
a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i)
a=1,i=e[s]}return[t.subarray(0,r),n]},Fa=function(e,n){for(var t=0,r=0;r<n.length;++r)t+=e[r]*n[r]
return t},Ba=function(e,n,t){var r=t.length,i=Na(n+2)
e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1]
for(var a=0;a<r;++a)e[i+a+4]=t[a]
return 8*(i+4+r)},qa=function(e,n,t,r,i,a,o,s,c,d,u){Pa(n,u++,t),++i[256]
for(var p=Ua(i,15),l=p[0],f=p[1],m=Ua(a,15),y=m[0],h=m[1],g=La(l),v=g[0],_=g[1],T=La(y),b=T[0],E=T[1],k=new ma(19),A=0;A<v.length;++A)k[31&v[A]]++
for(A=0;A<b.length;++A)k[31&b[A]]++
for(var S=Ua(k,7),C=S[0],I=S[1],R=19;R>4&&!C[va[R-1]];--R);var O,M,w,N,P=d+5<<3,D=Fa(i,Ra)+Fa(a,Oa)+o,U=Fa(i,l)+Fa(a,y)+o+14+3*R+Fa(k,C)+(2*k[16]+3*k[17]+7*k[18])
if(P<=D&&P<=U)return Ba(n,u,e.subarray(c,c+d))
if(Pa(n,u,1+(U<D)),u+=2,U<D){O=Ia(l,f,0),M=l,w=Ia(y,h,0),N=y
var x=Ia(C,I,0)
for(Pa(n,u,_-257),Pa(n,u+5,E-1),Pa(n,u+10,R-4),u+=14,A=0;A<R;++A)Pa(n,u+3*A,C[va[A]])
u+=3*R
for(var L=[v,b],F=0;F<2;++F){var B=L[F]
for(A=0;A<B.length;++A){var q=31&B[A]
Pa(n,u,x[q]),u+=C[q],q>15&&(Pa(n,u,B[A]>>>5&127),u+=B[A]>>>12)}}}else O=Ma,M=Ra,w=wa,N=Oa
for(A=0;A<s;++A)if(r[A]>255){q=r[A]>>>18&31,Da(n,u,O[q+257]),u+=M[q+257],q>7&&(Pa(n,u,r[A]>>>23&31),u+=ha[q])
var j=31&r[A]
Da(n,u,w[j]),u+=N[j],j>3&&(Da(n,u,r[A]>>>5&8191),u+=ga[j])}else Da(n,u,O[r[A]]),u+=M[r[A]]
return Da(n,u,O[256]),u+M[256]},ja=new ya([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Va=new fa(0),Ha=function(){for(var e=new Int32Array(256),n=0;n<256;++n){for(var t=n,r=9;--r;)t=(1&t&&-306674912)^t>>>1
e[n]=t}return e}(),Ga=function(e,n,t){for(;t;++n)e[n]=t,t>>>=8},Ka="undefined"!=typeof TextDecoder&&new TextDecoder
try{Ka.decode(Va,{stream:!0})}catch(_s){}function $a(){return"undefined"!=typeof window&&"function"==typeof window.fetch}function Wa(){try{return $a()&&"keepalive"in new Request("")}catch(e){return!1}}function Qa(e){var n=e.body,t=e.keepalive,r=e.headers,i=e.compress
r["content-type"]||(r["content-type"]="text/plain;charset=UTF-8")
var a=n
if(i&&"undefined"!=typeof TextEncoder)try{a=function(e,n){n||(n={})
var t=function(){var e=-1
return{p:function(n){for(var t=e,r=0;r<n.length;++r)t=Ha[255&t^n[r]]^t>>>8
e=t},d:function(){return~e}}}(),r=e.length
t.p(e)
var i,a,o,s=(i=e,a=n,o=function(e){return 10+(e.filename&&e.filename.length+1||0)}(n),function(e,n,t,r,i,a){var o=e.length,s=new fa(r+o+5*(1+Math.ceil(o/7e3))+8),c=s.subarray(r,s.length-8),d=0
if(!n||o<8)for(var u=0;u<=o;u+=65535){var p=u+65535
p>=o&&(c[d>>3]=true),d=Ba(c,d+1,e.subarray(u,p))}else{for(var l=ja[n-1],f=l>>>13,m=8191&l,y=(1<<t)-1,h=new ma(32768),g=new ma(y+1),v=Math.ceil(t/3),_=2*v,T=function(n){return(e[n]^e[n+1]<<v^e[n+2]<<_)&y},b=new ya(25e3),E=new ma(288),k=new ma(32),A=0,S=0,C=(u=0,0),I=0,R=0;u<o;++u){var O=T(u),M=32767&u,w=g[O]
if(h[M]=w,g[O]=M,I<=u){var N=o-u
if((A>7e3||C>24576)&&N>423){d=qa(e,c,0,b,E,k,S,C,R,u-R,d),C=A=S=0,R=u
for(var P=0;P<286;++P)E[P]=0
for(P=0;P<30;++P)k[P]=0}var D=2,U=0,x=m,L=M-w&32767
if(N>2&&O==T(u-L))for(var F=Math.min(f,N)-1,B=Math.min(32767,u),q=Math.min(258,N);L<=B&&--x&&M!=w;){if(e[u+D]==e[u+D-L]){for(var j=0;j<q&&e[u+j]==e[u+j-L];++j);if(j>D){if(D=j,U=L,j>F)break
var V=Math.min(L,j-2),H=0
for(P=0;P<V;++P){var G=u-L+P+32768&32767,K=G-h[G]+32768&32767
K>H&&(H=K,w=G)}}}L+=(M=w)-(w=h[M])+32768&32767}if(U){b[C++]=268435456|Ea[D]<<18|ka[U]
var $=31&Ea[D],W=31&ka[U]
S+=ha[$]+ga[W],++E[257+$],++k[W],I=u+D,++A}else b[C++]=e[u],++E[e[u]]}}d=qa(e,c,true,b,E,k,S,C,R,u-R,d)}return function(e,n,t){(null==n||n<0)&&(n=0),(null==t||t>e.length)&&(t=e.length)
var r=new(2==e.BYTES_PER_ELEMENT?ma:4==e.BYTES_PER_ELEMENT?ya:fa)(t-n)
return r.set(e.subarray(n,t)),r}(s,0,r+Na(d)+8)}(i,null==a.level?6:a.level,null==a.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(i.length)))):12+a.mem,o)),c=s.length
return function(e,n){var t=n.filename
if(e[0]=31,e[1]=139,e[2]=8,e[8]=n.level<2?4:9==n.level?2:0,e[9]=3,0!=n.mtime&&Ga(e,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),t){e[3]=8
for(var r=0;r<=t.length;++r)e[r+10]=t.charCodeAt(r)}}(s,n),Ga(s,c-8,t.d()),Ga(s,c-4,r),s}((new TextEncoder).encode(n)),r["content-encoding"]="gzip"}catch(e){}return{body:a,keepalive:t,credentials:"include",headers:r,method:"POST",mode:"cors"}}function za(e){return e&&"message"in e?e.message:"UNKNOWN_ERROR"}var Ya,Xa="undefined"!=typeof navigator&&"sendBeacon"in navigator,Ja=Wa()?function(e,n,t,r){return new Promise((function(i){fetch(e,Qa({body:n,keepalive:!0,headers:t,compress:r})).catch((function(){return fetch(e,Qa({body:n,keepalive:!1,headers:t,compress:r}))})).then((function(e){e.ok?i({type:"success",drop:!1,statusCode:e.status}):i({type:"response",drop:!0,statusCode:e.status,rawError:e.statusText})}),(function(e){return i({type:"network",drop:!0,rawError:za(e)})}))}))}:function(e,n,t,r){return new Promise((function(i){if(Xa){var a=!1
try{a=navigator.sendBeacon(e,n)}catch(e){}if(a)return void i({type:"unknown",drop:!1})}fetch(e,Qa({body:n,keepalive:!1,headers:t,compress:r})).then((function(e){e.ok?i({type:"success",drop:!1,statusCode:200}):i({type:"response",drop:!0,statusCode:e.status,rawError:e.statusText})}),(function(e){return i({type:"network",drop:!0,rawError:za(e)})}))}))}
function Za(e){return new Promise((function(n,t){e.oncomplete=e.onsuccess=function(){return n(e.result)},e.onabort=e.onerror=function(){return t(e.error)}}))}function eo(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"key",r=arguments.length>3?arguments[3]:void 0,i=indexedDB.open(e)
i.onupgradeneeded=function(){try{i.result.createObjectStore(n,{keyPath:t})}catch(e){null==r||r.onError(e)}}
var a=new Promise((function(e,n){i.onsuccess=function(){var n=i.result
n.onversionchange=function(){return n.close()},e(n),null==r||r.onSuccess()},i.onerror=function(){n(i.error),null==r||r.onError(i.error)}}))
return function(e,t){return a.then((function(r){return t(r.transaction(n,e).objectStore(n))}))}}function no(){return Ya||(Ya=eo("idb-queue","default")),Ya}function to(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{maxNumber:1e3,batchEvictionNumber:300},t=0,r=null
return e.openKeyCursor().onsuccess=function(){var i=this.result
i&&t++<n.batchEvictionNumber?(r=i.key,i.continue()):null!=r&&e.delete(IDBKeyRange.upperBound(r))},Za(e.transaction)}var ro=!1
function io(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{maxNumber:1e3,batchEvictionNumber:300},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:no()
return t("readwrite",(function(t){return t.put(e),Za(t.count()).then((function(e){if(!(e<=n.maxNumber))return to(t,n)}))})).catch((function(e){if(e&&"QuotaExceededError"===e.name)return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{maxNumber:1e3,batchEvictionNumber:300}
return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:no())("readwrite",(function(n){return to(n,e)}))}(n,t)}))}function ao(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{maxNumber:1e3,batchEvictionNumber:300},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:no()
return ro?Promise.resolve():io(e,n,t)}function oo(e,n,t){return n("readonly",(function(n){var r=[]
return n.openCursor(null,t).onsuccess=function(){var n=this.result
n&&(r.push(n.value),(e<0||r.length<e)&&n.continue())},Za(n.transaction).then((function(){return r}))}))}function so(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0
return!n||t<1||(e[n]=JSON.stringify({attempt:t,errorCode:r})),e}function co(e){"undefined"!=typeof window&&window.__DEBUG_BEACON_TRANSPORTER&&console.debug("[beacon-transporter] ",e())}function uo(e){"undefined"!=typeof window&&window.__DEBUG_BEACON_TRANSPORTER&&console.error("[beacon-transporter] ",e())}function po(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{timeRemaining:5,timeout:1e4}
"undefined"==typeof requestIdleCallback?setTimeout(e,n.fallbackTimeout||10):function t(){requestIdleCallback((function(r){r.timeRemaining()>n.timeRemaining||r.didTimeout?e():t()}),{timeout:n.timeout})}()}var lo=function(){function e(n){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1]
Ni(this,e),Ui(this,"config",void 0),Ui(this,"compress",void 0),Ui(this,"throttleControl",void 0),Ui(this,"withStore",void 0),Ui(this,"disablePersistence",!1),this.config=n,this.compress=r
var i=n.measureIDB
i&&performance.mark(i.createStartMark),this.withStore=eo(n.idbName,"beacons","timestamp",{onSuccess:function(){i&&performance.measure(i.createSuccessMeasure,i.createStartMark)},onError:function(){i&&performance.measure(i.createFailMeasure,i.createStartMark),t.disablePersistence=!0}}),this.throttleControl=function(e,n){var t=0
return{throttledFn:function(){var r=Date.now()
r-t>n&&(co((function(){return"[throttle] Run fn() at "+String(r)})),e(),t=r)},resetThrottle:function(){t=0}}}(this.replayEntries.bind(this),n.throttleWait)}return Di(e,[{key:"onNotify",value:function(){this.disablePersistence||this.throttleControl.throttledFn()}},{key:"push",value:function(e){var n=this
if(!this.disablePersistence){var t=function(){co((function(){return"Persisting to DB "+e.url})),ao(e,n.config,n.withStore).then((function(){n.throttleControl.resetThrottle(),co((function(){return"push completed"}))})).catch((function(){n.disablePersistence=!0,uo((function(){return"push failed"}))}))}
this.config.useIdle?po(t):t()}}},{key:"clear",value:function(){var e=this
return this.disablePersistence?Promise.resolve():function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:no()
return ro=!0,e("readwrite",(function(e){return e.clear(),Za(e.transaction).finally((function(){return ro=!1}))}))}(this.withStore).catch((function(){e.disablePersistence=!0,uo((function(){return"clear failed"}))}))}},{key:"peek",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1
return this.disablePersistence?Promise.resolve([]):function(){return oo(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:no(),"next")}(n,this.withStore).catch((function(){return e.disablePersistence=!0,uo((function(){return"peek failed"})),[]}))}},{key:"peekBack",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1
return this.disablePersistence?Promise.resolve([]):function(){return oo(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:no(),"prev")}(n,this.withStore).catch((function(){return e.disablePersistence=!0,uo((function(){return"peekBack failed"})),[]}))}},{key:"replayEntries",value:function(){var e=this
if(!this.disablePersistence){var n=function(){co((function(){return"Replaying entry: shift from store"})),function(){return function(e,n,t){return n("readwrite",(function(n){var t=[]
return n.openCursor(null,"next").onsuccess=function(){var n=this.result
n&&(t.push(n.value),n.delete(),(e<0||t.length<e)&&n.continue())},Za(n.transaction).then((function(){return t}))}))}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:no())}(1,e.withStore).then((function(n){if(n.length>0){var t,r,i=n[0],a=i.url,o=i.body,s=i.headers,c=i.timestamp,d=i.statusCode,u=i.attemptCount
return co((function(){return"header: ".concat(String(e.config.headerName),"; attemptCount: ").concat(u)})),null===(t=(r=e.config).onBeforeRetry)||void 0===t||t.call(r,o),Ja(a,o,so(s,e.config.headerName,u,d),e.compress).then((function(n){if("unknown"===n.type||"success"===n.type){var t,r
null===(t=(r=e.config).onResult)||void 0===t||t.call(r,n,o),e.replayEntries()}else{var i,s,p,l,f,m
if(u+1>e.config.attemptLimit)return co((function(){return"Exceeded attempt count, dropping the entry: "+JSON.stringify({url:a,timestamp:c,statusCode:d},null,2)})),n.drop=!0,void(null===(i=(s=e.config).onResult)||void 0===i||i.call(s,n,o))
if("network"===n.type||e.config.statusCodes.includes(n.statusCode))return n.drop=!1,null===(p=(l=e.config).onResult)||void 0===p||p.call(l,n,o),co((function(){return"Replaying the entry failed, pushing back to IDB: "+JSON.stringify({url:a,timestamp:c,statusCode:d},null,2)})),ao({url:a,body:o,timestamp:c,statusCode:d,attemptCount:u+1},e.config,e.withStore)
n.drop=!0,null===(f=(m=e.config).onResult)||void 0===f||f.call(m,n,o)}}))}})).catch((function(n){e.disablePersistence=!0,n&&n.message&&uo((function(){return"Replay entry failed: ".concat(n.message)}))}))}
this.config.useIdle?po(n):n()}}}]),e}(),fo=function(){function e(){Ni(this,e)}return Di(e,[{key:"onNotify",value:function(){}},{key:"push",value:function(){}},{key:"clear",value:function(){return Promise.resolve()}},{key:"peek",value:function(){return Promise.resolve([])}},{key:"peekBack",value:function(){return Promise.resolve([])}}]),e}(),mo=function(){function e(n,t){Ni(this,e),Ui(this,"queue",void 0),Ui(this,"beaconListeners",new Set),this.queue=e.hasSupport&&!t.disablePersistenceRetry?new lo(n,t.compress):new fo}return Di(e,[{key:"pushToQueue",value:function(e){this.queue.push(e)}},{key:"notifyQueue",value:function(){this.queue.onNotify()}},{key:"clearQueue",value:function(){return this.beaconListeners.forEach((function(e){return e()})),this.queue.clear()}},{key:"peekQueue",value:function(e){return this.queue.peek(e)}},{key:"peekBackQueue",value:function(e){return this.queue.peekBack(e)}},{key:"onClear",value:function(e){this.beaconListeners.add(e)}},{key:"removeOnClear",value:function(e){this.beaconListeners.delete(e)}}]),e}()
Ui(mo,"hasSupport","undefined"!=typeof globalThis&&!!globalThis.indexedDB)
var yo=[502,504],ho=[429,503],go=function(){function e(n,t,r,i){var a=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4]
Ni(this,e),Ui(this,"url",void 0),Ui(this,"body",void 0),Ui(this,"config",void 0),Ui(this,"persistenceConfig",void 0),Ui(this,"compress",void 0),Ui(this,"timestamp",void 0),Ui(this,"isClearQueuePending",!1),Ui(this,"onClearCallback",void 0),this.url=n,this.body=t,this.config=r,this.persistenceConfig=i,this.compress=o,this.timestamp=Date.now(),this.onClearCallback=function(){return a.isClearQueuePending=!0}}return Di(e,[{key:"send",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
this.persistenceConfig.db.onClear(this.onClearCallback)
var t=this.retryLimit
return this.retry((function(n){return Ja(e.url,e.body,n,e.compress)}),t,n).finally((function(){co((function(){return"beacon finished"})),e.persistenceConfig.db.removeOnClear(e.onClearCallback)}))}},{key:"retryLimit",get:function(){return this.config.attemptLimit}},{key:"getAttemptCount",value:function(e){return this.retryLimit-e+1}},{key:"retry",value:function(e,n,t,r){var i=this,a=this.getAttemptCount(n)-1
return e(so(t,this.config.headerName,a,r)).then((function(r){var a,o,s,c
if(r.drop=!1,"unknown"===r.type||"success"===r.type)i.isClearQueuePending||i.persistenceConfig.disabled||i.persistenceConfig.db.notifyQueue(),s=r
else if(co((function(){return"retry rejected "+JSON.stringify(r)})),i.shouldPersist(n,r))i.persistenceConfig.db.pushToQueue({url:i.url,body:i.body,headers:t,statusCode:r.statusCode,timestamp:i.timestamp,attemptCount:i.getAttemptCount(n)}),s={type:"persisted",drop:!1,statusCode:r.statusCode}
else{if(n>0&&i.isRetryableError(r)){var d,u
null===(d=(u=i.config).onIntermediateResult)||void 0===d||d.call(u,r,i.body)
var p=i.config.calculateRetryDelay(i.getAttemptCount(n),n)
return co((function(){return"in memory retry in ".concat(p,"ms")})),(c=p,new Promise((function(e){return setTimeout(e,c)}))).then((function(){return i.retry(e,n-1,t,r.statusCode)}))}(s=r).drop=!0}return null===(a=(o=i.config).onIntermediateResult)||void 0===a||a.call(o,s,i.body),s}))}},{key:"isRetryableError",value:function(e){return!("network"!==e.type&&!this.config.statusCodes.includes(e.statusCode))}},{key:"shouldPersist",value:function(e,n){return!(this.isClearQueuePending||this.persistenceConfig.disabled||navigator.onLine&&(0!==e||"network"!==n.type)&&("response"!==n.type||!this.persistenceConfig.statusCodes.includes(n.statusCode)))}}]),e}(),vo=function(){function e(n){Ni(this,e),Ui(this,"host",void 0),this.host=n}return Di(e,[{key:"checkAndEnablePersistentRetry",value:function(e,n){if("function"==typeof(null==e?void 0:e.shouldAnonymizeMemberId)&&!this.host.retryBeacon){var t=this.getRetryTreatment()
this.host.retryConfig&&function(e,n,t,r,i){"control"!==r&&e.retryConfig&&function(){if("undefined"==typeof Promise||"undefined"==typeof navigator)return!1
var e=navigator.userAgent.indexOf("Chrome")>-1,n=navigator.cookieEnabled,t=navigator.storage
return e&&Wa()&&n&&t}()&&navigator.storage.estimate().then((function(a){if(!((a.quota||0)-(a.usage||0)>52428800))return function(e){var n=window.indexedDB.deleteDatabase("beacons")
return new Promise((function(e,t){n.onsuccess=function(){return e()},n.onerror=function(){return t(n.error)}}))}()
var o,s,c=null!==(o=e.retryConfig.inMemory)&&void 0!==o?o:{attemptLimit:4,statusCodes:[502,504]},d=null!==(s=e.retryConfig.persist)&&void 0!==s?s:{attemptLimit:3,statusCodes:[429,503],maxNumber:1e3,batchEvictionNumber:300,throttleWait:3e5},u={compress:t,inMemoryRetry:{onIntermediateResult:null==i?void 0:i.onIntermediateResult,attemptLimit:c.attemptLimit,statusCodes:c.statusCodes,headerName:"x-li-retry-context",calculateRetryDelay:function(e){return function(e){return 1e3*Math.pow(2,e)}(e)}},disablePersistenceRetry:e.retryConfig.disablePersistence,persistenceRetry:{onBeforeRetry:null==i?void 0:i.onBeforeRetry,onResult:null==i?void 0:i.onResult,idbName:"beacons",attemptLimit:d.attemptLimit,statusCodes:d.statusCodes,maxNumber:d.maxNumber,batchEvictionNumber:d.batchEvictionNumber,throttleWait:d.throttleWait,useIdle:!0,measureIDB:{createStartMark:"idb_open_start",createSuccessMeasure:"idb_open_success_phase",createFailMeasure:"idb_open_fail_phase"}}},p=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Boolean(n.compress),r=Object.assign({attemptLimit:0,statusCodes:yo,calculateRetryDelay:function(e,n){return 2e3*n}},n.inMemoryRetry)
if(n.retryDB)e=n.retryDB
else{var i=Object.assign({idbName:"beacon-transporter",attemptLimit:3,statusCodes:ho,maxNumber:1e3,batchEvictionNumber:300,throttleWait:3e5},n.persistenceRetry)
i.headerName=i.headerName||r.headerName,e=new mo(i,{compress:n.compress,disablePersistenceRetry:n.disablePersistenceRetry})}return{beacon:function(i,a,o){var s
return $a()?new go(i,a,r,{db:e,disabled:Boolean(n.disablePersistenceRetry),statusCodes:(null===(s=n.persistenceRetry)||void 0===s?void 0:s.statusCodes)||ho},t).send(o):Promise.resolve({type:"unknown",drop:!0})},database:e}}(u),l=p.beacon,f=p.database
return e.retryBeacon={shouldRetry:!0,beacon:l,database:f},"enabled"===r?(e.retryBeacon.shouldRetry=!1,!u.disablePersistenceRetry&&n.shouldAnonymizeMemberId()?f.peekQueue(1).then((function(e){if(Array.isArray(e)&&e[0]){var n=JSON.parse(e[0].body)
if(Array.isArray(n)&&n.some((function(e){return!e.eventInfo.shouldAnonymizeMemberId})))return f.clearQueue()}}),(function(){return f.clearQueue()})).then((function(){e.retryBeacon.shouldRetry=!0})).catch((function(e){pa.emit("internal:error",{tags:["core-web-tracking:retry:idb"],reason:e})})):(e.retryBeacon.shouldRetry=!0,Promise.resolve())):void 0})).catch((function(e){pa.emit("internal:error",{tags:["core-web-tracking:retry:setup"],reason:e})}))}(this.host,e,this.shouldCompressPayload(),t,n)}}},{key:"clearPersistedEventsOnLogout",value:function(){var e=this.host.retryBeacon
if(e&&e.shouldRetry)return e.shouldRetry=!1,e.database.clearQueue().catch((function(e){pa.emit("internal:error",{tags:["core-web-tracking:retry:logout"],reason:e})}))}},{key:"sendPayload",value:function(e,n,t,r){var i,a=this.getRetryTreatment()
Wa()&&"control"!==a&&null!==(i=this.host.retryBeacon)&&void 0!==i&&i.shouldRetry?this.sendPayloadWithRetry(e,n,t):this.sendPayloadFireForget(e,n,t,r)}},{key:"sendPayloadWithRetry",value:function(e,n,t){(!Array.isArray(n)||n.length>0)&&this.host.retryBeacon.beacon(e,JSON.stringify(n),t).catch((function(e){pa.emit("internal:error",{tags:["core-web-tracking:retry:beacon"],reason:e})}))}},{key:"sendPayloadFireForget",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;(!Array.isArray(n)||n.length>0)&&("undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1||!$a()||"undefined"==typeof Promise?function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}
if("undefined"!=typeof window&&void 0!==window.XMLHttpRequest){var r=new XMLHttpRequest
if(r.open("POST",e,!0),r.withCredentials=!0,t.headers)for(var i=0,a=Object.keys(t.headers);i<a.length;i++){var o=a[i]
r.setRequestHeader(o,t.headers[o])}r.send(n)}}(e,JSON.stringify(n),{headers:t}):Ja(e,JSON.stringify(n),t,this.shouldCompressPayload()).then((function(e){null==r||r.onResult(e,n)}),(function(){})))}},{key:"getRetryTreatment",value:function(){var e,n,t
if(!this.host.retryConfig)return"control"
var r=this.host.retryConfig.lixKey
return r?null!==(e=null===(n=(t=this.host).__getLixTreatment)||void 0===n?void 0:n.call(t,r))&&void 0!==e?e:"control":"enabled"}},{key:"shouldCompressPayload",value:function(){return!0!==this.host.disableCompression}}]),e}(),_o="undefined"!=typeof window&&"undefined"!=typeof document,To=/JSESSIONID="?([^";]+)"?/,bo="",Eo=0
function ko(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.cacheLifeSpan,t=void 0===n?1e4:n,r=e.regex,i=void 0===r?To:r
if(!bo||Date.now()-Eo>t){var a=_o&&document.cookie.match(i)
bo=a&&a[1]||"",Eo=Date.now()}return bo}var Ao=function(){function e(n){Ni(this,e),Ui(this,"networkTransporter",void 0),Ui(this,"inactive",void 0),Ui(this,"mpName",void 0),Ui(this,"endpoint",void 0),Ui(this,"debug",void 0),this.networkTransporter=new vo(n),this.mpName=n.appId,this.inactive=n.inactive
var t=function(e){var n,t=!1
switch(e){case"https://www.linkedin.com/li/track":n=Co
break
case"https://www.linkedin-ei.com/li/track/validate":default:t=!0,n=So
break
case"https://www.linkedin-ei.com/li/track":n=So}return{endpoint:n,debug:t}}(n.endpoint)
this.endpoint=t.endpoint,this.debug=t.debug}return Di(e,[{key:"fireFragment",value:function(e){if(!this.inactive){var n={"content-type":"application/json; charset=UTF-8","x-li-track":JSON.stringify({mpName:this.mpName}),"csrf-token":ko(),"x-restli-protocol-version":"2.0.0"},t={fragmentEvent:e,debug:this.debug}
this.networkTransporter.sendPayload(this.endpoint,t,n)}}}]),e}(),So="https://www.linkedin-ei.com/trackingMonitoring/?action=saveClientFragment",Co="https://www.linkedin.com/trackingMonitoring/?action=saveClientFragment"
function Io(e){return"string"==typeof e}function Ro(e){return Io(e)?e:e.topicName||e.eventName}function Oo(e){return Io(e)?e:e.eventName}var Mo,wo,No=function(){function e(n){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
Ni(this,e),Ui(this,"host",void 0),Ui(this,"cmoTransporter",void 0),Ui(this,"clientMonitoringInstanceId",Ji()),Ui(this,"currentContext",{pageKey:"unknown",pageInstance:na("unknown")}),Ui(this,"appState",{}),Ui(this,"estimatedFragmentSize",0),Ui(this,"fragmentSizeLimit",void 0),Ui(this,"activeFragmentEvent",void 0),Ui(this,"debounceTimer",void 0),this.host=n,this.cmoTransporter=r.cmoTransporter||new Ao(n),this.fragmentSizeLimit=(null===(t=n.clientMonitoringConfig)||void 0===t?void 0:t.fragmentSizeLimit)||10240,this.activeFragmentEvent=Do(this.clientMonitoringInstanceId,0,0,!1,this.getEventHeaders())}return Di(e,[{key:"getCurrentInstanceId",value:function(){return this.clientMonitoringInstanceId}},{key:"scheduleDebouncedFiring",value:function(){var e,n,t=this
void 0!==this.debounceTimer&&(clearTimeout(this.debounceTimer),this.debounceTimer=void 0),this.fragmentIsFull()&&this.fireFragmentEventIfFull(!0),this.debounceTimer=setTimeout((function(){t.fireFragmentEventIfFull()}),null!==(e=null===(n=this.host.batching)||void 0===n?void 0:n.debounceTime)&&void 0!==e?e:1)}},{key:"logEventGenerated",value:function(e){this.scheduleDebouncedFiring()
var n=this.activeFragmentEvent.stats,t=this.activeFragmentEvent.firstEventNumber+n.eventsGenerated
return n.eventTopics.push(e),n.eventsGenerated++,this.estimatedFragmentSize+=e.length,t}},{key:"logEventReadyToSend",value:function(e){this.activeFragmentEvent.stats.eventsReadyToSend+=e}},{key:"logEventSent",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCurrentInstanceId()
n===this.getCurrentInstanceId()?this.activeFragmentEvent.stats.eventsSent+=e:this.findPreviousInstanceStat(n,(function(n){n.eventsSent+=e}))}},{key:"logNetworkResponseCode",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCurrentInstanceId(),t=this.activeFragmentEvent.stats.networkResponseStats
n!==this.getCurrentInstanceId()&&this.findPreviousInstanceStat(n,(function(e){t=e.networkResponseStats})),e>=200&&e<300?t.eventsWith2XXResponse++:400===e?t.eventsWith400Response++:408===e?t.eventsWith408Response++:429===e?t.eventsWith429Response++:e>400&&e<500?t.eventsWith4XXResponse++:500===e?t.eventsWith500Response++:502===e?t.eventsWith502Response++:503===e?t.eventsWith503Response++:504===e?t.eventsWith504Response++:e>500&&e<600&&t.eventsWith5XXResponse++}},{key:"findPreviousInstanceStat",value:function(e,n){var t,r=wi(this.activeFragmentEvent.stats.previousInstanceEventStats)
try{for(r.s();!(t=r.n()).done;){var i=t.value
if(i.instanceId===e)return void n(i)}}catch(e){r.e(e)}finally{r.f()}var a=this.getEventHeaders(),o=a.header,s=a.requestHeader,c={header:Object.assign(o,{memberId:-1}),requestHeader:s,instanceId:e,eventsSent:0,eventTopics:[],networkResponseStats:{eventsWith2XXResponse:0,eventsWith400Response:0,eventsWith408Response:0,eventsWith429Response:0,eventsWith4XXResponse:0,eventsWith500Response:0,eventsWith502Response:0,eventsWith503Response:0,eventsWith504Response:0,eventsWith5XXResponse:0},failures:[]}
n(c),this.activeFragmentEvent.stats.previousInstanceEventStats.push(c)}},{key:"logFailedEvent",value:function(e,n,t,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getCurrentInstanceId(),a=this.getEventHeaders(),o=a.header,s=a.requestHeader,c={header:Object.assign(o,{memberId:-1}),requestHeader:s,instanceId:i,instanceEventNumber:r,reason:e,rawError:t,eventName:Oo(n),eventTopic:Ro(n)}
this.estimatedFragmentSize+=JSON.stringify(c).length,i===this.getCurrentInstanceId()?this.activeFragmentEvent.stats.failures.push(c):this.findPreviousInstanceStat(i,(function(e){e.failures.push(c)})),this.fireFragmentEventIfFull()}},{key:"flush",value:function(){this.activeFragmentEvent.isLastFragment=!0,this.fireFragmentEventIfFull(!0)}},{key:"fragmentIsFull",value:function(){return this.activeFragmentEvent.stats.eventsGenerated>=100||this.estimatedFragmentSize>=this.fragmentSizeLimit}},{key:"fireFragmentEventIfFull",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.fragmentIsFull()){this.debounceTimer=void 0
var e=this.getEventHeaders(),n=e.header,t=e.requestHeader,r=this.activeFragmentEvent
r.header=n,r.requestHeader=t,this.cmoTransporter.fireFragment(r),this.estimatedFragmentSize=0,this.activeFragmentEvent=Do(this.clientMonitoringInstanceId,r.fragmentNumber+1,r.firstEventNumber+r.stats.eventsGenerated,!1,e)}}},{key:"setCurrentContext",value:function(e){this.currentContext=e}},{key:"updateAppState",value:function(e){this.host.api.assign(this.appState,e)}},{key:"getEventHeaders",value:function(){var e=void 0
this.appState.clientApplicationInstance&&((e=this.appState.clientApplicationInstance).trackingId=Uo(e.trackingId))
var n=this.currentContext.pageInstance
return n.trackingId=Uo(n.trackingId),{requestHeader:{interfaceLocale:this.host.locale,pageKey:this.currentContext.pageKey,path:this.host.api.location.pathname+this.host.api.location.search,referer:this.host.api.document.referrer},header:{applicationViewerUrn:this.appState.applicationViewerUrn,clientApplicationInstance:e,pageInstance:n,time:Date.now(),version:this.host.appVersion,server:"",service:"",guid:"0000000000000000"}}}}]),e}()
function Po(e){return Mo||(Mo=new No(e)),{getCurrentInstanceId:function(){return Mo.getCurrentInstanceId()},logEventGenerated:function(e){return Mo.logEventGenerated(e)},logEventReadyToSend:function(e){Mo.logEventReadyToSend(e)},logEventSent:function(e){Mo.logEventSent(e)},logPersistedEventSent:function(e,n){Mo.logEventSent(n,e)},logNetworkResponseCode:function(e){Mo.logNetworkResponseCode(e)},logPersistedNetworkResponseCode:function(e,n){var t
null===(t=Mo)||void 0===t||t.logNetworkResponseCode(n,e)},logFailedEvent:function(e,n,t,r){Mo.logFailedEvent(e,n,t,r)},logPersistedFailedEvent:function(e,n,t,r,i){Mo.logFailedEvent(n,t,r,i,e)},flush:function(){Mo.flush()},destroy:function(){Mo=void 0},isDestroyed:function(){return void 0===Mo},setCurrentContext:function(e){Mo.setCurrentContext(e)},updateAppState:function(e){Mo.updateAppState(e)}}}function Do(e,n,t,r,i){return{fragmentNumber:n,firstEventNumber:t,isLastFragment:r,stats:{instanceId:e,eventsGenerated:0,eventsReadyToSend:0,eventsSent:0,networkResponseStats:{eventsWith2XXResponse:0,eventsWith400Response:0,eventsWith408Response:0,eventsWith429Response:0,eventsWith4XXResponse:0,eventsWith500Response:0,eventsWith502Response:0,eventsWith503Response:0,eventsWith504Response:0,eventsWith5XXResponse:0},eventTopics:[],failures:[],previousInstanceEventStats:[]},requestHeader:i.requestHeader,header:i.header}}function Uo(e){return Array.isArray(e)?Xi(e):16===e.length?e:function(e){return"string"==typeof e&&!!e.match(Zi)}(e)?atob(e):Xi(ea(e))}!function(e){e.NONE="NONE",e.UNKNOWN_EXECUTION_ERROR="UNKNOWN_EXECUTION_ERROR",e.MISSING_REQUIRED_PROPERTIES="MISSING_REQUIRED_PROPERITES",e.STORAGE_WRITE_FAILURE="STORAGE_WRITE_FAILURE",e.RETRIES_EXCEEDED="RETRIES_EXCEEDED",e.EVENT_EVICTED_FROM_STORAGE="EVENT_EVICTED_FROM_STORAGE",e.STORAGE_UNAVAILABLE="STORAGE_UNAVAILABLE",e.SERIALIZATION_FAILURE="SERIALIZATION_FAILURE"}(wo||(wo={}))
var xo,Lo,Fo,Bo="PageViewEvent",qo=function(){function e(n){var t,r=this
Ni(this,e),Ui(this,"host",void 0),Ui(this,"queue",void 0),Ui(this,"preContextQueue",void 0),Ui(this,"debounceTimer",void 0),Ui(this,"unloadHandlers",void 0),Ui(this,"maxQueueSize",void 0),Ui(this,"flushDebounceTime",void 0),Ui(this,"trackingEventListeners",[]),Ui(this,"onHideHandler",(function(){r.forceFlush()})),Ui(this,"networkTransporter",void 0),Ui(this,"clientMonitoringConn",void 0),this.host=n,this.queue=[],this.preContextQueue=[],this.unloadHandlers=[]
var i=n.batching
this.maxQueueSize=i&&i.maxSize||1,this.flushDebounceTime=i&&i.debounceTime||0,pa.on("internal:hide",this.onHideHandler),this.networkTransporter=new vo(n),"enabled"===(null===(t=n.__getLixTreatment)||void 0===t?void 0:t.call(n,"pemberly.tracking.monitoring"))&&n.clientMonitoringConfig&&!n.inactive&&(this.clientMonitoringConn=Po(n))}return Di(e,[{key:"checkAndEnablePersistentRetry",value:function(e){var n,t=(n=this.clientMonitoringConn,{onIntermediateResult:function(e,t){var r
if(n&&!n.isDestroyed())try{if(r=JSON.parse(t),!Array.isArray(r)||0===r.length)return
e.statusCode&&n.logNetworkResponseCode(e.statusCode),!0===e.drop&&r.forEach((function(t){var r,i=t.eventInfo.eventName,a=t.eventInfo.topicName||i,o="rawError"in e?e.rawError:"null",s=["type: ".concat(e.type),"statusCode: ".concat(e.statusCode||"null"),"drop: ".concat(String(e.drop)),"rawError: ".concat(o)].join(", ")
n.logFailedEvent(wo.UNKNOWN_EXECUTION_ERROR,{eventName:i,topicName:a},s,null!==(r=t.eventBody.header.clientMonitoringInstanceEventNumber)&&void 0!==r?r:-1)}))}catch(e){}},onBeforeRetry:function(e){var t
if(n&&!n.isDestroyed())try{if(t=JSON.parse(e),!Array.isArray(t)||0===t.length||!t[0].eventBody.header.clientMonitoringInstanceId)return
var r=t[0].eventBody.header.clientMonitoringInstanceId,i=t.length
n.logPersistedEventSent(r,i)}catch(e){}},onResult:function(e,t){var r
if(n)try{if(r=JSON.parse(t),!Array.isArray(r)||0===r.length||!r[0].eventBody.header.clientMonitoringInstanceId)return
var i=r[0].eventBody.header.clientMonitoringInstanceId
e.statusCode&&n.logPersistedNetworkResponseCode(i,e.statusCode),!0===e.drop&&r.forEach((function(t){var r=t.eventInfo.eventName,a=t.eventInfo.topicName||r,o="rawError"in e?e.rawError:"null",s=["type: ".concat(e.type),"statusCode: ".concat(e.statusCode||"null"),"drop: ".concat(String(e.drop)),"rawError: ".concat(o)].join(", ")
n.logPersistedFailedEvent(i,wo.UNKNOWN_EXECUTION_ERROR,{eventName:r,topicName:a},s,t.eventBody.header.clientMonitoringInstanceEventNumber)}))}catch(e){}}})
this.networkTransporter.checkAndEnablePersistentRetry(e,t)}},{key:"clearPersistedEventsOnLogout",value:function(){return this.networkTransporter.clearPersistedEventsOnLogout()}},{key:"on",value:function(e){this.trackingEventListeners.push(e)}},{key:"fireEvent",value:function(e){var n=function(e){return e.meta.time=Date.now(),e}(e)
this.clientMonitoringConn&&(n.meta.clientMonitoringInstanceId=this.clientMonitoringConn.getCurrentInstanceId(),n.meta.clientMonitoringInstanceEventNumber=this.clientMonitoringConn.logEventGenerated(Ro(e.id)))
var t,r=this.host,i=r.api.Promise,a=r.batching
return n.meta.context?(this.prepareCompleteEnvelopeQueue(n),null===(t=this.clientMonitoringConn)||void 0===t||t.logEventReadyToSend(1),a?(this.batchFire(),i.resolve(!0)):(this.flush(!0),i.resolve(!0))):(this.preContextQueue.push(n),i.resolve(!0))}},{key:"callOnDestroy",value:function(e){this.unloadHandlers.push(e)}},{key:"destroy",value:function(){this.unloadHandlers.forEach((function(e){return e()})),this.forceFlush(),this.trackingEventListeners=[],this.clientMonitoringConn=void 0,pa.off("internal:hide",this.onHideHandler)}},{key:"forceFlush",value:function(){var e=this
this.populatePreContextQueue({pageInstance:na("unknown"),pageKey:"unknown"}).forEach((function(n){return e.queue.push(n)})),this.flush(!0)}},{key:"prepareCompleteEnvelopeQueue",value:function(e){var n=this,t=e.meta.context=ia(e.meta.context,this.host.api)
"function"==typeof e.body&&(e.body=e.body(t)),this.preContextQueue.length>0&&this.populatePreContextQueue(t).forEach((function(e){return n.queue.push(e)})),this.queue.push(e)}},{key:"envelop",value:function(e,n){var t=this.host,r=t.appId,i=t.api
return{eventBody:n,eventInfo:"string"==typeof e?{appId:r,eventName:e,topicName:e}:i.assign({appId:r},e)}}},{key:"getGenericEventBody",value:function(e){var n,t=this.host,r=t.appVersion,i=t.locale,a=t.api,o=a.location,s=a.document,c=a.assign,d=e.meta.context,u=d.pageKey,p=d.pageInstance,l=function(e){return"string"==typeof e?e===Bo:e.eventName===Bo}(e.id)&&(null===(n=e.body.requestHeader)||void 0===n?void 0:n.pageKey)||u,f=null
"string"!=typeof i&&null!==this.host.locale||(f=i)
var m={interfaceLocale:f,pageKey:l,path:o.pathname+o.search,referer:s.referrer},y={header:c({pageInstance:p,time:e.meta.time,version:r},e.meta.header||{}),requestHeader:c(m,e.meta.requestHeader||{})},h=e.meta.clientMonitoringInstanceId,g=e.meta.clientMonitoringInstanceEventNumber
return h&&c(y.header,{clientMonitoringInstanceId:h,clientMonitoringInstanceEventNumber:g}),c(e.body,y)}},{key:"populatePreContextQueue",value:function(e){var n,t=this.preContextQueue
return this.preContextQueue=[],null===(n=this.clientMonitoringConn)||void 0===n||n.logEventReadyToSend(t.length),t.map((function(n){return n.meta.context=e,"function"==typeof n.body&&(n.body=n.body(e)),n}))}},{key:"trigger",value:function(e,n){this.trackingEventListeners.forEach((function(t){return t(e,n)}))}},{key:"requestFlush",value:function(e){var n=this
e((function(t){t.timeRemaining()>5||t.didTimeout?n.forceFlush():n.requestFlush(e)}),{timeout:1e4})}},{key:"flush",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.host.api.requestIdleCallback
e||!n?this.sendPayload():this.requestFlush(n)}},{key:"batchFire",value:function(){var e=this
this.queue.length>this.maxQueueSize?this.flush():(this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((function(){return e.flush()}),this.flushDebounceTime))}},{key:"sendPayload",value:function(){var e=this,n=this.queue
if(0!==n.length){this.queue=[]
var t,r,i=[],a=[]
n.forEach((function(n){var t=e.getGenericEventBody(n),r=e.envelop(n.id,t)
e.trigger(r,n.meta)
var o=r.eventInfo.eventName
"LixTreatmentsEvent"===o||"JavaScriptErrorEvent"===o?i.push(r):a.push(r)})),this.host.inactive||(this.clientMonitoringConn&&(this.clientMonitoringConn.logEventSent(i.length+a.length),r=this.clientMonitoringConn,t={onResult:function(e,n){r&&!r.isDestroyed()&&(e.statusCode&&r.logNetworkResponseCode(e.statusCode),!0===e.drop&&n.forEach((function(n){var t=n.eventInfo.eventName,i=n.eventInfo.topicName||t,a="rawError"in e?e.rawError:"null",o=["type: ".concat(e.type),"statusCode: ".concat(e.statusCode||"null"),"drop: ".concat(String(e.drop)),"rawError: ".concat(a)].join(", ")
null==r||r.logFailedEvent(wo.UNKNOWN_EXECUTION_ERROR,{eventName:t,topicName:i},o,n.eventBody.header.clientMonitoringInstanceEventNumber||-1)})))}}),this.networkTransporter.sendPayloadFireForget(this.host.endpoint,i,void 0,t),this.networkTransporter.sendPayload(this.host.endpoint,a,void 0,t))}}}]),e}()
function jo(e){if(!e)return{}
var n=e.trk,t=!1,r=e.licu&&decodeURIComponent(e.licu)
e.external_control&&(r="urn:li:externalControl:".concat(decodeURIComponent(e.external_control)),t=!0)
var i=e.lipi&&function(e){var n=decodeURIComponent(e).split(";")
if(n.length>1)return{pageUrn:n[0],trackingId:n[1]}}(e.lipi),a=i&&{pageInstance:i,pageKey:n}||n&&{pageKey:n}
if(e.external_page&&e.external_page_instance){var o=decodeURIComponent(e.external_page)
a={pageInstance:{pageUrn:"urn:li:externalPage:".concat(o),trackingId:e.external_page_instance},pageKey:o},t=!0}var s=e.external_app&&e.external_app_instance?{applicationUrn:"urn:li:externalApplication:".concat(decodeURIComponent(e.external_app)),trackingId:e.external_app_instance,version:""}:void 0
return s&&((a=a||{}).applicationInstance=s),{fromExternalApp:t||!!s,previousApplicationInstance:s,previousContext:a,previousControlId:e.lici&&decodeURIComponent(e.lici),previousControlUrn:r}}function Vo(e){return"retryConfig"in e.host}Di((function e(n,t){var r,i
if(Ni(this,e),Ui(this,"transporter",void 0),Ui(this,"delegate",void 0),Ui(this,"currentContext",void 0),Ui(this,"appState",void 0),Ui(this,"previousAppContext",void 0),Ui(this,"customTransporters",void 0),Ui(this,"clientMonitoringConn",void 0),this.transporter=n,this.delegate=t,this.appState={},this.customTransporters={},t&&t.customTransporterHosts)for(var a in t.customTransporterHosts)if(Object.prototype.hasOwnProperty.call(t.customTransporterHosts,a)){var o=this.transporter.host.api.assign({},this.transporter.host)
this.customTransporters[a]=new qo(this.transporter.host.api.assign(o,t.customTransporterHosts[a]))}"enabled"===(null===(r=(i=n.host).__getLixTreatment)||void 0===r?void 0:r.call(i,"pemberly.tracking.monitoring"))&&n.host.clientMonitoringConfig&&!n.host.inactive&&"location"in n.host.api&&(this.clientMonitoringConn=Po(n.host))}),[{key:"host",get:function(){return this.transporter.host}},{key:"checkAndEnablePersistentRetry",value:function(){Vo(this.transporter)&&this.transporter.checkAndEnablePersistentRetry(this.delegate)}},{key:"flushAndClearPersistedEventsOnLogout",value:function(){this.forceFlush()
var e=Vo(this.transporter)?this.transporter.clearPersistedEventsOnLogout():null
return null!=e?e:this.host.api.Promise.resolve()}},{key:"getCurrentContext",value:function(){if(this.currentContext)return ia(this.currentContext,this.host.api)}},{key:"navigate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.navMetaFromSeed(e,jo(n))
if(this.setCurrentContext(r.to),!t.suppressEventsFiring)return this.fireNavEvents(r)}},{key:"setCurrentContext",value:function(e){var n
this.currentContext=ia(e,this.host.api),null===(n=this.clientMonitoringConn)||void 0===n||n.setCurrentContext(ia(e,this.host.api))}},{key:"updateAppState",value:function(e){var n
this.host.api.assign(this.appState,e),null===(n=this.clientMonitoringConn)||void 0===n||n.updateAppState(e)}},{key:"fireCIE",value:function(e,n,t,r,i){return this.fireEvent("ControlInteractionEvent",(function(t){var a=ta(t.pageKey,e),o={controlTrackingId:r,controlUrn:a,interactionType:n}
return i&&i(a),o}),{context:t})}},{key:"fireEvent",value:function(e,n,t){if(!n){var r=Ro(e),i=void 0===n?"undefined":null===n?"null":Bi(n),a='Firing tracking event "'.concat(r,'" with invalid body, you fired "').concat(i,'"')
if(this.clientMonitoringConn){var o=this.clientMonitoringConn.logEventGenerated(r)
this.clientMonitoringConn.logFailedEvent(wo.MISSING_REQUIRED_PROPERTIES,e,a,o)}throw new Error(a)}return this.fireEnvelope(this.generateEnvelope(e,n,t))}},{key:"fireEnvelope",value:function(e){var n,t
if(null!==(n=this.delegate)&&void 0!==n&&null!==(t=n.shouldAnonymizeMemberId)&&void 0!==t&&t.call(n))if(Io(e.id)){var r=e.id
e.id={eventName:r,topicName:r,shouldAnonymizeMemberId:!0}}else e.id.shouldAnonymizeMemberId=!0
var i=this.delegate&&this.delegate.preTransporter?this.delegate.preTransporter(e):e
if(i){var a=i.meta.transporterKey,o=a?this.customTransporters[a]:this.transporter
if(!o&&a){var s=Ro(i.id),c="Could not find custom transporter: ".concat(a)
if(this.clientMonitoringConn){var d=this.clientMonitoringConn.logEventGenerated(s)
this.clientMonitoringConn.logFailedEvent(wo.UNKNOWN_EXECUTION_ERROR,i.id,c,d)}throw new Error(c)}return o.fireEvent(i)}return this.host.api.Promise.resolve(!0)}},{key:"generatePageInstance",value:function(e,n){return na(e,n)}},{key:"firePVE",value:function(e,n,t){var r={pageType:"full",totalTime:0,trackingCode:this.getTrackingCode(),trackingInfo:{}},i=this.host.api.assign(r,n),a=this.generateEnvelope("PageViewEvent",i,{context:t})
return a.meta.requestHeader.pageKey=e,this.fireEnvelope(a)}},{key:"destroy",value:function(){for(var e in this.transporter.destroy(),this.customTransporters)this.customTransporters[e].destroy()
this.clientMonitoringConn&&(this.clientMonitoringConn.flush(),this.clientMonitoringConn.destroy(),this.clientMonitoringConn=void 0),pa.clear()}},{key:"forceFlush",value:function(){for(var e in this.transporter.forceFlush(),this.customTransporters)this.customTransporters[e].forceFlush()}},{key:"generateControlUrn",value:function(e,n){return ta((n||this.currentContext||{pageKey:"unknown"}).pageKey,e)}},{key:"fireRawCIE",value:function(e,n,t,r){var i={controlTrackingId:r,controlUrn:e,interactionType:n}
return{beacon:this.fireEvent("ControlInteractionEvent",i,{context:t}),controlUrn:e}}},{key:"generateNavigationEvent",value:function(e){var n=e.triggerId,t=e.triggerUrn,r=e.from
return{previousPageInstance:r&&r.pageInstance,triggerControlTrackingId:n,triggerControlUrn:t}}},{key:"getTrackingCode",value:function(){return this.previousAppContext&&this.previousAppContext.pageKey}},{key:"navMetaFromSeed",value:function(e,n){var t="NavigationEvent"
this.previousAppContext=n.previousContext
var r=n.fromExternalApp?{eventName:t,topicName:"InboundNavigationEvent"}:t
return{from:n.previousContext,navEventId:r,to:{applicationInstance:n.applicationInstance,pageInstance:this.generatePageInstance(e,n.pageTrackingId),pageKey:e},triggerId:n.previousControlId,triggerUrn:n.previousControlUrn}}},{key:"fireNavEvents",value:function(e){var n=this.generateNavigationEvent(e),t=e.to,r=e.from,i=e.navEventId,a=this.generateEnvelope(i,n)
a.meta.requestHeader.pageKey=t.pageKey
var o=r&&r.applicationInstance
return o&&(a.meta.header.clientApplicationInstance=o),this.host.api.Promise.all([this.firePVE(t.pageKey),this.fireEnvelope(a)])}},{key:"generateEnvelope",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={directive:t.directive,transporterKey:t.transporterKey,context:t.context||this.currentContext&&ia(this.currentContext,this.host.api),requestHeader:this.host.api.assign({trackingCode:this.getTrackingCode()},t.requestHeader||{}),header:this.host.api.assign({applicationViewerUrn:this.appState.applicationViewerUrn,clientApplicationInstance:this.appState.clientApplicationInstance},t.header||{})}
return{body:"function"==typeof n?n:function(){return n},id:e,meta:r}}}]),Di((function e(n,t){var r,i=this
Ni(this,e),Ui(this,"core",void 0),Ui(this,"protocol",void 0),Ui(this,"throttleKeySet",new Set),Ui(this,"config",void 0),Ui(this,"reportTransporterError",(function(e){e.reason instanceof Error||(e.reason=new Error(e.reason||"An error occurred in the transporter")),i.reportError(e.reason,e.tags.concat(["info"])).catch((function(){}))})),this.core=n
var a=this.core.host.api.location.protocol
this.protocol=a.substring(0,a.length-1),this.config={throttleTime:null!==(r=null==t?void 0:t.throttleTime)&&void 0!==r?r:100},pa.on("internal:error",this.reportTransporterError)}),[{key:"reportError",value:function(e){var n,t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.callTreeId,o=void 0===a?"":a,s=i.responseHeaders,c=void 0===s?{}:s,d=e.message,u=e.name,p=e.stack,l=void 0===p?"":p,f=e.fileName,m=void 0===f?"":f,y=e.lineNumber,h=void 0===y?0:y,g=e.columnNumber,v=void 0===g?0:g,_=this.core.host,T=_.appId,b=_.appVersion,E=_.service,k=_.serviceInstance,A=_.treeID,S=void 0===A?"":A,C=_.api,I=C.Promise,R=C.location,O=R.host,M=R.pathname,w=R.search,N=R.hash,P=void 0===N?"":N
if(c){n={}
var D=new Map
Object.keys(c).forEach((function(e){D.set(e.toLowerCase(),c[e])})),n.callTreeId=D.get("x-li-uuid"),n.microsoftEdgeReference=D.get("x-msedge-ref"),n.pointOfPresenceId=D.get("x-li-pop"),n.fabric=D.get("x-li-fabric")}var U=function(){return t.core.fireEvent("JavaScriptErrorEvent",(function(e){return{appId:T,e:{c:v,l:h,m:d,s:l,t:u,u:m},h:P,l:t.protocol,o:O,p:M,pageKey:e.pageKey,q:w,service:E,serviceInstance:k,serviceVersion:b,t:r,trackingID:e.pageInstance.trackingId,treeID:S,callTreeId:o,responseTraceHeaders:n}}))}
if(this.config.throttleTime<0)return U()
var x=function(e){return e.split("").reduce((function(e,n){return(e<<5)-e+n.charCodeAt(0)|0}),0)}(u+d+l+r.join("")+o)
return this.throttleKeySet.has(x)?I.resolve(!1):(this.throttleKeySet.add(x),setTimeout((function(){return t.throttleKeySet.delete(x)}),this.config.throttleTime),U())}},{key:"flush",value:function(){this.core.forceFlush()}},{key:"destroy",value:function(){this.core.destroy(),pa.off("internal:error",this.reportTransporterError)}}])
var Ho=function(){function e(){Ni(this,e),Ui(this,"userTimingEntries",[]),Ui(this,"longTasks",[]),Ui(this,"resourceTimingEntries",[]),Ui(this,"cdnData",void 0)}return Di(e,[{key:"reset",value:function(){this.userTimingEntries=[],this.longTasks=[],this.resourceTimingEntries=[]}},{key:"attachTreeIds",value:function(e){this.resourceTimingEntries.forEach((function(n){var t=e.get(n.name)
t&&(n.resourceTreeId=t)}))}},{key:"getData",value:function(){return{userTimingEntries:this.userTimingEntries,longTasks:this.longTasks,resourceTimingEntries:this.resourceTimingEntries.map(Ko),cdnData:this.cdnData}}}]),e}(),Go=["resourceTreeId","name","entryType","startTime","duration","initiatorType","nextHopProtocol","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","transferSize","encodedBodySize","decodedBodySize","workerStart"]
function Ko(e){return Go.reduce((function(n,t){var r=e[t]
return void 0!==r&&(n[t]=r),n}),{})}function $o(e,n,t){for(var r=null,i=[],a=e,o=0,s=function(){var e=Zo(function(e){var n=a.getAttribute("id")
return n&&Lo.idName(n)?{name:"#"+cs(n,{isIdentifier:!0}),penalty:0}:null}())||Zo.apply(void 0,xi(function(e){return Array.from(e.attributes).filter((function(e){return Lo.attr(e.name,e.value)})).map((function(e){return{name:"["+cs(e.name,{isIdentifier:!0})+'="'+cs(e.value)+'"]',penalty:.5}}))}(a)))||Zo.apply(void 0,xi(function(e){return Array.from(e.classList).filter(Lo.className).map((function(e){return{name:"."+cs(e,{isIdentifier:!0}),penalty:1}}))}(a)))||Zo(function(e){var n=a.tagName.toLowerCase()
return Lo.tagName(n)?{name:n,penalty:2}:null}())||[{name:"*",penalty:3}],s=function(e){var n=e.parentNode
if(!n)return null
var t=n.firstChild
if(!t)return null
for(var r=0;t&&(t.nodeType===Node.ELEMENT_NODE&&r++,t!==e);)t=t.nextSibling
return r}(a)
if(n===xo.All)s&&(e=e.concat(e.filter(Jo).map((function(e){return Xo(e,s)}))))
else if(n===xo.Two)e=e.slice(0,1),s&&(e=e.concat(e.filter(Jo).map((function(e){return Xo(e,s)}))))
else if(n===xo.One){var c=function(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]
if(null!=t){var r,i,a=[],o=!0,s=!1
try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),1!==a.length);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==t.return||t.return()}finally{if(s)throw i}}return a}}(e)||Li(e,1)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e=e.slice(0,1))[0]
s&&Jo(c)&&(e=[Xo(c,s)])}var d,u=wi(e)
try{for(u.s();!(d=u.n()).done;)d.value.level=o}catch(e){u.e(e)}finally{u.f()}if(i.push(e),i.length>=Lo.seedMinLength&&(r=Wo(i,t)))return"break"
a=a.parentElement,o++};a&&a!==Lo.root.parentElement&&"break"!==s(););return r||(r=Wo(i,t)),r}function Wo(e,n){var t=ns(function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]
if(n.length>0){var r,i=[],a=wi(n[0])
try{for(a.s();!(r=a.n()).done;){var o=r.value
i=i.concat(e(n.slice(1,n.length),t.concat(o)))}}catch(n){a.e(n)}finally{a.f()}return i}return[t]}(e))
if(t.length>Lo.threshold)return n?n():null
var r,i=wi(t)
try{for(i.s();!(r=i.n()).done;){var a=r.value
if(Yo(a))return a}}catch(e){i.e(e)}finally{i.f()}return null}function Qo(e){for(var n=e[0],t=n.name,r=1;r<e.length;r++){var i=e[r].level||0
t=n.level===i-1?"".concat(e[r].name," > ").concat(t):"".concat(e[r].name," ").concat(t),n=e[r]}return t}function zo(e){return e.map((function(e){return e.penalty})).reduce((function(e,n){return e+n}),0)}function Yo(e){switch(Fo.querySelectorAll(Qo(e)).length){case 0:throw new Error("Can't select any node with this selector: ".concat(Qo(e)))
case 1:return!0
default:return!1}}function Xo(e,n){return{name:e.name+":nth-child(".concat(n,")"),penalty:e.penalty+1}}function Jo(e){return"html"!==e.name&&!e.name.startsWith("#")}function Zo(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t]
var r=n.filter(es)
return r.length>0?r:null}function es(e){return null!=e}function ns(e){return Array.from(e).sort((function(e,n){return zo(e)-zo(n)}))}function ts(e,n){return Fo.querySelector(Qo(e))===n}!function(e){e[e.All=0]="All",e[e.Two=1]="Two",e[e.One=2]="One"}(xo||(xo={}))
var rs,is=/[ -,\.\/:-@\[-\^`\{-~]/,as=/[ -,\.\/:-@\[\]\^`\{-~]/,os=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,ss={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1}
function cs(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=Object.assign(Object.assign({},ss),n)
"single"!=t.quotes&&"double"!=t.quotes&&(t.quotes="single")
for(var r="double"==t.quotes?'"':"'",i=t.isIdentifier,a=e.charAt(0),o="",s=0,c=e.length;s<c;){var d=e.charAt(s++),u=d.charCodeAt(0),p=void 0
if(u<32||u>126){if(u>=55296&&u<=56319&&s<c){var l=e.charCodeAt(s++)
56320==(64512&l)?u=((1023&u)<<10)+(1023&l)+65536:s--}p="\\"+u.toString(16).toUpperCase()+" "}else p=t.escapeEverything?is.test(d)?"\\"+d:"\\"+u.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(d)?"\\"+u.toString(16).toUpperCase()+" ":"\\"==d||!i&&('"'==d&&r==d||"'"==d&&r==d)||i&&as.test(d)?"\\"+d:d
o+=p}return i&&(/^-[-\d]/.test(o)?o="\\-"+o.slice(1):/\d/.test(a)&&(o="\\3"+a+" "+o.slice(1))),o=o.replace(os,(function(e,n,t){return n&&n.length%2?e:(n||"")+t})),!i&&t.wrap?r+o+r:o}function ds(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]
if(e&&"function"==typeof e.now&&(e.timeOrigin||e.timing)){var t,r=e.now()
return t=!e.timing&&n?Math.floor(e.timeOrigin):e.timing.navigationStart,Math.round(r+t)}return Date.now()}function us(e){var n=e||performance
return Math.round(n.now())}function ps(e){if(!e)return"null"
if(e.nodeType===Node.ELEMENT_NODE)try{return function(e,n){if(e.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.")
if("html"===e.tagName.toLowerCase())return"html"
var t={root:document.body,idName:function(e){return!0},className:function(e){return!0},tagName:function(e){return!0},attr:function(e,n){return!1},seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4}
Lo=Object.assign(Object.assign({},t),{idName:function(e){return 0!==e.indexOf("ember")}}),Fo=function(e,n){return e.nodeType===Node.DOCUMENT_NODE?e:e===n.root?e.ownerDocument:e}(Lo.root,t)
var r=$o(e,xo.All,(function(){return $o(e,xo.Two,(function(){return $o(e,xo.One)}))}))
if(r){var i=ns(function e(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{counter:0,visited:new Map},i=[]
if(n.length>2&&n.length>Lo.optimizedMinLength)for(var a=1;a<n.length-1;a++){if(r.counter>Lo.maxNumberOfTries)return i
r.counter+=1
var o=xi(n)
o.splice(a,1)
var s=Qo(o)
if(r.visited.has(s))return i
Yo(o)&&ts(o,t)&&(i.push(o),r.visited.set(s,!0),i=i.concat(e(o,t,r)))}return i}(r,e))
return i.length>0&&(r=i[0]),Qo(r)}throw new Error("Selector was not found.")}(e)}catch(e){return"serialization_error"}var n=ps(e.parentElement||void 0)
return"".concat(n," > nodeType(").concat(e.nodeType,")")}function ls(e,n,t){var r=[]
return e&&"function"==typeof e.getEntriesByType&&(n["user-timing-measure-enabled"]&&e.getEntriesByType("measure").forEach((function(e){r.push({entryType:"MEASURE",name:e.name,startTime:e.startTime,duration:e.duration})})),n["user-timing-mark-enabled"]&&e.getEntriesByType("mark").forEach((function(e){r.push({entryType:"MARK",name:e.name,startTime:e.startTime,duration:e.duration})})),t&&(e.clearMeasures(),e.clearMarks())),r}function fs(e){var n=[]
return e.forEach((function(e){return n.push(e)})),n}var ms,ys=function(){function e(n){Ni(this,e),Ui(this,"hostApis",void 0),Ui(this,"hostnameProperties",void 0),Ui(this,"usedHostnames",void 0),Ui(this,"abortController",void 0),Ui(this,"pendingPromises",void 0),this.hostApis=n
var t=n.AbortController
this.hostnameProperties={},this.usedHostnames=new Set,this.abortController=new t,this.pendingPromises=new Set}return Di(e,[{key:"clearUsedHostnames",value:function(){this.usedHostnames=new Set}},{key:"getPresentData",value:function(){var e=this
return oa(this.usedHostnames).map((function(n){return e.hostnameProperties[n]||{hostname:n,provider:"",ipVersion:"",httpVersion:""}}))}},{key:"getDataWhenReady",value:function(e){var n=this,t=this.hostApis,r=t.AbortController,i=t.Promise,a=aa(oa(this.pendingPromises),i),o=setTimeout((function(){n.abortController.abort(),n.abortController=new r}),e)
return a.then((function(){return clearTimeout(o),n.getPresentData()}))}},{key:"inspectEntryForCdnData",value:function(e){var n=this
if(!(e.name.indexOf(".licdn.")<0)){var t,r,i=this.hostApis.assign,a=(t=e.name,r=this.hostApis.document,(rs=rs||r.createElement("a")).href=t,rs.hostname)
if(this.usedHostnames.add(a),!this.hostnameProperties[a]&&!this.isResourcePossiblyFromCache(e)){var o=this.fetchCdnFromUrl(e.name).then((function(e){var t=i({hostname:a},e)
return n.hostnameProperties[a]||(n.hostnameProperties[a]=t),n.pendingPromises.delete(o),t}))
this.pendingPromises.add(o)}}}},{key:"fetchCdnFromUrl",value:function(e){return(0,this.hostApis.fetch)(e,{method:"HEAD",signal:this.abortController.signal}).then((function(e){return{provider:e.headers.get("X-CDN")||"",ipVersion:e.headers.get("X-CDN-CLIENT-IP-VERSION")||"",httpVersion:e.headers.get("X-CDN-Proto")||""}}))}},{key:"isResourcePossiblyFromCache",value:function(e){return void 0!==e.transferSize?0===e.transferSize:e.domainLookupStart===e.domainLookupEnd&&e.connectEnd===e.connectStart&&0===e.secureConnectionStart}}]),e}(),hs=function(){function e(n,t,r,i){var a=this
Ni(this,e),Ui(this,"hostApis",void 0),Ui(this,"statics",void 0),Ui(this,"options",void 0),Ui(this,"allowTimingOrigin",void 0),Ui(this,"collectResourceTimings",void 0),Ui(this,"collectCdnData",void 0),Ui(this,"perfObserver",void 0),Ui(this,"renderTimings",new Map),Ui(this,"urlToTreeId",new Map),Ui(this,"cdnDataProvider",void 0),Ui(this,"currentCollect",void 0),Ui(this,"currentTimer",void 0),Ui(this,"collectWhileWaitingForAsync",void 0),Ui(this,"onBeforeHideHandler",(function(){a.collectAndClearTimer(!0)})),Ui(this,"observables",new Ho),Ui(this,"isInitial",!0),this.hostApis=n,this.statics=t,this.options=r,this.allowTimingOrigin=i,this.collectResourceTimings=r["enable-rs-timing"],this.collectCdnData=r["enable-cdn-tracking"],this.collectCdnData&&(this.cdnDataProvider=new ys(n))}return Di(e,[{key:"recordTreeId",value:function(e,n){this.collectResourceTimings&&this.urlToTreeId.set(function(e,n){return(rs=rs||n.createElement("a")).href=e,rs.href}(n,this.hostApis.document),e)}},{key:"recordRenderStart",value:function(e,n){this.renderTimings.has(e)||this.renderTimings.set(e,{renderName:n,viewId:e,renderStart:ds(this.hostApis.performance,this.allowTimingOrigin)})}},{key:"recordRenderEnd",value:function(e){var n=this.renderTimings.get(e)
n&&(n.renderEnd=n.renderEnd||ds(this.hostApis.performance,this.allowTimingOrigin))}},{key:"startObserving",value:function(){var e=this.hostApis,n=e.PerformanceObserver,t=e.performance
this.stopObserving(),n?this.setupPerformanceObserver(n):this.collectResourceTimings&&this.emulateResourceTimingObserver(t),this.collectResourceTimings&&this.processNewResourceTimings()}},{key:"stopObserving",value:function(){var e
this.collectAndClearTimer(!0),null===(e=this.perfObserver)||void 0===e||e.disconnect(),this.reset()}},{key:"collectAndClearTimer",value:function(e){this.currentCollect?(this.currentCollect(e),clearTimeout(this.currentTimer),this.currentCollect=null,this.currentTimer=null):e&&this.collectWhileWaitingForAsync&&this.collectWhileWaitingForAsync()}},{key:"collect",value:function(e){var n=this,t=this.isInitial
this.isInitial=!1
var r=this.hostApis,i=r.assign,a=r.PerformanceObserver,o=r.Promise
this.currentCollect=function(r){pa.offBefore("internal:hide",n.onBeforeHideHandler)
var s=function(){var r=Object.create(null)
n.observables.cdnData=n.collectCdnData?n.cdnDataProvider.getPresentData():null,a||(n.observables.userTimingEntries=ls(n.hostApis.performance,n.options,!0),n.collectResourceTimings&&n.processNewResourceTimings()),n.observables.attachTreeIds(n.urlToTreeId),n.urlToTreeId.clear()
var o=n.observables.getData(),s=n.extractUsedCDN(o.cdnData||[])
i(n.statics,s),i(r,o,n.snapshot,n.statics),t&&(i(r,function(e){if(!e)return{navigationTimingApi:!1}
var n=Object.create({})
if("function"==typeof e.getEntriesByType){var t=e.getEntriesByType("navigation")[0]
t&&(["fetchStart","responseEnd","decodedBodySize","encodedBodySize","transferSize"].every((function(e){return"number"==typeof t[e]}))&&(n.htmlMetrics={htmlFetchStart:t.fetchStart,htmlResponseEnd:t.responseEnd,htmlDecodedBodySize:t.decodedBodySize,htmlEncodedBodySize:t.encodedBodySize,htmlTransferSize:t.transferSize}),n.workerStart=t.workerStart)}var r=e.timing,i=e.navigation
return r&&i?(n.navigationTimingApi=!0,gs.forEach((function(e){e in r&&(n[e]=r[e])})),n.navigationType=i.type,n.redirectCount=i.redirectCount):n.navigationTimingApi=!1,n}(n.hostApis.performance)),n.statics.pageLoadMode="PARTIAL"),n.reset(),e(r)}
if(r)s()
else{n.collectWhileWaitingForAsync=s
var c=[]
n.collectCdnData&&c.push(n.cdnDataProvider.getDataWhenReady(n.options["async-plugins-timeout"]).then((function(e){n.observables.cdnData=e}))),c.length>0?aa(c,o).then((function(){n.collectWhileWaitingForAsync=null,s()})):s()}},pa.before("internal:hide",this.onBeforeHideHandler),this.currentTimer=setTimeout((function(){n.currentCollect(!1),n.currentCollect=null,n.currentTimer=null}),this.options["beacon-timeout"])}},{key:"setupPerformanceObserver",value:function(e){var n=this
this.perfObserver=new e((function(e){e.getEntries().forEach((function(e){var t=e.entryType,r=e.name,i=e.startTime,a=e.duration
"resource"===t?n.processSingleResourceTiming(e):"mark"===t?n.observables.userTimingEntries.push({entryType:"MARK",name:r,startTime:i,duration:a}):"measure"===t?n.observables.userTimingEntries.push({entryType:"MEASURE",name:r,startTime:i,duration:a}):"longtask"===t&&n.observables.longTasks.push({duration:a,name:r,startTime:i})}))})),this.observables.userTimingEntries=ls(this.hostApis.performance,this.options,!1)
var t=["longtask"];(this.collectResourceTimings||this.collectCdnData)&&t.push("resource"),this.options["user-timing-mark-enabled"]&&t.push("mark"),this.options["user-timing-measure-enabled"]&&t.push("measure"),this.perfObserver.observe({entryTypes:t})}},{key:"emulateResourceTimingObserver",value:function(e){var n=this
e&&"function"==typeof e.setResourceTimingBufferSize&&"function"==typeof e.onresourcetimingbufferfull&&(e.setResourceTimingBufferSize(100),e.onresourcetimingbufferfull=function(){return n.processNewResourceTimings()})}},{key:"processNewResourceTimings",value:function(){var e=this,n=this.hostApis.performance
"function"==typeof n.getEntriesByType&&"function"==typeof n.clearResourceTimings&&(n.getEntriesByType("resource").forEach((function(n){return e.processSingleResourceTiming(n)})),n.clearResourceTimings())}},{key:"processSingleResourceTiming",value:function(e){this.collectResourceTimings&&this.observables.resourceTimingEntries.push(e),this.collectCdnData&&this.cdnDataProvider.inspectEntryForCdnData(e)}},{key:"extractUsedCDN",value:function(e){var n=e.filter((function(e){return e.hostname.indexOf("static")>=0})),t=n.length>0?n[0]:{hostname:"",provider:"",httpVersion:"",ipVersion:""}
return{usedCDN:{static_domain:t.provider,http_version:t.httpVersion,ip_version:t.ipVersion}}}},{key:"reset",value:function(){var e
this.observables.reset(),null===(e=this.cdnDataProvider)||void 0===e||e.clearUsedHostnames()}},{key:"snapshot",get:function(){var e={detailedRenderTimingEntries:fs(this.renderTimings),networkInformationMetrics:vs(this.hostApis.connection)}
return this.renderTimings.clear(),e}}]),e}(),gs=["loadEventEnd","loadEventStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","responseEnd","responseStart","requestStart","secureConnectionStart","connectEnd","connectStart","domainLookupEnd","domainLookupStart","fetchStart","redirectEnd","redirectStart","unloadEventEnd","unloadEventStart","navigationStart"]
function vs(e){return e?{connectionType:e.type&&e.type.toUpperCase()||"UNKNOWN",effectiveType:function(e){switch(e){case"2g":return"TWO_G"
case"3g":return"THREE_G"
case"4g":return"FOUR_G"
default:return"SLOW_2G"}}(e.effectiveType),roundTripTime:e.rtt||-1,downlinkBandwidth:e.downlink||-1,downlinkMaxBandwidth:void 0===e.downlinkMax?-1:e.downlinkMax===1/0?0:e.downlinkMax}:void 0}!function(e){e.RealUserMonitoringEvent="RealUserMonitoringEvent",e.FeaturePerformanceMeasurementEvent="FeaturePerformanceMeasurementEvent",e.ClientPerfMetricsEvent="ClientPerfMetricsEvent",e.WEB_UI_FRAMEWORK="web-ui-framework",e.APP_ID="app-id",e.APP_VERSION="app-version",e.IS_SINGLE_PAGE_APP="is-single-page-app",e.IS_APP_RENDER_FAILED="is-app-render-failed",e.APP_RENDER_MODE="app-render-mode",e.USER_TIMING_MARK_ENABLED="user-timing-mark-enabled",e.USER_TIMING_MEASURE_ENABLED="user-timing-measure-enabled",e.BEACON_SOURCE="beacon-source",e.BEACON_TIMEOUT="beacon-timeout",e.ENABLE_RS_TIMING="enable-rs-timing",e.ENABLE_CDN_TRACKING="enable-cdn-tracking",e.ASYNC_PLUGINS_TIMEOUT="async-plugins-timeout",e.ENABLE_MEMORY_MEASUREMENT="enable-memory-measurement",e.PAGE_KEY_PREFIX="pageKeyPrefix"}(ms||(ms={}))
var _s,Ts,bs,Es,ks=(Ui(gr={},"web-ui-framework","EMBER"),Ui(gr,"app-id","linkedin.rum.tracking"),Ui(gr,"app-version","unknown"),Ui(gr,"is-single-page-app",!0),Ui(gr,"user-timing-mark-enabled",!1),Ui(gr,"user-timing-measure-enabled",!0),Ui(gr,"beacon-source","apps"),Ui(gr,"enable-rs-timing",!0),Ui(gr,"enable-cdn-tracking",!1),Ui(gr,"async-plugins-timeout",5e3),Ui(gr,"beacon-timeout",3e4),Ui(gr,"enable-memory-measurement",!1),Ui(gr,"pageKeyPrefix",""),gr),As=Di((function e(n,t,r){Ni(this,e),Ui(this,"webUIFramework",void 0),Ui(this,"timeSource",void 0),Ui(this,"isSinglePageApp",void 0),Ui(this,"appRenderMode",void 0),Ui(this,"isAppRenderFailed",void 0),Ui(this,"pageLoadMode","INITIAL"),Ui(this,"isSSL",void 0),Ui(this,"treeId",void 0),Ui(this,"isFromServiceWorker",void 0),Ui(this,"usedCDN",void 0),this.webUIFramework=t["web-ui-framework"],this.timeSource=t["beacon-source"],this.isSinglePageApp=t["is-single-page-app"],this.appRenderMode=n["app-render-mode"],this.isAppRenderFailed=n["is-app-render-failed"],this.isSSL="https:"===r.api.location.protocol?1:0,this.treeId=r.treeID,this.isFromServiceWorker=r.isFromServiceWorker})),Ss=function(e,n){return{name:e,value:void 0===n?-1:n,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},Cs=function(e,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return
var t=new PerformanceObserver((function(e){return e.getEntries().map(n)}))
return t.observe({type:e,buffered:!0}),t}}catch(e){}},Is=function(e,n){var t=function t(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),n&&(removeEventListener("visibilitychange",t,!0),removeEventListener("pagehide",t,!0)))}
addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},Rs=function(e){addEventListener("pageshow",(function(n){n.persisted&&e(n)}),!0)},Os=function(e,n,t){var r
return function(i){n.value>=0&&(i||t)&&(n.delta=n.value-(r||0),(n.delta||void 0===r)&&(r=n.value,e(n)))}},Ms=-1,ws=function(){return"hidden"===document.visibilityState?0:1/0},Ns=function(){Is((function(e){var n=e.timeStamp
Ms=n}),!0)},Ps=function(){return Ms<0&&(Ms=ws(),Ns(),Rs((function(){setTimeout((function(){Ms=ws(),Ns()}),0)}))),{get firstHiddenTime(){return Ms}}},Ds=!1,Us=-1,xs=function(e,n){Ds||(function(e,n){var t,r=Ps(),i=Ss("FCP"),a=function(e){"first-contentful-paint"===e.name&&(s&&s.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=e.startTime,i.entries.push(e),t(!0)))},o=window.performance&&performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],s=o?null:Cs("paint",a);(o||s)&&(t=Os(e,i,n),o&&a(o),Rs((function(r){i=Ss("FCP"),t=Os(e,i,n),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-r.timeStamp,t(!0)}))}))})))}((function(e){Us=e.value})),Ds=!0)
var t,r=function(n){Us>-1&&e(n)},i=Ss("CLS",0),a=0,o=[],s=function(e){if(!e.hadRecentInput){var n=o[0],r=o[o.length-1]
a&&e.startTime-r.startTime<1e3&&e.startTime-n.startTime<5e3?(a+=e.value,o.push(e)):(a=e.value,o=[e]),a>i.value&&(i.value=a,i.entries=o,t())}},c=Cs("layout-shift",s)
c&&(t=Os(r,i,n),Is((function(){c.takeRecords().map(s),t(!0)})),Rs((function(){a=0,Us=-1,i=Ss("CLS",0),t=Os(r,i,n)})))},Ls={passive:!0,capture:!0},Fs=new Date,Bs=function(e,n){_s||(_s=n,Ts=e,bs=new Date,Vs(removeEventListener),qs())},qs=function(){if(Ts>=0&&Ts<bs-Fs){var e={entryType:"first-input",name:_s.type,target:_s.target,cancelable:_s.cancelable,startTime:_s.timeStamp,processingStart:_s.timeStamp+Ts}
Es.forEach((function(n){n(e)})),Es=[]}},js=function(e){if(e.cancelable){var n=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp
"pointerdown"==e.type?function(e,n){var t=function(){Bs(e,n),i()},r=function(){i()},i=function(){removeEventListener("pointerup",t,Ls),removeEventListener("pointercancel",r,Ls)}
addEventListener("pointerup",t,Ls),addEventListener("pointercancel",r,Ls)}(n,e):Bs(n,e)}},Vs=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(n){return e(n,js,Ls)}))},Hs=function(e,n){var t,r=Ps(),i=Ss("FID"),a=function(e){e.startTime<r.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),t(!0))},o=Cs("first-input",a)
t=Os(e,i,n),o&&Is((function(){o.takeRecords().map(a),o.disconnect()}),!0),o&&Rs((function(){var r
i=Ss("FID"),t=Os(e,i,n),Es=[],Ts=-1,_s=null,Vs(addEventListener),r=a,Es.push(r),qs()}))},Gs={},Ks=function(e,n){var t,r=Ps(),i=Ss("LCP"),a=function(e){var n=e.startTime
n<r.firstHiddenTime&&(i.value=n,i.entries.push(e)),t()},o=Cs("largest-contentful-paint",a)
if(o){t=Os(e,i,n)
var s=function(){Gs[i.id]||(o.takeRecords().map(a),o.disconnect(),Gs[i.id]=!0,t(!0))};["keydown","click"].forEach((function(e){addEventListener(e,s,{once:!0,capture:!0})})),Is(s,!0),Rs((function(r){i=Ss("LCP"),t=Os(e,i,n),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-r.timeStamp,Gs[i.id]=!0,t(!0)}))}))}))}},$s=["LCP","FID","CLS"],Ws={LCP:"LargestContentfulPaint",FID:"FirstInputDelay",CLS:"CumulativeLayoutShift"},Qs={},zs=!1,Ys=[],Xs={LCP:"largest-contentful-paint",FID:"first-input",CLS:"layout-shift"}
function Js(e){Qs[e]={name:e,value:-1,updateHistory:[]}
var n=Xs[e]
"undefined"!=typeof PerformanceObserver&&void 0!==PerformanceObserver.supportedEntryTypes&&"string"==typeof n&&PerformanceObserver.supportedEntryTypes.indexOf(n)>-1||(Qs[e].value=-2)}function Zs(e){var n=Qs[e.name],t=us()
n&&(n.updateHistory.push({time:t,data:e}),n.value=e.value),Ys.forEach((function(n){return n(e,t,!1)}))}function ec(e){Ys.forEach((function(n){return n(e,us(),!0)}))}var nc=function(){function e(n,t){Ni(this,e),Ui(this,"basePageTreeId",void 0),Ui(this,"basePageKey",void 0),Ui(this,"startPageInstance",void 0),Ui(this,"observing",!1),Ui(this,"fpmReportingState",{}),Ui(this,"appContextMap",new Map),Ui(this,"rumConfig",void 0),Ui(this,"trackingCore",void 0),Ui(this,"removeOnHiddenListener",(function(){})),this.trackingCore=n,this.rumConfig=t}return Di(e,[{key:"startObserving",value:function(){var e,n,t,r,i=this
e=!0===window.__test__resetWebVitalsState,zs&&!e||(e&&(Ys=[]),$s.forEach(Js),[Ks,Hs,xs].forEach((function(e){return e(Zs,!0)})),[Ks,Hs,xs].forEach((function(e){return e(ec)})),zs=!0),this.observing||(this.observing=!0,this.basePageTreeId=this.trackingCore.host.treeID||"_unknown",this.basePageKey=(null===(n=this.trackingCore.getCurrentContext())||void 0===n?void 0:n.pageKey)||"_unknown",this.startPageInstance=(null===(t=this.trackingCore.getCurrentContext())||void 0===t?void 0:t.pageInstance)||na("unknown"),$s.forEach((function(e){var n
i.fpmReportingState[e]=!1,-2===(null===(n=Qs[e])||void 0===n?void 0:n.value)&&i.reportMetric(e)})),r=this.onMetricUpdate.bind(this),Ys.push(r),this.removeOnHiddenListener=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=function t(r){"hidden"===document.visibilityState&&(e(r),n&&removeEventListener("visibilitychange",t,!0))}
return addEventListener("visibilitychange",t,!0),function(){removeEventListener("visibilitychange",t,!0)}}(this.reportAllRemainingWithFpm.bind(this)))}},{key:"stopObserving",value:function(){this.observing=!1,this.removeOnHiddenListener()}},{key:"onMetricUpdate",value:function(e,n,t){var r
this.observing&&(t?this.reportMetric(e.name):this.appContextMap.set(n,{time:n,url:location.href,pageKey:null===(r=this.trackingCore.getCurrentContext())||void 0===r?void 0:r.pageKey}))}},{key:"reportMetric",value:function(e){this.reportViaFpmEvent(e),this.reportViaClientPerfEvent(e)}},{key:"reportViaClientPerfEvent",value:function(e){var n=Qs[e],t={name:Ws[e]||e}
"CLS"===e?t.doubleValue=n.value:t.longValue=Math.round(n.value)
var r=Qs[e]
if(r){var i=function(e,n,t,r,i){var a={basePageTreeId:e,basePageKey:n},o=null
switch(t.name){case"LCP":o=function(e,n){var t
if(0===e.updateHistory.length)return null
var r=e.updateHistory[e.updateHistory.length-1],i=r.data.entries,a=i[i.length-1],o={pageKey:(null===(t=n.get(r.time))||void 0===t?void 0:t.pageKey)||"_unknown",element:ps(a.element),renderTime:Math.round(a.renderTime),loadTime:Math.round(a.loadTime),size:Math.round(a.size)}
return a.url&&(o.url=a.url),o}(t,r)
break
case"FID":o=function(e,n){var t
if(0===e.updateHistory.length)return null
var r=e.updateHistory[e.updateHistory.length-1],i=r.data.entries,a=i[i.length-1]
return{pageKey:(null===(t=n.get(r.time))||void 0===t?void 0:t.pageKey)||"_unknown",processingStart:Math.round(a.processingStart),processingEnd:Math.round(a.processingEnd),target:ps(a.target)}}(t,r)
break
case"CLS":o=function(e,n){if(0===e.updateHistory.length)return null
var t=e.updateHistory.map((function(e){return e.data.entries})).flat()
if(0===t.length)return null
var r=t.reduce((function(e,n){return e&&e.value>n.value?e:n})),i=e.updateHistory.find((function(e){return e.data.entries.includes(r)})),a=null
r&&r.sources&&r.sources.length&&(a=r.sources.reduce((function(e,n){return e.node&&e.previousRect.width*e.previousRect.height>n.previousRect.width*n.previousRect.height?e:n})))
var o,s=n.get(i.time)
return a&&s?{shiftCount:t.length,"largestShift.value":r.value,"largestShift.hadRecentInput":r.hadRecentInput,"largestShift.largestSource.node":ps(null===(o=a)||void 0===o?void 0:o.node),"largestShift.pageKey":s.pageKey||"_unknown","largestShift.url":s.url,"largestShift.startTime":Math.round(r.startTime)}:null}(t,r)}if(o){var s={}
return i(s,a,o),s}return a}(this.basePageTreeId,this.basePageKey,r,this.appContextMap,this.trackingCore.host.api.assign)
t.metadata=function(e){var n={}
return Object.keys(e).forEach((function(t){var r=e[t]
n[t]="string"==typeof r?r:JSON.stringify(r)})),n}(i)}var a={scope:{scopeType:"APPLICATION_INSTANCE",scopeKey:this.basePageTreeId},metrics:[t]}
this.trackingCore.fireEvent({appId:this.rumConfig["app-id"],eventName:"ClientPerfMetricsEvent"},a)}},{key:"reportViaFpmEvent",value:function(e){if(!1===this.fpmReportingState[e]){var n=Qs[e],t={basePageTreeId:this.basePageTreeId,name:e,startTime:us(this.trackingCore.host.api.performance),duration:this.formatValue(n.value,e),startPageInstance:this.startPageInstance,marks:[],spans:[]}
this.trackingCore.fireEvent({appId:this.rumConfig["app-id"],eventName:"FeaturePerformanceMeasurementEvent"},t)}this.fpmReportingState[e]=!0}},{key:"reportAllRemainingWithFpm",value:function(){var e=this
$s.forEach((function(n){n in Qs&&e.reportViaFpmEvent(n)})),this.trackingCore.forceFlush()}},{key:"formatValue",value:function(e,n){var t=e
return-1===e||-2===e?t:("CLS"===n&&(t*=1e5),Math.round(t))}}]),e}(),tc=function(){function e(n,t,r){Ni(this,e),Ui(this,"featureName",void 0),Ui(this,"trackingCore",void 0),Ui(this,"rumConfig",void 0),Ui(this,"observing",!1),Ui(this,"basePageTreeId",void 0),Ui(this,"startPageInstance",void 0),Ui(this,"startMemory",void 0),Ui(this,"reportTimeouts",[]),this.featureName=n,this.trackingCore=t,this.rumConfig=r}return Di(e,[{key:"startObserving",value:function(){var n,t=this,r=this.getMemory()
r&&!this.observing&&(this.basePageTreeId=this.trackingCore.host.treeID||"",this.startPageInstance=(null===(n=this.trackingCore.getCurrentContext())||void 0===n?void 0:n.pageInstance)||na("unknown"),this.startMemory=r,this.reportTimeouts=e.checkpoints.map((function(e){return setTimeout((function(){return t.reportMemory(e)}),60*e*1e3)})))}},{key:"stopObserving",value:function(){this.reportTimeouts.forEach((function(e){return clearTimeout(e)})),this.observing=!1}},{key:"reportMemory",value:function(e){var n={name:this.featureName,basePageTreeId:this.basePageTreeId,startTime:us(this.trackingCore.host.api.performance),duration:0,startPageInstance:this.startPageInstance,marks:this.createMemoryMarks("-".concat(e,"min")),spans:[]}
this.trackingCore.fireEvent({appId:this.rumConfig["app-id"],eventName:"FeaturePerformanceMeasurementEvent"},n)}},{key:"createMemoryMarks",value:function(e){var n=this.getMemory(),t=["jsHeapSizeLimit","totalJSHeapSize","usedJSHeapSize"].map((function(t){return{name:t+e,startTime:n[t]}})),r=n.usedJSHeapSize-this.startMemory.usedJSHeapSize
return t.push({name:(r<0?"usedJSHeapSizeDecrease":"usedJSHeapSizeIncrease")+e,startTime:Math.abs(r)},{name:"utilization"+e,startTime:Math.round(n.usedJSHeapSize/n.totalJSHeapSize*100)}),t}},{key:"getMemory",value:function(){return this.trackingCore.host.api.performance.memory}}]),e}()
Ui(tc,"checkpoints",[1,3,10,30,90,180,300]),Di((function e(n,t,r){var i,a
Ni(this,e),Ui(this,"core",void 0),Ui(this,"config",void 0),Ui(this,"perfTimeWM",new WeakMap),Ui(this,"collector",void 0),Ui(this,"boomerangStart",-1),Ui(this,"webVitalsObserver",void 0),Ui(this,"appMemoryObserver",void 0),Ui(this,"pageMemoryObserver",void 0),this.core=r,this.config=function(e,n){for(var t in e)void 0!==n[t]&&(e[t]=n[t])
return e}(r.host.api.assign({},ks),t)
var o="enabled"===(null===(i=(a=this.core.host).__getLixTreatment)||void 0===i?void 0:i.call(a,"pemberly.tracking.time-origin-epoch-time"))
this.collector=new hs(r.host.api,new As(n,this.config,r.host),this.config,o),this.collector.startObserving()}),[{key:"pingCDN",value:function(){}},{key:"recordTreeId",value:function(e,n){e&&this.collector.recordTreeId(e,n)}},{key:"recordRenderStart",value:function(e,n){this.collector.recordRenderStart(e,n||e)}},{key:"recordRenderEnd",value:function(e){this.collector.recordRenderEnd(e)}},{key:"start",value:function(){var e,n,t,r
this.collector.collectAndClearTimer(!1)
var i,a=Object.create(null),o="enabled"===(null===(e=(n=this.core.host).__getLixTreatment)||void 0===e?void 0:e.call(n,"pemberly.tracking.time-origin-epoch-time"))
return this.perfTimeWM.set(a,ds(this.core.host.api.performance,o)),(this.config["enable-memory-measurement"]||"enabled"===(null===(t=(r=this.core.host).__getLixTreatment)||void 0===t?void 0:t.call(r,"pemberly.tracking.rum-memory-measurement")))&&(null===(i=this.pageMemoryObserver)||void 0===i||i.stopObserving(),this.pageMemoryObserver=new tc("page-memory",this.core,this.config),this.pageMemoryObserver.startObserving(),void 0===this.appMemoryObserver&&(this.appMemoryObserver=new tc("application-memory",this.core,this.config),this.appMemoryObserver.startObserving())),a}},{key:"observeWebVitals",value:function(){void 0===this.webVitalsObserver&&(this.webVitalsObserver=new nc(this.core,this.config),this.webVitalsObserver.startObserving())}},{key:"end",value:function(e){var n,t,r=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0,o=this.core.host.api,s=o.performance,c=o.assign,d=this.perfTimeWM.get(e)
if(void 0===d)throw new Error("The rum token passed in is invalid")
this.perfTimeWM.delete(e)
var u=ds(s,"enabled"===(null===(n=(t=this.core.host).__getLixTreatment)||void 0===n?void 0:n.call(t,"pemberly.tracking.time-origin-epoch-time"))),p=this.config["app-version"]
this.collector.collect((function(e){var n=r.boomerangStart=e.navigationStart||r.boomerangStart,t=e.navigationStart||d,o=u-t
r.core.fireEvent({appId:r.config["app-id"],eventName:"RealUserMonitoringEvent"},(function(r){return c({pageKey:a||r.pageKey,isImpactedByHiddenWindow:i,appVersion:p,timeDone:o,navigationStart:t,boomerangStart:n,renderCompleteTime:u},e)}))}))}},{key:"destroy",value:function(){var e,n,t
this.collector.stopObserving(),null===(e=this.webVitalsObserver)||void 0===e||e.stopObserving(),null===(n=this.appMemoryObserver)||void 0===n||n.stopObserving(),null===(t=this.pageMemoryObserver)||void 0===t||t.stopObserving(),this.core.destroy()}}])
var rc="undefined"!=typeof window&&"undefined"!=typeof performance,ic="undefined"!=typeof location&&-1!==location.search.indexOf("_LI_MEASURE_DEBUG")
Di((function e(n,t){Ni(this,e),Ui(this,"featureKey",void 0),Ui(this,"productName",void 0),Ui(this,"endPageInstance",void 0),Ui(this,"startPageInstance",void 0),Ui(this,"isCanceled",!1),Ui(this,"featureIdentifier",void 0),Ui(this,"name",void 0),Ui(this,"startTime",void 0),Ui(this,"duration",void 0),Ui(this,"marks",[]),Ui(this,"spanStarts",new Map),Ui(this,"spans",[]),Ui(this,"isSpanContainer",!1),Ui(this,"basePageTreeId",void 0),Ui(this,"isClosed",!1),this.featureKey=n,this.productName=t
var r=t?"::".concat(t):""
this.featureIdentifier="".concat(n).concat(r),this.name=n}),[{key:"start",value:function(e){this.startPageInstance=e,rc&&(this.startTime=us(),ic&&performance.mark("LI:".concat(this.featureIdentifier,"-start")))}},{key:"mark",value:function(e){rc&&(this.marks.push({name:e,startTime:us()}),ic&&(performance.mark("LI:".concat(this.featureIdentifier,"-mark-").concat(e)),performance.measure("LI:".concat(this.featureIdentifier,"-mark-").concat(e),"LI:".concat(this.featureIdentifier,"-start"),"LI:".concat(this.featureIdentifier,"-mark-").concat(e))))}},{key:"spanStart",value:function(e){rc&&(this.spanStarts.set(e,us()),ic&&performance.mark("LI:".concat(this.featureIdentifier,"-span-").concat(e,"-start")))}},{key:"spanEnd",value:function(e,n){if(rc&&this.spanStarts.has(e)){var t=this.spanStarts.get(e)
this.spans.push({name:n||e,startTime:t,duration:us()-t}),ic&&(performance.mark("LI:".concat(this.featureIdentifier,"-span-").concat(e,"-end")),performance.measure("LI:".concat(this.featureIdentifier,"-span-").concat(n||e),"LI:".concat(this.featureIdentifier,"-span-").concat(e,"-start"),"LI:".concat(this.featureIdentifier,"-span-").concat(e,"-end")))}}},{key:"end",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]
if(!this.isClosed){if(this.isSpanContainer=n,this.isClosed=!0,this.isCanceled)throw new Error('[rum measurement] cannot end a canceled measurement "'.concat(this.featureIdentifier,'"'))
this.endPageInstance=e,rc&&(this.duration=us()-this.startTime,ic&&!this.isSpanContainer&&(performance.mark("LI:".concat(this.featureIdentifier,"-end")),performance.measure("LI:".concat(this.featureIdentifier),"LI:".concat(this.featureIdentifier,"-start"),"LI:".concat(this.featureIdentifier,"-end"))),this.cleanUp())}}},{key:"cancel",value:function(){this.isCanceled||(this.isCanceled=!0)}},{key:"setBasePageTreeId",value:function(e){this.basePageTreeId=e}},{key:"toEventBody",value:function(){if(rc){var e={name:this.featureKey,startTime:this.startTime,duration:this.isSpanContainer?-1:this.duration,basePageTreeId:this.basePageTreeId,startPageInstance:this.startPageInstance||na("unknown"),marks:this.marks,spans:this.spans}
return this.productName&&(e.productName=this.productName),e}}},{key:"check",value:function(){if(rc){if(this.isCanceled)throw new Error('[rum measurement] "'.concat(this.featureIdentifier,'" has been canceled'))
if(!this.isClosed)throw new Error('[rum measurement] "'.concat(this.featureIdentifier,'" is still open'))
if(this.isSpanContainer&&0===this.spans.length)throw new Error("The span container should have at least one span")
for(var e=0,n=["startTime","duration","basePageTreeId"];e<n.length;e++){var t=n[e]
if(void 0===this[t])throw new Error('[rum measurement] "'.concat(this.featureIdentifier,'" is missing "').concat(t,'"'))}}}},{key:"cleanUp",value:function(){this.spanStarts.clear()}}])
var ac=function(e){var n="TEXT_ONLY"
return e.optionalSendData.renderContent.forEach((function(e){e.file&&(n="ATTACHMENT"),e.externalMedia&&(n="GIF"),e.forwardedMessageContent&&(n="FORWARD"),e.vectorImage&&(n="IMAGE")})),n},oc=function(e,n){var t="ONE_ON_ONE"
return n&&(t="GROUP_CHAT"),e.optionalSendData.renderContent.length&&e.optionalSendData.renderContent.forEach((function(e){e.hostUrnData&&e.hostUrnData.type.includes("INMAIL")&&(t="INMAIL")})),t},sc=function(e){var n=e.code,t=e.message
return t&&t.includes("Failed to fetch")?"NETWORK_ERROR":n&&/^[4-5][0-9][0-9]$/.test(n.toString())?"SERVER_ERROR":n&&999===n?"OTHER_NON_FATAL_ERROR":null},cc=function(e,n,t,r,i){if(i){var a={syncedMessagingMessageUrns:e.filter((function(e){return!!e})),messagingThreadUrn:n,isBootstrap:!!r}
t&&(a.consumedTime=t),i("MessagesSyncConsumedEvent",a)}},dc=function(e,n,t,r,i){var a={trackingId:Ji(),syncType:n,messagingThreadUrns:r?r.forEach((function(e){return e.backendUrn})):[],failureReason:sc(e),failureDetail:e.message,responseCode:e.code,retryCount:t,failureTime:Date.now()}
i&&i("MessagingSyncClientFailureEvent",a)},uc=function(e){return Xi(Array.from(ea(e)))},pc=function(e,n,t,r,a,o,s){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"FIRST",d=t.messages.getByIdentifier(r)
if(!d)return Promise.reject(Pe.fromClientErrorMemo("MESSAGE_DOES_NOT_EXIST"))
var u=uc(r),p=i(i({},s),{},{trackingId:u})
return a(hi({status:"Sending"},r,t.entityUrn)),new Oi(r).try((function(i){return yr(e,n,t.entityUrn,d.content,r,p,d.optionalSendData,1!==i||"RETRY"===c?"DEDUPE":"NOT_DEDUPE").then(Rc(o,i,c)).catch(Ic(o,i,c,t,d,p))})).timeoutAfter(o.options.sendRetryTimeoutInSecond).retryIf(Ze(o,t.clientId)).cancelIf(Ac).start().then((function(e){return function(e,n,t){if(n.originToken&&n.originToken!==t)throw Pe.fromApiErrorMemo("MISSING_DATA_FROM_RESPONSE",{cause:new Error("Invalid originToken ".concat(n.originToken," - expected ").concat(t)),msg:"messagePostToState: MessagePostResponse originToken does not match with the clientId"})
return{clientId:t,content:(r=n,s=(null!==(a=r.body.attributes)&&void 0!==a?a:[]).filter(E),c=s.find((function(e){return e.attributeKindUnion})),i(i({},r.body),{},c?{attributes:s.map((function(e){return{start:e.start,length:e.length,attributeKind:e.attributeKindUnion}}))}:{attributes:null!==(o=r.body.attributes)&&void 0!==o?o:[]})),entityUrn:n.entityUrn,backendConversationUrn:n.backendConversationUrn,backendUrn:n.backendUrn,lastActivityAt:new Date(n.deliveredAt),deliveredAt:new Date(n.deliveredAt),senderUrn:e,status:"Sent",subject:n.subject}
var r,a,o,s,c}(d.senderUrn,e,r)})).then((function(e){var n
return Mi(t,e,p,null===(n=o.options.trackingOptions)||void 0===n?void 0:n.trackingFireEvent),e})).then((function(e){return a(hi(i(i({},e),{},{status:"Sent"}),r,t.entityUrn)),t.clientId})).catch((function(e){return a(hi({status:"Failed"},r,t.entityUrn)),Promise.reject(e)}))},lc=function(e,n,t,r,a,o,s){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"FIRST",d=t.messages.getByIdentifier(r)
if(!d)return Promise.reject(Pe.fromClientErrorMemo("MESSAGE_DOES_NOT_EXIST"))
var u=t.clientId,p=t.recipients,l=uc(r),f=i(i({},s),{},{trackingId:l})
return a(hi({status:"Sending"},r,u)),new Oi(r).try((function(t){return hr(e,n,d.content,r,p,f,d.optionalSendData,1!==t||"RETRY"===c?"DEDUPE":"NOT_DEDUPE").then(Rc(o,t,c)).catch(Ic(o,t,c,void 0,d,f,p))})).timeoutAfter(o.options.sendRetryTimeoutInSecond).retryIf(Ze(o,u)).cancelIf(Ac).start().then((function(t){return $r(e,n,t.conversationUrn,u,f)})).then((function(e){var n,t=e.conversationState.messages.last()
return t&&Mi(e.conversationState,t,f,null===(n=o.options.trackingOptions)||void 0===n?void 0:n.trackingFireEvent),e})).then((function(e){var n=e.conversationState,t=e.participants,i=e.requestId
return a(ni(t,i)),a(function(e,n,t){return{type:"CONVERT_DRAFT_CONVERSATION",payload:{conversationId:e,conversation:n},requestId:t}}(u,n,i)),a(hi({status:"Sent"},r,n.entityUrn)),n.entityUrn})).catch((function(e){return a(hi({status:"Failed"},r,u)),Promise.reject(e)}))},fc=function(e,n){if(xe[e])return!1
var t=function(e,n){return{entityUrn:e,lastActivityAt:new Date,conversations:dn.fromConversationArray(),participants:{},draftConversations:Yr(),connected:{api:n.connected,realtime:n.connected},additionalData:null,status:i(i({},Ue),{},{loading:n.loading}),unreadCounts:{}}}(e,n),r=Xt(ei,t)
return xe[e]={store:r,observers:[]},r.subscribe((function(){!function(e){var n=xe[e]
n&&(n.observers.forEach((function(e){return e.next(n.store.getState())})),n.observers.length)}(e)})),!0},mc=function(e,n,t,r){return ur(e,n,r).then((a=t,function(e){var n,t,r,o
Fr(e,"messengerConversationsBySyncToken")
var s=null===(n=e.data)||void 0===n?void 0:n.messengerConversationsBySyncToken
if(!s)throw Pe.fromApiErrorMemo("MISSING_DATA_FROM_RESPONSE",{msg:"allConversationsToState: messengerConversationsBySyncToken response is missing"})
var c=e.requestId,u=d({},a.hostIdentityUrn,a),p=null!==(t=null===(r=s.metadata)||void 0===r?void 0:r.newSyncToken)&&void 0!==t?t:null
return{conversations:(null!==(o=s.elements.filter(Mr))&&void 0!==o?o:[]).map((function(e){var n=h(Rr(e,Ar(a.entityUrn)),2),t=n[0]
return n[1].forEach((function(e){u[e.hostIdentityUrn]?u[e.hostIdentityUrn]=i(i({},u[e.hostIdentityUrn]),e):u[e.hostIdentityUrn]=e})),t})).filter(E),newSyncToken:p,participants:u,requestId:c}})).then((function(e){return(t=n,function(e){var n=new Date,r=e.conversations,a=e.participants,o=e.newSyncToken,s=e.requestId
return{additionalData:null,connected:{api:!1,realtime:!1},conversations:dn.fromConversationArray(r),draftConversations:new Map,entityUrn:t,lastActivityAt:n,participants:a,status:i(i({},Ue),{},{syncToken:o,lastRequestId:s}),unreadCounts:{}}})(e)
var t}))
var a},yc=function(e,n,t){var r,i,a,o,s,c=n.realtimeHost?Ae({domain:n.realtimeHost,mpInfo:{name:n.mpName,id:n.mpName,version:n.mpVersion},sessionHeartbeat:n.sessionHeartbeatInSecond?1e3*n.sessionHeartbeatInSecond:void 0,connectHeaders:Si({mpName:n.mpName,csrfToken:n.headers()["Csrf-Token"]}),tracking:n.trackingOptions&&n.trackingOptions.trackingFireEvent?{fireEventCallback:n.trackingOptions.trackingFireEvent}:void 0}):Ae()
return(r=c,i=e,a=n.typingIndicatorDelayInSecond,o=t,s=n.trackingOptions,(r.connected?Promise.resolve():r.connect("RETRY")).then((function(){var e=new Map
r.addEventListener("error",(function(e,n){"common-time - error event ".concat(r.connected?"💚":"💔"),(new Date).toLocaleTimeString(),o.dispatch(ii(r.connected))})),r.addEventListener("heartbeat",(function(e,n){r.sessionId," - heartbeat detected ".concat(r.connected?"💚":"💔"),new Date(n).toLocaleTimeString()})),r.addEventListener("connect",(function(){"common-time - connect event ".concat(r.connected?"💚":"💔"),(new Date).toLocaleTimeString(),o.dispatch(ii(r.connected))})),r.addEventListener("reconnecting",(function(){"common-time - reconnecting event ".concat(r.connected?"💚":"💔"),(new Date).toLocaleTimeString()})),r.addEventListener("close",(function(){"common-time - close event ".concat(r.connected?"💚":"💔"),(new Date).toLocaleTimeString(),o.dispatch(ii(r.connected))})),r.addEventListener("poorRealtimeConnectionDetected",(function(){"common-time - Poor Connection event ".concat(r.connected?"💛":"💔"),(new Date).toLocaleTimeString(),o.dispatch(ii(r.connected))})),r.addEventListener("reconnected",(function(e,n){var t
r.connected,(new Date).toLocaleTimeString(),o.triggerChainSync({pageInstance:null==s||null===(t=s.getPageInstance)||void 0===t?void 0:t.call(s)}),o.dispatch(ii(r.connected))})),r.addEventListener("topic",(function(n,t){return Ci(i,t,e,a,o,r.serverClockTime,s)}))})).catch((function(e){var n=Re.CANNOT_CONNECT
return Wr(i)(new Pe("realtime",n.code,n.message,e))}))).catch((function(){return Promise.resolve()}))},hc=function(e){var n
return e.data&&void 0!==e.data.messengerConversationsByCategory?{data:e.data.messengerConversationsByCategory,requestId:e.requestId}:null!==(n=e.data)&&void 0!==n&&n.messengerConversationsBySearchCriteria&&function(e){return void 0!==e.messengerConversationsBySearchCriteria}(e.data)?{data:e.data.messengerConversationsBySearchCriteria,requestId:e.requestId}:{data:{elements:[],metadata:{nextCursor:null}}}},gc=function(e,n){return d({},e.entityUrn,{status:{sending:n}})},vc=function(e,n,t,r){e(n?r?Ei(r,new Set,!0):si([],!0):r?Ei(r,new Set(t.filter((function(e){return e.message})).map((function(e){return e.message.entityUrn})))):si(t.filter((function(e){return e.conversation})).map((function(e){return e.conversation.entityUrn}))))},_c=function(e){return{messengerResource:e.messengerResource,queryFormat:e.queryFormat,mpName:e.mpName,track:tr(e)}},Tc=function(e,n,t){n.length&&function(e,n,t){var r="acknowledgeMessagesReceived",i=JSON.stringify({messageUrns:n,clientId:e.mpName,deliveryMechanism:t,clientConsumedAt:Date.now()}),a=function(e){return Tn("restli",e.messengerResource,"messengerMessageDeliveryAcknowledgements",{action:"sendDeliveryAcknowledgement"})}(e),o=sr(r)
return Nn(a,i).catch(ar(r)).then(o)}(_c(e.options),n,t).catch(zr(e.id))},bc=function(e,n,t,r){if(n(function(e,n,t){return{type:"ADD_NEW_MESSAGE_BY_CONVO_URN",payload:{message:e,conversationUrn:n},requestId:void 0}}(r,t)),r.entityUrn){Tc(e,[r.entityUrn],"REALTIME")
var i,a,o,s=e.state.conversations.getByIdentifier(t)
s&&cc([r.backendUrn],s.backendUrn,null===(i=Vr(e.id))||void 0===i||null===(a=i.realtime)||void 0===a?void 0:a.serverClockTime,s.metadata.shouldClearCache,null===(o=e.options.trackingOptions)||void 0===o?void 0:o.trackingFireEvent)}e.clientSensorTrackers.triggerRecipientMetric("realtime-message-received")},Ec=function(e,n){return function(t,r,a,o,s){var c=e.state.conversations.getByIdentifier(t,"FullMailboxState")
if(c){var d=c.messages.first()
return d&&d.deliveredAt.getTime()>a.deliveredAt.getTime()?Promise.resolve():(r.lastActivityAt>c.lastActivityAt&&n(di(r,t)),bc(e,n,t,a),o&&c.messages.getByIdentifier(o.entityUrn)?Promise.resolve():(e.clientSensorTrackers.triggerRecipientMetric("realtime-message-gap-detected"),e.syncConversationMessages(t,"FullMailboxState",s)))}var u=function(e,n,t){var r,a,o
return i(i({},n),{},{clientId:At(),entityUrn:e,draftMessage:t,matchingSearches:[],messages:new vr,typingUrns:new Set,additionalData:null,status:{fullyLoaded:null!==(r=n.status.fullyLoaded)&&void 0!==r&&r,loading:null!==(a=n.status.loading)&&void 0!==a&&a,sending:null!==(o=n.status.sending)&&void 0!==o?o:"Ready"}})}(t,r,Ar(e.participant.hostIdentityUrn))
return n(ci(u,[])),bc(e,n,t,a),Promise.resolve()}},kc=function(e,n,t,r){return function(i){var a,o,s
if(!i)throw Pe.fromApiErrorMemo("MISSING_DATA_FROM_RESPONSE",{msg:"chainSync > handleSingleResponseBatchSync: messengerMessagesBySyncTokensInBatch response for a single conversation is missing"})
var c=Pr(i,t),d=c.messages,u=c.newSyncToken,p=c.shouldClearCache,l=c.deletedUrns,f=c.participants,m=c.requestId
e(ni(f,m))
var y=null===(a=(null!==(s=i.elements)&&void 0!==s?s:[])[0])||void 0===a||null===(o=a.conversation)||void 0===o?void 0:o.entityUrn
if(y){vc(e,p,l,y),void 0===r.state.conversations.getByIdentifier(y)&&e(ci(n[y],[])),e(yi(g(d),y,u,p,m)),Tc(r,d.map((function(e){return e.entityUrn})),"SYNC")
var h,v,_,T=r.state.conversations.getByIdentifier(y,"FullMailboxState")
T&&cc(d.map((function(e){return e.backendUrn})),T.backendUrn,null===(h=Vr(r.id))||void 0===h||null===(v=h.realtime)||void 0===v?void 0:v.serverClockTime,p,null===(_=r.options.trackingOptions)||void 0===_?void 0:_.trackingFireEvent)}r._updateLocalParticipant()}},Ac=function(e){if(Me(e)){var n=e.code
return void 0!==n&&n>399&&n<500&&422!==n&&429!==n}return!1},Sc=function(e){if(Me(e)){var n=e.code
return void 0!==n&&n>399&&n<500}return!1},Cc=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now()
return e.reduce((function(e,n){return n.lastActivityAt.getTime()<e?n.lastActivityAt.getTime():e}),n)}
function Ic(e,n,t,r,i,a,o){return function(s){var c,d
return 1===n?e.clientSensorTrackers.triggerSenderMetric("FIRST"===t?"message-send-fail":"message-manual-retry-fail"):e.clientSensorTrackers.triggerSenderMetric("message-auto-retry-fail"),Mi(r,i,a,null===(c=e.options.trackingOptions)||void 0===c?void 0:c.trackingFireEvent),function(e,n,t,r,i,a,o){var s=sc(e),c=e.message,d="failure message: ".concat(c),u=!1
if(a&&(u=a.length>1),t&&(u=null==t?void 0:t.groupChat),i&&r){var p={isAutoRetry:n>1,clientFailureType:s,clientFailureDetail:d,conversationType:oc(r,u),messageContentType:ac(r),messagingThreadUrn:t?t.backendUrn:null,sourceType:i.sourceType,trackingId:i.trackingId,messageComposeFlowTrackingId:i.messageComposeFlowTrackingId,messageSendAttemptedAt:Date.now()}
o&&o("MessageSendClientFailureEvent",p)}}(s,n,r,i,a,o,null===(d=e.options.trackingOptions)||void 0===d?void 0:d.trackingFireEvent),Promise.reject(s)}}function Rc(e,n,t){return function(r){return 1===n?e.clientSensorTrackers.triggerSenderMetric("FIRST"===t?"message-send-success":"message-manual-retry-success"):e.clientSensorTrackers.triggerSenderMetric("message-auto-retry-success"),r}}var Oc,Mc=function(){function e(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]
o(this,e),d(this,"_queue",void 0),d(this,"_continueOnFailure",void 0),this._queue=[],this._continueOnFailure=n}return c(e,[{key:"length",get:function(){return this._queue.length}},{key:"enqueue",value:function(e,n,t){var r=this
return new Promise((function(i,a){r._queue.push({requestGenerator:e,resolve:i,reject:a,messageId:n}),1===r._queue.length&&r._flush(t)}))}},{key:"start",value:function(e){return this._flush(e)}},{key:"_flush",value:function(e){var n=this
if(this._queue.length){var t=this._queue[0]
if(!e||e&&t.messageId&&e(t.messageId))return t.requestGenerator().then((function(r){return t.resolve(r),n._queue.shift(),n._queue.length>0&&n._flush(e),r})).catch((function(r){return t.reject(r),n._continueOnFailure&&(n._queue.shift(),n._queue.length>0&&n._flush(e)),Promise.resolve(void 0)}))
this._queue.shift(),this._queue.length>0&&this._flush(e)}return Promise.resolve(void 0)}}]),e}(),wc="function"==typeof Symbol&&Symbol.observable||"@@observable",Nc=function(e){return{triggerSenderMetric:function(n){null==e||e({groupName:"messengerData",metricName:n})},triggerRecipientMetric:function(n){null==e||e({groupName:"messengerData",metricName:n})},triggerOtherMetric:function(n){null==e||e({groupName:"messengerData",metricName:n})}}}
function Pc(e){var n=e
return(null!==n&&"object"===a(n)||"function"==typeof n)&&(void 0===n.messageComposeFlowTrackingId||"string"==typeof n.messageComposeFlowTrackingId)&&(void 0===n.sourceType||"string"==typeof n.sourceType)&&(void 0===n.pageInstance||(null!==n.pageInstance&&"object"===a(n.pageInstance)||"function"==typeof n.pageInstance)&&"string"==typeof n.pageInstance.pageUrn&&("string"==typeof n.pageInstance.trackingId&&(null!==n.pageInstance.trackingId&&"object"===a(n.pageInstance.trackingId)||"function"==typeof n.pageInstance.trackingId)&&"Byte String"===n.pageInstance.trackingId._type||"string"==typeof n.pageInstance.trackingId&&(null!==n.pageInstance.trackingId&&"object"===a(n.pageInstance.trackingId)||"function"==typeof n.pageInstance.trackingId)&&"Base64"===n.pageInstance.trackingId._type||"string"==typeof n.pageInstance.trackingId&&(null!==n.pageInstance.trackingId&&"object"===a(n.pageInstance.trackingId)||"function"==typeof n.pageInstance.trackingId)&&"RFC4122"===n.pageInstance.trackingId._type||Array.isArray(n.pageInstance.trackingId)&&n.pageInstance.trackingId.every((function(e){return"number"==typeof e}))&&(null!==n.pageInstance.trackingId&&"object"===a(n.pageInstance.trackingId)||"function"==typeof n.pageInstance.trackingId)&&"Raw Bytes Array"===n.pageInstance.trackingId._type)||(null!==n.pageInstance&&"object"===a(n.pageInstance)||"function"==typeof n.pageInstance)&&"string"==typeof n.pageInstance.pageUrn&&"string"==typeof n.pageInstance.trackingId)&&(void 0===n.trackingId||"string"==typeof n.trackingId)}function Dc(e){var n=e
return function(e){var n=e
return(null!==n&&"object"===a(n)||"function"==typeof n)&&"category"===n.kind&&"string"==typeof n.category}(n)||(null!==n&&"object"===a(n)||"function"==typeof n)&&"search"===n.kind&&Array.isArray(n.categories)&&n.categories.every((function(e){return"string"==typeof e}))&&"string"==typeof n.keywords&&(void 0===n.read||!1===n.read||!0===n.read)&&"boolean"==typeof n.firstDegreeConnections}Oc=Symbol.observable
var Uc=function(){function e(n,t,r){var a,s=this,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Br,u=arguments.length>4?arguments[4]:void 0
o(this,e),d(this,"_stateSubscribers",[]),d(this,"_pendingErrors",[]),d(this,"_id",void 0),d(this,"_options",void 0),d(this,"_throttledTypingFns",{}),d(this,"_filter",void 0),d(this,"_oldestConversationTime",0),d(this,"_cursor",null),d(this,"_fullyLoaded",!1),d(this,"_localParticipant",void 0),d(this,"_dispatch",void 0),d(this,"_clientSensorTrackers",void 0),d(this,"trackingData",{}),d(this,"_sendFullMessageInDraftConversation",(function(e,n,t,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"FIRST"
if(e.messages.length>0)return Wr(s.id)(Pe.fromClientErrorMemo("CANNOT_ADD_MESSAGES_IN_CONVERSATION"))
var a=br({senderUrn:s.participant.hostIdentityUrn,content:n,optionalSendData:t})
s._dispatch(pi(a,e.clientId))
var o=s.state.draftConversations.get(e.clientId)
return o?("Failed"!==o.sending&&s._dispatch(Ti(o.clientId,"InProgress")),s._getRequestQueue("messageSend",o.clientId).enqueue((function(){return lc(s.networkConfig,s.participant.hostIdentityUrn,o,a.clientId,s._dispatch.bind(s),s,r,i).then((function(e){var n
return(null===(n=s.state.conversations.getByIdentifier(e,"FullMailboxState"))||void 0===n?void 0:n.clientId)||o.clientId})).catch((function(e){return s.options.continueOnFailure||s._dispatch(Ti(o.clientId,"Failed")),Wr(s.id)(Pe.fromClientErrorMemo("MESSAGE_SEND_FAILED",e))}))}),a.clientId,Ze(s,o.clientId)).finally((function(){0===s._getRequestQueue("messageSend",o.clientId).length&&s._dispatch(Ti(o.clientId,"Ready"))}))):Wr(s.id)(Pe.fromClientErrorMemo("CONVERSATION_DOES_NOT_EXIST"))})),this._id=n,this._options=i({},t),this._filter=c,this._dispatch=u,this._clientSensorTrackers=Nc(null===(a=t.trackingOptions)||void 0===a?void 0:a.incrementMetricCounterHandler),this._localParticipant={kind:"MEMBER",clientId:r,entityUrn:"urn:li:msg_messagingParticipant:".concat(this.id),hostIdentityUrn:this.id,backendUrn:null,firstName:"",lastName:"",headline:"",additionalData:null,pronoun:{customPronoun:"",standardizedPronoun:""},profile:{}},Gr(n,{next:function(e){return b(s._stateSubscribers,jr(e,c,s._oldestConversationTime,s._cursor,s._fullyLoaded))},error:function(e){return s._notifyErrorSubscribers(e)}})}return c(e,[{key:Oc,value:function(){return this}},{key:wc,value:function(){return this}},{key:"observable",get:function(){return this}},{key:"subscribe",value:function(e){var n=this,t=e
return"function"==typeof e&&(t={next:e}),this._stateSubscribers.push(t),this._pendingErrors.length>0&&this._pendingErrors.forEach((function(e){return n._notifyErrorSubscribers(e)})),setTimeout((function(){return t.next(n.state)}),0),{unsubscribe:function(){n._stateSubscribers=n._stateSubscribers.filter((function(e){return e!==t}))}}}},{key:"filter",get:function(){return this._filter}},{key:"subscribersCount",get:function(){return this._stateSubscribers.length}},{key:"state",get:function(){var e=qr(this._id)
return jr(e,this._filter,this._oldestConversationTime,this._cursor,this._fullyLoaded)}},{key:"participant",get:function(){return this._localParticipant}},{key:"id",get:function(){return this._id}},{key:"options",get:function(){return this._options}},{key:"clientSensorTrackers",get:function(){return this._clientSensorTrackers}},{key:"trackingCore",get:function(){var e
return null===(e=this._options.trackingOptions)||void 0===e?void 0:e.trackingCore}},{key:"getPageInstanceFn",get:function(){var e,n
return null!==(e=this._options.trackingOptions)&&void 0!==e&&e.getPageInstance?null===(n=this._options.trackingOptions)||void 0===n?void 0:n.getPageInstance:function(){}}},{key:"getPageKeyFn",get:function(){var e
return null===(e=this._options.trackingOptions)||void 0===e?void 0:e.getPageKey}},{key:"getConversations",value:function(e){var n,t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0
if(!Array.isArray(e))return Wr(this.id)(Pe.fromInvalidType("getConversations","conversationIdentifiers"," URN | UUIDV4[]"))
if("number"!=typeof r)return Wr(this.id)(Pe.fromInvalidType("getConversations","count"," number"))
if(!k(a)&&!Pc(a))return Wr(this.id)(Pe.fromInvalidType("getConversations","trackingData","TrackingData | undefined"))
if(n=j,!e.every(n))return Wr(this.id)(Pe.fromInvalidType("getConversations","conversationIdentifiers[x]"," URN or UUIDV4"))
var o=[],s=[]
return e.forEach((function(e){var n=t.state.conversations.getByIdentifier(e,"FullMailboxState")
n?o.push(n):q(e)&&s.push(e)})),s.length?function(e,n,t,r){var i="getConversationsByIds",a=ut(e,{conversationIds:n,count:t}),o=or(i)
return rr(e,a,i,r)().catch(ar(i)).then(o)}(this.networkConfig,s,r,a).then((function(e){return function(e,n){var t,r=null===(t=e.data)||void 0===t?void 0:t.messengerConversationsByIds
if(!r)throw Pe.fromApiErrorMemo("MISSING_DATA_FROM_RESPONSE",{msg:"getConversationsToState: messengerConversationsByIds response is missing"})
return i(i({},Nr(r,n)),{},{requestId:e.requestId})}(e,t.createNewDraftMessage())})).then((function(e){var n=e.conversations,r=e.participants,i=e.requestId
return t._dispatch(ui(n,w(r),null,i)),t._updateLocalParticipant(),We([].concat(o,g(n)))})).catch(Wr(this.id)):Promise.resolve(o)}},{key:"syncConversationMessages",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FullMailboxState",r=arguments.length>2?arguments[2]:void 0,i=this.state.conversations.getByIdentifier(e,t)
return i?(this._dispatch(li(i.clientId,!0)),new Oi(void 0,1.25).try((function(t){return dr(n.networkConfig,e,i.metadata.syncToken,r).catch((function(e){var r
throw n.clientSensorTrackers.triggerRecipientMetric("message-list-sync-fail"),dc(e,"MESSAGES",t,[i],null===(r=n.options.trackingOptions)||void 0===r?void 0:r.trackingFireEvent),e}))})).timeoutAfter(this.options.syncRetryTimeoutInSecond).cancelIf(Sc).start().then((function(e){return function(e){var n
Fr(e,"messengerMessagesBySyncToken")
var t=null===(n=e.data)||void 0===n?void 0:n.messengerMessagesBySyncToken
if(!t)throw Pe.fromApiErrorMemo("MISSING_DATA_FROM_RESPONSE",{msg:"syncMessagesToMessageStates: messengerMessagesBySyncToken response is missing"})
return Pr(t,e.requestId)}(e)})).then((function(t){var r,a,o,s=t.messages,c=t.newSyncToken,d=t.shouldClearCache,u=t.deletedUrns,p=t.participants,l=t.requestId
return n._dispatch(ni(p,l)),vc(n._dispatch.bind(n),d,u,e),n._dispatch(yi(g(s),i.entityUrn,c,d,l)),Tc(n,s.map((function(e){return e.entityUrn})),"SYNC"),cc(s.map((function(e){return e.backendUrn})),i.backendUrn,null===(r=Vr(n.id))||void 0===r||null===(a=r.realtime)||void 0===a?void 0:a.serverClockTime,d,null===(o=n.options.trackingOptions)||void 0===o?void 0:o.trackingFireEvent),n._updateLocalParticipant(),n._getSeenReceipts(e).catch(zr(n.id)),n._getQuickReplies(e).catch(Wr(n.id)),n.clientSensorTrackers.triggerRecipientMetric("message-list-sync-success"),Promise.resolve()})).catch((function(e){return n._dispatch(li(i.clientId,!1)),Wr(n.id)(Pe.fromClientErrorMemo("MESSAGE_LIST_SYNC_FAILED",e))}))):Wr(this.id)(Pe.fromClientErrorMemo("CONVERSATION_DOES_NOT_EXIST"))}},{key:"syncConversations",value:function(e){var n=this,t=this.state.status.syncToken
return this.state.status.loading?Promise.resolve(0):t?(this._dispatch(fi(!0)),new Oi(void 0,1.25).try((function(r){return function(e,n,t,r,a,o,s){return function(e,n,t,r){var i="syncConversations",a={mailboxUrn:n}
t&&(a.syncToken=t)
var o=mt(e,a),s=or(i)
return rr(e,o,i,r)().then(s)}(e,n,r,s).catch((function(e){var n
throw a.clientSensorTrackers.triggerRecipientMetric("conversation-list-sync-fail"),dc(e,"CONVERSATIONS",o,void 0,null===(n=a.options.trackingOptions)||void 0===n?void 0:n.trackingFireEvent),e})).then((function(e){return function(e,n){var t,r,a,o,s,c,d
Fr(e,"messengerConversationsBySyncToken")
var u=null===(t=e.data)||void 0===t?void 0:t.messengerConversationsBySyncToken
if(!u)throw Pe.fromApiErrorMemo("MISSING_DATA_FROM_RESPONSE",{msg:"syncConversationsToState: messengerConversationsBySyncToken response is missing"})
var p=e.requestId,l={},f=null!==(r=null===(a=u.metadata)||void 0===a?void 0:a.newSyncToken)&&void 0!==r?r:null,m=null!==(o=null===(s=u.metadata)||void 0===s?void 0:s.shouldClearCache)&&void 0!==o&&o,y=null!==(c=null===(d=u.metadata)||void 0===d?void 0:d.deletedUrns)&&void 0!==c?c:[]
return{conversations:u.elements.filter(Mr).map((function(e){var t=h(Rr(e,Ar(n)),2),r=t[0]
return t[1].forEach((function(e){l[e.hostIdentityUrn]?l[e.hostIdentityUrn]=i(i({},l[e.hostIdentityUrn]),e):l[e.hostIdentityUrn]=e})),r})).filter(E),newSyncToken:f,shouldClearCache:m,deletedUrns:y,participants:l,requestId:p}}(e,n)})).then((function(n){var r,i,o,c,d=n.conversations.map((function(e){var n,t,r=null===(n=a.state.conversations.getByIdentifier(e.entityUrn))||void 0===n||null===(t=n.metadata)||void 0===t?void 0:t.syncToken
return r?{conversationUrn:e.entityUrn,syncToken:r}:{conversationUrn:e.entityUrn}}))
return a.clientSensorTrackers.triggerRecipientMetric("conversation-list-sync-success"),i=n,o=null===(r=a.options.trackingOptions)||void 0===r?void 0:r.trackingFireEvent,c={syncedMessagingThreadUrns:i.conversations.map((function(e){return e.backendUrn})),isBootstrap:!!i.shouldClearCache},o&&o("ConversationsSyncConsumedEvent",c),function(e,n,t){var r="getSyncMessagesByConversationIdInBatch",i=ht(e,{criteria:n}),a=or(r)
return rr(e,i,r,t)().catch(ar(r)).then(a)}(e,d,s).then((function(e){var r
Fr(e,"messengerMessagesBySyncTokensInBatch")
var i=null===(r=e.data)||void 0===r?void 0:r.messengerMessagesBySyncTokensInBatch
if(!i)throw Pe.fromApiErrorMemo("MISSING_DATA_FROM_RESPONSE",{msg:"chainSync: messengerMessagesBySyncTokensInBatch response is missing"})
var o=S(n.conversations.map((function(e){return[e.entityUrn,e]})))
return i.forEach(kc(t,o,e.requestId,a)),a.clientSensorTrackers.triggerRecipientMetric("message-list-sync-success"),n})).catch((function(e){var t
throw a.clientSensorTrackers.triggerRecipientMetric("message-list-sync-fail"),dc(e,"MESSAGES",1,n.conversations,null===(t=a.options.trackingOptions)||void 0===t?void 0:t.trackingFireEvent),e}))}))}(n.networkConfig,n.id,n._dispatch.bind(n),t,n,r,e)})).timeoutAfter(this.options.syncRetryTimeoutInSecond).cancelIf(Sc).start().then((function(e){var t=e.conversations,r=e.newSyncToken,i=e.shouldClearCache,a=e.deletedUrns,o=e.participants,s=e.requestId
return vc(n._dispatch.bind(n),null!=i&&i,null!=a?a:[]),n._dispatch(ui(t,w(o),r,s)),n._updateLocalParticipant(),t.length})).catch((function(e){return n._dispatch(fi(!1)),Wr(n.id)(Pe.fromClientErrorMemo("CHAIN_SYNC_FAILED",e))}))):Wr(this.id)(Pe.fromClientErrorMemo("CHAIN_SYNC_CANNOT_START"))}},{key:"composeByRecipients",value:function(e){var n,t,r,i,a,o,s=this
return(n=this.networkConfig,t=this.id,r=e,i="findConversationsByRecipients",a=ct(n,{mailboxUrn:t,recipients:r}),o=or(i),wn(a).catch(ar(i)).then(o)).then((function(n){var t,r=null===(t=n.data)||void 0===t?void 0:t.messengerConversationsByRecipients.elements.filter(Mr),i=n.requestId
if(null!=r&&r.length){var a=r[0],o=s.state.conversations.getByIdentifier(a.entityUrn,"FullMailboxState")
if(o)return Promise.resolve(o)
var c=function(e,n){var t,r=null===(t=e.data)||void 0===t?void 0:t.messengerConversationsByRecipients.elements.filter(Mr)
if(!r)throw Pe.fromApiErrorMemo("MISSING_DATA_FROM_RESPONSE",{msg:"recipientConversationsToState: messengerConversationsByRecipients response does not contain non-null elements"})
return Nr(r,n)}(n,s.createNewDraftMessage()),d=c.conversations,u=c.participants,p=d.filter((function(e){return!s.state.conversations.getByIdentifier(e.clientId)}))
s._dispatch(ui(p,w(u),null,i))
var l=s.state.conversations.getByIdentifier(d[0].clientId,"FullMailboxState")
return l?Promise.resolve(l):Wr(s.id)(Pe.fromClientErrorMemo("COMPOSE_BY_RECIPIENTS_FAILED"))}return s.createDraftConversation(e)}))}},{key:"createDraftConversation",value:function(e){var n,t,r=(n=this.participant.entityUrn,t=e,{clientId:At(),draftMessage:Ar(n),messages:new vr,recipients:t,sending:"Ready"})
return this._dispatch({type:"ADD_DRAFT_CONVERSATION",payload:{conversation:r}}),Promise.resolve(r)}},{key:"deleteDraftConversation",value:function(e){return this.state.draftConversations.has(e)?(this._dispatch({type:"REMOVE_DRAFT_CONVERSATION",payload:{conversationId:e}}),Promise.resolve(e)):Wr(this.id)(Pe.fromClientErrorMemo("DRAFT_CONVERSATION_NOT_FOUND"))}},{key:"updateDraftConversation",value:function(e,n){return this.state.draftConversations.get(e)?(this._dispatch(function(e,n){return{type:"UPDATE_DRAFT_CONVERSATION",payload:{conversationId:e,recipientUrns:n}}}(e,n)),Promise.resolve(this.state.draftConversations.get(e))):Wr(this.id)(Pe.fromClientErrorMemo("DRAFT_CONVERSATION_NOT_FOUND"))}},{key:"setConversationAsActive",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NO_CHANGE",t=arguments.length>2?arguments[2]:void 0,r=this._getConversationByIdentifier(e,"FullMailboxState"),i=this.state.connected.realtime
return r?L(r)?("MARK_READ"!==n&&"MARK_UNREAD"!==n||this.updateConversationsReadStatus(d({},r.entityUrn,"MARK_READ"===n)).then((function(){return Promise.resolve()})).catch(Wr(this.id)),r.metadata.syncToken&&i?Promise.resolve():this.syncConversationMessages(r.entityUrn,"FullMailboxState",t)):Promise.resolve():Wr(this.id)(Pe.fromClientErrorMemo("CONVERSATION_DOES_NOT_EXIST"))}},{key:"updateConversation",value:function(e,n){var t=d({},e,n)
return this._dispatch(ai(t)),fr(this.networkConfig,e,n).then((function(){return Promise.resolve()})).catch(Wr(this.id))}},{key:"updateConversationsReadStatus",value:function(e){var n=S(M(e).map((function(n){return[n,{read:e[n]}]})))
return this._dispatch(ai(n)),function(e,n){var t="updateConversations",r=Object.keys(n),i={}
r.forEach((function(e){i[e]={patch:{$set:n[e]}}}))
var a=JSON.stringify({entities:i}),o=sr(t),s=function(e,n){var t=Cn(n),r="messengerConversations?ids=List(".concat(t,")")
return Tn("restli",e.messengerResource,r)}(e,r)
return Nn(s,a).catch(ar(t)).then(o)}(this.networkConfig,n).then((function(){return Promise.resolve()})).catch(Wr(this.id))}},{key:"addCategoryToConversations",value:function(e,n){return this._dispatchCategoryUpdate(e,n,"ADD"),function(e,n,t){var r="addCategoryToConversationsAPI",i=JSON.stringify({conversationUrns:n,category:t}),a=sr(r),o=function(e){return Tn("restli",e.messengerResource,"messengerConversations",{action:"addCategory"})}(e)
return Nn(o,i).catch(ar(r)).then(a)}(this.networkConfig,e,n).then((function(){return Promise.resolve()})).catch(Wr(this.id))}},{key:"removeCategoryFromConversations",value:function(e,n){return this._dispatchCategoryUpdate(e,n,"REMOVE"),function(e,n,t){var r="removeCategoryFromConversationsAPI",i=JSON.stringify({conversationUrns:n,category:t}),a=sr(r),o=function(e){return Tn("restli",e.messengerResource,"messengerConversations",{action:"removeCategory"})}(e)
return Nn(o,i).catch(ar(r)).then(a)}(this.networkConfig,e,n).then((function(){return Promise.resolve()})).catch(Wr(this.id))}},{key:"updateConversationTitle",value:function(e,n){var t=d({},e,{title:n})
return this._dispatch(ai(t)),function(e,n,t){var r=JSON.stringify({patch:{$set:{title:t}}})
return lr(e,n,r)}(this.networkConfig,e,n).then((function(){return Promise.resolve()})).catch(Wr(this.id))}},{key:"deleteConversation",value:function(e){var n=this
return function(e,n){var t="deleteConversation",r="messengerConversations/".concat(encodeURIComponent(n)),i=sr(t)
return Pn(e,r).catch(ar(t)).then(i)}(this.networkConfig,e).then((function(){n._dispatch(oi(e))})).catch(Wr(this.id))}},{key:"deleteConversations",value:function(e){var n,t,r,i,a,o,s=this
return(n=this.networkConfig,t=e,r="bulkDeleteConversations",i=Cn(t),a="messengerConversations?ids=List(".concat(i,")"),o=sr(r),Pn(n,a).catch(ar(r)).then(o)).then((function(){s._dispatch(si(e))})).catch(Wr(this.id))}},{key:"loadOlderConversations",value:function(){var e=this
if(this.state.status.fullyLoaded||this.state.status.loading)return Promise.resolve(0)
var n=this.state.conversations.last()
this._dispatch(fi(!0))
var t=n?n.lastActivityAt.getTime():null,r=this._cursor
return function(e,n,t,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null
switch(t.kind){case"category":var o={category:t.category,count:r.convCount}
return a?function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pr,i="findConversationsByCursor",a=r.count,o=r.category,s=st(e,{category:o,count:a,mailboxUrn:n,nextCursor:t}),c=or(i)
return wn(s).catch(ar(i)).then(c)}(e,n,a,o):function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pr,i="findConversationsByTimestamp",a=r.count,o={category:r.category,count:a,mailboxUrn:n}
null!==t&&(o.lastUpdatedBefore=t)
var s=st(e,o),c=or(i)
return wn(s).catch(ar(i)).then(c)}(e,n,i,o)
case"search":var s=t.categories,c=t.keywords,d=t.read
return function(e,n,t,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s="findConversationsBySearchCriteria",c={categories:t,count:20,keywords:r,firstDegreeConnections:i,mailboxUrn:n}
void 0!==a&&(c.read=a),null!==o&&(c.nextCursor=o)
var d=dt(e,c),u=or(s)
return wn(d).catch(ar(s)).then(u)}(e,n,s,c,t.firstDegreeConnections,d,a)}}(this.networkConfig,this.id,this.filter,this.options,t,r).then(hc).then((function(n){var t=n.data,i=n.requestId,a=function(e,n){var t,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{kind:"category",category:"INBOX"}
if(!e||!e.elements)throw Pe.fromApiErrorMemo("MISSING_DATA_FROM_RESPONSE",{msg:"conversationsResponseDataToState: data or its elements is missing"})
var a={}
return{conversations:e.elements.filter(Mr).map((function(e){var t=h(Rr(e,n,Ur(i)?i.id:void 0),2),r=t[0]
return t[1].forEach((function(e){V(e)&&e.hostIdentityUrn.includes(e.firstName)?e.entityUrn:a[e.hostIdentityUrn]=e})),r})),participants:a,nextCursor:null!==(t=null===(r=e.metadata)||void 0===r?void 0:r.nextCursor)&&void 0!==t?t:null}}(t,e.createNewDraftMessage(),e.filter),o=a.conversations,s=a.participants,c=a.nextCursor
e._cursor=c,e._fullyLoaded=null===c||c===r,e._oldestConversationTime=Cc(o,e._oldestConversationTime)
var d="search"!==e.filter.kind
return e._dispatch(function(e,n){return{type:"ADD_OLDER_CONVERSATIONS",payload:{nextCursor:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,conversations:e,participants:n,fullyLoaded:arguments.length>3?arguments[3]:void 0,writeCategories:arguments.length>4?arguments[4]:void 0},requestId:arguments.length>5?arguments[5]:void 0}}(o,w(s),e._cursor,e._fullyLoaded,d,i)),e.clientSensorTrackers.triggerRecipientMetric("conversation-list-load-more-success"),o.length})).catch((function(n){return e.clientSensorTrackers.triggerRecipientMetric("conversation-list-load-more-fail"),e._dispatch(fi(!1)),Wr(e.id)(n)}))}},{key:"sendMessage",value:function(e,n,t,r){var i=this._getConversationByIdentifier(e)
return i?L(i)?this._sendMessageInExistingConvo(i,n,t,r):this._sendFullMessageInDraftConversation(i,n,t,r):Wr(this.id)(Pe.fromClientErrorMemo("CONVERSATION_DOES_NOT_EXIST"))}},{key:"sendPendingMessages",value:function(e){var n=this,t=this._getConversationByIdentifier(e)
if(!t)return Wr(this.id)(Pe.fromClientErrorMemo("CONVERSATION_DOES_NOT_EXIST"))
if(L(t)){var r
if("InProgress"===(null===(r=t.status)||void 0===r?void 0:r.sending))return Wr(this.id)(Pe.fromClientErrorMemo("SENDING_QUEUE_IN_PROGRESS"))
this._dispatch(ai(gc(t,"InProgress")))}else{if("InProgress"===t.sending)return Wr(this.id)(Pe.fromClientErrorMemo("SENDING_QUEUE_IN_PROGRESS"))
this._dispatch(Ti(t.clientId,"InProgress"))}return this._getRequestQueue("messageSend",t.clientId).start(Ze(this,t.clientId)).then((function(){return t.clientId})).finally((function(){0===n._getRequestQueue("messageSend",t.clientId).length&&(L(t)?n._dispatch(ai(gc(t,"Ready"))):n._dispatch(Ti(t.clientId,"Ready")))}))}},{key:"retrySendMessage",value:function(e,n,t){var r=this._getConversationByIdentifier(e)
if(!r)return Wr(this.id)(Pe.fromClientErrorMemo("CONVERSATION_DOES_NOT_EXIST"))
var i=r.messages.getByIdentifier(n)
if(!i)return Wr(this.id)(Pe.fromClientErrorMemo("MESSAGE_DOES_NOT_EXIST"))
this._dispatch(bi(r.clientId,n))
var a=this._getConversationByIdentifier(e)
return a?L(a)?this._sendMessageInExistingConvo(a,i.content,i.optionalSendData,t,"RETRY"):this._sendFullMessageInDraftConversation(a,i.content,i.optionalSendData,t,"RETRY"):Wr(this.id)(Pe.fromClientErrorMemo("CONVERSATION_DOES_NOT_EXIST"))}},{key:"editMessage",value:function(e,n,t){var r,i,a=this
return(null===(r=this.state.conversations.getByIdentifier(e))||void 0===r||null===(i=r.messages)||void 0===i?void 0:i.getByIdentifier(n))?function(e,n,t){var r="editConversationMessage",i=JSON.stringify({patch:{$set:{body:t}}}),a=function(e,n){var t="messengerMessages/".concat(encodeURIComponent(n))
return Tn("restli",e.messengerResource,t)}(e,n),o=sr(r)
return Nn(a,i).catch(ar(r)).then(o)}(this.networkConfig,n,t).then((function(){a._dispatch(gi(d({},n,{content:t,messageBodyRenderFormat:"EDITED"}),e))})).catch((function(e){return Wr(a.id)(Pe.fromClientErrorMemo("MESSAGE_EDIT_FAILED",e))})):Wr(this.id)(Pe.fromClientErrorMemo("MESSAGE_DOES_NOT_EXIST"))}},{key:"deleteMessage",value:function(e,n){var t=this,r=this._getConversationByIdentifier(e)
if(!r)return Wr(this.id)(Pe.fromClientErrorMemo("CONVERSATION_DOES_NOT_EXIST"))
var i=r.messages.getByIdentifier(n)
if(!i)return Wr(this.id)(Pe.fromClientErrorMemo("MESSAGE_DOES_NOT_EXIST"))
if(i.entityUrn&&L(r)){var a=i.entityUrn
return function(e,n){var t="deleteConversationMessage",r=JSON.stringify({messageUrn:n}),i=function(e){return Tn("restli",e.messengerResource,"messengerMessages",{action:"recall"})}(e),a=sr(t)
return Nn(i,r).catch(ar(t)).then(a)}(this.networkConfig,a).then((function(){t._dispatch(gi(d({},a,{messageBodyRenderFormat:"RECALLED"}),r.entityUrn))})).catch((function(e){return Wr(t.id)(Pe.fromClientErrorMemo("MESSAGE_DELETE_FAILED",e))}))}return this._dispatch(bi(r.clientId,n)),this.options.continueOnFailure||this.sendPendingMessages(e),Promise.resolve()}},{key:"react",value:function(e,n){var t=this,r=this.state.conversations.findMessage(e)
if(!r)return Wr(this.id)(Pe.fromClientErrorMemo("MESSAGE_DOES_NOT_EXIST"))
var i=G(this.state.conversations,e)
return this._reactAttemptWouldExceedCap(r,n)?Wr(this.id)(Pe.fromClientErrorMemo("REACTION_LIMIT_REACHED")):(this._dispatch(vi(e,{emoji:n,viewerReacted:!0})),this._getRequestQueue("reactions",i.clientId).enqueue((function(){return function(e,n,t){var r="reactWithEmojiAPI",i=JSON.stringify({messageUrn:n,emoji:t}),a=function(e){return Tn("restli",e.messengerResource,"messengerMessages",{action:"reactWithEmoji"})}(e),o=sr(r)
return Nn(a,i).catch(ar(r)).then(o)}(t.networkConfig,e,n).then((function(){return Promise.resolve(i.clientId)})).catch((function(){return t._dispatch(vi(e,{emoji:n,viewerReacted:!1})),Promise.resolve(i.clientId)}))})))}},{key:"unreact",value:function(e,n){var t=this,r=G(this.state.conversations,e)
return this._dispatch(vi(e,{emoji:n,viewerReacted:!1})),this._getRequestQueue("reactions",r.clientId).enqueue((function(){return function(e,n,t){var r="unreactWithEmojiAPI",i=JSON.stringify({messageUrn:n,emoji:t}),a=function(e){return Tn("restli",e.messengerResource,"messengerMessages",{action:"unreactWithEmoji"})}(e),o=sr(r)
return Nn(a,i).catch(ar(r)).then(o)}(t.networkConfig,e,n).then((function(){return Promise.resolve(r.clientId)})).catch((function(){return t._dispatch(vi(e,{emoji:n,viewerReacted:!0})),Promise.resolve(r.clientId)}))}))}},{key:"getReactors",value:function(e,n){var t=this
return function(e,n,t){var r="getReactorsByMessageAndEmojiAPI",i=vt(e,{messageUrn:n,emoji:t}),a=or(r)
return wn(i).catch(ar(r)).then(a)}(this.networkConfig,e,n).then((function(r){var i=function(e){if(!e.data||!e.data.messengerMessagingParticipantsByMessageAndEmoji||!e.data.messengerMessagingParticipantsByMessageAndEmoji.elements)throw Pe.fromApiErrorMemo("MISSING_DATA_FROM_RESPONSE",{msg:"reactorsResponseToReactorsState: messengerMessagingParticipantsByMessageAndEmoji response is missing"})
var n=e.requestId
return{reactors:e.data.messengerMessagingParticipantsByMessageAndEmoji.elements.reduce((function(e,n){return n&&n.hostIdentityUrn&&e.push(n.hostIdentityUrn),e}),[]),requestId:n}}(r),a=i.reactors,o=i.requestId
return t._dispatch(vi(e,{emoji:n,reactors:a},o)),Promise.resolve({reactors:a})})).catch((function(e){return Wr(t.id)(Pe.fromClientErrorMemo("GET_REACTORS_FAILED",e))}))}},{key:"updateDraftMessage",value:function(e,n,t){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ADD",a=this._getConversationByIdentifier(e)
if(a)if(!L(a)&&a.messages.length>0)Wr(this.id)(Pe.fromClientErrorMemo("CANNOT_ADD_MESSAGES_IN_CONVERSATION"))
else{var o,s,c,d,u=He(a.draftMessage.optionalSendData,null!=t?t:{renderContent:[]},i),p=Ar(this.participant.hostIdentityUrn,n,u)
if(this.options.typingIndicatorDelayInSecond>=0&&L(a)){var l=a.entityUrn
l in this._throttledTypingFns||(this._throttledTypingFns[l]=(o=function(){mr(r.networkConfig,l).catch(zr(r.id))},s=1e3*this.options.typingIndicatorDelayInSecond,c=void 0,d=void 0,function(){for(var e=this,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r]
c?d=o:(o.apply(this,t),d=void 0,c=setTimeout((function(){d&&(d.apply(e,t),d=void 0),c=void 0}),s))})),this._throttledTypingFns[l]()}this._dispatch({type:"UPDATE_DRAFT_MESSAGE",payload:{conversationId:a.clientId,messageUpdate:p}})}else Wr(this.id)(Pe.fromClientErrorMemo("CONVERSATION_DOES_NOT_EXIST"))}},{key:"sendDraftMessage",value:function(e,n){var t,r=this,i=this._getConversationByIdentifier(e)
if(!i)return Wr(this.id)(Pe.fromClientErrorMemo("CONVERSATION_DOES_NOT_EXIST"))
if(!L(i)&&i.messages.length>0)return Wr(this.id)(Pe.fromClientErrorMemo("CANNOT_ADD_MESSAGES_IN_CONVERSATION"))
var a=i.draftMessage.content,o=null===(t=i.draftMessage.optionalSendData)||void 0===t?void 0:t.renderContent,s=function(e){switch(e.kind){case"MEMBER":return"".concat(e.firstName," ").concat(e.lastName)
case"ORGANIZATION":case"CUSTOM":return"".concat(e.name.text)
default:return""}}(this.participant),c=i.draftMessage.clientId
if(""==a.text&&!o)return Wr(this.id)(Pe.fromClientErrorMemo("DRAFT_MESSAGE_IS_EMPTY"))
this._dispatch(function(e,n,t){return{type:"DRAFT_MESSAGE_READY_TO_SEND",payload:{clientId:e,senderName:n},requestId:void 0}}(i.clientId,s))
var d,u=this._getConversationByIdentifier(e)
return u?L(u)?("Failed"!==(null===(d=u.status)||void 0===d?void 0:d.sending)&&this._dispatch(ai(gc(u,"InProgress"))),this._getRequestQueue("messageSend",u.clientId).enqueue((function(){return pc(r.networkConfig,r.id,u,c,r._dispatch.bind(r),r,n).catch((function(e){return r.options.continueOnFailure||r._dispatch(ai(gc(u,"Failed"))),Wr(r.id)(Pe.fromClientErrorMemo("MESSAGE_SEND_FAILED",e))}))}),c,Ze(this,u.clientId)).finally((function(){0===r._getRequestQueue("messageSend",u.clientId).length&&r._dispatch(ai(gc(u,"Ready")))}))):("Failed"!==u.sending&&this._dispatch(Ti(u.clientId,"InProgress")),this._getRequestQueue("messageSend",u.clientId).enqueue((function(){return lc(r.networkConfig,r.participant.hostIdentityUrn,u,c,r._dispatch.bind(r),r,n).then((function(e){var n
return(null===(n=r.state.conversations.getByIdentifier(e))||void 0===n?void 0:n.clientId)||i.clientId})).catch((function(e){return r.options.continueOnFailure||r._dispatch(Ti(u.clientId,"Failed")),Wr(r.id)(Pe.fromClientErrorMemo("MESSAGE_SEND_FAILED",e))}))}),c,Ze(this,u.clientId)).finally((function(){0===r._getRequestQueue("messageSend",u.clientId).length&&r._dispatch(Ti(u.clientId,"Ready"))}))):Wr(this.id)(Pe.fromClientErrorMemo("CONVERSATION_DOES_NOT_EXIST"))}},{key:"loadOlderMessages",value:function(e,n){var t=this.state.conversations.getByIdentifier(e,"FullMailboxState")
if(!t)return Wr(this.id)(Pe.fromClientErrorMemo("CONVERSATION_DOES_NOT_EXIST"))
if(t.status.fullyLoaded||t.status.loading)return Promise.resolve(0)
var r=t.metadata.prevCursor
return r?this._getOlderMessagesByCursor(e,t,n,r):this._getOlderMessagesByTimestamp(e,t,n)}},{key:"dismissInlineWarning",value:function(e){var n=this
return function(e,n){var t="dismissInlineWarningAPI",r=JSON.stringify({messageUrn:n}),i=function(e){return Tn("restli",e.messengerResource,"messengerMessages",{action:"dismissInlineWarning"})}(e),a=sr(t)
return Nn(i,r).catch(ar(t)).then(a)}(this.networkConfig,e).then((function(){return Promise.resolve()})).catch((function(e){return Wr(n.id)(Pe.fromClientErrorMemo("CANNOT_DISMISS_INLINE_WARNING",e))}))}},{key:"addParticipantsToConversation",value:function(e,n){var t,r,i,a,o,s,c,d=this
return this._getConversationByIdentifier(e)?(t=this.networkConfig,r=n,i=e,a="addParticipantsToConversation",o=JSON.stringify({participants:r,conversationUrn:i}),s=Tn("restli",t.messengerResource,"messengerConversations",{action:"addParticipants"}),c=sr(a),Nn(s,o).catch(ar(a)).then(c)).then((function(){return Promise.resolve()})).catch((function(e){return Wr(d.id)(Pe.fromClientErrorMemo("CANNOT_ADD_PARTICIPANTS_IN_CONVERSATION",e))})):Wr(this.id)(Pe.fromClientErrorMemo("CONVERSATION_DOES_NOT_EXIST"))}},{key:"removeParticipantsFromConversation",value:function(e,n){var t,r,i,a,o,s,c,d=this
return this._getConversationByIdentifier(e)?(t=this.networkConfig,r=n,i=e,a="removeParticipantsFromConversation",o=JSON.stringify({participants:r,conversationUrn:i}),s=Tn("restli",t.messengerResource,"messengerConversations",{action:"removeParticipants"}),c=sr(a),Nn(s,o).catch(ar(a)).then(c)).then((function(){return Promise.resolve()})).catch((function(e){return Wr(d.id)(Pe.fromClientErrorMemo("CANNOT_REMOVE_PARTICIPANTS_FROM_CONVERSATION",e))})):Wr(this.id)(Pe.fromClientErrorMemo("CONVERSATION_DOES_NOT_EXIST"))}},{key:"markAllConversationsAsRead",value:function(e){var n=this,t=e.map((function(e){return e.toUpperCase()}))
return function(e,n,t){var r="markAllConversationsAsReadAPI",i=gt(e,{mailboxUrn:n,categories:t}),a=or(r)
return wn(i).catch(ar(r)).then(a)}(this.networkConfig,this.id,e).then((function(e){var r=function(e){var n,t
if(void 0===(null===(n=e.data)||void 0===n||null===(t=n.doMarkAllConversationsAsReadMessengerConversations)||void 0===t?void 0:t.result))throw Pe.fromApiErrorMemo("MISSING_DATA_FROM_RESPONSE",{msg:"markAllConversationsAsReadResponseToState: doMarkAllConversationsAsReadMessengerConversations is missing"})
return{allSynchronouslyProcessed:e.data.doMarkAllConversationsAsReadMessengerConversations.result.allSynchronouslyProcessed,requestId:e.requestId}}(e),i=r.allSynchronouslyProcessed,a=r.requestId
return i&&n._dispatch(function(e,n,t){return{type:"UPDATE_ALL_CONVERSATIONS_IN_CATEGORIES",payload:{categories:e,convoPartialState:{read:!0}},requestId:t}}(t,0,a)),Promise.resolve()}))}},{key:"conversationAccept",value:function(e,n,t){var r=this._getConversationByIdentifier(e)
return r&&L(r)?t?this.sendMessage(e,t,{renderContent:[],conversationState:n?"ACCEPTED":"DECLINED"}):this.updateConversation(e,{state:n?"ACCEPTED":"DECLINED"}):Wr(this.id)(Pe.fromClientErrorMemo("CONVERSATION_DOES_NOT_EXIST"))}},{key:"_getSeenReceipts",value:function(e){var n,t,r,i,a,o=this
return(n=this.networkConfig,t=e,r="getSeenReceiptsByConversation",i=ft(n,{conversationUrn:t}),a=or(r),wn(i).catch(ar(r)).then(a)).then((function(n){var t=function(e){if(!e.data||!e.data.messengerSeenReceiptsByConversation||!e.data.messengerSeenReceiptsByConversation.elements)throw Pe.fromApiErrorMemo("MISSING_DATA_FROM_RESPONSE",{msg:"seenReceiptsResponseToSeenReceiptsState: messengerSeenReceiptsByConversation response is missing"})
var n=e.data.messengerSeenReceiptsByConversation.elements,t=e.requestId,r={}
return n.forEach((function(e){var n={participantUrn:e.seenByParticipant.hostIdentityUrn,seenAt:e.seenAt},t=e.message.entityUrn
r[t]?r[t].push(n):r[t]=[n]})),{seenReceiptsMap:r,requestId:t}}(n),r=t.seenReceiptsMap,i=t.requestId
return o._dispatch(ai(d({},e,{seenReceiptsMap:r}),i)),Promise.resolve(r)}))}},{key:"_getQuickReplies",value:function(e){var n,t,r,i,a,o=this
return(n=this.networkConfig,t=e,r="getQuickRepliesByConversationAPI",i=_t(n,{conversationUrn:t}),a=or(r),wn(i).catch(ar(r)).then(a)).then((function(n){var t=function(e){if(!e.data||!e.data.messengerQuickRepliesByConversation||!e.data.messengerQuickRepliesByConversation.elements)throw Pe.fromApiErrorMemo("MISSING_DATA_FROM_RESPONSE",{msg:"quickRepliesResponseToQuickRepliesState: messengerQuickRepliesByConversation response is missing"})
return{quickReplies:e.data.messengerQuickRepliesByConversation.elements,requestId:e.requestId}}(n),r=t.quickReplies,i=t.requestId,a=o._getConversationByIdentifier(e)
if(!a||!L(a))return Promise.resolve(void 0)
var s=en(a,r)
return o._dispatch(function(e,n,t){return{type:"UPDATE_CONVERSATION_QUICK_REPLIES",payload:{conversationUrn:e,quickReplies:n},requestId:t}}(e,s,i)),Promise.resolve(r)}))}},{key:"createNewDraftMessage",value:function(){return Ar(this.participant.hostIdentityUrn)}},{key:"_getConversationByIdentifier",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FullMailboxState"
return F(e)&&this.state.draftConversations.has(e)?this.state.draftConversations.get(e):this.state.conversations.getByIdentifier(e,n)}},{key:"networkConfig",get:function(){return _c(this.options)}},{key:"_notifyErrorSubscribers",value:function(e){this._stateSubscribers.length>0?this._stateSubscribers.forEach((function(n){var t
return null===(t=n.error)||void 0===t?void 0:t.call(n,e)})):this._pendingErrors.push(e)}},{key:"_getOlderMessagesByTimestamp",value:function(e,n,t,r){var i=this
this._dispatch(li(n.clientId,!0))
var a=n.messages.length>0?n.messages.at(0).deliveredAt.getTime():Date.now()
return function(e,n,t,r,i,a){var o="getConversationMessagesByTimestamp",s=lt(e,{deliveredAt:t,conversationUrn:n,countBefore:r,countAfter:0}),c=or(o)
return rr(e,s,o,a)().catch(ar(o)).then(c)}(this.networkConfig,e,a,t,0,r).then((function(e){var t,r,a,o,s,c,d=null===(t=e.data)||void 0===t||null===(r=t.messengerMessagesByAnchorTimestamp)||void 0===r||null===(a=r.metadata)||void 0===a?void 0:a.prevCursor,u=null!==(o=null===(s=e.data)||void 0===s||null===(c=s.messengerMessagesByAnchorTimestamp)||void 0===c?void 0:c.elements)&&void 0!==o?o:[],p=Dr(u),l=p.messages,f=p.participants,m=null===d
return i._dispatch(li(n.clientId,!1)),i._dispatch(ni(f,e.requestId)),i._dispatch(mi(l,n.entityUrn,m,d,e.requestId)),i.clientSensorTrackers.triggerRecipientMetric("message-list-load-more-success"),l.length})).catch((function(e){return i._dispatch(li(n.clientId,!1)),i.clientSensorTrackers.triggerRecipientMetric("message-list-load-more-fail"),Wr(i.id)(Pe.fromClientErrorMemo("LOAD_OLDER_MESSAGES_FAILED",e))}))}},{key:"_getOlderMessagesByCursor",value:function(e,n,t,r,i){var a=this
return this._dispatch(li(n.clientId,!0)),function(e,n,t,r,i){var a="getConversationMessagesByConversation",o={conversationUrn:n,count:t}
r&&(o.prevCursor=r)
var s=pt(e,o),c=or(a)
return rr(e,s,a,i)().catch(ar(a)).then(c)}(this.networkConfig,e,t,r,i).then((function(e){var t,i,o,s,c,d,u=null===(t=e.data)||void 0===t||null===(i=t.messengerMessagesByConversation)||void 0===i||null===(o=i.metadata)||void 0===o?void 0:o.prevCursor,p=null!==(s=null===(c=e.data)||void 0===c||null===(d=c.messengerMessagesByConversation)||void 0===d?void 0:d.elements)&&void 0!==s?s:[],l=Dr(p),f=l.messages,m=l.participants,y=null===u||r===u
return a._dispatch(li(n.clientId,!1)),a._dispatch(ni(m,e.requestId)),a._dispatch(mi(f,n.entityUrn,y,u,e.requestId)),a.clientSensorTrackers.triggerRecipientMetric("message-list-load-more-success"),f.length})).catch((function(e){return a._dispatch(li(n.clientId,!1)),a.clientSensorTrackers.triggerRecipientMetric("message-list-load-more-fail"),Wr(a.id)(Pe.fromClientErrorMemo("LOAD_OLDER_MESSAGES_FAILED",e))}))}},{key:"_getRequestQueue",value:function(n,t){return e._queues[n][t]||(e._queues[n][t]=new Mc(this.options.continueOnFailure)),e._queues[n][t]}},{key:"_sendMessageInExistingConvo",value:function(e,n,t,r){var i,a=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"FIRST",s=br({senderUrn:this.participant.hostIdentityUrn,content:n,optionalSendData:t})
this._dispatch(pi(s,e.clientId))
var c=this.state.conversations.getByIdentifier(e.entityUrn,"FullMailboxState")
return c?("Failed"!==(null===(i=c.status)||void 0===i?void 0:i.sending)&&this._dispatch(ai(gc(c,"InProgress"))),this._getRequestQueue("messageSend",c.clientId).enqueue((function(){return pc(a.networkConfig,a.id,c,s.clientId,a._dispatch.bind(a),a,r,o).catch((function(e){return a.options.continueOnFailure||a._dispatch(ai(gc(c,"Failed"))),Wr(a.id)(Pe.fromClientErrorMemo("MESSAGE_SEND_FAILED",e))}))}),s.clientId,Ze(this,c.clientId)).finally((function(){0===a._getRequestQueue("messageSend",c.clientId).length&&a._dispatch(ai(gc(c,"Ready")))}))):Wr(this.id)(Pe.fromClientErrorMemo("CONVERSATION_DOES_NOT_EXIST"))}},{key:"_updateLocalParticipant",value:function(){var e,n=this
this._localParticipant=null!==(e=w(qr(this._id).participants).find((function(e){return e.entityUrn===n._localParticipant.entityUrn})))&&void 0!==e?e:this._localParticipant}},{key:"_dispatchCategoryUpdate",value:function(e,n,t){var r=this,a=e.reduce((function(e,a){var o,s,c=null!==(o=null===(s=r.state.conversations.getByIdentifier(a))||void 0===s?void 0:s.categories)&&void 0!==o?o:[]
return i(i({},e),{},d({},a,"ADD"===t?{categories:[].concat(g(c.filter((function(e){return e!==n}))),[n])}:{categories:c.filter((function(e){return e!==n}))}))}),{})
this._dispatch(ai(a))}},{key:"_reactAttemptWouldExceedCap",value:function(e,n){return 20===e.reactions.length&&!e.reactions.find((function(e){return e.emoji===n}))}}]),e}()
d(Uc,"_queues",{messageSend:{},reactions:{}})
var xc=function(){function e(n,t){o(this,e),d(this,"_participantClientId",At()),d(this,"_id",void 0),d(this,"_options",void 0),this._id=n,this._options=t}return c(e,[{key:"id",get:function(){return this._id}},{key:"networkConfig",get:function(){return _c(this._options)}},{key:"_dispatch",value:function(e){var n,t=this,r=this._options.decorators,i=r.mailboxDecorator,a=r.messagesDecorator,o=r.participantsDecorator,s=Hr(this._id)
if(function(e,n){if(null!=e)return!0
throw new Error(n||"Assertion failed")}(s,"Could not link to the Redux store for this MailBox for id: ".concat(this._id))){var c=qr(this._id),d=c.status.lastRequestId
switch(e.requestId&&d>e.requestId&&"Invalid requestId: the store was updated since the request was made. Store lastRequestId: ".concat(d,", action requestId: ").concat(e.requestId),s.dispatch(e),c=qr(this._id),e.type){case"CONNECT":if(i)try{i(c).then((function(e){e&&s.dispatch(function(e){return{type:"DECORATE_MAILBOX",payload:e}}(e))})).catch(Qr(this._id,"MAILBOX_DECORATE_FAILED"))}catch(e){Qr(this._id,"MAILBOX_DECORATE_FAILED")(e)}break
case"ADD_MAILBOX_PARTICIPANTS":var u=e.payload.participants
u.length>0&&o&&this._invokeParticipantsDecorator(o,u,s)
break
case"ADD_CONVERSATION":var p=e.payload,l=p.conversation,f=p.participants,m=Qe([l])
this._invokeDecorators([l],f,m)
break
case"ADD_OLDER_CONVERSATIONS":case"ADD_CONVERSATIONS":var y=e.payload,g=y.conversations,v=y.participants,_=Qe(g)
this._invokeDecorators(g,v,_)
break
case"ADD_NEW_MESSAGE_BY_CONVO_URN":var T=e.payload,b=T.message,E=T.conversationUrn
a&&this._invokeMessageDecorator(a,E,[b],s)
break
case"ADD_NEW_MESSAGES":case"ADD_OLDER_MESSAGES":var k=e.payload,A=k.messages,S=k.conversationUrn
A.length&&a&&this._invokeMessageDecorator(a,S,A,s)
break
case"UPDATE_MESSAGES":if(a){var C=e.payload.conversationUrn,I=e.payload.messageUpdateMap
if(!C){var R=M(I),O=c.conversations.find((function(e){return void 0!==e.messages.getByIdentifier(R[0])}))
if(!O)return
C=O.entityUrn}(n=I,Object.entries(n)).forEach((function(e){var n=h(e,2),r=n[0],i=n[1]
if(C)try{a([i]).then(function(e,n,t){return function(r){e.dispatch(function(e,n,t){return{type:"DECORATE_MESSAGE",payload:{messageUrn:n,conversationUrn:t,data:e}}}(r,t,n))}}(s,C,r)).catch(Qr(t._id,"MESSAGE_DECORATE_FAILED"))}catch(e){Qr(t._id,"MESSAGE_DECORATE_FAILED")(e)}}))}}}}},{key:"_invokeParticipantsDecorator",value:function(e,n,t){try{e(n).then(function(e,n){return function(t){e.dispatch({type:"DECORATE_PARTICIPANTS",payload:{data:S(n.map((function(e,n){return[e.entityUrn,t[n]]})))}})}}(t,n)).catch(Qr(this._id,"PARTICIPANTS_DECORATE_FAILED"))}catch(e){var r=Pe.fromUnknown(e,"PARTICIPANTS_DECORATE_FAILED")
zr(this._id)(r)}}},{key:"_invokeAllMessageDecorator",value:function(e,n,t){try{e(n).then(function(e,n){return function(t){t.length>0&&e.dispatch({type:"DECORATE_ALL_MESSAGES",payload:{data:S(n.map((function(e,n){return[e.clientId,t[n]]})))}})}}(t,n)).catch(Qr(this._id,"MESSAGE_DECORATE_FAILED"))}catch(e){var r=Pe.fromUnknown(e,"MESSAGE_DECORATE_FAILED")
zr(this._id)(r)}}},{key:"_invokeMessageDecorator",value:function(e,n,t,r){try{e(t).then(function(e,n,t){return function(r){r.length>0&&e.dispatch(function(e,n){return{type:"DECORATE_MESSAGES",payload:{data:n,conversationUrn:e}}}(n,S(t.map((function(e,n){return[e.clientId,r[n]]})))))}}(r,n,t)).catch(Qr(this._id,"MESSAGE_DECORATE_FAILED"))}catch(e){var i=Pe.fromUnknown(e,"MESSAGE_DECORATE_FAILED")
zr(this._id)(i)}}},{key:"_invokeDecorators",value:function(e,n,t){var r=this._options.decorators,i=r.messagesDecorator,a=r.conversationsDecorator,o=r.participantsDecorator,s=Hr(this._id)
s&&(e.length>0&&a&&this._invokeConversationsDecorator(a,e,s),n.length>0&&o&&this._invokeParticipantsDecorator(o,n,s),t.length>0&&i&&this._invokeAllMessageDecorator(i,t,s))}},{key:"_invokeConversationsDecorator",value:function(e,n,t){try{var r=dn.fromConversationArray(n)
e(r).then(function(e,n){return function(t){t.length>0&&e.dispatch({type:"DECORATE_CONVERSATIONS",payload:{data:S(n.map((function(e,n){return[e.clientId,t[n]]})))}})}}(t,r)).catch(Qr(this._id,"CONVERSATION_DECORATE_FAILED"))}catch(e){var i=Pe.fromUnknown(e,"CONVERSATION_DECORATE_FAILED")
zr(this._id)(i)}}},{key:"getMailbox",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Br,t=arguments.length>1?arguments[1]:void 0
if(!Dc(n))return Wr(this.id)(Pe.fromInvalidType("getMailbox","filter","InputMailboxFilter"))
if(t&&!Pc(t))return Wr(this.id)(Pe.fromInvalidType("getMailbox","trackingData","TrackingData"))
var r=Ur(n)?i(i({},n),{},{id:At()}):n,a=new Uc(this._id,this._options,this._participantClientId,r,this._dispatch.bind(this)),o=qr(this._id)
return o&&!Ke(o)?function(e,n,t,r,i){var a=Vr(e)
return a&&Ke(a.data)?Promise.resolve(a):yc(e,n,r).then((function(){return mc(_c(n),e,t,i)})).then((function(n){return{urn:e,data:n}}))}(this._id,this._options,a.participant,{dispatch:this._dispatch.bind(this),handleRealtimeNewMessage:Ec(a,this._dispatch.bind(this)),triggerChainSync:a.syncConversations.bind(a)},t).then((function(n){var t,r,i,o,s,c=n.data,d=c.conversations,u=c.participants,p=c.status,l=d.filter(L)
return a._oldestConversationTime=Cc(g(d)),e._dispatch({type:"CONNECT"}),e._dispatch(ui(l,w(u),p.syncToken,p.lastRequestId)),a._updateLocalParticipant(),p.syncToken||Kr(e.id,Pe.fromApiErrorMemo("ERRORS_IN_RESPONSE",{msg:"SyncToken is null on initial Mailbox bootstrap"})),(t=e.networkConfig,r=e._id,i="getMailboxUnreadCounts",o=ot(t,{mailboxUrn:r}),s=or(i),wn(o).catch(ar(i)).then(s)).then((function(e){return xr(e)})).then((function(n){e._dispatch({type:"UPDATE_MAILBOX_UNREAD_COUNT",payload:n.counters,requestId:n.requestId})})).catch(Wr(e._id)),a})):(a.state.conversations.length<20&&a.loadOlderConversations(),Promise.resolve(a))}}],[{key:"create",value:function(n,t){var r,i
t.headers&&(r=t.headers,bn=r),t.graphQlQueryIds&&(i=t.graphQlQueryIds,Object.keys(i).forEach((function(e){xn.set(e,i[e])}))),fc(n,{connected:!1,loading:!0})
var a=new e(n,t)
return Promise.resolve(a)}}]),e}()
function Lc(e,n){if(k(e)||!q(e))return Promise.reject(Pe.fromInvalidType("connectToMailbox","mailboxUrn","URN"))
if(!function(e){return"object"===a(e)&&null!==e}(n))return Promise.reject(Pe.fromInvalidType("connectToMailbox","options","Partial<MailboxOptions>"))
var t=i(i({},_r),n)
return xc.create(e,t)}},3173:(e,n)=>{"use strict"
function t(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}Object.defineProperty(n,"__esModule",{value:!0})
var r,i="function"==typeof Symbol&&Symbol.observable||"@@observable"
r=Symbol.observable
var a=function(){function e(n){(function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")})(this,e),t(this,"_subscribers",new Set),t(this,"_lastState",void 0),t(this,"_complete",!1),this._lastState=null!=n?n:null}return function(e,n,t){n&&function(e,n){for(var t=0;t<n.length;t++){var r=n[t]
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"subscribe",value:function(e){var n=this,t="function"==typeof e?{next:e}:e
return this._subscribers.add(t),null!==this._lastState&&t.next(this._lastState),{unsubscribe:function(){return n._subscribers.delete(t)}}}},{key:"subscribersCount",get:function(){return this._subscribers.size}},{key:"state",get:function(){return this._lastState}},{key:"observable",get:function(){return this}},{key:r,value:function(){return this}},{key:i,value:function(){return this}},{key:"emit",value:function(e){this._complete||(this._lastState=e,this._subscribers.forEach((function(n){return n.next(e)})))}},{key:"error",value:function(e){this._complete||this._subscribers.forEach((function(n){var t
return null===(t=n.error)||void 0===t?void 0:t.call(n,e)}))}},{key:"complete",value:function(){this._complete||(this._complete=!0,this._subscribers.forEach((function(e){var n
return null===(n=e.complete)||void 0===n?void 0:n.call(e)})))}}]),e}(),o=function(e){return function(n){var t=n.state?new a(e(n.state)):new a
return n.subscribe({next:function(n){t.emit(e(n))},error:function(e){return t.error(e)},complete:function(){return t.complete()}}),t}},s=function(){return function(e){var n,t=e.state,r=new a(null!==(n=t)&&void 0!==n?n:void 0)
return e.subscribe({next:function(e){e!==t&&(r.emit(e),t=e)},error:function(e){return r.error(e)},complete:function(){return r.complete()}}),r}},c=function(e){return function(n){var t=new a
return n.subscribe({next:function(n){return e(n)&&t.emit(n)},error:function(e){return t.error(e)},complete:function(){return t.complete()}}),t}}
function d(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t]
return function(e){return n.reduce((function(e,n){return n(e)}),e)}}var u=new Map
n.Subject=a,n.conversationDraftMessageObservable=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"FilteredMailboxState"
return d(o((function(e){return e.conversations.getByIdentifier(n,t)})),o((function(e){return null==e?void 0:e.draftMessage})),s())(e)},n.conversationMessagesObservable=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"FilteredMailboxState"
return d(o((function(e){return e.conversations.getByIdentifier(n,t)})),o((function(e){return null==e?void 0:e.messages})),s())(e)},n.conversationObservable=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"FilteredMailboxState"
return d(o((function(e){return e.conversations.getByIdentifier(n,t)})),s())(e)},n.distinct=s,n.filter=c,n.map=o,n.newMessageFromMailboxObservable=function(e,n,t){return d(o((function(e){var n
return null===(n=e.conversations.first())||void 0===n?void 0:n.messages.last()})),function(e){return c((function(n){return void 0!==n&&n.senderUrn!==e}))}(t),function(e){return c((function(n){var t,r=null!==(t=u.get(e))&&void 0!==t?t:new Set
if(n&&n.entityUrn){var i=!r.has(n.entityUrn)&&function(e){var n=Date.now()
return e.deliveredAt.getTime()>n-5e3}(n)
return r.add(n.entityUrn),u.set(e,r),i}return!1}))}(n))(e)},n.pipe=d,n.resetAlertedMessages=function(){u.clear()},n.tap=function(e){return function(n){var t=new a
return n.subscribe({next:function(n){e(n),t.emit(n)},error:function(e){return t.error(e)},complete:function(){return t.complete()}}),t}}},7440:(e,n,t)=>{"use strict"
function r(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator]
if(!t)return e
var r,i,a=t.call(e),o=[]
try{for(;(void 0===n||n-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(t=a.return)&&t.call(a)}finally{if(i)throw i.error}}return o}var i
t.r(n),t.d(n,{InterpreterStatus:()=>i,assign:()=>s,createMachine:()=>f,interpret:()=>y}),function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(i||(i={}))
var a={type:"xstate.init"}
function o(e){return void 0===e?[]:[].concat(e)}function s(e){return{type:"xstate.assign",assignment:e}}function c(e,n){return"string"==typeof(e="string"==typeof e&&n&&n[e]?n[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function d(e){return function(n){return e===n}}function u(e){return"string"==typeof e?{type:e}:e}function p(e,n){return{value:e,context:n,actions:[],changed:!1,matches:d(e)}}function l(e,n,t){var r=n,i=!1
return[e.filter((function(e){if("xstate.assign"===e.type){i=!0
var n=Object.assign({},r)
return"function"==typeof e.assignment?n=e.assignment(r,t):Object.keys(e.assignment).forEach((function(i){n[i]="function"==typeof e.assignment[i]?e.assignment[i](r,t):e.assignment[i]})),r=n,!1}return!0})),r,i]}function f(e,n){void 0===n&&(n={})
var t=r(l(o(e.states[e.initial].entry).map((function(e){return c(e,n.actions)})),e.context,a),2),i=t[0],s=t[1],f={config:e,_options:n,initialState:{value:e.initial,actions:i,context:s,matches:d(e.initial)},transition:function(n,t){var i,a,s="string"==typeof n?{value:n,context:e.context}:n,m=s.value,y=s.context,h=u(t),g=e.states[m]
if(g.on){var v=o(g.on[h.type])
try{for(var _=function(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0
if(t)return t.call(e)
if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}
throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(v),T=_.next();!T.done;T=_.next()){var b=T.value
if(void 0===b)return p(m,y)
var E="string"==typeof b?{target:b}:b,k=E.target,A=E.actions,S=void 0===A?[]:A,C=E.cond,I=void 0===k
if((void 0===C?function(){return!0}:C)(y,h)){var R=e.states[null!=k?k:m],O=r(l((I?o(S):[].concat(g.exit,S,R.entry).filter((function(e){return e}))).map((function(e){return c(e,f._options.actions)})),y,h),3),M=O[0],w=O[1],N=O[2],P=null!=k?k:m
return{value:P,context:w,actions:M,changed:k!==m||M.length>0||N,matches:d(P)}}}}catch(e){i={error:e}}finally{try{T&&!T.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}}return p(m,y)}}
return f}var m=function(e,n){return e.actions.forEach((function(t){var r=t.exec
return r&&r(e.context,n)}))}
function y(e){var n=e.initialState,t=i.NotStarted,r=new Set,o={_machine:e,send:function(a){t===i.Running&&(n=e.transition(n,a),m(n,u(a)),r.forEach((function(e){return e(n)})))},subscribe:function(e){return r.add(e),e(n),{unsubscribe:function(){return r.delete(e)}}},start:function(r){if(r){var s="object"==typeof r?r:{context:e.config.context,value:r}
n={value:s.value,actions:[],context:s.context,matches:d(s.value)}}return t=i.Running,m(n,a),o},stop:function(){return t=i.Stopped,r.clear(),o},get state(){return n},get status(){return t}}
return o}},6131:(e,n,t)=>{"use strict"
Object.defineProperty(n,"__esModule",{value:!0}),n.OPEN_BROADCAST_CHANNELS=n.BroadcastChannel=void 0,n.clearNodeFolder=function(e){e=(0,a.fillOptionsWithDefaults)(e)
var n=(0,i.chooseMethod)(e)
return"node"===n.type?n.clearNodeFolder().then((function(){return!0})):r.PROMISE_RESOLVED_FALSE},n.enforceOptions=function(e){s=e}
var r=t(9774),i=t(9678),a=t(7229),o=new Set
n.OPEN_BROADCAST_CHANNELS=o
var s,c=0,d=function(e,n){var t,d
this.id=c++,o.add(this),this.name=e,s&&(n=s),this.options=(0,a.fillOptionsWithDefaults)(n),this.method=(0,i.chooseMethod)(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,d=(t=this).method.create(t.name,t.options),(0,r.isPromise)(d)?(t._prepP=d,d.then((function(e){t._state=e}))):t._state=d}
function u(e,n,t){var i={time:e.method.microSeconds(),type:n,data:t}
return(e._prepP?e._prepP:r.PROMISE_RESOLVED_VOID).then((function(){var n=e.method.postMessage(e._state,i)
return e._uMP.add(n),n.catch().then((function(){return e._uMP.delete(n)})),n}))}function p(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function l(e,n,t){e._addEL[n].push(t),function(e){if(!e._iL&&p(e)){var n=function(n){e._addEL[n.type].forEach((function(e){var t=e.time-1e5
n.time>=t&&e.fn(n.data)}))},t=e.method.microSeconds()
e._prepP?e._prepP.then((function(){e._iL=!0,e.method.onMessage(e._state,n,t)})):(e._iL=!0,e.method.onMessage(e._state,n,t))}}(e)}function f(e,n,t){e._addEL[n]=e._addEL[n].filter((function(e){return e!==t})),function(e){if(e._iL&&!p(e)){e._iL=!1
var n=e.method.microSeconds()
e.method.onMessage(e._state,null,n)}}(e)}n.BroadcastChannel=d,d._pubkey=!0,d.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed")
return u(this,"message",e)},postInternal:function(e){return u(this,"internal",e)},set onmessage(e){var n={time:this.method.microSeconds(),fn:e}
f(this,"message",this._onML),e&&"function"==typeof e?(this._onML=n,l(this,"message",n)):this._onML=null},addEventListener:function(e,n){l(this,e,{time:this.method.microSeconds(),fn:n})},removeEventListener:function(e,n){f(this,e,this._addEL[e].find((function(e){return e.fn===n})))},close:function(){var e=this
if(!this.closed){o.delete(this),this.closed=!0
var n=this._prepP?this._prepP:r.PROMISE_RESOLVED_VOID
return this._onML=null,this._addEL.message=[],n.then((function(){return Promise.all(Array.from(e._uMP))})).then((function(){return Promise.all(e._befC.map((function(e){return e()})))})).then((function(){return e.method.close(e._state)}))}},get type(){return this.method.type},get isClosed(){return this.closed}}},3446:(e,n,t)=>{"use strict"
var r=t(3335)
e.exports={BroadcastChannel:r.BroadcastChannel,createLeaderElection:r.createLeaderElection,clearNodeFolder:r.clearNodeFolder,enforceOptions:r.enforceOptions,beLeader:r.beLeader}},3335:(e,n,t)=>{"use strict"
Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"BroadcastChannel",{enumerable:!0,get:function(){return r.BroadcastChannel}}),Object.defineProperty(n,"OPEN_BROADCAST_CHANNELS",{enumerable:!0,get:function(){return r.OPEN_BROADCAST_CHANNELS}}),Object.defineProperty(n,"beLeader",{enumerable:!0,get:function(){return i.beLeader}}),Object.defineProperty(n,"clearNodeFolder",{enumerable:!0,get:function(){return r.clearNodeFolder}}),Object.defineProperty(n,"createLeaderElection",{enumerable:!0,get:function(){return i.createLeaderElection}}),Object.defineProperty(n,"enforceOptions",{enumerable:!0,get:function(){return r.enforceOptions}})
var r=t(6131),i=t(3145)},3145:(e,n,t)=>{"use strict"
Object.defineProperty(n,"__esModule",{value:!0}),n.beLeader=s,n.createLeaderElection=function(e,n){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector")
n=function(e,n){return e||(e={}),(e=JSON.parse(JSON.stringify(e))).fallbackInterval||(e.fallbackInterval=3e3),e.responseTime||(e.responseTime=n.method.averageResponseTime(n.options)),e}(n,e)
var t=new a(e,n)
return e._befC.push((function(){return t.die()})),e._leaderElector=t,t}
var r=t(9774),i=t(5365),a=function(e,n){var t=this
this.broadcastChannel=e,this._options=n,this.isLeader=!1,this.hasLeader=!1,this.isDead=!1,this.token=(0,r.randomToken)(),this._aplQ=r.PROMISE_RESOLVED_VOID,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1
var i=function(e){"leader"===e.context&&("death"===e.action&&(t.hasLeader=!1),"tell"===e.action&&(t.hasLeader=!0))}
this.broadcastChannel.addEventListener("internal",i),this._lstns.push(i)}
function o(e,n){var t={context:"leader",action:n,token:e.token}
return e.broadcastChannel.postInternal(t)}function s(e){e.isLeader=!0,e.hasLeader=!0
var n=(0,i.add)((function(){return e.die()}))
e._unl.push(n)
var t=function(n){"leader"===n.context&&"apply"===n.action&&o(e,"tell"),"leader"!==n.context||"tell"!==n.action||e._dpLC||(e._dpLC=!0,e._dpL(),o(e,"tell"))}
return e.broadcastChannel.addEventListener("internal",t),e._lstns.push(t),o(e,"tell")}a.prototype={applyOnce:function(e){var n=this
return this.isLeader?(0,r.sleep)(0,!0):this.isDead?(0,r.sleep)(0,!1):this._aplQC>1?this._aplQ:(this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then((function(){return function(){if(n.isLeader)return r.PROMISE_RESOLVED_TRUE
var t,i=!1,a=new Promise((function(e){t=function(){i=!0,e()}})),c=[],d=function(e){"leader"===e.context&&e.token!=n.token&&(c.push(e),"apply"===e.action&&e.token>n.token&&t(),"tell"===e.action&&(t(),n.hasLeader=!0))}
n.broadcastChannel.addEventListener("internal",d)
var u=e?4*n._options.responseTime:n._options.responseTime
return o(n,"apply").then((function(){return Promise.race([(0,r.sleep)(u),a.then((function(){return Promise.reject(new Error)}))])})).then((function(){return o(n,"apply")})).then((function(){return Promise.race([(0,r.sleep)(u),a.then((function(){return Promise.reject(new Error)}))])})).catch((function(){})).then((function(){return n.broadcastChannel.removeEventListener("internal",d),!i&&s(n).then((function(){return!0}))}))}()})).then((function(){n._aplQC=n._aplQC-1})),this._aplQ.then((function(){return n.isLeader})))},awaitLeadership:function(){return this._aLP||(this._aLP=(e=this).isLeader?r.PROMISE_RESOLVED_VOID:new Promise((function(n){var t=!1
function i(){t||(t=!0,e.broadcastChannel.removeEventListener("internal",a),n(!0))}e.applyOnce().then((function(){e.isLeader&&i()})),function n(){return(0,r.sleep)(e._options.fallbackInterval).then((function(){if(!e.isDead&&!t)return e.isLeader?void i():e.applyOnce(!0).then((function(){e.isLeader?i():n()}))}))}()
var a=function(n){"leader"===n.context&&"death"===n.action&&(e.hasLeader=!1,e.applyOnce().then((function(){e.isLeader&&i()})))}
e.broadcastChannel.addEventListener("internal",a),e._lstns.push(a)}))),this._aLP
var e},set onduplicate(e){this._dpL=e},die:function(){var e=this
return this._lstns.forEach((function(n){return e.broadcastChannel.removeEventListener("internal",n)})),this._lstns=[],this._unl.forEach((function(e){return e.remove()})),this._unl=[],this.isLeader&&(this.hasLeader=!1,this.isLeader=!1),this.isDead=!0,o(this,"death")}}},9678:(e,n,t)=>{"use strict"
var r=t(4896)
t(4308),Object.defineProperty(n,"__esModule",{value:!0}),n.chooseMethod=function(e){var n=[].concat(e.methods,d).filter(Boolean)
if(e.type){if("simulate"===e.type)return s.default
var t=n.find((function(n){return n.type===e.type}))
if(t)return t
throw new Error("method-type "+e.type+" not found")}e.webWorkerSupport||c.isNode||(n=n.filter((function(e){return"idb"!==e.type})))
var r=n.find((function(e){return e.canBeUsed()}))
if(r)return r
throw new Error("No useable method found in "+JSON.stringify(d.map((function(e){return e.type}))))}
var i=r(t(7594)),a=r(t(6777)),o=r(t(1095)),s=r(t(9981)),c=t(9774),d=[i.default,a.default,o.default]},6777:(e,n,t)=>{"use strict"
Object.defineProperty(n,"__esModule",{value:!0}),n.averageResponseTime=E,n.canBeUsed=b,n.cleanOldMessages=m,n.close=v,n.create=y,n.createDatabase=d,n.default=void 0,n.getAllMessages=function(e){var n=e.transaction(s).objectStore(s),t=[]
return new Promise((function(e){n.openCursor().onsuccess=function(n){var r=n.target.result
r?(t.push(r.value),r.continue()):e(t)}}))},n.getIdb=c,n.getMessagesHigherThan=p,n.getOldMessages=f,n.microSeconds=void 0,n.onMessage=T,n.postMessage=_,n.removeMessageById=l,n.type=void 0,n.writeMessage=u
var r=t(9774),i=t(3583),a=t(7229),o=r.microSeconds
n.microSeconds=o
var s="messages"
function c(){if("undefined"!=typeof indexedDB)return indexedDB
if("undefined"!=typeof window){if(void 0!==window.mozIndexedDB)return window.mozIndexedDB
if(void 0!==window.webkitIndexedDB)return window.webkitIndexedDB
if(void 0!==window.msIndexedDB)return window.msIndexedDB}return!1}function d(e){var n="pubkey.broadcast-channel-0-"+e,t=c().open(n,1)
return t.onupgradeneeded=function(e){e.target.result.createObjectStore(s,{keyPath:"id",autoIncrement:!0})},new Promise((function(e,n){t.onerror=function(e){return n(e)},t.onsuccess=function(){e(t.result)}}))}function u(e,n,t){var r={uuid:n,time:(new Date).getTime(),data:t},i=e.transaction([s],"readwrite")
return new Promise((function(e,n){i.oncomplete=function(){return e()},i.onerror=function(e){return n(e)},i.objectStore(s).add(r)}))}function p(e,n){var t=e.transaction(s).objectStore(s),r=[]
return new Promise((function(e){(function(){try{var e=IDBKeyRange.bound(n+1,1/0)
return t.openCursor(e)}catch(e){return t.openCursor()}}()).onsuccess=function(t){var i=t.target.result
i?i.value.id<n+1?i.continue(n+1):(r.push(i.value),i.continue()):e(r)}}))}function l(e,n){var t=e.transaction([s],"readwrite").objectStore(s).delete(n)
return new Promise((function(e){t.onsuccess=function(){return e()}}))}function f(e,n){var t=(new Date).getTime()-n,r=e.transaction(s).objectStore(s),i=[]
return new Promise((function(e){r.openCursor().onsuccess=function(n){var r=n.target.result
if(r){var a=r.value
if(!(a.time<t))return void e(i)
i.push(a),r.continue()}else e(i)}}))}function m(e,n){return f(e,n).then((function(n){return Promise.all(n.map((function(n){return l(e,n.id)})))}))}function y(e,n){return n=(0,a.fillOptionsWithDefaults)(n),d(e).then((function(t){var a={closed:!1,lastCursorId:0,channelName:e,options:n,uuid:(0,r.randomToken)(),eMIs:new i.ObliviousSet(2*n.idb.ttl),writeBlockPromise:r.PROMISE_RESOLVED_VOID,messagesCallback:null,readQueuePromises:[],db:t}
return t.onclose=function(){a.closed=!0,n.idb.onclose&&n.idb.onclose()},h(a),a}))}function h(e){e.closed||g(e).then((function(){return(0,r.sleep)(e.options.idb.fallbackInterval)})).then((function(){return h(e)}))}function g(e){return e.closed?r.PROMISE_RESOLVED_VOID:e.messagesCallback?p(e.db,e.lastCursorId).then((function(n){var t=n.filter((function(e){return!!e})).map((function(n){return n.id>e.lastCursorId&&(e.lastCursorId=n.id),n})).filter((function(n){return function(e,n){return!(e.uuid===n.uuid||n.eMIs.has(e.id)||e.data.time<n.messagesCallbackTime)}(n,e)})).sort((function(e,n){return e.time-n.time}))
return t.forEach((function(n){e.messagesCallback&&(e.eMIs.add(n.id),e.messagesCallback(n.data))})),r.PROMISE_RESOLVED_VOID})):r.PROMISE_RESOLVED_VOID}function v(e){e.closed=!0,e.db.close()}function _(e,n){return e.writeBlockPromise=e.writeBlockPromise.then((function(){return u(e.db,e.uuid,n)})).then((function(){0===(0,r.randomInt)(0,10)&&m(e.db,e.options.idb.ttl)})),e.writeBlockPromise}function T(e,n,t){e.messagesCallbackTime=t,e.messagesCallback=n,g(e)}function b(){return!r.isNode&&!!c()}function E(e){return 2*e.idb.fallbackInterval}n.type="idb"
var k={create:y,close:v,onMessage:T,postMessage:_,canBeUsed:b,type:"idb",averageResponseTime:E,microSeconds:o}
n.default=k},1095:(e,n,t)=>{"use strict"
Object.defineProperty(n,"__esModule",{value:!0}),n.addStorageEventListener=p,n.averageResponseTime=g,n.canBeUsed=h,n.close=m,n.create=f,n.default=void 0,n.getLocalStorage=c,n.microSeconds=void 0,n.onMessage=y,n.postMessage=u,n.removeStorageEventListener=l,n.storageKey=d,n.type=void 0
var r=t(3583),i=t(7229),a=t(9774),o=a.microSeconds
n.microSeconds=o
var s="localstorage"
function c(){var e
if("undefined"==typeof window)return null
try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch(e){}return e}function d(e){return"pubkey.broadcastChannel-"+e}function u(e,n){return new Promise((function(t){(0,a.sleep)().then((function(){var r=d(e.channelName),i={token:(0,a.randomToken)(),time:(new Date).getTime(),data:n,uuid:e.uuid},o=JSON.stringify(i)
c().setItem(r,o)
var s=document.createEvent("Event")
s.initEvent("storage",!0,!0),s.key=r,s.newValue=o,window.dispatchEvent(s),t()}))}))}function p(e,n){var t=d(e),r=function(e){e.key===t&&n(JSON.parse(e.newValue))}
return window.addEventListener("storage",r),r}function l(e){window.removeEventListener("storage",e)}function f(e,n){if(n=(0,i.fillOptionsWithDefaults)(n),!h())throw new Error("BroadcastChannel: localstorage cannot be used")
var t=(0,a.randomToken)(),o=new r.ObliviousSet(n.localstorage.removeTimeout),s={channelName:e,uuid:t,eMIs:o}
return s.listener=p(e,(function(e){s.messagesCallback&&e.uuid!==t&&e.token&&!o.has(e.token)&&(e.data.time&&e.data.time<s.messagesCallbackTime||(o.add(e.token),s.messagesCallback(e.data)))})),s}function m(e){l(e.listener)}function y(e,n,t){e.messagesCallbackTime=t,e.messagesCallback=n}function h(){if(a.isNode)return!1
var e=c()
if(!e)return!1
try{var n="__broadcastchannel_check"
e.setItem(n,"works"),e.removeItem(n)}catch(e){return!1}return!0}function g(){var e=navigator.userAgent.toLowerCase()
return e.includes("safari")&&!e.includes("chrome")?240:120}n.type=s
var v={create:f,close:m,onMessage:y,postMessage:u,canBeUsed:h,type:s,averageResponseTime:g,microSeconds:o}
n.default=v},7594:(e,n,t)=>{"use strict"
Object.defineProperty(n,"__esModule",{value:!0}),n.averageResponseTime=p,n.canBeUsed=u,n.close=s,n.create=o,n.microSeconds=n.default=void 0,n.onMessage=d,n.postMessage=c,n.type=void 0
var r=t(9774),i=r.microSeconds
n.microSeconds=i
var a="native"
function o(e){var n={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]}
return n.bc.onmessage=function(e){n.messagesCallback&&n.messagesCallback(e.data)},n}function s(e){e.bc.close(),e.subFns=[]}function c(e,n){try{return e.bc.postMessage(n,!1),r.PROMISE_RESOLVED_VOID}catch(e){return Promise.reject(e)}}function d(e,n){e.messagesCallback=n}function u(){if(r.isNode&&"undefined"==typeof window)return!1
if("function"==typeof BroadcastChannel){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill")
return!0}return!1}function p(){return 150}n.type=a
var l={create:o,close:s,onMessage:d,postMessage:c,canBeUsed:u,type:a,averageResponseTime:p,microSeconds:i}
n.default=l},9981:(e,n,t)=>{"use strict"
Object.defineProperty(n,"__esModule",{value:!0}),n.averageResponseTime=p,n.canBeUsed=u,n.close=s,n.create=o,n.microSeconds=n.default=void 0,n.onMessage=d,n.postMessage=c,n.type=void 0
var r=t(9774).microSeconds
n.microSeconds=r
var i="simulate"
n.type=i
var a=new Set
function o(e){var n={name:e,messagesCallback:null}
return a.add(n),n}function s(e){a.delete(e)}function c(e,n){return new Promise((function(t){return setTimeout((function(){Array.from(a).filter((function(n){return n.name===e.name})).filter((function(n){return n!==e})).filter((function(e){return!!e.messagesCallback})).forEach((function(e){return e.messagesCallback(n)})),t()}),5)}))}function d(e,n){e.messagesCallback=n}function u(){return!0}function p(){return 5}var l={create:o,close:s,onMessage:d,postMessage:c,canBeUsed:u,type:i,averageResponseTime:p,microSeconds:r}
n.default=l},7229:(e,n)=>{"use strict"
Object.defineProperty(n,"__esModule",{value:!0}),n.fillOptionsWithDefaults=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=JSON.parse(JSON.stringify(e))
return void 0===n.webWorkerSupport&&(n.webWorkerSupport=!0),n.idb||(n.idb={}),n.idb.ttl||(n.idb.ttl=45e3),n.idb.fallbackInterval||(n.idb.fallbackInterval=150),e.idb&&"function"==typeof e.idb.onclose&&(n.idb.onclose=e.idb.onclose),n.localstorage||(n.localstorage={}),n.localstorage.removeTimeout||(n.localstorage.removeTimeout=6e4),e.methods&&(n.methods=e.methods),n.node||(n.node={}),n.node.ttl||(n.node.ttl=12e4),n.node.maxParallelWrites||(n.node.maxParallelWrites=2048),void 0===n.node.useFastPath&&(n.node.useFastPath=!0),n}},9774:(e,n)=>{"use strict"
Object.defineProperty(n,"__esModule",{value:!0}),n.isNode=n.PROMISE_RESOLVED_VOID=n.PROMISE_RESOLVED_TRUE=n.PROMISE_RESOLVED_FALSE=void 0,n.isPromise=function(e){return!(!e||"function"!=typeof e.then)},n.microSeconds=function(){var e=(new Date).getTime()
return e===a?1e3*e+ ++o:(a=e,o=0,1e3*e)},n.randomInt=function(e,n){return Math.floor(Math.random()*(n-e+1)+e)},n.randomToken=function(){return Math.random().toString(36).substring(2)},n.sleep=function(e,n){return e||(e=0),new Promise((function(t){return setTimeout((function(){return t(n)}),e)}))}
var t=Promise.resolve(!1)
n.PROMISE_RESOLVED_FALSE=t
var r=Promise.resolve(!0)
n.PROMISE_RESOLVED_TRUE=r
var i=Promise.resolve()
n.PROMISE_RESOLVED_VOID=i
var a=0,o=0,s="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)
n.isNode=s},3924:e=>{"use strict"
var n=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var n=Object.prototype.toString.call(e)
return"[object RegExp]"===n||"[object Date]"===n||function(e){return e.$$typeof===t}(e)}(e)},t="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103
function r(e,n){return!1!==n.clone&&n.isMergeableObject(e)?s((t=e,Array.isArray(t)?[]:{}),e,n):e
var t}function i(e,n,t){return e.concat(n).map((function(e){return r(e,t)}))}function a(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(n){return e.propertyIsEnumerable(n)})):[]}(e))}function o(e,n){try{return n in e}catch(e){return!1}}function s(e,t,c){(c=c||{}).arrayMerge=c.arrayMerge||i,c.isMergeableObject=c.isMergeableObject||n,c.cloneUnlessOtherwiseSpecified=r
var d=Array.isArray(t)
return d===Array.isArray(e)?d?c.arrayMerge(e,t,c):function(e,n,t){var i={}
return t.isMergeableObject(e)&&a(e).forEach((function(n){i[n]=r(e[n],t)})),a(n).forEach((function(a){(function(e,n){return o(e,n)&&!(Object.hasOwnProperty.call(e,n)&&Object.propertyIsEnumerable.call(e,n))})(e,a)||(o(e,a)&&t.isMergeableObject(n[a])?i[a]=function(e,n){if(!n.customMerge)return s
var t=n.customMerge(e)
return"function"==typeof t?t:s}(a,t)(e[a],n[a],t):i[a]=r(n[a],t))})),i}(e,t,c):r(t,c)}s.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array")
return e.reduce((function(e,t){return s(e,t,n)}),{})}
var c=s
e.exports=c},8612:e=>{e.exports=!1},7577:(e,n,t)=>{"use strict"
t.r(n),t.d(n,{default:()=>u})
var r,i=function(){function e(){this.registry=new WeakMap}return e.prototype.elementExists=function(e){return this.registry.has(e)},e.prototype.getElement=function(e){return this.registry.get(e)},e.prototype.addElement=function(e,n){e&&this.registry.set(e,n||{})},e.prototype.removeElement=function(e){this.registry.delete(e)},e.prototype.destroyRegistry=function(){this.registry=new WeakMap},e}(),a=function(){}
!function(e){e.enter="enter",e.exit="exit"}(r||(r={}))
var o,s=function(){function e(){this.registry=new i}return e.prototype.addCallback=function(e,n,t){var i,a,o
e===r.enter?((i={})[r.enter]=t,o=i):((a={})[r.exit]=t,o=a),this.registry.addElement(n,Object.assign({},this.registry.getElement(n),o))},e.prototype.dispatchCallback=function(e,n,t){if(e===r.enter){var i=this.registry.getElement(n).enter;(void 0===i?a:i)(t)}else{var o=this.registry.getElement(n)
o&&o.exit&&o.exit(t)}},e}(),c=(o=function(e,n){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])},o(e,n)},function(e,n){function t(){this.constructor=e}o(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),d=function(){return d=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])
return e},d.apply(this,arguments)}
const u=function(e){function n(){var n=e.call(this)||this
return n.elementRegistry=new i,n}return c(n,e),n.prototype.observe=function(e,n){void 0===n&&(n={}),e&&(this.elementRegistry.addElement(e,d({},n)),this.setupObserver(e,d({},n)))},n.prototype.unobserve=function(e,n){var t=this.findMatchingRootEntry(n)
t&&t.intersectionObserver.unobserve(e)},n.prototype.addEnterCallback=function(e,n){this.addCallback(r.enter,e,n)},n.prototype.addExitCallback=function(e,n){this.addCallback(r.exit,e,n)},n.prototype.dispatchEnterCallback=function(e,n){this.dispatchCallback(r.enter,e,n)},n.prototype.dispatchExitCallback=function(e,n){this.dispatchCallback(r.exit,e,n)},n.prototype.destroy=function(){this.elementRegistry.destroyRegistry()},n.prototype.setupOnIntersection=function(e){var n=this
return function(t){return n.onIntersection(e,t)}},n.prototype.setupObserver=function(e,n){var t,r,i=n.root,a=void 0===i?window:i,o=this.findRootFromRegistry(a)
if(o&&(r=this.determineMatchingElements(n,o)),r){var s=r.elements,c=r.intersectionObserver
s.push(e),c&&c.observe(e)}else{var d={elements:[e],intersectionObserver:c=this.newObserver(e,n),options:n},u=this.stringifyOptions(n)
o?o[u]=d:this.elementRegistry.addElement(a,((t={})[u]=d,t))}},n.prototype.newObserver=function(e,n){var t=n.root,r=n.rootMargin,i=n.threshold,a=new IntersectionObserver(this.setupOnIntersection(n).bind(this),{root:t,rootMargin:r,threshold:i})
return a.observe(e),a},n.prototype.onIntersection=function(e,n){var t=this
n.forEach((function(n){var r=n.isIntersecting,i=n.intersectionRatio,a=e.threshold||0
Array.isArray(a)&&(a=a[a.length-1])
var o=t.findMatchingRootEntry(e)
r||i>a?o&&o.elements.some((function(e){return!(!e||e!==n.target||(t.dispatchEnterCallback(e,n),0))})):o&&o.elements.some((function(e){return!(!e||e!==n.target||(t.dispatchExitCallback(e,n),0))}))}))},n.prototype.findRootFromRegistry=function(e){if(this.elementRegistry)return this.elementRegistry.getElement(e)},n.prototype.findMatchingRootEntry=function(e){var n=e.root,t=void 0===n?window:n,r=this.findRootFromRegistry(t)
if(r)return r[this.stringifyOptions(e)]},n.prototype.determineMatchingElements=function(e,n){var t=this,r=Object.keys(n).filter((function(r){var i=n[r].options
return t.areOptionsSame(e,i)}))[0]
return n[r]},n.prototype.areOptionsSame=function(e,n){if(e===n)return!0
var t=Object.prototype.toString.call(e),r=Object.prototype.toString.call(n)
if(t!==r)return!1
if("[object Object]"!==t&&"[object Object]"!==r)return e===n
if(e&&n&&"object"==typeof e&&"object"==typeof n)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&!1===this.areOptionsSame(e[i],n[i]))return!1
return!0},n.prototype.stringifyOptions=function(e){var n=e.root
return JSON.stringify(e,(function(e,t){if("root"===e&&n){var r=Array.prototype.slice.call(n.classList).reduce((function(e,n){return e+n}),"")
return n.id+"-"+r}return t}))},n}(s)},3583:(e,n,t)=>{"use strict"
t.r(n),t.d(n,{ObliviousSet:()=>r,now:()=>a,removeTooOldValues:()=>i})
var r=function(){function e(e){this.ttl=e,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(e){return this.set.has(e)},e.prototype.add=function(e){var n=this
this.timeMap.set(e,a()),this.set.add(e),setTimeout((function(){i(n)}),0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}()
function i(e){for(var n=a()-e.ttl,t=e.set[Symbol.iterator]();;){var r=t.next().value
if(!r)return
if(!(e.timeMap.get(r)<n))return
e.timeMap.delete(r),e.set.delete(r)}}function a(){return(new Date).getTime()}},9103:(e,n,t)=>{"use strict"
t.r(n),t.d(n,{default:()=>xe})
var r=Object.create
function i(){var e=r(null)
return e.__=void 0,delete e.__,e}var a=function(e,n,t){this.path=e,this.matcher=n,this.delegate=t}
a.prototype.to=function(e,n){var t=this.delegate
if(t&&t.willAddRoute&&(e=t.willAddRoute(this.matcher.target,e)),this.matcher.add(this.path,e),n){if(0===n.length)throw new Error("You must have an argument in the function passed to `to`")
this.matcher.addChild(this.path,e,n,this.delegate)}}
var o=function(e){this.routes=i(),this.children=i(),this.target=e}
function s(e,n,t){return function(r,i){var o=e+r
if(!i)return new a(o,n,t)
i(s(o,n,t))}}function c(e,n,t){for(var r=0,i=0;i<e.length;i++)r+=e[i].path.length
var a={path:n=n.substr(r),handler:t}
e.push(a)}function d(e,n,t,r){for(var i=n.routes,a=Object.keys(i),o=0;o<a.length;o++){var s=a[o],u=e.slice()
c(u,s,i[s])
var p=n.children[s]
p?d(u,p,t,r):t.call(r,u)}}function u(e){return e.split("/").map(l).join("/")}o.prototype.add=function(e,n){this.routes[e]=n},o.prototype.addChild=function(e,n,t,r){var i=new o(n)
this.children[e]=i
var a=s(e,i,r)
r&&r.contextEntered&&r.contextEntered(n,a),t(a)}
var p=/%|\//g
function l(e){return e.length<3||-1===e.indexOf("%")?e:decodeURIComponent(e).replace(p,encodeURIComponent)}var f=/%(?:2(?:4|6|B|C)|3(?:B|D|A)|40)/g
function m(e){return encodeURIComponent(e).replace(f,decodeURIComponent)}var y=/(\/|\.|\*|\+|\?|\||\(|\)|\[|\]|\{|\}|\\)/g,h=Array.isArray,g=Object.prototype.hasOwnProperty
function v(e,n){if("object"!=typeof e||null===e)throw new Error("You must pass an object as the second argument to `generate`.")
if(!g.call(e,n))throw new Error("You must provide param `"+n+"` to `generate`.")
var t=e[n],r="string"==typeof t?t:""+t
if(0===r.length)throw new Error("You must provide a param `"+n+"`.")
return r}var _=[]
_[0]=function(e,n){for(var t=n,r=e.value,i=0;i<r.length;i++){var a=r.charCodeAt(i)
t=t.put(a,!1,!1)}return t},_[1]=function(e,n){return n.put(47,!0,!0)},_[2]=function(e,n){return n.put(-1,!1,!0)},_[4]=function(e,n){return n}
var T=[]
T[0]=function(e){return e.value.replace(y,"\\$1")},T[1]=function(){return"([^/]+)"},T[2]=function(){return"(.+)"},T[4]=function(){return""}
var b=[]
b[0]=function(e){return e.value},b[1]=function(e,n){var t=v(n,e.value)
return w.ENCODE_AND_DECODE_PATH_SEGMENTS?m(t):t},b[2]=function(e,n){return v(n,e.value)},b[4]=function(){return""}
var E=Object.freeze({}),k=Object.freeze([])
function A(e,n,t){n.length>0&&47===n.charCodeAt(0)&&(n=n.substr(1))
for(var r=n.split("/"),i=void 0,a=void 0,o=0;o<r.length;o++){var s,c,d=r[o]
12&(s=2<<(c=""===d?4:58===d.charCodeAt(0)?1:42===d.charCodeAt(0)?2:0))&&(d=d.slice(1),(i=i||[]).push(d),(a=a||[]).push(0!=(4&s))),14&s&&t[c]++,e.push({type:c,value:l(d)})}return{names:i||k,shouldDecodes:a||k}}function S(e,n,t){return e.char===n&&e.negate===t}var C=function(e,n,t,r,i){this.states=e,this.id=n,this.char=t,this.negate=r,this.nextStates=i?n:null,this.pattern="",this._regex=void 0,this.handlers=void 0,this.types=void 0}
function I(e,n){return e.negate?e.char!==n&&-1!==e.char:e.char===n||-1===e.char}function R(e,n){for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r]
t=t.concat(a.match(n))}return t}C.prototype.regex=function(){return this._regex||(this._regex=new RegExp(this.pattern)),this._regex},C.prototype.get=function(e,n){var t=this.nextStates
if(null!==t)if(h(t))for(var r=0;r<t.length;r++){var i=this.states[t[r]]
if(S(i,e,n))return i}else{var a=this.states[t]
if(S(a,e,n))return a}},C.prototype.put=function(e,n,t){var r
if(r=this.get(e,n))return r
var i=this.states
return r=new C(i,i.length,e,n,t),i[i.length]=r,null==this.nextStates?this.nextStates=r.id:h(this.nextStates)?this.nextStates.push(r.id):this.nextStates=[this.nextStates,r.id],r},C.prototype.match=function(e){var n=this.nextStates
if(!n)return[]
var t=[]
if(h(n))for(var r=0;r<n.length;r++){var i=this.states[n[r]]
I(i,e)&&t.push(i)}else{var a=this.states[n]
I(a,e)&&t.push(a)}return t}
var O=function(e){this.length=0,this.queryParams=e||{}}
function M(e){var n
e=e.replace(/\+/gm,"%20")
try{n=decodeURIComponent(e)}catch(e){n=""}return n}O.prototype.splice=Array.prototype.splice,O.prototype.slice=Array.prototype.slice,O.prototype.push=Array.prototype.push
var w=function(){this.names=i()
var e=[],n=new C(e,0,-1,!0,!1)
e[0]=n,this.states=e,this.rootState=n}
w.prototype.add=function(e,n){for(var t,r=this.rootState,i="^",a=[0,0,0],o=new Array(e.length),s=[],c=!0,d=0,u=0;u<e.length;u++){for(var p=e[u],l=A(s,p.path,a),f=l.names,m=l.shouldDecodes;d<s.length;d++){var y=s[d]
4!==y.type&&(c=!1,r=r.put(47,!1,!1),i+="/",r=_[y.type](y,r),i+=T[y.type](y))}o[u]={handler:p.handler,names:f,shouldDecodes:m}}c&&(r=r.put(47,!1,!1),i+="/"),r.handlers=o,r.pattern=i+"$",r.types=a,"object"==typeof n&&null!==n&&n.as&&(t=n.as),t&&(this.names[t]={segments:s,handlers:o})},w.prototype.handlersFor=function(e){var n=this.names[e]
if(!n)throw new Error("There is no route named "+e)
for(var t=new Array(n.handlers.length),r=0;r<n.handlers.length;r++){var i=n.handlers[r]
t[r]=i}return t},w.prototype.hasRoute=function(e){return!!this.names[e]},w.prototype.generate=function(e,n){var t=this.names[e],r=""
if(!t)throw new Error("There is no route named "+e)
for(var i=t.segments,a=0;a<i.length;a++){var o=i[a]
4!==o.type&&(r+="/",r+=b[o.type](o,n))}return"/"!==r.charAt(0)&&(r="/"+r),n&&n.queryParams&&(r+=this.generateQueryString(n.queryParams)),r},w.prototype.generateQueryString=function(e){var n=[],t=Object.keys(e)
t.sort()
for(var r=0;r<t.length;r++){var i=t[r],a=e[i]
if(null!=a){var o=encodeURIComponent(i)
if(h(a))for(var s=0;s<a.length;s++){var c=i+"[]="+encodeURIComponent(a[s])
n.push(c)}else o+="="+encodeURIComponent(a),n.push(o)}}return 0===n.length?"":"?"+n.join("&")},w.prototype.parseQueryString=function(e){for(var n=e.split("&"),t={},r=0;r<n.length;r++){var i=n[r].split("="),a=M(i[0]),o=a.length,s=!1,c=void 0
1===i.length?c="true":(o>2&&"[]"===a.slice(o-2)&&(s=!0,t[a=a.slice(0,o-2)]||(t[a]=[])),c=i[1]?M(i[1]):""),s?t[a].push(c):t[a]=c}return t},w.prototype.recognize=function(e){var n,t=[this.rootState],r={},i=!1,a=e.indexOf("#");-1!==a&&(e=e.substr(0,a))
var o=e.indexOf("?")
if(-1!==o){var s=e.substr(o+1,e.length)
e=e.substr(0,o),r=this.parseQueryString(s)}"/"!==e.charAt(0)&&(e="/"+e)
var c=e
w.ENCODE_AND_DECODE_PATH_SEGMENTS?e=u(e):(e=decodeURI(e),c=decodeURI(c))
var d=e.length
d>1&&"/"===e.charAt(d-1)&&(e=e.substr(0,d-1),c=c.substr(0,c.length-1),i=!0)
for(var p=0;p<e.length&&(t=R(t,e.charCodeAt(p))).length;p++);for(var l=[],f=0;f<t.length;f++)t[f].handlers&&l.push(t[f])
t=function(e){return e.sort((function(e,n){var t=e.types||[0,0,0],r=t[0],i=t[1],a=t[2],o=n.types||[0,0,0],s=o[0],c=o[1],d=o[2]
if(a!==d)return a-d
if(a){if(r!==s)return s-r
if(i!==c)return c-i}return i!==c?i-c:r!==s?s-r:0}))}(l)
var m=l[0]
return m&&m.handlers&&(i&&m.pattern&&"(.+)$"===m.pattern.slice(-5)&&(c+="/"),n=function(e,n,t){var r=e.handlers,i=e.regex()
if(!i||!r)throw new Error("state not initialized")
var a=n.match(i),o=1,s=new O(t)
s.length=r.length
for(var c=0;c<r.length;c++){var d=r[c],u=d.names,p=d.shouldDecodes,l=E,f=!1
if(u!==k&&p!==k)for(var m=0;m<u.length;m++){f=!0
var y=u[m],h=a&&a[o++]
l===E&&(l={}),w.ENCODE_AND_DECODE_PATH_SEGMENTS&&p[m]?l[y]=h&&decodeURIComponent(h):l[y]=h}s[c]={handler:d.handler,params:l,isDynamic:f}}return s}(m,c,r)),n},w.VERSION="0.3.4",w.ENCODE_AND_DECODE_PATH_SEGMENTS=!0,w.Normalizer={normalizeSegment:l,normalizePath:u,encodePathSegment:m},w.prototype.map=function(e,n){var t=new o
e(s("",t,this.delegate)),d([],t,(function(e){n?n(this,e):this.add(e)}),this)}
const N=w
var P=function(e,n,t,r){this.type=e,this.bubbles=n,this.cancelable=t,this.target=r}
P.prototype={stopPropagation:function(){},preventDefault:function(){this.defaultPrevented=!0}}
var D={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"},U={"Accept-Charset":!0,"Accept-Encoding":!0,Connection:!0,"Content-Length":!0,Cookie:!0,Cookie2:!0,"Content-Transfer-Encoding":!0,Date:!0,Expect:!0,Host:!0,"Keep-Alive":!0,Referer:!0,TE:!0,Trailer:!0,"Transfer-Encoding":!0,Upgrade:!0,"User-Agent":!0,Via:!0}
function x(e,n){n.addEventListener(e,(function(t){var r=n["on"+e]
r&&"function"==typeof r&&r.call(t.target,t)}))}function L(){this._eventListeners={}
for(var e=["loadstart","progress","load","abort","loadend"],n=e.length-1;n>=0;n--)x(e[n],this)}function F(){L.call(this),this.readyState=F.UNSENT,this.requestHeaders={},this.requestBody=null,this.status=0,this.statusText="",this.upload=new L,this.onabort=null,this.onerror=null,this.onload=null,this.onloadend=null,this.onloadstart=null,this.onprogress=null,this.onreadystatechange=null,this.ontimeout=null}L.prototype={addEventListener:function(e,n){this._eventListeners[e]=this._eventListeners[e]||[],this._eventListeners[e].push(n)},removeEventListener:function(e,n){for(var t=this._eventListeners[e]||[],r=0,i=t.length;r<i;++r)if(t[r]==n)return t.splice(r,1)},dispatchEvent:function(e){for(var n=e.type,t=this._eventListeners[n]||[],r=0;r<t.length;r++)"function"==typeof t[r]?t[r].call(this,e):t[r].handleEvent(e)
return!!e.defaultPrevented},_progress:function(e,n,t){var r=new P("progress")
r.target=this,r.lengthComputable=e,r.loaded=n,r.total=t,this.dispatchEvent(r)}},F.prototype=new L,F.UNSENT=0,F.OPENED=1,F.HEADERS_RECEIVED=2,F.LOADING=3,F.DONE=4
var B={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4,async:!0,withCredentials:!1,open:function(e,n,t,r,i){this.method=e,this.url=n,this.async="boolean"!=typeof t||t,this.username=r,this.password=i,this.responseText=null,this.response=this.responseText,this.responseXML=null,this.responseURL=n,this.requestHeaders={},this.sendFlag=!1,this._readyStateChange(F.OPENED)},setRequestHeader:function(e,n){if(j(this),U[e]||/^(Sec-|Proxy-)/.test(e))throw new Error('Refused to set unsafe header "'+e+'"')
this.requestHeaders[e]?this.requestHeaders[e]+=","+n:this.requestHeaders[e]=n},send:function(e){if(j(this),!/^(get|head)$/i.test(this.method)){var n=!1
Object.keys(this.requestHeaders).forEach((function(e){"content-type"===e.toLowerCase()&&(n=!0)})),n||(e||"").toString().match("FormData")||(this.requestHeaders["Content-Type"]="text/plain;charset=UTF-8"),this.requestBody=e}this.errorFlag=!1,this.sendFlag=this.async,this._readyStateChange(F.OPENED),"function"==typeof this.onSend&&this.onSend(this),this.dispatchEvent(new P("loadstart",!1,!1,this))},abort:function(){this.aborted=!0,this.responseText=null,this.response=this.responseText,this.errorFlag=!0,this.requestHeaders={},this.dispatchEvent(new P("abort",!1,!1,this)),this.readyState>F.UNSENT&&this.sendFlag&&(this._readyStateChange(F.UNSENT),this.sendFlag=!1),"function"==typeof this.onerror&&this.onerror()},getResponseHeader:function(e){if(this.readyState<F.HEADERS_RECEIVED)return null
if(/^Set-Cookie2?$/i.test(e))return null
for(var n in e=e.toLowerCase(),this.responseHeaders)if(n.toLowerCase()==e)return this.responseHeaders[n]
return null},getAllResponseHeaders:function(){if(this.readyState<F.HEADERS_RECEIVED)return""
var e=""
for(var n in this.responseHeaders)this.responseHeaders.hasOwnProperty(n)&&!/^Set-Cookie2?$/i.test(n)&&(e+=n+": "+this.responseHeaders[n]+"\r\n")
return e},overrideMimeType:function(e){"string"==typeof e&&(this.forceMimeType=e.toLowerCase())},_readyStateChange:function(e){this.readyState=e,"function"==typeof this.onreadystatechange&&this.onreadystatechange(new P("readystatechange")),this.dispatchEvent(new P("readystatechange")),this.readyState==F.DONE&&this.dispatchEvent(new P("load",!1,!1,this)),this.readyState!=F.UNSENT&&this.readyState!=F.DONE||this.dispatchEvent(new P("loadend",!1,!1,this))},_setResponseHeaders:function(e){for(var n in this.responseHeaders={},e)e.hasOwnProperty(n)&&(this.responseHeaders[n]=e[n])
this.forceMimeType&&(this.responseHeaders["Content-Type"]=this.forceMimeType),this.async?this._readyStateChange(F.HEADERS_RECEIVED):this.readyState=F.HEADERS_RECEIVED},_setResponseBody:function(e){!function(e){if(e.readyState==F.DONE)throw new Error("Request done")}(this),function(e){if(e.async&&e.readyState!=F.HEADERS_RECEIVED)throw new Error("No headers received")}(this),function(e){if("string"!=typeof e){var n=new Error("Attempted to respond to fake XMLHttpRequest with "+e+", which is not a string.")
throw n.name="InvalidBodyException",n}}(e)
var n=this.chunkSize||10,t=0
this.responseText="",this.response=this.responseText
do{this.async&&this._readyStateChange(F.LOADING),this.responseText+=e.substring(t,t+n),this.response=this.responseText,t+=n}while(t<e.length)
var r,i,a=this.getResponseHeader("Content-Type")
if(this.responseText&&(!a||/(text\/xml)|(application\/xml)|(\+xml)/.test(a)))try{this.responseXML=(r=this.responseText,"undefined"!=typeof DOMParser?i=(new DOMParser).parseFromString(r,"text/xml"):((i=new ActiveXObject("Microsoft.XMLDOM")).async="false",i.loadXML(r)),i)}catch(e){}this.async?this._readyStateChange(F.DONE):this.readyState=F.DONE},respond:function(e,n,t){this._setResponseHeaders(n||{}),this.status="number"==typeof e?e:200,this.statusText=D[this.status],this._setResponseBody(t||"")}}
for(var q in B)F.prototype[q]=B[q]
function j(e){if(e.readyState!==F.OPENED)throw new Error("INVALID_STATE_ERR")
if(e.sendFlag)throw new Error("INVALID_STATE_ERR")}const V=F
var H="URLSearchParams"in self,G="Symbol"in self&&"iterator"in Symbol,K="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),$="FormData"in self,W="ArrayBuffer"in self
if(W)var Q=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],z=ArrayBuffer.isView||function(e){return e&&Q.indexOf(Object.prototype.toString.call(e))>-1}
function Y(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name")
return e.toLowerCase()}function X(e){return"string"!=typeof e&&(e=String(e)),e}function J(e){var n={next:function(){var n=e.shift()
return{done:void 0===n,value:n}}}
return G&&(n[Symbol.iterator]=function(){return n}),n}function Z(e){this.map={},e instanceof Z?e.forEach((function(e,n){this.append(n,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(n){this.append(n,e[n])}),this)}function ee(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"))
e.bodyUsed=!0}function ne(e){return new Promise((function(n,t){e.onload=function(){n(e.result)},e.onerror=function(){t(e.error)}}))}function te(e){var n=new FileReader,t=ne(n)
return n.readAsArrayBuffer(e),t}function re(e){if(e.slice)return e.slice(0)
var n=new Uint8Array(e.byteLength)
return n.set(new Uint8Array(e)),n.buffer}function ie(){return this.bodyUsed=!1,this._initBody=function(e){var n
this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:K&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:$&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:H&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():W&&K&&(n=e)&&DataView.prototype.isPrototypeOf(n)?(this._bodyArrayBuffer=re(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):W&&(ArrayBuffer.prototype.isPrototypeOf(e)||z(e))?this._bodyArrayBuffer=re(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):H&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},K&&(this.blob=function(){var e=ee(this)
if(e)return e
if(this._bodyBlob)return Promise.resolve(this._bodyBlob)
if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]))
if(this._bodyFormData)throw new Error("could not read FormData body as blob")
return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?ee(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(te)}),this.text=function(){var e,n,t,r=ee(this)
if(r)return r
if(this._bodyBlob)return e=this._bodyBlob,t=ne(n=new FileReader),n.readAsText(e),t
if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var n=new Uint8Array(e),t=new Array(n.length),r=0;r<n.length;r++)t[r]=String.fromCharCode(n[r])
return t.join("")}(this._bodyArrayBuffer))
if(this._bodyFormData)throw new Error("could not read FormData body as text")
return Promise.resolve(this._bodyText)},$&&(this.formData=function(){return this.text().then(se)}),this.json=function(){return this.text().then(JSON.parse)},this}Z.prototype.append=function(e,n){e=Y(e),n=X(n)
var t=this.map[e]
this.map[e]=t?t+", "+n:n},Z.prototype.delete=function(e){delete this.map[Y(e)]},Z.prototype.get=function(e){return e=Y(e),this.has(e)?this.map[e]:null},Z.prototype.has=function(e){return this.map.hasOwnProperty(Y(e))},Z.prototype.set=function(e,n){this.map[Y(e)]=X(n)},Z.prototype.forEach=function(e,n){for(var t in this.map)this.map.hasOwnProperty(t)&&e.call(n,this.map[t],t,this)},Z.prototype.keys=function(){var e=[]
return this.forEach((function(n,t){e.push(t)})),J(e)},Z.prototype.values=function(){var e=[]
return this.forEach((function(n){e.push(n)})),J(e)},Z.prototype.entries=function(){var e=[]
return this.forEach((function(n,t){e.push([t,n])})),J(e)},G&&(Z.prototype[Symbol.iterator]=Z.prototype.entries)
var ae=["DELETE","GET","HEAD","OPTIONS","POST","PUT"]
function oe(e,n){var t,r,i=(n=n||{}).body
if(e instanceof oe){if(e.bodyUsed)throw new TypeError("Already read")
this.url=e.url,this.credentials=e.credentials,n.headers||(this.headers=new Z(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e)
if(this.credentials=n.credentials||this.credentials||"same-origin",!n.headers&&this.headers||(this.headers=new Z(n.headers)),this.method=(r=(t=n.method||this.method||"GET").toUpperCase(),ae.indexOf(r)>-1?r:t),this.mode=n.mode||this.mode||null,this.signal=n.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests")
this._initBody(i)}function se(e){var n=new FormData
return e.trim().split("&").forEach((function(e){if(e){var t=e.split("="),r=t.shift().replace(/\+/g," "),i=t.join("=").replace(/\+/g," ")
n.append(decodeURIComponent(r),decodeURIComponent(i))}})),n}function ce(e,n){n||(n={}),this.type="default",this.status=void 0===n.status?200:n.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in n?n.statusText:"OK",this.headers=new Z(n.headers),this.url=n.url||"",this._initBody(e)}oe.prototype.clone=function(){return new oe(this,{body:this._bodyInit})},ie.call(oe.prototype),ie.call(ce.prototype),ce.prototype.clone=function(){return new ce(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Z(this.headers),url:this.url})},ce.error=function(){var e=new ce(null,{status:0,statusText:""})
return e.type="error",e}
var de=[301,302,303,307,308]
ce.redirect=function(e,n){if(-1===de.indexOf(n))throw new RangeError("Invalid status code")
return new ce(null,{status:n,headers:{location:e}})}
var ue=self.DOMException
try{new ue}catch(e){(ue=function(e,n){this.message=e,this.name=n
var t=Error(e)
this.stack=t.stack}).prototype=Object.create(Error.prototype),ue.prototype.constructor=ue}function pe(e,n){return new Promise((function(t,r){var i=new oe(e,n)
if(i.signal&&i.signal.aborted)return r(new ue("Aborted","AbortError"))
var a=new XMLHttpRequest
function o(){a.abort()}a.onload=function(){var e,n,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",n=new Z,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var t=e.split(":"),r=t.shift().trim()
if(r){var i=t.join(":").trim()
n.append(r,i)}})),n)}
r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL")
var i="response"in a?a.response:a.responseText
t(new ce(i,r))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.onabort=function(){r(new ue("Aborted","AbortError"))},a.open(i.method,i.url,!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&K&&(a.responseType="blob"),i.headers.forEach((function(e,n){a.setRequestHeader(n,e)})),i.signal&&(i.signal.addEventListener("abort",o),a.onreadystatechange=function(){4===a.readyState&&i.signal.removeEventListener("abort",o)}),a.send(void 0===i._bodyInit?null:i._bodyInit)}))}pe.polyfill=!0,self.fetch||(self.fetch=pe,self.Headers=Z,self.Request=oe,self.Response=ce)
var le=Object.freeze({__proto__:null,Headers:Z,Request:oe,Response:ce,get DOMException(){return ue},fetch:pe}),fe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},me=function(e,n){if(n=n.split(":")[0],!(e=+e))return!1
switch(n){case"http":case"ws":return 80!==e
case"https":case"wss":return 443!==e
case"ftp":return 21!==e
case"gopher":return 70!==e
case"file":return!1}return 0!==e},ye=Object.prototype.hasOwnProperty
function he(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}var ge={stringify:function(e,n){n=n||""
var t,r,i=[]
for(r in"string"!=typeof n&&(n="?"),e)if(ye.call(e,r)){if((t=e[r])||null!=t&&!isNaN(t)||(t=""),r=encodeURIComponent(r),t=encodeURIComponent(t),null===r||null===t)continue
i.push(r+"="+t)}return i.length?n+i.join("&"):""},parse:function(e){for(var n,t=/([^=?&]+)=?([^&]*)/g,r={};n=t.exec(e);){var i=he(n[1]),a=he(n[2])
null===i||null===a||i in r||(r[i]=a)}return r}},ve=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,_e=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,Te=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+")
function be(e){return(e||"").toString().replace(Te,"")}var Ee=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],ke={hash:1,query:1}
function Ae(e){var n,t=("undefined"!=typeof window?window:void 0!==fe?fe:"undefined"!=typeof self?self:{}).location||{},r={},i=typeof(e=e||t)
if("blob:"===e.protocol)r=new Ce(unescape(e.pathname),{})
else if("string"===i)for(n in r=new Ce(e,{}),ke)delete r[n]
else if("object"===i){for(n in e)n in ke||(r[n]=e[n])
void 0===r.slashes&&(r.slashes=ve.test(e.href))}return r}function Se(e){e=be(e)
var n=_e.exec(e)
return{protocol:n[1]?n[1].toLowerCase():"",slashes:!!n[2],rest:n[3]}}function Ce(e,n,t){if(e=be(e),!(this instanceof Ce))return new Ce(e,n,t)
var r,i,a,o,s,c,d=Ee.slice(),u=typeof n,p=this,l=0
for("object"!==u&&"string"!==u&&(t=n,n=null),t&&"function"!=typeof t&&(t=ge.parse),n=Ae(n),r=!(i=Se(e||"")).protocol&&!i.slashes,p.slashes=i.slashes||r&&n.slashes,p.protocol=i.protocol||n.protocol||"",e=i.rest,i.slashes||(d[3]=[/(.*)/,"pathname"]);l<d.length;l++)"function"!=typeof(o=d[l])?(a=o[0],c=o[1],a!=a?p[c]=e:"string"==typeof a?~(s=e.indexOf(a))&&("number"==typeof o[2]?(p[c]=e.slice(0,s),e=e.slice(s+o[2])):(p[c]=e.slice(s),e=e.slice(0,s))):(s=a.exec(e))&&(p[c]=s[1],e=e.slice(0,s.index)),p[c]=p[c]||r&&o[3]&&n[c]||"",o[4]&&(p[c]=p[c].toLowerCase())):e=o(e)
t&&(p.query=t(p.query)),r&&n.slashes&&"/"!==p.pathname.charAt(0)&&(""!==p.pathname||""!==n.pathname)&&(p.pathname=function(e,n){if(""===e)return n
for(var t=(n||"/").split("/").slice(0,-1).concat(e.split("/")),r=t.length,i=t[r-1],a=!1,o=0;r--;)"."===t[r]?t.splice(r,1):".."===t[r]?(t.splice(r,1),o++):o&&(0===r&&(a=!0),t.splice(r,1),o--)
return a&&t.unshift(""),"."!==i&&".."!==i||t.push(""),t.join("/")}(p.pathname,n.pathname)),me(p.port,p.protocol)||(p.host=p.hostname,p.port=""),p.username=p.password="",p.auth&&(o=p.auth.split(":"),p.username=o[0]||"",p.password=o[1]||""),p.origin=p.protocol&&p.host&&"file:"!==p.protocol?p.protocol+"//"+p.host:"null",p.href=p.toString()}Ce.prototype={set:function(e,n,t){var r=this
switch(e){case"query":"string"==typeof n&&n.length&&(n=(t||ge.parse)(n)),r[e]=n
break
case"port":r[e]=n,me(n,r.protocol)?n&&(r.host=r.hostname+":"+n):(r.host=r.hostname,r[e]="")
break
case"hostname":r[e]=n,r.port&&(n+=":"+r.port),r.host=n
break
case"host":r[e]=n,/:\d+$/.test(n)?(n=n.split(":"),r.port=n.pop(),r.hostname=n.join(":")):(r.hostname=n,r.port="")
break
case"protocol":r.protocol=n.toLowerCase(),r.slashes=!t
break
case"pathname":case"hash":if(n){var i="pathname"===e?"/":"#"
r[e]=n.charAt(0)!==i?i+n:n}else r[e]=n
break
default:r[e]=n}for(var a=0;a<Ee.length;a++){var o=Ee[a]
o[4]&&(r[o[1]]=r[o[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(e){e&&"function"==typeof e||(e=ge.stringify)
var n,t=this,r=t.protocol
r&&":"!==r.charAt(r.length-1)&&(r+=":")
var i=r+(t.slashes?"//":"")
return t.username&&(i+=t.username,t.password&&(i+=":"+t.password),i+="@"),i+=t.host+t.pathname,(n="object"==typeof t.query?e(t.query):t.query)&&(i+="?"!==n.charAt(0)?"?"+n:n),t.hash&&(i+=t.hash),i}},Ce.extractProtocol=Se,Ce.location=Ae,Ce.trimLeft=be,Ce.qs=ge
var Ie=Ce
function Re(e){var n=new Ie(e)
n.host||(n.href=n.href)
var t=n.pathname
"/"!==t.charAt(0)&&(t="/"+t)
var r=n.host
return"80"!==n.port&&"443"!==n.port||(r=n.hostname),{host:r,protocol:n.protocol,search:n.query,hash:n.hash,href:n.href,pathname:t,fullpath:t+(n.query||"")+(n.hash||"")}}var Oe=function(){this.verbs={GET:new N,PUT:new N,POST:new N,DELETE:new N,PATCH:new N,HEAD:new N,OPTIONS:new N}},Me=function(){function e(){this.registries={}}return e.prototype.forURL=function(e){var n=Re(e).host,t=this.registries[n]
return void 0===t&&(t=this.registries[n]=new Oe),t.verbs},e}()
function we(e){function n(){V.call(this)}return n.prototype=Object.create(V.prototype),n.prototype.constructor=n,n.prototype.send=function(){if(this.sendArguments=arguments,!e.pretender.running)throw new Error("You shut down a Pretender instance while there was a pending request. That request just tried to complete. Check to see if you accidentally shut down a pretender earlier than you intended to")
V.prototype.send.apply(this,arguments),e.pretender.checkPassthrough(this)?this.passthrough():e.pretender.handleRequest(this)},n.prototype.passthrough=function(){if(!this.sendArguments)throw new Error("You attempted to passthrough a FakeRequest that was never sent. Call `.send()` on the original request first")
var n=function(e,n){var t,r=["error","timeout","abort","readystatechange"],i=[],a=["readyState","responseText","response","responseXML","responseURL","status","statusText"],o=e._passthroughRequest=new n
function s(e,n,t){e.dispatchEvent(t),e["on"+n]&&e["on"+n](t)}function c(n){o["on"+n]=function(t){!function(e,n,t){for(var r=0;r<e.length;r++){var i=e[r]
i in n&&(t[i]=n[i])}}(a,o,e),s(e,n,t)}}function d(n){o.upload&&e.upload&&e.upload["on"+n]&&(o.upload["on"+n]=function(t){s(e.upload,n,t)})}o.open(e.method,e.url,e.async,e.username,e.password),"arraybuffer"===e.responseType&&(a=["readyState","response","status","statusText"],o.responseType=e.responseType),"onload"in o&&r.push("load"),e.async&&"arraybuffer"!==e.responseType&&(r.push("progress"),i.push("progress"))
for(t=0;t<r.length;t++)c(r[t])
for(t=0;t<i.length;t++)d(i[t])
for(var u in e.async&&(o.timeout=e.timeout,o.withCredentials=e.withCredentials),e.requestHeaders)o.setRequestHeader(u,e.requestHeaders[u])
return o}(this,e.pretender._nativeXMLHttpRequest)
return n.send.apply(n,this.sendArguments),n},n.prototype._passthroughCheck=function(e,n){return this._passthroughRequest?this._passthroughRequest[e].apply(this._passthroughRequest,n):V.prototype[e].apply(this,n)},n.prototype.abort=function(){return this._passthroughCheck("abort",arguments)},n.prototype.getResponseHeader=function(){return this._passthroughCheck("getResponseHeader",arguments)},n.prototype.getAllResponseHeaders=function(){return this._passthroughCheck("getAllResponseHeaders",arguments)},e.pretender._nativeXMLHttpRequest.prototype._passthroughCheck&&console.warn("You created a second Pretender instance while there was already one running. Running two Pretender servers at once will lead to unexpected results and will be removed entirely in a future major version.Please call .shutdown() on your instances when you no longer need them to respond."),n}function Ne(){this.hosts=new Me
var e=arguments[arguments.length-1],n="object"==typeof e?e:null,t=n&&!1===n.trackRequests,r={push:function(){},length:0}
this.handlers=[],this.handledRequests=t?r:[],this.passthroughRequests=t?r:[],this.unhandledRequests=t?r:[],this.requestReferences=[],this.forcePassthrough=n&&!0===n.forcePassthrough,this.disableUnhandled=n&&!0===n.disableUnhandled,this._nativeXMLHttpRequest=self.XMLHttpRequest,this.running=!1
var i={pretender:this}
this.ctx=i,self.XMLHttpRequest=we(i),this._fetchProps=le?["fetch","Headers","Request","Response"]:[],this._fetchProps.forEach((function(e){this["_native"+e]=self[e],self[e]=le[e]}),this),this.running=!0
for(var a=n?arguments.length-1:arguments.length,o=0;o<a;o++)this.map(arguments[o])}function Pe(e){return function(n,t,r){return this.register(e,n,t,r)}}function De(e,n,t){setTimeout((function(){if(!e.aborted&&!e.status){var r,i=(new Date).getTime()-n.getTime(),a=e.requestBody
r=a&&(a.byteLength||a.size||a.length)||0
var o=t<=0?0:i/t*r
e.upload._progress(!0,o,r),e._progress(!0,o,r),De(e,n,t)}}),50)}var Ue={}
Ne.prototype={get:Pe("GET"),post:Pe("POST"),put:Pe("PUT"),delete:Pe("DELETE"),patch:Pe("PATCH"),head:Pe("HEAD"),options:Pe("OPTIONS"),map:function(e){e.call(this)},register:function(e,n,t,r){if(!t)throw new Error("The function you tried passing to Pretender to handle "+e+" "+n+" is undefined or missing.")
return t.numberOfCalls=0,t.async=r,this.handlers.push(t),this.hosts.forURL(n)[e].add([{path:Re(n).fullpath,handler:t}]),t},passthrough:Ue,checkPassthrough:function(e){var n=e.method.toUpperCase(),t=Re(e.url).fullpath,r=this.hosts.forURL(e.url)[n].recognize(t),i=r&&r[0]
return!!(i&&i.handler===Ue||this.forcePassthrough)&&(this.passthroughRequests.push(e),this.passthroughRequest(n,t,e),!0)},handleRequest:function(e){var n=e.method.toUpperCase(),t=e.url,r=this._handlerFor(n,t,e)
if(r){r.handler.numberOfCalls++
var i=r.handler.async
this.handledRequests.push(e)
var a=this,o=function(r){if(o=r,"[object Array]"!==Object.prototype.toString.call(o))throw new Error("Nothing returned by handler for "+t+". Remember to `return [status, headers, body];` in your route handler.")
var o,s=r[0],c=a.prepareHeaders(r[1]),d=a.prepareBody(r[2],c)
a.handleResponse(e,i,(function(){e.respond(s,c,d),a.handledRequest(n,t,e)}))}
try{var s=r.handler(e)
s&&"function"==typeof s.then?s.then((function(e){o(e)})):o(s)}catch(r){this.erroredRequest(n,t,e,r),this.resolve(e)}}else this.disableUnhandled||(this.unhandledRequests.push(e),this.unhandledRequest(n,t,e))},handleResponse:function(e,n,t){var r="function"==typeof n?n():n
if(!1===(r="boolean"==typeof r||"number"==typeof r?r:0))t()
else{var i=this
i.requestReferences.push({request:e,callback:t}),!0!==r&&(De(e,new Date,r),setTimeout((function(){i.resolve(e)}),r))}},resolve:function(e){for(var n=0,t=this.requestReferences.length;n<t;n++){var r=this.requestReferences[n]
if(r.request===e){r.callback(),this.requestReferences.splice(n,1)
break}}},requiresManualResolution:function(e,n){var t=this._handlerFor(e.toUpperCase(),n,{})
if(!t)return!1
var r=t.handler.async
return"function"==typeof r?!0===r():!0===r},prepareBody:function(e){return e},prepareHeaders:function(e){return e},handledRequest:function(){},passthroughRequest:function(){},unhandledRequest:function(e,n){throw new Error("Pretender intercepted "+e+" "+n+" but no handler was defined for this type of request")},erroredRequest:function(e,n,t,r){throw r.message="Pretender intercepted "+e+" "+n+" but encountered an error: "+r.message,r},_handlerFor:function(e,n,t){var r=this.hosts.forURL(n)[e].recognize(Re(n).fullpath),i=r?r[0]:null
return i&&(t.params=i.params,t.queryParams=r.queryParams),i},shutdown:function(){self.XMLHttpRequest=this._nativeXMLHttpRequest,this._fetchProps.forEach((function(e){self[e]=this["_native"+e]}),this),this.ctx.pretender=void 0,this.running=!1}},Ne.parseURL=Re,Ne.Hosts=Me,Ne.Registry=Oe
const xe=Ne},9516:(e,n,t)=>{"use strict"
t.r(n),t.d(n,{decode:()=>g,default:()=>b,encode:()=>v,toASCII:()=>T,toUnicode:()=>_,ucs2decode:()=>f,ucs2encode:()=>m})
const r=2147483647,i=36,a=/^xn--/,o=/[^\0-\x7E]/,s=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,u=String.fromCharCode
function p(e){throw new RangeError(c[e])}function l(e,n){const t=e.split("@")
let r=""
t.length>1&&(r=t[0]+"@",e=t[1])
const i=function(e,n){const t=[]
let r=e.length
for(;r--;)t[r]=n(e[r])
return t}((e=e.replace(s,".")).split("."),n).join(".")
return r+i}function f(e){const n=[]
let t=0
const r=e.length
for(;t<r;){const i=e.charCodeAt(t++)
if(i>=55296&&i<=56319&&t<r){const r=e.charCodeAt(t++)
56320==(64512&r)?n.push(((1023&i)<<10)+(1023&r)+65536):(n.push(i),t--)}else n.push(i)}return n}const m=e=>String.fromCodePoint(...e),y=function(e,n){return e+22+75*(e<26)-((0!=n)<<5)},h=function(e,n,t){let r=0
for(e=t?d(e/700):e>>1,e+=d(e/n);e>455;r+=i)e=d(e/35)
return d(r+36*e/(e+38))},g=function(e){const n=[],t=e.length
let a=0,o=128,s=72,c=e.lastIndexOf("-")
c<0&&(c=0)
for(let t=0;t<c;++t)e.charCodeAt(t)>=128&&p("not-basic"),n.push(e.charCodeAt(t))
for(let l=c>0?c+1:0;l<t;){let c=a
for(let n=1,o=i;;o+=i){l>=t&&p("invalid-input")
const c=(u=e.charCodeAt(l++))-48<10?u-22:u-65<26?u-65:u-97<26?u-97:i;(c>=i||c>d((r-a)/n))&&p("overflow"),a+=c*n
const f=o<=s?1:o>=s+26?26:o-s
if(c<f)break
const m=i-f
n>d(r/m)&&p("overflow"),n*=m}const f=n.length+1
s=h(a-c,f,0==c),d(a/f)>r-o&&p("overflow"),o+=d(a/f),a%=f,n.splice(a++,0,o)}var u
return String.fromCodePoint(...n)},v=function(e){const n=[]
let t=(e=f(e)).length,a=128,o=0,s=72
for(const t of e)t<128&&n.push(u(t))
let c=n.length,l=c
for(c&&n.push("-");l<t;){let t=r
for(const n of e)n>=a&&n<t&&(t=n)
const f=l+1
t-a>d((r-o)/f)&&p("overflow"),o+=(t-a)*f,a=t
for(const t of e)if(t<a&&++o>r&&p("overflow"),t==a){let e=o
for(let t=i;;t+=i){const r=t<=s?1:t>=s+26?26:t-s
if(e<r)break
const a=e-r,o=i-r
n.push(u(y(r+a%o,0))),e=d(a/o)}n.push(u(y(e,0))),s=h(o,f,l==c),o=0,++l}++o,++a}return n.join("")},_=function(e){return l(e,(function(e){return a.test(e)?g(e.slice(4).toLowerCase()):e}))},T=function(e){return l(e,(function(e){return o.test(e)?"xn--"+v(e):e}))},b={version:"2.1.0",ucs2:{decode:f,encode:m},decode:g,encode:v,toASCII:T,toUnicode:_}},2777:e=>{self,e.exports=(()=>{"use strict"
var e={170:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.default={hour:36e5,minute:6e4,second:1e3}},544:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0})
var r=t(916),i=t(234)
n.default={parse:r.default,serialize:i.default}},916:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.parseTimeStamp=void 0
var r=t(734),i=t(572),a=t(170),o=/\r?\n/,s=/\s$/,c=/^(\d{2}):(\d{2}):(\d{2}),(\d{3})$/
function d(e,n){if(!e)throw new i.default("Missing sequence number",n,r.default.PARSER_ERROR_MISSING_SEQUENCE_NUMBER)
var t=Number(e)
if(!Number.isInteger(t)||s.test(e))throw new i.default("Expected Integer for sequence number: ".concat(e),n,r.default.PARSER_ERROR_INVALID_SEQUENCE_NUMBER)
return t}function u(e,n){var t=c.exec(e)
if(!t)throw new i.default("Invalid time stamp: ".concat(e),n,r.default.PARSER_ERROR_INVALID_TIME_STAMP)
var o=t.slice(1).map(Number),s=o[0],d=o[1],u=o[2],p=o[3]
return s*a.default.hour+d*a.default.minute+u*a.default.second+p}function p(e,n){if(!e)throw new i.default("Missing time span",n,r.default.PARSER_ERROR_MISSING_TIME_SPAN)
var t=e.split(" --\x3e "),a=t[0],o=t[1]
if(!a||!o||s.test(e))throw new i.default("Invalid time span: ".concat(e),n,r.default.PARSER_ERROR_INVALID_TIME_SPAN)
return{start:u(a,n),end:u(o,n)}}n.parseTimeStamp=u,n.default=function(e){for(var n=e.trimEnd().split(o),t=[],a=0;a<n.length;a+=1){var s={chunkStart:a,timeSpan:a,text:a,chunkEnd:a},c=d(n[a],a)
a+=1,s.timeSpan=a
var u=p(n[a],a)
a+=1,s.text=a
for(var l=[];n[a]&&n[a].trim();)l.push(n[a]),a+=1
var f=l.join("\n")
if(!f)throw new i.default("Missing caption text",a,r.default.PARSER_ERROR_MISSING_TEXT)
s.chunkEnd=a-1,t.push({lineNumbers:s,sequenceNumber:c,time:u,text:f})}return t}},234:function(e,n,t){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])
return e},r.apply(this,arguments)}
Object.defineProperty(n,"__esModule",{value:!0})
var i=t(170),a="\n"
function o(e,n){var t=e,r=e/i.default.hour,a=(t%=i.default.hour)/i.default.minute,o=(t%=i.default.minute)/i.default.second
t%=i.default.second
var s=[2,2,2,3],c=[r,a,o,t].map((function(e,n){return"".concat(Math.floor(e)).padStart(s[n],"0")})),d=c[0],u=c[1],p=c[2],l=c[3]
return"".concat(d,":").concat(u,":").concat(p).concat(n).concat(l)}n.default=function(e,n){void 0===n&&(n="SRT")
var t={FILE_HEADER:"",MS_SEPERATOR:",",FORMAT_TEXT:function(e){return e},CHUNK_SEPARATOR:"".concat(a).concat(a)}
switch(n.toLowerCase()){case"webvtt":t=r(r({},t),{FILE_HEADER:"WEBVTT".concat(a).concat(a),MS_SEPERATOR:"."})
break
case"srt":break
default:throw new Error("Unrecognized format: ".concat(n))}return t.FILE_HEADER+e.map((function(e){return"".concat(e.sequenceNumber,"\n").concat((n=e.time,r=t.MS_SEPERATOR,"".concat(o(n.start,r)," --\x3e ").concat(o(n.end,r))),"\n").concat(t.FORMAT_TEXT(e.text))
var n,r})).join(t.CHUNK_SEPARATOR)}},734:(e,n)=>{var t
Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.PARSER_ERROR_MISSING_TEXT="parserErrorMissingText",e.PARSER_ERROR_MISSING_SEQUENCE_NUMBER="parserErrorMissingSequenceNumber",e.PARSER_ERROR_INVALID_SEQUENCE_NUMBER="parserErrorInvalidSequenceNumber",e.PARSER_ERROR_MISSING_TIME_SPAN="parserErrorMissingTimeSpan",e.PARSER_ERROR_INVALID_TIME_SPAN="parserErrorInvalidTimeSpan",e.PARSER_ERROR_INVALID_TIME_STAMP="parserErrorInvalidTimeStamp",e.VALIDATOR_ERROR_START_TIME="validatorErrorStartTime",e.VALIDATOR_ERROR_END_TIME="validatorErrorEndTime",e.VALIDATOR_ERROR_SEQUENCE_NUMBER_START="validatorErrorSequenceNumberStart",e.VALIDATOR_ERROR_SEQUENCE_NUMBER_INCREMENT="validatorErrorSequenceNumberIncrement"}(t||(t={})),n.default=t},572:function(e,n){var t,r=this&&this.__extends||(t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},t(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null")
function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)})
Object.defineProperty(n,"__esModule",{value:!0})
var i=function(e){function n(n,t,r){var i=e.call(this,n)||this
return i.lineNumber=t,i.errorCode=r,i.lineNumber=t+1,i.errorCode=r,i}return r(n,e),n}(Error)
n.default=i},969:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0})
var t=function(){function e(e){this.parsedJSON=e,this.result=[],this.parsedJSON=e}return e.prototype.addToResult=function(e){this.result.push(e)},e}()
n.default=t},513:function(e,n,t){var r,i=this&&this.__extends||(r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},r(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null")
function t(){this.constructor=e}r(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)})
Object.defineProperty(n,"__esModule",{value:!0})
var a=t(969),o=t(734),s=function(e){function n(n){var t=e.call(this,n)||this
return t.parsedJSON=n,t.validator="CaptionTimeSpanValidator",t}return i(n,e),n.prototype.validate=function(){var e=this
if(!this.parsedJSON.length)return this.result
var n=0
return this.parsedJSON.map((function(n){var t=n.time,r=t.start,i=t.end,a=n.lineNumbers
return r>=i&&e.addToResult({errorCode:o.default.VALIDATOR_ERROR_START_TIME,message:"start time should be less than end time",lineNumber:a.timeSpan+1,validator:e.validator}),{start:r,end:i,lineNumbers:a}})).forEach((function(t,r){var i=t.start,a=t.end,s=t.lineNumbers
0!==r?(n>i&&e.addToResult({errorCode:o.default.VALIDATOR_ERROR_END_TIME,message:"start time should be less than previous end time",lineNumber:s.timeSpan+1,validator:e.validator}),n=a):n=a})),this.result},n}(a.default)
n.default=s},531:function(e,n,t){var r,i=this&&this.__extends||(r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},r(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null")
function t(){this.constructor=e}r(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)})
Object.defineProperty(n,"__esModule",{value:!0})
var a=t(969),o=t(734),s=function(e){function n(n){var t=e.call(this,n)||this
return t.parsedJSON=n,t.validator="LineNumberValidator",t}return i(n,e),n.prototype.validate=function(){if(!this.parsedJSON.length)return this.result
1!==this.parsedJSON[0].sequenceNumber&&this.addToResult({errorCode:o.default.VALIDATOR_ERROR_SEQUENCE_NUMBER_START,message:"number of sequence need to start with 1",lineNumber:this.parsedJSON[0].lineNumbers.chunkStart+1,validator:this.validator})
for(var e=1;e<this.parsedJSON.length;e+=1){var n=this.parsedJSON[e],t=n.sequenceNumber,r=n.lineNumbers
t!==e+1&&this.addToResult({errorCode:o.default.VALIDATOR_ERROR_SEQUENCE_NUMBER_INCREMENT,message:"number of sequence need to increment by 1",lineNumber:r.chunkStart+1,validator:this.validator})}return this.result},n}(a.default)
n.default=s}},n={}
function t(r){var i=n[r]
if(void 0!==i)return i.exports
var a=n[r]={exports:{}}
return e[r].call(a.exports,a,a.exports,t),a.exports}var r={}
return(()=>{var e=r
Object.defineProperty(e,"__esModule",{value:!0}),e.parser=e.validator=void 0
var n=t(544),i=t(513),a=t(531)
function o(e){var t,r,o,s=[]
try{t=n.default.parse(e)}catch(e){s.push(e)}return s.length?s:(s.push.apply(s,(r=[a.default,i.default],o=t,r.map((function(e){return new e(o).validate()})).reduce((function(e,n){return e.push.apply(e,n),e}),[]))),s.sort((function(e,n){return e.lineNumber-n.lineNumber})))}e.validator=o,e.parser=n.default,e.default=o})(),r})()},9705:e=>{function n(){}n.prototype={on:function(e,n,t){var r=this.e||(this.e={})
return(r[e]||(r[e]=[])).push({fn:n,ctx:t}),this},once:function(e,n,t){var r=this
function i(){r.off(e,i),n.apply(t,arguments)}return i._=n,this.on(e,i,t)},emit:function(e){for(var n=[].slice.call(arguments,1),t=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=t.length;r<i;r++)t[r].fn.apply(t[r].ctx,n)
return this},off:function(e,n){var t=this.e||(this.e={}),r=t[e],i=[]
if(r&&n)for(var a=0,o=r.length;a<o;a++)r[a].fn!==n&&r[a].fn._!==n&&i.push(r[a])
return i.length?t[e]=i:delete t[e],this}},e.exports=n},5365:(e,n,t)=>{"use strict"
t.r(n),t.d(n,{add:()=>p,getSize:()=>m,removeAll:()=>f,runAll:()=>l})
var r=t(8612),i=t.n(r)
const a={add:function(e){if("function"==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);else{if("function"!=typeof window.addEventListener)return
window.addEventListener("beforeunload",(function(){e()}),!0),window.addEventListener("unload",(function(){e()}),!0)}}}
var o=t(9707),s=t.n(o),c=i()?s():a,d=new Set,u=!1
function p(e){if(u||(u=!0,c.add(l)),"function"!=typeof e)throw new Error("Listener is no function")
return d.add(e),{remove:function(){return d.delete(e)},run:function(){return d.delete(e),e()}}}function l(){var e=[]
return d.forEach((function(n){e.push(n()),d.delete(n)})),Promise.all(e)}function f(){d.clear()}function m(){return d.size}}}])

//# sourceMappingURL=chunk.692.d3c7a9e73835544ab4cc.map